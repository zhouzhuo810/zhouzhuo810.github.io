<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zhouzhuo810</title>
  
  <subtitle>活到老，学到老。</subtitle>
  <link href="http://zhouzhuo810.github.io/atom.xml" rel="self"/>
  
  <link href="http://zhouzhuo810.github.io/"/>
  <updated>2024-06-15T07:29:37.791Z</updated>
  <id>http://zhouzhuo810.github.io/</id>
  
  <author>
    <name>zhouzhuo810</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux-服务器SSH连接和文件管理</title>
    <link href="http://zhouzhuo810.github.io/2024/06/15/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8SSH%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/"/>
    <id>http://zhouzhuo810.github.io/2024/06/15/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8SSH%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</id>
    <published>2024-06-15T07:24:16.000Z</published>
    <updated>2024-06-15T07:29:37.791Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>重装系统老是忘记常用工具的下载地址，干脆记录一下</p></blockquote><h2 id="一、Windows-系统"><a href="#一、Windows-系统" class="headerlink" title="一、Windows 系统"></a>一、Windows 系统</h2><h2 id="1-SSH登录"><a href="#1-SSH登录" class="headerlink" title="1. SSH登录"></a>1. SSH登录</h2><p>下载<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">putty</a></p><h2 id="2-文件管理"><a href="#2-文件管理" class="headerlink" title="2. 文件管理"></a>2. 文件管理</h2><p>下载<a href="https://filezilla-project.org/download.php?type=client">filezilla</a></p><h2 id="二、MacOS"><a href="#二、MacOS" class="headerlink" title="二、MacOS"></a>二、MacOS</h2><h2 id="1-SSH登录-1"><a href="#1-SSH登录-1" class="headerlink" title="1. SSH登录"></a>1. SSH登录</h2><p>直接使用终端-Shell-新建远程连接。</p><h2 id="2-文件管理-1"><a href="#2-文件管理-1" class="headerlink" title="2. 文件管理"></a>2. 文件管理</h2><p>可以去APP Store下载一个<code>ForkLift</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;重装系统老是忘记常用工具的下载地址，干脆记录一下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;一、Windows-系统&quot;&gt;&lt;a href=&quot;#一、Windows-系统&quot; class=&quot;headerlink&quot; title=&quot;一、Windows</summary>
      
    
    
    
    <category term="Linux" scheme="http://zhouzhuo810.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="http://zhouzhuo810.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>InteliJ IDEA 破解版安装教程</title>
    <link href="http://zhouzhuo810.github.io/2024/06/13/InteliJ-IDEA-%E7%A0%B4%E8%A7%A3%E7%89%88%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <id>http://zhouzhuo810.github.io/2024/06/13/InteliJ-IDEA-%E7%A0%B4%E8%A7%A3%E7%89%88%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</id>
    <published>2024-06-13T12:10:00.000Z</published>
    <updated>2024-06-13T12:45:14.212Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><ol><li>打开网址</li></ol><p><a href="https://3.jetbra.in/">https://3.jetbra.in/</a><br>或<br><a href="https://jetbra.in/5d84466e31722979266057664941a71893322460">https://jetbra.in/5d84466e31722979266057664941a71893322460</a></p><p>随意点击一个绿色的<code>Hostname</code>，打不开或打开报错就换一个。</p><ol start="2"><li>下载<code>jetbra.zip</code></li></ol><p>在打开的网站里，下载<code>jetbra.zip</code>文件。</p><p>同时，找到<code>IntelliJ IDEA</code>的激活码上方的版本号，比如：“2023.2.x”</p><p>激活码先别关闭，等下要用。</p><span id="more"></span><ol start="3"><li>下载Intelij IDEA安装包</li></ol><p>去官网下载上述版本号对应的安装包。</p><p><a href="https://www.jetbrains.com.cn/idea/download/other.html">https://www.jetbrains.com.cn/idea/download/other.html</a></p><p>下载 上述版本号对对应的 IntelliJ IDEA Ultimate 版本安装包，如 <code>2023.2.7 - Windows x64 (exe)</code>。</p><h2 id="二、安装和破解"><a href="#二、安装和破解" class="headerlink" title="二、安装和破解"></a>二、安装和破解</h2><ol><li><p>安装<code>ideaIU-2023.2.x.exe</code></p></li><li><p>解压<code>jetbra.zip</code></p></li><li><p>将jebra文件夹拷贝到<code>&#123;path\to&#125;\Intejil IDEA 2023.2\bin</code>目录</p></li><li><p>在<code>idea64.exe.vmoptions</code>文件末尾追加</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-javaagent:H:\Intejil IDEA 2023.2\bin\jetbra\ja-netfilter.jar=jetbrains</span><br><span class="line"></span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED</span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED</span><br></pre></td></tr></table></figure><p>其中路径<code>H:\Intejil IDEA 2023.2</code>改成自己的安装路径。</p><ol start="5"><li>打开idea，复制激活码，激活。</li></ol><p>使用上面那个激活的激活码即可。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;一、准备工作&quot;&gt;&lt;a href=&quot;#一、准备工作&quot; class=&quot;headerlink&quot; title=&quot;一、准备工作&quot;&gt;&lt;/a&gt;一、准备工作&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;打开网址&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://3.jetbra.in/&quot;&gt;https://3.jetbra.in/&lt;/a&gt;&lt;br&gt;或&lt;br&gt;&lt;a href=&quot;https://jetbra.in/5d84466e31722979266057664941a71893322460&quot;&gt;https://jetbra.in/5d84466e31722979266057664941a71893322460&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;随意点击一个绿色的&lt;code&gt;Hostname&lt;/code&gt;，打不开或打开报错就换一个。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;下载&lt;code&gt;jetbra.zip&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在打开的网站里，下载&lt;code&gt;jetbra.zip&lt;/code&gt;文件。&lt;/p&gt;
&lt;p&gt;同时，找到&lt;code&gt;IntelliJ IDEA&lt;/code&gt;的激活码上方的版本号，比如：“2023.2.x”&lt;/p&gt;
&lt;p&gt;激活码先别关闭，等下要用。&lt;/p&gt;</summary>
    
    
    
    <category term="InteliJ IDEA" scheme="http://zhouzhuo810.github.io/categories/InteliJ-IDEA/"/>
    
    
    <category term="InteliJ IDEA" scheme="http://zhouzhuo810.github.io/tags/InteliJ-IDEA/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-druid连接报错问题</title>
    <link href="http://zhouzhuo810.github.io/2024/06/12/MySQL-druid%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/"/>
    <id>http://zhouzhuo810.github.io/2024/06/12/MySQL-druid%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/</id>
    <published>2024-06-12T00:38:21.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<h2 id="报错问题"><a href="#报错问题" class="headerlink" title="报错问题"></a>报错问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8, errorCode 0, state 08S01</span><br></pre></td></tr></table></figure><h2 id="SpringBoot配置"><a href="#SpringBoot配置" class="headerlink" title="SpringBoot配置"></a>SpringBoot配置</h2><ul><li>application.properties</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=xxx</span><br><span class="line">server.port=8080</span><br><span class="line">spring.datasource.url=jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">spring.datasource.username=xxx</span><br><span class="line">spring.datasource.password=xxx</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务端MySQL未启用SSL。</span><br></pre></td></tr></table></figure><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>在url末尾追加<code>useSSL=false</code>即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;报错问题&quot;&gt;&lt;a href=&quot;#报错问题&quot; class=&quot;headerlink&quot; title=&quot;报错问题&quot;&gt;&lt;/a&gt;报错问题&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;amp;characterEncoding=UTF-8, errorCode 0, state 08S01&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;SpringBoot配置&quot;&gt;&lt;a href=&quot;#SpringBoot配置&quot; class=&quot;headerlink&quot; title=&quot;SpringBoot配置&quot;&gt;&lt;/a&gt;SpringBoot配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;application.properties&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;spring.application.name=xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server.port=8080&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spring.datasource.url=jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spring.datasource.username=xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spring.datasource.password=xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spring.datasource.type=com.alibaba.druid.pool.DruidDataSource&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="JavaEE" scheme="http://zhouzhuo810.github.io/categories/JavaEE/"/>
    
    <category term="MySQL" scheme="http://zhouzhuo810.github.io/categories/MySQL/"/>
    
    
    <category term="MySQL - JavaEE" scheme="http://zhouzhuo810.github.io/tags/MySQL-JavaEE/"/>
    
  </entry>
  
  <entry>
    <title>Git常见问题-子目录是submodule无法add问题</title>
    <link href="http://zhouzhuo810.github.io/2024/05/31/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-%E5%AD%90%E7%9B%AE%E5%BD%95%E6%98%AFsubmodule%E6%97%A0%E6%B3%95add%E9%97%AE%E9%A2%98/"/>
    <id>http://zhouzhuo810.github.io/2024/05/31/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-%E5%AD%90%E7%9B%AE%E5%BD%95%E6%98%AFsubmodule%E6%97%A0%E6%B3%95add%E9%97%AE%E9%A2%98/</id>
    <published>2024-05-31T07:52:44.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>目录A里面有个目录B，目录B也是一个仓库。</p><p>现在目录A也有一个仓库，想将目录B的仓库取消，直接加入到目录A的仓库里。</p><p>直接<code>git add 目录B</code>，是没有任何反应的。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd 目录B</span><br><span class="line">rm -rf .git</span><br><span class="line"></span><br><span class="line">cd 目录A</span><br><span class="line">git rm --cached 目录B</span><br><span class="line">git add 目录B</span><br></pre></td></tr></table></figure><h1 id="知识扩展"><a href="#知识扩展" class="headerlink" title="知识扩展"></a>知识扩展</h1><h2 id="Git查看已被排除的文件及目录"><a href="#Git查看已被排除的文件及目录" class="headerlink" title="Git查看已被排除的文件及目录"></a>Git查看已被排除的文件及目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status --ignored</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h1&gt;&lt;p&gt;目录A里面有个目录B，目录B也是一个仓库。&lt;/p&gt;
&lt;p&gt;现在目录A也有一个仓库，想将目录B的仓库取消，直接加入到目录A的仓库里。&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Git常见问题" scheme="http://zhouzhuo810.github.io/categories/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    
    
    <category term="Git" scheme="http://zhouzhuo810.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Android疑难杂症-X5内核播放视频全屏问题</title>
    <link href="http://zhouzhuo810.github.io/2018/12/24/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-X5%E5%86%85%E6%A0%B8%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E9%97%AE%E9%A2%98/"/>
    <id>http://zhouzhuo810.github.io/2018/12/24/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-X5%E5%86%85%E6%A0%B8%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E9%97%AE%E9%A2%98/</id>
    <published>2018-12-24T05:03:00.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="直接上代码"><a href="#直接上代码" class="headerlink" title="直接上代码"></a>直接上代码</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.ui.act.community.WebActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">&quot;keyboardHidden|keyboard|layoutDirection|screenLayout|screenSize|touchscreen|orientation&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustNothing|stateAlwaysHidden&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;sensor&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> View myVideoView;</span><br><span class="line"><span class="keyword">private</span> <span class="type">WebChromeClient</span> <span class="variable">mWebChromeClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebChromeClient</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onProgressChanged</span><span class="params">(WebView view, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        mProgressBar.setProgress(i);</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">100</span>) &#123;</span><br><span class="line">            mProgressBar.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mProgressBar.getVisibility() != View.VISIBLE) &#123;</span><br><span class="line">            mProgressBar.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShowCustomView</span><span class="params">(View view, IX5WebChromeClient.CustomViewCallback customViewCallback)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onShowCustomView(view, customViewCallback);</span><br><span class="line">        <span class="type">ViewGroup</span> <span class="variable">viewGroup</span> <span class="operator">=</span> (ViewGroup) mWebView.getParent();</span><br><span class="line">        viewGroup.removeView(mWebView);</span><br><span class="line">        viewGroup.setBackgroundColor(SimpleUtil.getColor(R.color.colorBlack));</span><br><span class="line">        viewGroup.addView(view);</span><br><span class="line">        myVideoView = view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onHideCustomView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onHideCustomView();</span><br><span class="line">        <span class="keyword">if</span> (myVideoView == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ViewGroup</span> <span class="variable">viewGroup</span> <span class="operator">=</span> (ViewGroup) myVideoView.getParent();</span><br><span class="line">        viewGroup.removeView(myVideoView);</span><br><span class="line">        viewGroup.addView(mWebView);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) &#123;</span><br><span class="line">            getWindow().addFlags(</span><br><span class="line">                WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);</span><br><span class="line">            mTitleBar.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) &#123;</span><br><span class="line">            getWindow().clearFlags(</span><br><span class="line">                WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);</span><br><span class="line">            mTitleBar.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;直接上代码&quot;&gt;&lt;a href=&quot;#直接上代码&quot; class=&quot;headerlink&quot; title=&quot;直接上代码&quot;&gt;&lt;/a&gt;直接上代码&lt;/h1&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;activity&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;.ui.act.community.WebActivity&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;android:configChanges&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;keyboardHidden|keyboard|layoutDirection|screenLayout|screenSize|touchscreen|orientation&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;android:launchMode&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;singleTop&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;android:windowSoftInputMode&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;adjustNothing|stateAlwaysHidden&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;android:screenOrientation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;sensor&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android疑难杂症" scheme="http://zhouzhuo810.github.io/categories/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>AndroidException-常见Exception汇总</title>
    <link href="http://zhouzhuo810.github.io/2018/11/16/AndroidException-%E5%B8%B8%E8%A7%81Exception%E6%B1%87%E6%80%BB/"/>
    <id>http://zhouzhuo810.github.io/2018/11/16/AndroidException-%E5%B8%B8%E8%A7%81Exception%E6%B1%87%E6%80%BB/</id>
    <published>2018-11-16T14:22:22.000Z</published>
    <updated>2024-06-13T11:58:36.750Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26"><a href="#Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26" class="headerlink" title="Invoke-customs are only supported starting with android 0 –min-api 26"></a>Invoke-customs are only supported starting with android 0 –min-api 26</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//build.gradle</span><br><span class="line">android &#123;</span><br><span class="line">//... ...</span><br><span class="line">    android &#123;</span><br><span class="line">        compileOptions &#123;</span><br><span class="line">            sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">            targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="64位CPU的手机无法加载腾讯X5内核"><a href="#64位CPU的手机无法加载腾讯X5内核" class="headerlink" title="64位CPU的手机无法加载腾讯X5内核"></a>64位CPU的手机无法加载腾讯X5内核</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//build.gradle</span><br><span class="line">android &#123;</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        // 指定支持的so架构</span><br><span class="line">        ndk &#123;</span><br><span class="line">            //根据需要 自行选择添加的对应cpu类型的.so库。</span><br><span class="line">            abiFilters &#x27;armeabi&#x27;, &#x27;armeabi-v7a&#x27;, &#x27;arm64-v8a&#x27;, &quot;x86&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//复制armeabi中的.so文件到armeabi-v7a、arm64-v8a、x86对应的文件夹</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26&quot;&gt;&lt;a href=&quot;#Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26&quot; class=&quot;headerlink&quot; title=&quot;Invoke-customs are only supported starting with android 0 –min-api 26&quot;&gt;&lt;/a&gt;Invoke-customs are only supported starting with android 0 –min-api 26&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//build.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	//... ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        compileOptions &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sourceCompatibility JavaVersion.VERSION_1_8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            targetCompatibility JavaVersion.VERSION_1_8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android常见Exception" scheme="http://zhouzhuo810.github.io/categories/Android%E5%B8%B8%E8%A7%81Exception/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>RxJava2-监听EditText变化并查询数据库并更新UI</title>
    <link href="http://zhouzhuo810.github.io/2018/11/16/RxJava2-%E7%9B%91%E5%90%ACEditText%E5%8F%98%E5%8C%96%E5%B9%B6%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E6%9B%B4%E6%96%B0UI/"/>
    <id>http://zhouzhuo810.github.io/2018/11/16/RxJava2-%E7%9B%91%E5%90%ACEditText%E5%8F%98%E5%8C%96%E5%B9%B6%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E6%9B%B4%E6%96%B0UI/</id>
    <published>2018-11-16T02:57:15.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Disposable</span> <span class="variable">subscription</span> <span class="operator">=</span> RxTextView.textChangeEvents(etSearch)</span><br><span class="line">                    .debounce(<span class="number">200</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">                    .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                    .toFlowable(BackpressureStrategy.BUFFER)</span><br><span class="line">                    .switchMap(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;TextViewTextChangeEvent, Publisher&lt;RealmResults&lt;Note&gt;&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> Publisher&lt;RealmResults&lt;Note&gt;&gt; <span class="title function_">apply</span><span class="params">(TextViewTextChangeEvent event)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">etContent</span> <span class="operator">=</span> event.getText().toString();</span><br><span class="line">                            <span class="keyword">if</span> (etContent.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                mLv.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                mLv.setVisibility(View.GONE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (etContent.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                mLv.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                mLv.setVisibility(View.GONE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            finalMAdapter.setSearchStr(etContent);</span><br><span class="line">                            <span class="keyword">if</span> (dirId == MyApplication.DEFAULT_DIR_ID) &#123;</span><br><span class="line">                                <span class="keyword">return</span> Realm.getDefaultInstance().where(Note.class)</span><br><span class="line">                                    .contains(<span class="string">&quot;title&quot;</span>, etContent)</span><br><span class="line">                                    .sort(<span class="string">&quot;timeMills&quot;</span>, Sort.DESCENDING).findAllAsync().asFlowable();</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">return</span> Realm.getDefaultInstance().where(Note.class)</span><br><span class="line">                                    .equalTo(<span class="string">&quot;dirId&quot;</span>, dirId)</span><br><span class="line">                                    .contains(<span class="string">&quot;title&quot;</span>, etContent)</span><br><span class="line">                                    .sort(<span class="string">&quot;timeMills&quot;</span>, Sort.DESCENDING).findAllAsync().asFlowable();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .filter(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;RealmResults&lt;Note&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(RealmResults&lt;Note&gt; notes)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            <span class="keyword">return</span> notes.isLoaded();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .subscribe(<span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;RealmResults&lt;Note&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(RealmResults&lt;Note&gt; notes)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            mNotes = notes;</span><br><span class="line">                            <span class="keyword">if</span> (notes != <span class="literal">null</span> &amp;&amp; notes.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                llNoResult.setVisibility(View.GONE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                llNoResult.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            finalMAdapter.updateAll(mNotes);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;Throwable&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Throwable throwable)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            throwable.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    <category term="RxJava" scheme="http://zhouzhuo810.github.io/categories/RxJava/"/>
    
    
    <category term="RxJava" scheme="http://zhouzhuo810.github.io/tags/RxJava/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio技巧-关闭全局代理</title>
    <link href="http://zhouzhuo810.github.io/2018/11/08/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%85%B3%E9%97%AD%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/"/>
    <id>http://zhouzhuo810.github.io/2018/11/08/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%85%B3%E9%97%AD%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/</id>
    <published>2018-11-08T01:30:14.000Z</published>
    <updated>2024-06-13T11:58:36.750Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p><img src="/images/proxy.png"></p><span id="more"></span><h1 id="根源"><a href="#根源" class="headerlink" title="根源"></a>根源</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.gradle/gradle.properties中配置了代理。</span><br></pre></td></tr></table></figure><h1 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h1><p>打开Teminal</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">cd .gradle</span><br><span class="line">ls</span><br><span class="line">vi gradle.properties</span><br><span class="line">i</span><br><span class="line">//移动光标删除对应代理配置</span><br><span class="line">按ESC</span><br><span class="line">:wq</span><br></pre></td></tr></table></figure><p>全局代理就关闭了。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/proxy.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Android开发工具" scheme="http://zhouzhuo810.github.io/categories/Android%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Linux-编辑器vi的使用</title>
    <link href="http://zhouzhuo810.github.io/2018/11/08/Linux-%E7%BC%96%E8%BE%91%E5%99%A8vi%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://zhouzhuo810.github.io/2018/11/08/Linux-%E7%BC%96%E8%BE%91%E5%99%A8vi%E7%9A%84%E4%BD%BF%E7%94%A8/</id>
    <published>2018-11-07T22:40:07.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="进入vi编辑器"><a href="#进入vi编辑器" class="headerlink" title="进入vi编辑器"></a>进入vi编辑器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi filename</span><br></pre></td></tr></table></figure><h1 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h1><p>按 <code>i</code></p><h1 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h1><p>按<code>ESC</code>键 跳到命令模式，然后：<br><code>:w</code> 保存文件但不退出vi<br><code>:w</code> file 将修改另外保存到file中，不退出vi<br><code>:w!</code> 强制保存，不推出vi<br><code>:wq</code> 保存文件并退出vi<br><code>:wq!</code> 强制保存文件，并退出vi<br><code>q:</code> 不保存文件，退出vi<br><code>:q!</code> 不保存文件，强制退出vi<br><code>:e!</code> 放弃所有修改，从上次保存文件开始再编辑</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;进入vi编辑器&quot;&gt;&lt;a href=&quot;#进入vi编辑器&quot; class=&quot;headerlink&quot; title=&quot;进入vi编辑器&quot;&gt;&lt;/a&gt;进入vi编辑器&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    <category term="Linux" scheme="http://zhouzhuo810.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="http://zhouzhuo810.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>小常识-移动硬盘文件或目录损坏且无法读取</title>
    <link href="http://zhouzhuo810.github.io/2018/11/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96/"/>
    <id>http://zhouzhuo810.github.io/2018/11/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96/</id>
    <published>2018-11-04T09:24:45.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>移动硬盘打不开，提示文件或目录损坏且无法读取</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>在运行中输入cmd，打开命令提示符窗口<br>然后输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkdsk I: /f</span><br></pre></td></tr></table></figure><p>(<code>I</code>是我在用的移动硬盘的盘符)</p><p>等待修复结束即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h1&gt;&lt;p&gt;移动硬盘打不开，提示文件或目录损坏且无法读取&lt;/p&gt;
&lt;h1 id=&quot;解决方案&quot;&gt;&lt;a href=&quot;#解决方案&quot; class</summary>
      
    
    
    
    <category term="常识" scheme="http://zhouzhuo810.github.io/categories/%E5%B8%B8%E8%AF%86/"/>
    
    
    <category term="常识" scheme="http://zhouzhuo810.github.io/tags/%E5%B8%B8%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>Android常用代码-颜色透明度百分比和十六进制对照表</title>
    <link href="http://zhouzhuo810.github.io/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%A2%9C%E8%89%B2%E9%80%8F%E6%98%8E%E5%BA%A6%E7%99%BE%E5%88%86%E6%AF%94%E5%92%8C%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E5%AF%B9%E7%85%A7%E8%A1%A8/"/>
    <id>http://zhouzhuo810.github.io/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%A2%9C%E8%89%B2%E9%80%8F%E6%98%8E%E5%BA%A6%E7%99%BE%E5%88%86%E6%AF%94%E5%92%8C%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E5%AF%B9%E7%85%A7%E8%A1%A8/</id>
    <published>2018-10-31T07:15:30.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="对照表"><a href="#对照表" class="headerlink" title="对照表"></a>对照表</h1><p><img src="/images/alpha_table.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;对照表&quot;&gt;&lt;a href=&quot;#对照表&quot; class=&quot;headerlink&quot; title=&quot;对照表&quot;&gt;&lt;/a&gt;对照表&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/alpha_table.jpg&quot;&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Android常用代码" scheme="http://zhouzhuo810.github.io/categories/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android常用代码-读取联系人</title>
    <link href="http://zhouzhuo810.github.io/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%AF%BB%E5%8F%96%E8%81%94%E7%B3%BB%E4%BA%BA/"/>
    <id>http://zhouzhuo810.github.io/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%AF%BB%E5%8F%96%E8%81%94%E7%B3%BB%E4%BA%BA/</id>
    <published>2018-10-31T06:35:15.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="AndroidManifest-xml添加权限"><a href="#AndroidManifest-xml添加权限" class="headerlink" title="AndroidManifest.xml添加权限"></a>AndroidManifest.xml添加权限</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_CONTACTS&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="申请动态权限，并读取数据"><a href="#申请动态权限，并读取数据" class="headerlink" title="申请动态权限，并读取数据"></a>申请动态权限，并读取数据</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadAddressBook</span><span class="params">()</span> &#123;</span><br><span class="line">    AndPermission.with(<span class="built_in">this</span>)</span><br><span class="line">        .runtime()</span><br><span class="line">        .permission(Permission.READ_CONTACTS)</span><br><span class="line">        .rationale((context, data, executor) -&gt; showConfirmDialog(getString(R.string.get_contacts), getString(R.string.contact_rationale), <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">TwoBtnTextDialog</span>.OnTwoBtnTextClick() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLeftClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                executor.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRightClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                executor.execute();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">        .onDenied(data -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (AndPermission.hasAlwaysDeniedPermission(AddressBookActivity.<span class="built_in">this</span>, data)) &#123;</span><br><span class="line">                <span class="comment">// 这里使用一个Dialog展示没有这些权限应用程序无法继续运行，询问用户是否去设置中授权。</span></span><br><span class="line">                <span class="keyword">final</span> <span class="type">Setting</span> <span class="variable">setting</span> <span class="operator">=</span> AndPermission.with(AddressBookActivity.<span class="built_in">this</span>).runtime().setting();</span><br><span class="line">                setting.onComeback(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (AndPermission.hasPermissions(AddressBookActivity.<span class="built_in">this</span>, Permission.READ_CONTACTS)) &#123;</span><br><span class="line">                        readContacts();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                showConfirmDialog(getString(R.string.permission_set),</span><br><span class="line">                    getString(R.string.set_read_phone_permission),</span><br><span class="line">                    <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">false</span>,</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">TwoBtnTextDialog</span>.OnTwoBtnTextClick() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLeftClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line">                        </span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRightClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                            setting.start();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .onGranted(data -&gt; readContacts())</span><br><span class="line">        .start();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取联系人</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readContacts</span><span class="params">()</span> &#123;</span><br><span class="line">    mBooks = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//cursor指针 query询问 contract协议 kinds种类</span></span><br><span class="line">        cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToNext()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">displayName</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));</span><br><span class="line">                <span class="type">String</span> <span class="variable">number</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));</span><br><span class="line">                <span class="keyword">if</span> (number != <span class="literal">null</span>) &#123;</span><br><span class="line">                    number = number.replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                mBooks.add(<span class="keyword">new</span> <span class="title class_">AddressBookEntity</span>(displayName, number));</span><br><span class="line">            &#125;</span><br><span class="line">            Log.e(<span class="string">&quot;TTT&quot;</span>, <span class="string">&quot;books=&quot;</span>+ mBooks.toString());</span><br><span class="line">            <span class="comment">//notify公布</span></span><br><span class="line">            mAdapter.setData(mBooks);</span><br><span class="line">            mSidebar.setShowString(CollectionUtil.listToString(mAdapter.getLetters()));</span><br><span class="line">            mSidebar.setTextSize(ScreenAdapterUtil.getInstance().getScaledValue(<span class="number">36</span>));</span><br><span class="line">            mLlNoData.setVisibility(CollectionUtil.isEmpty(mBooks) ? View.VISIBLE : View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span>) &#123;</span><br><span class="line">            cursor.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;AndroidManifest-xml添加权限&quot;&gt;&lt;a href=&quot;#AndroidManifest-xml添加权限&quot; class=&quot;headerlink&quot; title=&quot;AndroidManifest.xml添加权限&quot;&gt;&lt;/a&gt;AndroidManifest.xml添加权限&lt;/h1&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;uses-permission&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;android.permission.READ_CONTACTS&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android常用代码" scheme="http://zhouzhuo810.github.io/categories/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio技巧-部分库报错红色却能编译通过解决方案</title>
    <link href="http://zhouzhuo810.github.io/2018/10/29/AndroidStudio%E6%8A%80%E5%B7%A7-%E9%83%A8%E5%88%86%E5%BA%93%E6%8A%A5%E9%94%99%E7%BA%A2%E8%89%B2%E5%8D%B4%E8%83%BD%E7%BC%96%E8%AF%91%E9%80%9A%E8%BF%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://zhouzhuo810.github.io/2018/10/29/AndroidStudio%E6%8A%80%E5%B7%A7-%E9%83%A8%E5%88%86%E5%BA%93%E6%8A%A5%E9%94%99%E7%BA%A2%E8%89%B2%E5%8D%B4%E8%83%BD%E7%BC%96%E8%AF%91%E9%80%9A%E8%BF%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2018-10-29T01:30:14.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="方案1（推荐）"><a href="#方案1（推荐）" class="headerlink" title="方案1（推荐）"></a>方案1（推荐）</h1><ul><li>1.删除.gradle和.idea文件夹；</li><li>2.重启项目；</li></ul><h1 id="方案2"><a href="#方案2" class="headerlink" title="方案2"></a>方案2</h1><blockquote><p>File-&gt;Invalidate Caches&#x2F;Restart</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;方案1（推荐）&quot;&gt;&lt;a href=&quot;#方案1（推荐）&quot; class=&quot;headerlink&quot; title=&quot;方案1（推荐）&quot;&gt;&lt;/a&gt;方案1（推荐）&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1.删除.gradle和.idea文件夹；&lt;/li&gt;
&lt;li&gt;2.重启项目；&lt;/li&gt;
</summary>
      
    
    
    
    <category term="Android开发工具" scheme="http://zhouzhuo810.github.io/categories/Android%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android-8.0新特性-通知通道配置</title>
    <link href="http://zhouzhuo810.github.io/2018/10/26/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E9%80%9A%E7%9F%A5%E9%80%9A%E9%81%93%E9%85%8D%E7%BD%AE/"/>
    <id>http://zhouzhuo810.github.io/2018/10/26/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E9%80%9A%E7%9F%A5%E9%80%9A%E9%81%93%E9%85%8D%E7%BD%AE/</id>
    <published>2018-10-26T05:30:53.000Z</published>
    <updated>2024-06-13T11:58:36.750Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Android 8.0开始发送通知需要配置渠道id；</p></blockquote><h1 id="Application-onCreate-中配置"><a href="#Application-onCreate-中配置" class="headerlink" title="Application#onCreate()中配置"></a>Application#onCreate()中配置</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//8.0</span></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">    <span class="type">NotificationManager</span> <span class="variable">mNotificationManager</span> <span class="operator">=</span> (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">    <span class="comment">// 通知渠道的id</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;你的渠道id&quot;</span>;</span><br><span class="line">    <span class="comment">// 用户可以看到的通知渠道的名字.</span></span><br><span class="line">    <span class="type">CharSequence</span> <span class="variable">name</span> <span class="operator">=</span> getString(R.string.app_name);</span><br><span class="line">    <span class="comment">// 用户可以看到的通知渠道的描述</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> getString(R.string.app_push_message_hint);</span><br><span class="line">    <span class="type">int</span> <span class="variable">importance</span> <span class="operator">=</span> NotificationManager.IMPORTANCE_HIGH;</span><br><span class="line">    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, importance);</span><br><span class="line">    mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);</span><br><span class="line">    <span class="comment">// 配置通知渠道的属性</span></span><br><span class="line">    mChannel.setDescription(description);</span><br><span class="line">    <span class="comment">// 设置通知出现时的闪灯（如果 android 设备支持的话）</span></span><br><span class="line">    mChannel.enableLights(<span class="literal">true</span>);</span><br><span class="line">    mChannel.setLightColor(Color.RED);</span><br><span class="line">    mChannel.setSound(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_zz_four), <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// 设置通知出现时的震动（如果 android 设备支持的话）</span></span><br><span class="line">    mChannel.enableVibration(<span class="literal">true</span>);</span><br><span class="line">    mChannel.setVibrationPattern(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;);</span><br><span class="line">    <span class="comment">//最后在notificationmanager中创建该通知渠道</span></span><br><span class="line">    <span class="keyword">if</span> (mNotificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">        mNotificationManager.createNotificationChannel(mChannel);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="发送通知"><a href="#发送通知" class="headerlink" title="发送通知"></a>发送通知</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送通知则需要使用渠道id</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, MemoListActivity.class);</span><br><span class="line"><span class="type">PendingIntent</span> <span class="variable">pi</span> <span class="operator">=</span> PendingIntent.getActivity(context, <span class="number">0</span>, it, PendingIntent.FLAG_CANCEL_CURRENT);</span><br><span class="line"><span class="type">Resources</span> <span class="variable">res</span> <span class="operator">=</span> context.getResources();</span><br><span class="line"><span class="type">Bitmap</span> <span class="variable">bmp</span> <span class="operator">=</span> BitmapFactory.decodeResource(res, R.mipmap.ic_launcher);</span><br><span class="line"><span class="type">NotificationManager</span> <span class="variable">notificationManager</span> <span class="operator">=</span> (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line"><span class="comment">//定义notification</span></span><br><span class="line">NotificationCompat.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(context, <span class="string">&quot;你的渠道id&quot;</span>);</span><br><span class="line">builder.setContentTitle(<span class="string">&quot;备忘录通知&quot;</span>)</span><br><span class="line">    .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">    .setLargeIcon(bmp)</span><br><span class="line">    .setContentText(content + <span class="string">&quot;&quot;</span>)</span><br><span class="line">    .setTicker(<span class="string">&quot;备忘录通知&quot;</span>)</span><br><span class="line">    .setSound(Uri.parse(<span class="string">&quot;android.resource://您的包名/&quot;</span> + R.raw.hint))</span><br><span class="line">    .setVibrate(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;)</span><br><span class="line">    <span class="comment">// 单机 面板自动取消通知</span></span><br><span class="line">    .setAutoCancel(<span class="literal">true</span>)</span><br><span class="line">    .setContentIntent(pi);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (notificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">    notificationManager.notify(<span class="number">1</span>, builder.build());<span class="comment">// 通过管理器发送通知（通知的id，Notification对象）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Android 8.0开始发送通知需要配置渠道id；&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Application-onCreate-中配置&quot;&gt;&lt;a href=&quot;#Application-onCreate-中配置&quot; class=&quot;headerlink&quot; title=&quot;Application#onCreate()中配置&quot;&gt;&lt;/a&gt;Application#onCreate()中配置&lt;/h1&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//8.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (Build.VERSION.SDK_INT &amp;gt;= Build.VERSION_CODES.O) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;NotificationManager&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;mNotificationManager&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 通知渠道的id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;你的渠道id&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 用户可以看到的通知渠道的名字.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;CharSequence&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; getString(R.string.app_name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 用户可以看到的通知渠道的描述&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; getString(R.string.app_push_message_hint);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;importance&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; NotificationManager.IMPORTANCE_HIGH;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;NotificationChannel&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;mChannel&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;NotificationChannel&lt;/span&gt;(id, name, importance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 配置通知渠道的属性&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.setDescription(description);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 设置通知出现时的闪灯（如果 android 设备支持的话）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.enableLights(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.setLightColor(Color.RED);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.setSound(Uri.parse(&lt;span class=&quot;string&quot;&gt;&amp;quot;android.resource://&amp;quot;&lt;/span&gt; + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + &lt;span class=&quot;string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; + R.raw.hint_zz_four), &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 设置通知出现时的震动（如果 android 设备支持的话）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.enableVibration(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mChannel.setVibrationPattern(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;long&lt;/span&gt;[]&amp;#123;&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//最后在notificationmanager中创建该通知渠道&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (mNotificationManager != &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mNotificationManager.createNotificationChannel(mChannel);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android版本特性" scheme="http://zhouzhuo810.github.io/categories/Android%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android常用代码-阿里云推送</title>
    <link href="http://zhouzhuo810.github.io/2018/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A8%E9%80%81/"/>
    <id>http://zhouzhuo810.github.io/2018/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A8%E9%80%81/</id>
    <published>2018-10-18T06:35:15.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="集成依赖"><a href="#集成依赖" class="headerlink" title="集成依赖"></a>集成依赖</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation &#x27;com.aliyun.ams:alicloud-android-push:3.1.2&#x27;</span><br></pre></td></tr></table></figure><h1 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化云推送通道</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initCloudChannel</span><span class="params">(Context applicationContext)</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//8.0</span></span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">        <span class="type">NotificationManager</span> <span class="variable">mNotificationManager</span> <span class="operator">=</span> (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">        <span class="comment">// 通知渠道的id</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="comment">// 用户可以看到的通知渠道的名字.</span></span><br><span class="line">        <span class="type">CharSequence</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;测试渠道名&quot;</span>;</span><br><span class="line">        <span class="comment">// 用户可以看到的通知渠道的描述</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;测试渠道描述&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">importance</span> <span class="operator">=</span> NotificationManager.IMPORTANCE_HIGH;</span><br><span class="line">        <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, importance);</span><br><span class="line">        mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);</span><br><span class="line">        <span class="comment">// 配置通知渠道的属性</span></span><br><span class="line">        mChannel.setDescription(description);</span><br><span class="line">        <span class="comment">// 设置通知出现时的闪灯（如果 android 设备支持的话）</span></span><br><span class="line">        mChannel.enableLights(<span class="literal">true</span>);</span><br><span class="line">        mChannel.setLightColor(Color.RED);</span><br><span class="line">        mChannel.setSound(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_four), <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// 设置通知出现时的震动（如果 android 设备支持的话）</span></span><br><span class="line">        mChannel.enableVibration(<span class="literal">true</span>);</span><br><span class="line">        mChannel.setVibrationPattern(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span> , <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;);</span><br><span class="line">        <span class="comment">//最后在notificationmanager中创建该通知渠道</span></span><br><span class="line">        <span class="keyword">if</span> (mNotificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">            mNotificationManager.createNotificationChannel(mChannel);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    PushServiceFactory.init(applicationContext);</span><br><span class="line">    <span class="type">CloudPushService</span> <span class="variable">pushService</span> <span class="operator">=</span> PushServiceFactory.getCloudPushService();</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) &#123;</span><br><span class="line">        pushService.setNotificationSoundFilePath(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_four).toString());</span><br><span class="line">    &#125;</span><br><span class="line">    pushService.register(applicationContext, <span class="keyword">new</span> <span class="title class_">CommonCallback</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSuccess</span><span class="params">(String response)</span> &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;init cloudchannel success&quot;</span>);</span><br><span class="line">            pushService.turnOnPushChannel(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFailed</span><span class="params">(String errorCode, String errorMessage)</span> &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;init cloudchannel failed -- errorcode:&quot;</span> + errorCode + <span class="string">&quot; -- errorMessage:&quot;</span> + errorMessage);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.app.appkey&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">&quot;你的appKey&quot;</span>/&gt;</span> <span class="comment">&lt;!-- 请填写你自己的- appKey --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.app.appsecret&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">&quot;你的appSecret&quot;</span>/&gt;</span> <span class="comment">&lt;!-- 请填写你自己的appSecret --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 消息接收监听器 （用户可自主扩展） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.common.receiver.MyMessageReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span>&gt;</span> <span class="comment">&lt;!-- 为保证receiver安全，建议设置不可导出，如需对其他应用开放可通过android：permission进行限制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.push2.action.NOTIFICATION_OPENED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.push2.action.NOTIFICATION_REMOVED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.sdk.android.push.RECEIVE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMessageReceiver</span> <span class="keyword">extends</span> <span class="title class_">MessageReceiver</span> &#123;</span><br><span class="line">    <span class="comment">// 消息接收部分的LOG_TAG</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REC_TAG</span> <span class="operator">=</span> <span class="string">&quot;receiver&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNotification</span><span class="params">(Context context, String title, String summary, Map&lt;String, String&gt; extraMap)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 处理推送通知</span></span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;Receive notification, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap: &quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(Context context, CPushMessage cPushMessage)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onMessage, messageId: &quot;</span> + cPushMessage.getMessageId() + <span class="string">&quot;, title: &quot;</span> + cPushMessage.getTitle() + <span class="string">&quot;, content:&quot;</span> + cPushMessage.getContent());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNotificationOpened</span><span class="params">(Context context, String title, String summary, String extraMap)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationOpened, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationClickedWithNoAction</span><span class="params">(Context context, String title, String summary, String extraMap)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationClickedWithNoAction, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationReceivedInApp</span><span class="params">(Context context, String title, String summary, Map&lt;String, String&gt; extraMap, <span class="type">int</span> openType, String openActivity, String openUrl)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationReceivedInApp, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap + <span class="string">&quot;, openType:&quot;</span> + openType + <span class="string">&quot;, openActivity:&quot;</span> + openActivity + <span class="string">&quot;, openUrl:&quot;</span> + openUrl);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationRemoved</span><span class="params">(Context context, String messageId)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationRemoved&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;集成依赖&quot;&gt;&lt;a href=&quot;#集成依赖&quot; class=&quot;headerlink&quot; title=&quot;集成依赖&quot;&gt;&lt;/a&gt;集成依赖&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;implementation &amp;#x27;com.aliyun.ams:alicloud-android-push:3.1.2&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h1 id=&quot;核心代码&quot;&gt;&lt;a href=&quot;#核心代码&quot; class=&quot;headerlink&quot; title=&quot;核心代码&quot;&gt;&lt;/a&gt;核心代码&lt;/h1&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * 初始化云推送通道&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;initCloudChannel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context applicationContext)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//8.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (Build.VERSION.SDK_INT &amp;gt;= Build.VERSION_CODES.O) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;NotificationManager&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;mNotificationManager&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 通知渠道的id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 用户可以看到的通知渠道的名字.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;CharSequence&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;测试渠道名&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 用户可以看到的通知渠道的描述&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;测试渠道描述&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;importance&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; NotificationManager.IMPORTANCE_HIGH;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;NotificationChannel&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;mChannel&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;NotificationChannel&lt;/span&gt;(id, name, importance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 配置通知渠道的属性&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.setDescription(description);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 设置通知出现时的闪灯（如果 android 设备支持的话）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.enableLights(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.setLightColor(Color.RED);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.setSound(Uri.parse(&lt;span class=&quot;string&quot;&gt;&amp;quot;android.resource://&amp;quot;&lt;/span&gt; + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + &lt;span class=&quot;string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; + R.raw.hint_four), &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 设置通知出现时的震动（如果 android 设备支持的话）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.enableVibration(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mChannel.setVibrationPattern(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;long&lt;/span&gt;[]&amp;#123;&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt; , &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//最后在notificationmanager中创建该通知渠道&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (mNotificationManager != &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mNotificationManager.createNotificationChannel(mChannel);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PushServiceFactory.init(applicationContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;CloudPushService&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;pushService&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; PushServiceFactory.getCloudPushService();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (Build.VERSION.SDK_INT &amp;lt; Build.VERSION_CODES.O) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pushService.setNotificationSoundFilePath(Uri.parse(&lt;span class=&quot;string&quot;&gt;&amp;quot;android.resource://&amp;quot;&lt;/span&gt; + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + &lt;span class=&quot;string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; + R.raw.hint_four).toString());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pushService.register(applicationContext, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;CommonCallback&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String response)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Log.d(TAG, &lt;span class=&quot;string&quot;&gt;&amp;quot;init cloudchannel success&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pushService.turnOnPushChannel(&lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;onFailed&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String errorCode, String errorMessage)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Log.d(TAG, &lt;span class=&quot;string&quot;&gt;&amp;quot;init cloudchannel failed -- errorcode:&amp;quot;&lt;/span&gt; + errorCode + &lt;span class=&quot;string&quot;&gt;&amp;quot; -- errorMessage:&amp;quot;&lt;/span&gt; + errorMessage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android常用代码" scheme="http://zhouzhuo810.github.io/categories/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio技巧-发布library到jitpack并带注释</title>
    <link href="http://zhouzhuo810.github.io/2018/09/25/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%8F%91%E5%B8%83library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%B3%A8%E9%87%8A/"/>
    <id>http://zhouzhuo810.github.io/2018/09/25/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%8F%91%E5%B8%83library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%B3%A8%E9%87%8A/</id>
    <published>2018-09-25T01:30:14.000Z</published>
    <updated>2024-06-13T11:58:36.750Z</updated>
    
    <content type="html"><![CDATA[<h1 id="在project的build-gralde中添加classpath"><a href="#在project的build-gralde中添加classpath" class="headerlink" title="在project的build.gralde中添加classpath"></a>在project的build.gralde中添加classpath</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">classpath &#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&#x27;</span><br></pre></td></tr></table></figure><blockquote><p>注意：如果没有加google()，必须加上这个，并且buildscript和allprojects都得加上。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &#x27;com.android.tools.build:gradle:3.1.2&#x27;</span><br><span class="line">        classpath &#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&#x27;</span><br><span class="line">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        // in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="在library的build-gradle中添加"><a href="#在library的build-gradle中添加" class="headerlink" title="在library的build.gradle中添加"></a>在library的build.gradle中添加</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#x27;com.github.dcendents.android-maven&#x27;</span><br><span class="line">  </span><br><span class="line">//&#123;github用户名&#125;改为自己github的用户名</span><br><span class="line">group=&#x27;com.github.&#123;github用户名&#125;&#x27;</span><br><span class="line">  </span><br><span class="line">//...</span><br><span class="line">  </span><br><span class="line">//添加下面这些才会有文档注释。</span><br><span class="line">  </span><br><span class="line">// build a jar with source files</span><br><span class="line">task sourcesJar(type: Jar) &#123;</span><br><span class="line">    from android.sourceSets.main.java.srcDirs</span><br><span class="line">    classifier = &#x27;sources&#x27;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">task javadoc(type: Javadoc) &#123;</span><br><span class="line">    failOnError  false</span><br><span class="line">    source = android.sourceSets.main.java.sourceFiles</span><br><span class="line">    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))</span><br><span class="line">    classpath += configurations.compile</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">// build a jar with javadoc</span><br><span class="line">task javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class="line">    classifier = &#x27;javadoc&#x27;</span><br><span class="line">    from javadoc.destinationDir</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives sourcesJar</span><br><span class="line">    archives javadocJar</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="提交代码到github"><a href="#提交代码到github" class="headerlink" title="提交代码到github"></a>提交代码到github</h1><h1 id="在github项目页面release一个新版本"><a href="#在github项目页面release一个新版本" class="headerlink" title="在github项目页面release一个新版本"></a>在github项目页面release一个新版本</h1><h1 id="访问jitpack官网查看"><a href="#访问jitpack官网查看" class="headerlink" title="访问jitpack官网查看"></a>访问jitpack官网查看</h1><p><a href="https://jitpack.io/">https://jitpack.io</a></p><h1 id="搜索框输入github项目地址"><a href="#搜索框输入github项目地址" class="headerlink" title="搜索框输入github项目地址"></a>搜索框输入github项目地址</h1><p>如： <a href="https://github.com/zhouzhuo810/Magpie">https://github.com/zhouzhuo810/Magpie</a></p><p>点击最新版的<code>get</code>按钮，即开始编译，编译成功即可使用。<br>使用方法该页面下方有。</p><h1 id="更多可参考官方demo"><a href="#更多可参考官方demo" class="headerlink" title="更多可参考官方demo"></a>更多可参考官方demo</h1><p><a href="https://github.com/jitpack/android-example">https://github.com/jitpack/android-example</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;在project的build-gralde中添加classpath&quot;&gt;&lt;a href=&quot;#在project的build-gralde中添加classpath&quot; class=&quot;headerlink&quot; title=&quot;在project的build.gralde中添加classpath&quot;&gt;&lt;/a&gt;在project的build.gralde中添加classpath&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;classpath &amp;#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;注意：如果没有加google()，必须加上这个，并且buildscript和allprojects都得加上。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;buildscript &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    repositories &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        google()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jcenter()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dependencies &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        classpath &amp;#x27;com.android.tools.build:gradle:3.1.2&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        classpath &amp;#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // NOTE: Do not place your application dependencies here; they belong&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // in the individual module build.gradle files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;allprojects &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    repositories &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        google()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jcenter()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android开发工具" scheme="http://zhouzhuo810.github.io/categories/Android%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android疑难杂症-购物车商品种类和商品列表联动效果</title>
    <link href="http://zhouzhuo810.github.io/2018/05/16/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%95%86%E5%93%81%E7%A7%8D%E7%B1%BB%E5%92%8C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E8%81%94%E5%8A%A8%E6%95%88%E6%9E%9C/"/>
    <id>http://zhouzhuo810.github.io/2018/05/16/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%95%86%E5%93%81%E7%A7%8D%E7%B1%BB%E5%92%8C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E8%81%94%E5%8A%A8%E6%95%88%E6%9E%9C/</id>
    <published>2018-05-16T13:55:22.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><blockquote><p>基于BaseRecyclerViewAdapterHelper</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.30&#x27;</span><br></pre></td></tr></table></figure><h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/images/shop_car.gif"></p><span id="more"></span><h1 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.gftstore.entity;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.AbstractExpandableItem;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CateEntity</span> <span class="keyword">extends</span> <span class="title class_">AbstractExpandableItem</span>&lt;CateEntity.ContentEntity&gt; <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> choose;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> index;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ContentEntity&gt; contents;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.index = index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isChoose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> choose;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setChoose</span><span class="params">(<span class="type">boolean</span> choose)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.choose = choose;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> List&lt;ContentEntity&gt; <span class="title function_">getContents</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> contents;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContents</span><span class="params">(List&lt;ContentEntity&gt; contents)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.contents = contents;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLevel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ContentEntity</span> <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> String picUrl;</span><br><span class="line">        <span class="keyword">private</span> Float price;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> index;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getPicUrl</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> picUrl;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPicUrl</span><span class="params">(String picUrl)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.picUrl = picUrl;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> Float <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> price;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Float price)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.price = price;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.count = count;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="菜单adapter"><a href="#菜单adapter" class="headerlink" title="菜单adapter"></a>菜单adapter</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.TypedValue;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.entity.CateEntity;</span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> zhouzhuo810.me.zzandframe.ui.adapter.RvAutoBaseAdapter;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CateRvAdapter</span> <span class="keyword">extends</span> <span class="title class_">RvAutoBaseAdapter</span>&lt;CateEntity&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CateRvAdapter</span><span class="params">(Context context, List&lt;CateEntity&gt; data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, data);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">(<span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.rv_item_cate;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">fillData</span><span class="params">(ViewHolder holder, CateEntity item, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        holder.setText(R.id.tv_name, item.getName())</span><br><span class="line">                .setBackgroundRes(R.id.list_root, item.isChoose() ? R.color.colorWhite : R.color.colorBg)</span><br><span class="line">                .setTextColor(R.id.tv_name, item.isChoose() ? <span class="number">0xff000000</span> : <span class="number">0xff888888</span>)</span><br><span class="line">                .setGone(R.id.iv_icon, position != <span class="number">0</span>);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tvName</span> <span class="operator">=</span> holder.getView(R.id.tv_name);</span><br><span class="line">        <span class="keyword">if</span> (item.isChoose()) &#123;</span><br><span class="line">            tvName.setTextSize(TypedValue.COMPLEX_UNIT_PX, AutoUtils.getPercentWidthSize(<span class="number">41</span>));</span><br><span class="line">            tvName.requestLayout();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tvName.setTextSize(TypedValue.COMPLEX_UNIT_PX, AutoUtils.getPercentWidthSize(<span class="number">36</span>));</span><br><span class="line">            tvName.requestLayout();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSelection</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (CateEntity entity : getData()) &#123;</span><br><span class="line">                entity.setChoose(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            getData().get(position).setChoose(<span class="literal">true</span>);</span><br><span class="line">            notifyDataSetChanged();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="菜单点击监听"><a href="#菜单点击监听" class="headerlink" title="菜单点击监听"></a>菜单点击监听</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cateRvAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">RvAutoBaseAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cateRvAdapter.getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (CateEntity entity : cateRvAdapter.getData()) &#123;</span><br><span class="line">                entity.setChoose(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            cateRvAdapter.getData().get(position).setChoose(<span class="literal">true</span>);</span><br><span class="line">            cateRvAdapter.notifyDataSetChanged();</span><br><span class="line">  </span><br><span class="line">            ((LinearLayoutManager)rvContent.getLayoutManager()).scrollToPositionWithOffset(contentRvAdapter.getFirstPositionOfGroup(position), <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="菜单adapter-1"><a href="#菜单adapter-1" class="headerlink" title="菜单adapter"></a>菜单adapter</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseMultiItemQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.entity.CateEntity;</span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContentRvAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseMultiItemQuickAdapter</span>&lt;MultiItemEntity, BaseViewHolder&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ContentRvAdapter</span><span class="params">(<span class="meta">@Nullable</span> List&lt;MultiItemEntity&gt; data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(data);</span><br><span class="line">        addItemType(<span class="number">0</span>, R.layout.rv_item_right_title);</span><br><span class="line">        addItemType(<span class="number">1</span>, R.layout.rv_item_right_content);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> BaseViewHolder <span class="title function_">createBaseViewHolder</span><span class="params">(ViewGroup parent, <span class="type">int</span> layoutResId)</span> &#123;</span><br><span class="line">        <span class="type">BaseViewHolder</span> <span class="variable">baseViewHolder</span> <span class="operator">=</span> <span class="built_in">super</span>.createBaseViewHolder(parent, layoutResId);</span><br><span class="line">        AutoUtils.auto(baseViewHolder.itemView);</span><br><span class="line">        baseViewHolder.setNestView(R.id.iv_dec);</span><br><span class="line">        baseViewHolder.setNestView(R.id.iv_add);</span><br><span class="line">        <span class="keyword">return</span> baseViewHolder;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(BaseViewHolder helper, MultiItemEntity item)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (helper.getItemViewType()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) item;</span><br><span class="line">                helper.setText(R.id.tv_title_name, cate.getName());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) item;</span><br><span class="line">                helper.setText(R.id.tv_goods_name, content.getName())</span><br><span class="line">                        .setText(R.id.tv_price, content.getPrice() + <span class="string">&quot;&quot;</span>)</span><br><span class="line">                        .setText(R.id.tv_shop_qty, content.getCount() + <span class="string">&quot;&quot;</span>)</span><br><span class="line">                        .setVisible(R.id.iv_dec, content.getCount() != <span class="number">0</span>)</span><br><span class="line">                        .setVisible(R.id.tv_shop_qty, content.getCount() != <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFirstPositionOfGroup</span><span class="params">(<span class="type">int</span> group)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            List&lt;MultiItemEntity&gt; data = getData();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.size(); i++) &#123;</span><br><span class="line">                <span class="type">MultiItemEntity</span> <span class="variable">multiItemEntity</span> <span class="operator">=</span> data.get(i);</span><br><span class="line">                <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity) &#123;</span><br><span class="line">                    <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) multiItemEntity;</span><br><span class="line">                    <span class="keyword">if</span> (cate.getIndex() == group) &#123;</span><br><span class="line">                        Log.e(<span class="string">&quot;TTT&quot;</span>, <span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">                        <span class="keyword">return</span> i;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGroupForPosition</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">MultiItemEntity</span> <span class="variable">multiItemEntity</span> <span class="operator">=</span> getData().get(position);</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="keyword">return</span> content.getIndex();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) multiItemEntity;</span><br><span class="line">                <span class="keyword">return</span> cate.getIndex();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">countMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0f</span>;</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">float</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount() * content.getPrice();</span><br><span class="line">                count += v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount();</span><br><span class="line">                count += v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> List&lt;CateEntity.ContentEntity&gt; getCarShop() &#123;</span><br><span class="line">        List&lt;CateEntity.ContentEntity&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount();</span><br><span class="line">                <span class="keyword">if</span> (v &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    list.add(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="内容滚动监听"><a href="#内容滚动监听" class="headerlink" title="内容滚动监听"></a>内容滚动监听</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rvContent.addOnScrollListener(<span class="keyword">new</span> <span class="title class_">RecyclerView</span>.OnScrollListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onScrolled</span><span class="params">(RecyclerView recyclerView, <span class="type">int</span> dx, <span class="type">int</span> dy)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onScrolled(recyclerView, dx, dy);</span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> (LinearLayoutManager) rvContent.getLayoutManager();</span><br><span class="line">        <span class="type">int</span> firstVisibleItemPosition=linearLayoutManager.findFirstVisibleItemPosition();<span class="comment">//可见范围内的第一项的位置</span></span><br><span class="line">        <span class="type">int</span> lastVisibleItemPosition=linearLayoutManager.findLastVisibleItemPosition();<span class="comment">//可见范围内的最后一项的位置</span></span><br><span class="line">        <span class="type">int</span> itemCount=linearLayoutManager.getItemCount();<span class="comment">//recyclerview中的item的所有的数目</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (firstVisibleItemPosition &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">group</span> <span class="operator">=</span> contentRvAdapter.getGroupForPosition(firstVisibleItemPosition);</span><br><span class="line">            cateRvAdapter.setSelection(group);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="数据模拟与填充"><a href="#数据模拟与填充" class="headerlink" title="数据模拟与填充"></a>数据模拟与填充</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭闪烁动画</span></span><br><span class="line">((SimpleItemAnimator) rvContent.getItemAnimator()).setSupportsChangeAnimations(<span class="literal">false</span>);</span><br><span class="line">((SimpleItemAnimator) rvShopCar.getItemAnimator()).setSupportsChangeAnimations(<span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">String[] names = &#123;</span><br><span class="line">        <span class="string">&quot;我的最爱&quot;</span>,</span><br><span class="line">        <span class="string">&quot;饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;饮料&quot;</span>,</span><br><span class="line">        <span class="string">&quot;方便面&quot;</span>,</span><br><span class="line">        <span class="string">&quot;水果&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">String[] shops = &#123;</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span>,</span><br><span class="line">        <span class="string">&quot;奥利奥夹心饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span>,</span><br><span class="line">        <span class="string">&quot;奥利奥夹心饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">List&lt;CateEntity&gt; cates = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">    <span class="type">CateEntity</span> <span class="variable">entity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CateEntity</span>();</span><br><span class="line">    entity.setName(names[i]);</span><br><span class="line">    entity.setChoose(i == <span class="number">0</span>);</span><br><span class="line">    cates.add(entity);</span><br><span class="line">    List&lt;CateEntity.ContentEntity&gt; contents = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>; i1 &lt; shops.length; i1++) &#123;</span><br><span class="line">        CateEntity.<span class="type">ContentEntity</span> <span class="variable">contentEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CateEntity</span>.ContentEntity();</span><br><span class="line">        contentEntity.setName(shops[i1]);</span><br><span class="line">        contentEntity.setPrice(<span class="number">4f</span>);</span><br><span class="line">        contents.add(contentEntity);</span><br><span class="line">    &#125;</span><br><span class="line">    entity.setContents(contents);</span><br><span class="line">&#125;</span><br><span class="line">cateRvAdapter.updateAll(cates);</span><br><span class="line">  </span><br><span class="line">List&lt;MultiItemEntity&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cates.size(); i++) &#123;</span><br><span class="line">    <span class="type">CateEntity</span> <span class="variable">entity</span> <span class="operator">=</span> cates.get(i);</span><br><span class="line">    <span class="comment">//设置GroupPosition</span></span><br><span class="line">    entity.setIndex(i);</span><br><span class="line">    <span class="comment">//这个必须加！！！，不然刷新数据会重复添加。</span></span><br><span class="line">    <span class="keyword">if</span> (entity.getSubItems() != <span class="literal">null</span>) &#123;</span><br><span class="line">        entity.getSubItems().clear();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (entity.getContents() != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (CateEntity.ContentEntity contentEntity : entity.getContents()) &#123;</span><br><span class="line">            <span class="comment">//设置GroupPosition</span></span><br><span class="line">            contentEntity.setIndex(i);</span><br><span class="line">            entity.addSubItem(contentEntity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    list.add(entity);</span><br><span class="line">&#125;</span><br><span class="line">contentRvAdapter.setNewData(list);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cates.size(); i++) &#123;</span><br><span class="line">    <span class="comment">//注意！！！，这里如果adapter添加了n个header则i+n。</span></span><br><span class="line">    contentRvAdapter.collapse(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">contentRvAdapter.expandAll();</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;基于BaseRecyclerViewAdapterHelper&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;compile &amp;#x27;com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.30&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h1 id=&quot;效果图&quot;&gt;&lt;a href=&quot;#效果图&quot; class=&quot;headerlink&quot; title=&quot;效果图&quot;&gt;&lt;/a&gt;效果图&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/shop_car.gif&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Android疑难杂症" scheme="http://zhouzhuo810.github.io/categories/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>JavaEE-使用javaemail发送邮件</title>
    <link href="http://zhouzhuo810.github.io/2018/05/11/JavaEE-%E4%BD%BF%E7%94%A8javaemail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"/>
    <id>http://zhouzhuo810.github.io/2018/05/11/JavaEE-%E4%BD%BF%E7%94%A8javaemail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</id>
    <published>2018-05-11T09:11:05.000Z</published>
    <updated>2024-06-13T11:58:36.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="使用163邮箱发送邮件"><a href="#使用163邮箱发送邮件" class="headerlink" title="使用163邮箱发送邮件"></a>使用163邮箱发送邮件</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javamail;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.mail.Authenticator;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Message;</span><br><span class="line"><span class="keyword">import</span> javax.mail.MessagingException;</span><br><span class="line"><span class="keyword">import</span> javax.mail.PasswordAuthentication;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Session;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Transport;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Message.RecipientType;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.AddressException;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mail163Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">//0.1 确定连接位置</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">//获取163邮箱smtp服务器的地址，</span></span><br><span class="line">        props.setProperty(<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.163.com&quot;</span>);</span><br><span class="line">        <span class="comment">//是否进行权限验证。</span></span><br><span class="line">        props.setProperty(<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//0.2确定权限（账号和密码）</span></span><br><span class="line">        <span class="type">Authenticator</span> <span class="variable">authenticator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Authenticator</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> PasswordAuthentication <span class="title function_">getPasswordAuthentication</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">//填写自己的163邮箱的登录帐号和授权密码，授权密码的获取，在后面会进行讲解。</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PasswordAuthentication</span>(<span class="string">&quot;163邮箱的帐号&quot;</span>,<span class="string">&quot;授权码&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//1 获得连接</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * props：包含配置信息的对象，Properties类型</span></span><br><span class="line"><span class="comment">         *         配置邮箱服务器地址、配置是否进行权限验证(帐号密码验证)等</span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * authenticator：确定权限(帐号和密码)        </span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * 所以就要在上面构建这两个对象。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> Session.getDefaultInstance(props, authenticator);</span><br><span class="line">  </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2 创建消息</span></span><br><span class="line">        <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessage</span>(session);</span><br><span class="line">        <span class="comment">// 2.1 发件人        xxx@163.com 我们自己的邮箱地址，就是名称</span></span><br><span class="line">        message.setFrom(<span class="keyword">new</span> <span class="title class_">InternetAddress</span>(<span class="string">&quot;xxx@163.com&quot;</span>));</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 2.2 收件人 </span></span><br><span class="line"><span class="comment">         *         第一个参数：</span></span><br><span class="line"><span class="comment">         *             RecipientType.TO    代表收件人 </span></span><br><span class="line"><span class="comment">         *             RecipientType.CC    抄送</span></span><br><span class="line"><span class="comment">         *             RecipientType.BCC    暗送</span></span><br><span class="line"><span class="comment">         *         比如A要给B发邮件，但是A觉得有必要给要让C也看看其内容，就在给B发邮件时，</span></span><br><span class="line"><span class="comment">         *         将邮件内容抄送给C，那么C也能看到其内容了，但是B也能知道A给C抄送过该封邮件</span></span><br><span class="line"><span class="comment">         *         而如果是暗送(密送)给C的话，那么B就不知道A给C发送过该封邮件。</span></span><br><span class="line"><span class="comment">         *     第二个参数</span></span><br><span class="line"><span class="comment">         *         收件人的地址，或者是一个Address[]，用来装抄送或者暗送人的名单。或者用来群发。可以是相同邮箱服务器的，也可以是不同的</span></span><br><span class="line"><span class="comment">         *         这里我们发送给我们的qq邮箱</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        message.setRecipient(RecipientType.TO, <span class="keyword">new</span> <span class="title class_">InternetAddress</span>(<span class="string">&quot;526745683@qq.com&quot;</span>));</span><br><span class="line">        <span class="comment">// 2.3 主题（标题）</span></span><br><span class="line">        message.setSubject(<span class="string">&quot;邮件的标题&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.4 正文</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;李四： &lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;您好，您在本论坛注册用户，点击下面url进行激活&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;http://ww......&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;如果不能点击，请复制直接激活&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;如果不是本人，请删除邮件&quot;</span>;</span><br><span class="line">        <span class="comment">//设置编码，防止发送的内容中文乱码。</span></span><br><span class="line">        message.setContent(str, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3发送消息</span></span><br><span class="line">        Transport.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;pom&quot;&gt;&lt;a href=&quot;#pom&quot; class=&quot;headerlink&quot; title=&quot;pom&quot;&gt;&lt;/a&gt;pom&lt;/h1&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.sun.mail&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;javax.mail&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.6.1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="JavaEE" scheme="http://zhouzhuo810.github.io/categories/JavaEE/"/>
    
    <category term="SpringMVC" scheme="http://zhouzhuo810.github.io/categories/SpringMVC/"/>
    
    
    <category term="JavaEE" scheme="http://zhouzhuo810.github.io/tags/JavaEE/"/>
    
  </entry>
  
  <entry>
    <title>Android自定义控件-仿星空散点图</title>
    <link href="http://zhouzhuo810.github.io/2018/04/13/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-%E4%BB%BF%E6%98%9F%E7%A9%BA%E6%95%A3%E7%82%B9%E5%9B%BE/"/>
    <id>http://zhouzhuo810.github.io/2018/04/13/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-%E4%BB%BF%E6%98%9F%E7%A9%BA%E6%95%A3%E7%82%B9%E5%9B%BE/</id>
    <published>2018-04-13T09:31:54.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/images/starbglayout.png"></p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;StartBgView&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_bg_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_star_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_star_qty&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.RequiresApi;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.zjkq.highnet_jt.R;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 仿星空背景</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/4/10.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StarBgView</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bgColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> starColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> starQty;</span><br><span class="line">    <span class="keyword">private</span> Paint starPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> hasInit;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> List&lt;StarData&gt; stars;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StarData</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> alpha;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> color;</span><br><span class="line">        <span class="keyword">private</span> RectF rect;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> RectF <span class="title function_">getRect</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> rect;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRect</span><span class="params">(RectF rect)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.rect = rect;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAlpha</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> alpha;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAlpha</span><span class="params">(<span class="type">int</span> alpha)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.alpha = alpha;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.x = x;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> y;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.y = y;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getColor</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> color;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(<span class="type">int</span> color)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.color = color;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (attrs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">TypedArray</span> <span class="variable">a</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.StarBgView);</span><br><span class="line">            bgColor = a.getColor(R.styleable.StarBgView_sbv_bg_color, <span class="number">0xff0a224a</span>);</span><br><span class="line">            starColor = a.getColor(R.styleable.StarBgView_sbv_star_color, <span class="number">0xffffffff</span>);</span><br><span class="line">            starQty = a.getInteger(R.styleable.StarBgView_sbv_star_qty, <span class="number">50</span>);</span><br><span class="line">            a.recycle();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            bgColor = <span class="number">0xff0a224a</span>;</span><br><span class="line">            starColor = <span class="number">0xffffffff</span>;</span><br><span class="line">            starQty = <span class="number">50</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        initPaint();</span><br><span class="line">        setBackgroundColor(bgColor);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">generateStarData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stars != <span class="literal">null</span>) &#123;</span><br><span class="line">            stars.clear();</span><br><span class="line">            stars = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        stars = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; starQty; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> getRandomX();</span><br><span class="line">            <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> getRandomY();</span><br><span class="line">            <span class="type">int</span> <span class="variable">alpha</span> <span class="operator">=</span> getRandomAlpha();</span><br><span class="line">            <span class="type">StarData</span> <span class="variable">starData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StarData</span>();</span><br><span class="line">            starData.setX(x);</span><br><span class="line">            starData.setY(y);</span><br><span class="line">            starData.setAlpha(alpha);</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                starData.setRect(<span class="keyword">new</span> <span class="title class_">RectF</span>(x, y, x + <span class="number">1</span>, y + <span class="number">2</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                starData.setRect(<span class="keyword">new</span> <span class="title class_">RectF</span>(x, y, x + <span class="number">2</span>, y + <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//            starData.setColor();</span></span><br><span class="line">            stars.add(starData);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomAlpha</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (<span class="number">255</span> * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (getWidth() * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (getHeight() * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawStar</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stars != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (StarData star : stars) &#123;</span><br><span class="line">                starPaint.setAlpha(star.getAlpha());</span><br><span class="line">                canvas.drawRoundRect(star.getRect(), <span class="number">1</span>, <span class="number">1</span>, starPaint);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">        <span class="keyword">if</span> (stars == <span class="literal">null</span>) &#123;</span><br><span class="line">            generateStarData();</span><br><span class="line">        &#125;</span><br><span class="line">        drawStar(canvas);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initPaint</span><span class="params">()</span> &#123;</span><br><span class="line">        starPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        starPaint.setColor(starColor);</span><br><span class="line">        starPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        starPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">        starPaint.setStrokeWidth(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;效果图&quot;&gt;&lt;a href=&quot;#效果图&quot; class=&quot;headerlink&quot; title=&quot;效果图&quot;&gt;&lt;/a&gt;效果图&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/starbglayout.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h1&gt;&lt;h2 id=&quot;自定义属性&quot;&gt;&lt;a href=&quot;#自定义属性&quot; class=&quot;headerlink&quot; title=&quot;自定义属性&quot;&gt;&lt;/a&gt;自定义属性&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;declare-styleable&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;StartBgView&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;attr&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;sbv_bg_color&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;format&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;color|reference&amp;quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;attr&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;sbv_star_color&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;format&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;color|reference&amp;quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;attr&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;sbv_star_qty&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;format&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;integer&amp;quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;declare-styleable&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android自定义控件" scheme="http://zhouzhuo810.github.io/categories/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android疑难杂症-自定义RecyclerView的LayoutManager</title>
    <link href="http://zhouzhuo810.github.io/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89RecyclerView%E7%9A%84LayoutManager/"/>
    <id>http://zhouzhuo810.github.io/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89RecyclerView%E7%9A%84LayoutManager/</id>
    <published>2018-04-13T06:35:15.000Z</published>
    <updated>2024-06-13T11:58:36.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="禁用RecyclerView手动滑动功能；"><a href="#禁用RecyclerView手动滑动功能；" class="headerlink" title="禁用RecyclerView手动滑动功能；"></a>禁用RecyclerView手动滑动功能；</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PlanDateRecyclerView</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyle)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyle);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        setOnTouchListener(<span class="keyword">new</span> <span class="title class_">OnTouchListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouch</span><span class="params">(View v, MotionEvent event)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/4/12.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PlanCalendarLayoutManager</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.LayoutManager &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalWidth;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalHeight;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> verticalScrollOffset;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> horizontalScrollOffset;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> List&lt;PlanOrderEntity&gt; frames;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> todayX;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanCalendarLayoutManager</span><span class="params">(Context ctx, List&lt;PlanOrderEntity&gt; frames, <span class="type">int</span> todayX)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.frames = frames;</span><br><span class="line">        <span class="built_in">this</span>.todayX = todayX;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> RecyclerView.LayoutParams <span class="title function_">generateDefaultLayoutParams</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RecyclerView</span>.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLayoutChildren</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getItemCount() &lt;= <span class="number">0</span> || state.isPreLayout()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        detachAndScrapAttachedViews(recycler);</span><br><span class="line">        fill(recycler, state);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">itemCount</span> <span class="operator">=</span> state.getItemCount();</span><br><span class="line">        <span class="keyword">if</span> (itemCount &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (frames != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Math.min(getItemCount(), frames.size());</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">                <span class="type">Rect</span> <span class="variable">rect</span> <span class="operator">=</span> frames.get(i).getRect();</span><br><span class="line">                totalHeight = Math.max(rect.bottom, totalHeight);</span><br><span class="line">                totalWidth = Math.max(rect.right, totalWidth);</span><br><span class="line">                <span class="type">View</span> <span class="variable">viewForPosition</span> <span class="operator">=</span> recycler.getViewForPosition(i);</span><br><span class="line">                <span class="keyword">if</span> (viewForPosition <span class="keyword">instanceof</span> ViewGroup) &#123;</span><br><span class="line">                    ViewGroup.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> viewForPosition.getLayoutParams();</span><br><span class="line">                &#125;</span><br><span class="line">                addView(viewForPosition);</span><br><span class="line">                measureChildWithMargins(viewForPosition, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                layoutDecoratedWithMargins(viewForPosition, rect.left, rect.top, rect.right, rect.bottom);</span><br><span class="line">            &#125;</span><br><span class="line">            totalHeight = Math.max(totalHeight, getHeight());</span><br><span class="line">            totalWidth = Math.max(totalWidth, getWidth());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTodayX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todayX - horizontalScrollOffset;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canScrollVertically</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canScrollHorizontally</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scrollHorizontallyBy</span><span class="params">(<span class="type">int</span> dx, RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">travelX</span> <span class="operator">=</span> dx;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//如果滑动到最左边</span></span><br><span class="line">        <span class="keyword">if</span> (horizontalScrollOffset + dx &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            travelX = -horizontalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (horizontalScrollOffset + dx &gt; totalWidth - getHorizontalSpace()) &#123;<span class="comment">//如果滑动到最右边</span></span><br><span class="line">            travelX = totalWidth - getHorizontalSpace() - horizontalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//将水平方向的偏移量+travel</span></span><br><span class="line">        horizontalScrollOffset += travelX;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 调用该方法通知view在y方向上移动指定距离</span></span><br><span class="line">        offsetChildrenHorizontal(-travelX);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> travelX;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalWidth</span><span class="params">(<span class="type">int</span> totalWidth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalWidth = totalWidth;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scrollVerticallyBy</span><span class="params">(<span class="type">int</span> dy, RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="comment">//列表向下滚动dy为正，列表向上滚动dy为负，这点与Android坐标系保持一致。</span></span><br><span class="line">        <span class="comment">//实际要滑动的距离</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">travel</span> <span class="operator">=</span> dy;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//如果滑动到最顶部</span></span><br><span class="line">        <span class="keyword">if</span> (verticalScrollOffset + dy &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            travel = -verticalScrollOffset;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (verticalScrollOffset + dy &gt; totalHeight - getVerticalSpace()) &#123;<span class="comment">//如果滑动到最底部</span></span><br><span class="line">            travel = totalHeight - getVerticalSpace() - verticalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//将竖直方向的偏移量+travel</span></span><br><span class="line">        verticalScrollOffset += travel;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 调用该方法通知view在y方向上移动指定距离</span></span><br><span class="line">        offsetChildrenVertical(-travel);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> travel;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getVerticalSpace</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//计算RecyclerView的可用高度，除去上下Padding值</span></span><br><span class="line">        <span class="keyword">return</span> getHeight() - getPaddingBottom() - getPaddingTop();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHorizontalSpace</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getWidth() - getPaddingLeft() - getPaddingRight();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalWidth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalWidth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="双RecyclerView滑动绑定功能实现"><a href="#双RecyclerView滑动绑定功能实现" class="headerlink" title="双RecyclerView滑动绑定功能实现"></a>双RecyclerView滑动绑定功能实现</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rv.addOnScrollListener(new RecyclerView.OnScrollListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123;</span><br><span class="line">        rvDate.scrollBy(dx, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;禁用RecyclerView手动滑动功能；&quot;&gt;&lt;a href=&quot;#禁用RecyclerView手动滑动功能；&quot; class=&quot;headerlink&quot; title=&quot;禁用RecyclerView手动滑动功能；&quot;&gt;&lt;/a&gt;禁用RecyclerView手动滑动功能；&lt;/h1&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;PlanDateRecyclerView&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;RecyclerView&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;PlanDateRecyclerView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;super&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;PlanDateRecyclerView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context, &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt; AttributeSet attrs)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;super&lt;/span&gt;(context, attrs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;PlanDateRecyclerView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context, &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt; AttributeSet attrs, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; defStyle)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;super&lt;/span&gt;(context, attrs, defStyle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setOnTouchListener(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;OnTouchListener&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;onTouch&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(View v, MotionEvent event)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android疑难杂症" scheme="http://zhouzhuo810.github.io/categories/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/"/>
    
    
    <category term="Android" scheme="http://zhouzhuo810.github.io/tags/Android/"/>
    
  </entry>
  
</feed>
