<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>InteliJ IDEA 破解版安装教程</title>
      <link href="/2024/06/13/InteliJ-IDEA-%E7%A0%B4%E8%A7%A3%E7%89%88%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>/2024/06/13/InteliJ-IDEA-%E7%A0%B4%E8%A7%A3%E7%89%88%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><ol><li>打开网址</li></ol><p><a href="https://3.jetbra.in/">https://3.jetbra.in/</a><br>或<br><a href="https://jetbra.in/5d84466e31722979266057664941a71893322460">https://jetbra.in/5d84466e31722979266057664941a71893322460</a></p><p>随意点击一个绿色的<code>Hostname</code>，打不开或打开报错就换一个。</p><ol start="2"><li>下载<code>jetbra.zip</code></li></ol><p>在打开的网站里，下载<code>jetbra.zip</code>文件。</p><p>同时，找到<code>IntelliJ IDEA</code>的激活码上方的版本号，比如：“2023.2.x”</p><p>激活码先别关闭，等下要用。</p><span id="more"></span><ol start="3"><li>下载Intelij IDEA安装包</li></ol><p>去官网下载上述版本号对应的安装包。</p><p><a href="https://www.jetbrains.com.cn/idea/download/other.html">https://www.jetbrains.com.cn/idea/download/other.html</a></p><p>下载 上述版本号对对应的 IntelliJ IDEA Ultimate 版本安装包，如 <code>2023.2.7 - Windows x64 (exe)</code>。</p><h2 id="二、安装和破解"><a href="#二、安装和破解" class="headerlink" title="二、安装和破解"></a>二、安装和破解</h2><ol><li><p>安装<code>ideaIU-2023.2.x.exe</code></p></li><li><p>解压<code>jetbra.zip</code></p></li><li><p>将jebra文件夹拷贝到<code>&#123;path\to&#125;\Intejil IDEA 2023.2\bin</code>目录</p></li><li><p>在<code>idea64.exe.vmoptions</code>文件末尾追加</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-javaagent:H:\Intejil IDEA 2023.2\bin\jetbra\ja-netfilter.jar=jetbrains</span><br><span class="line"></span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED</span><br><span class="line">--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED</span><br></pre></td></tr></table></figure><p>其中路径<code>H:\Intejil IDEA 2023.2</code>改成自己的安装路径。</p><ol start="5"><li>打开idea，复制激活码，激活。</li></ol><p>使用上面那个激活的激活码即可。</p>]]></content>
      
      
      <categories>
          
          <category> InteliJ IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> InteliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL-druid连接报错问题</title>
      <link href="/2024/06/12/MySQL-druid%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/"/>
      <url>/2024/06/12/MySQL-druid%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="报错问题"><a href="#报错问题" class="headerlink" title="报错问题"></a>报错问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8, errorCode 0, state 08S01</span><br></pre></td></tr></table></figure><h2 id="SpringBoot配置"><a href="#SpringBoot配置" class="headerlink" title="SpringBoot配置"></a>SpringBoot配置</h2><ul><li>application.properties</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=xxx</span><br><span class="line">server.port=8080</span><br><span class="line">spring.datasource.url=jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">spring.datasource.username=xxx</span><br><span class="line">spring.datasource.password=xxx</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务端MySQL未启用SSL。</span><br></pre></td></tr></table></figure><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>在url末尾追加<code>useSSL=false</code>即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxx?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL - JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git常见问题-子目录是submodule无法add问题</title>
      <link href="/2024/05/31/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-%E5%AD%90%E7%9B%AE%E5%BD%95%E6%98%AFsubmodule%E6%97%A0%E6%B3%95add%E9%97%AE%E9%A2%98/"/>
      <url>/2024/05/31/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-%E5%AD%90%E7%9B%AE%E5%BD%95%E6%98%AFsubmodule%E6%97%A0%E6%B3%95add%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>目录A里面有个目录B，目录B也是一个仓库。</p><p>现在目录A也有一个仓库，想将目录B的仓库取消，直接加入到目录A的仓库里。</p><p>直接<code>git add 目录B</code>，是没有任何反应的。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd 目录B</span><br><span class="line">rm -rf .git</span><br><span class="line"></span><br><span class="line">cd 目录A</span><br><span class="line">git rm --cached 目录B</span><br><span class="line">git add 目录B</span><br></pre></td></tr></table></figure><h1 id="知识扩展"><a href="#知识扩展" class="headerlink" title="知识扩展"></a>知识扩展</h1><h2 id="Git查看已被排除的文件及目录"><a href="#Git查看已被排除的文件及目录" class="headerlink" title="Git查看已被排除的文件及目录"></a>Git查看已被排除的文件及目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status --ignored</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git常见问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-X5内核播放视频全屏问题</title>
      <link href="/2018/12/24/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-X5%E5%86%85%E6%A0%B8%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E9%97%AE%E9%A2%98/"/>
      <url>/2018/12/24/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-X5%E5%86%85%E6%A0%B8%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="直接上代码"><a href="#直接上代码" class="headerlink" title="直接上代码"></a>直接上代码</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.ui.act.community.WebActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">&quot;keyboardHidden|keyboard|layoutDirection|screenLayout|screenSize|touchscreen|orientation&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustNothing|stateAlwaysHidden&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;sensor&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> View myVideoView;</span><br><span class="line"><span class="keyword">private</span> <span class="type">WebChromeClient</span> <span class="variable">mWebChromeClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebChromeClient</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onProgressChanged</span><span class="params">(WebView view, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        mProgressBar.setProgress(i);</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">100</span>) &#123;</span><br><span class="line">            mProgressBar.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mProgressBar.getVisibility() != View.VISIBLE) &#123;</span><br><span class="line">            mProgressBar.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onShowCustomView</span><span class="params">(View view, IX5WebChromeClient.CustomViewCallback customViewCallback)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onShowCustomView(view, customViewCallback);</span><br><span class="line">        <span class="type">ViewGroup</span> <span class="variable">viewGroup</span> <span class="operator">=</span> (ViewGroup) mWebView.getParent();</span><br><span class="line">        viewGroup.removeView(mWebView);</span><br><span class="line">        viewGroup.setBackgroundColor(SimpleUtil.getColor(R.color.colorBlack));</span><br><span class="line">        viewGroup.addView(view);</span><br><span class="line">        myVideoView = view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onHideCustomView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onHideCustomView();</span><br><span class="line">        <span class="keyword">if</span> (myVideoView == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ViewGroup</span> <span class="variable">viewGroup</span> <span class="operator">=</span> (ViewGroup) myVideoView.getParent();</span><br><span class="line">        viewGroup.removeView(myVideoView);</span><br><span class="line">        viewGroup.addView(mWebView);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) &#123;</span><br><span class="line">            getWindow().addFlags(</span><br><span class="line">                WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);</span><br><span class="line">            mTitleBar.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) &#123;</span><br><span class="line">            getWindow().clearFlags(</span><br><span class="line">                WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);</span><br><span class="line">            mTitleBar.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidException-常见Exception汇总</title>
      <link href="/2018/11/16/AndroidException-%E5%B8%B8%E8%A7%81Exception%E6%B1%87%E6%80%BB/"/>
      <url>/2018/11/16/AndroidException-%E5%B8%B8%E8%A7%81Exception%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26"><a href="#Invoke-customs-are-only-supported-starting-with-android-0-–min-api-26" class="headerlink" title="Invoke-customs are only supported starting with android 0 –min-api 26"></a>Invoke-customs are only supported starting with android 0 –min-api 26</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//build.gradle</span><br><span class="line">android &#123;</span><br><span class="line">//... ...</span><br><span class="line">    android &#123;</span><br><span class="line">        compileOptions &#123;</span><br><span class="line">            sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">            targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="64位CPU的手机无法加载腾讯X5内核"><a href="#64位CPU的手机无法加载腾讯X5内核" class="headerlink" title="64位CPU的手机无法加载腾讯X5内核"></a>64位CPU的手机无法加载腾讯X5内核</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//build.gradle</span><br><span class="line">android &#123;</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        // 指定支持的so架构</span><br><span class="line">        ndk &#123;</span><br><span class="line">            //根据需要 自行选择添加的对应cpu类型的.so库。</span><br><span class="line">            abiFilters &#x27;armeabi&#x27;, &#x27;armeabi-v7a&#x27;, &#x27;arm64-v8a&#x27;, &quot;x86&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//复制armeabi中的.so文件到armeabi-v7a、arm64-v8a、x86对应的文件夹</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常见Exception </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RxJava2-监听EditText变化并查询数据库并更新UI</title>
      <link href="/2018/11/16/RxJava2-%E7%9B%91%E5%90%ACEditText%E5%8F%98%E5%8C%96%E5%B9%B6%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E6%9B%B4%E6%96%B0UI/"/>
      <url>/2018/11/16/RxJava2-%E7%9B%91%E5%90%ACEditText%E5%8F%98%E5%8C%96%E5%B9%B6%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E6%9B%B4%E6%96%B0UI/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Disposable</span> <span class="variable">subscription</span> <span class="operator">=</span> RxTextView.textChangeEvents(etSearch)</span><br><span class="line">                    .debounce(<span class="number">200</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">                    .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                    .toFlowable(BackpressureStrategy.BUFFER)</span><br><span class="line">                    .switchMap(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;TextViewTextChangeEvent, Publisher&lt;RealmResults&lt;Note&gt;&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> Publisher&lt;RealmResults&lt;Note&gt;&gt; <span class="title function_">apply</span><span class="params">(TextViewTextChangeEvent event)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">etContent</span> <span class="operator">=</span> event.getText().toString();</span><br><span class="line">                            <span class="keyword">if</span> (etContent.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                mLv.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                mLv.setVisibility(View.GONE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (etContent.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                mLv.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                mLv.setVisibility(View.GONE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            finalMAdapter.setSearchStr(etContent);</span><br><span class="line">                            <span class="keyword">if</span> (dirId == MyApplication.DEFAULT_DIR_ID) &#123;</span><br><span class="line">                                <span class="keyword">return</span> Realm.getDefaultInstance().where(Note.class)</span><br><span class="line">                                    .contains(<span class="string">&quot;title&quot;</span>, etContent)</span><br><span class="line">                                    .sort(<span class="string">&quot;timeMills&quot;</span>, Sort.DESCENDING).findAllAsync().asFlowable();</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">return</span> Realm.getDefaultInstance().where(Note.class)</span><br><span class="line">                                    .equalTo(<span class="string">&quot;dirId&quot;</span>, dirId)</span><br><span class="line">                                    .contains(<span class="string">&quot;title&quot;</span>, etContent)</span><br><span class="line">                                    .sort(<span class="string">&quot;timeMills&quot;</span>, Sort.DESCENDING).findAllAsync().asFlowable();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .filter(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;RealmResults&lt;Note&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(RealmResults&lt;Note&gt; notes)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            <span class="keyword">return</span> notes.isLoaded();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .subscribe(<span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;RealmResults&lt;Note&gt;&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(RealmResults&lt;Note&gt; notes)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            mNotes = notes;</span><br><span class="line">                            <span class="keyword">if</span> (notes != <span class="literal">null</span> &amp;&amp; notes.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                llNoResult.setVisibility(View.GONE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                llNoResult.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125;</span><br><span class="line">                            finalMAdapter.updateAll(mNotes);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;Throwable&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Throwable throwable)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                            throwable.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> RxJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RxJava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-关闭全局代理</title>
      <link href="/2018/11/08/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%85%B3%E9%97%AD%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/"/>
      <url>/2018/11/08/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%85%B3%E9%97%AD%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p><img src="/images/proxy.png"></p><span id="more"></span><h1 id="根源"><a href="#根源" class="headerlink" title="根源"></a>根源</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.gradle/gradle.properties中配置了代理。</span><br></pre></td></tr></table></figure><h1 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h1><p>打开Teminal</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">cd .gradle</span><br><span class="line">ls</span><br><span class="line">vi gradle.properties</span><br><span class="line">i</span><br><span class="line">//移动光标删除对应代理配置</span><br><span class="line">按ESC</span><br><span class="line">:wq</span><br></pre></td></tr></table></figure><p>全局代理就关闭了。</p>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux-编辑器vi的使用</title>
      <link href="/2018/11/08/Linux-%E7%BC%96%E8%BE%91%E5%99%A8vi%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/11/08/Linux-%E7%BC%96%E8%BE%91%E5%99%A8vi%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="进入vi编辑器"><a href="#进入vi编辑器" class="headerlink" title="进入vi编辑器"></a>进入vi编辑器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi filename</span><br></pre></td></tr></table></figure><h1 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h1><p>按 <code>i</code></p><h1 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h1><p>按<code>ESC</code>键 跳到命令模式，然后：<br><code>:w</code> 保存文件但不退出vi<br><code>:w</code> file 将修改另外保存到file中，不退出vi<br><code>:w!</code> 强制保存，不推出vi<br><code>:wq</code> 保存文件并退出vi<br><code>:wq!</code> 强制保存文件，并退出vi<br><code>q:</code> 不保存文件，退出vi<br><code>:q!</code> 不保存文件，强制退出vi<br><code>:e!</code> 放弃所有修改，从上次保存文件开始再编辑</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-移动硬盘文件或目录损坏且无法读取</title>
      <link href="/2018/11/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96/"/>
      <url>/2018/11/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%8D%9F%E5%9D%8F%E4%B8%94%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>移动硬盘打不开，提示文件或目录损坏且无法读取</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>在运行中输入cmd，打开命令提示符窗口<br>然后输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkdsk I: /f</span><br></pre></td></tr></table></figure><p>(<code>I</code>是我在用的移动硬盘的盘符)</p><p>等待修复结束即可。</p>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-颜色透明度百分比和十六进制对照表</title>
      <link href="/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%A2%9C%E8%89%B2%E9%80%8F%E6%98%8E%E5%BA%A6%E7%99%BE%E5%88%86%E6%AF%94%E5%92%8C%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E5%AF%B9%E7%85%A7%E8%A1%A8/"/>
      <url>/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%A2%9C%E8%89%B2%E9%80%8F%E6%98%8E%E5%BA%A6%E7%99%BE%E5%88%86%E6%AF%94%E5%92%8C%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E5%AF%B9%E7%85%A7%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="对照表"><a href="#对照表" class="headerlink" title="对照表"></a>对照表</h1><p><img src="/images/alpha_table.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-读取联系人</title>
      <link href="/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%AF%BB%E5%8F%96%E8%81%94%E7%B3%BB%E4%BA%BA/"/>
      <url>/2018/10/31/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%AF%BB%E5%8F%96%E8%81%94%E7%B3%BB%E4%BA%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="AndroidManifest-xml添加权限"><a href="#AndroidManifest-xml添加权限" class="headerlink" title="AndroidManifest.xml添加权限"></a>AndroidManifest.xml添加权限</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_CONTACTS&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="申请动态权限，并读取数据"><a href="#申请动态权限，并读取数据" class="headerlink" title="申请动态权限，并读取数据"></a>申请动态权限，并读取数据</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadAddressBook</span><span class="params">()</span> &#123;</span><br><span class="line">    AndPermission.with(<span class="built_in">this</span>)</span><br><span class="line">        .runtime()</span><br><span class="line">        .permission(Permission.READ_CONTACTS)</span><br><span class="line">        .rationale((context, data, executor) -&gt; showConfirmDialog(getString(R.string.get_contacts), getString(R.string.contact_rationale), <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">TwoBtnTextDialog</span>.OnTwoBtnTextClick() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLeftClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                executor.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRightClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                executor.execute();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">        .onDenied(data -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (AndPermission.hasAlwaysDeniedPermission(AddressBookActivity.<span class="built_in">this</span>, data)) &#123;</span><br><span class="line">                <span class="comment">// 这里使用一个Dialog展示没有这些权限应用程序无法继续运行，询问用户是否去设置中授权。</span></span><br><span class="line">                <span class="keyword">final</span> <span class="type">Setting</span> <span class="variable">setting</span> <span class="operator">=</span> AndPermission.with(AddressBookActivity.<span class="built_in">this</span>).runtime().setting();</span><br><span class="line">                setting.onComeback(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (AndPermission.hasPermissions(AddressBookActivity.<span class="built_in">this</span>, Permission.READ_CONTACTS)) &#123;</span><br><span class="line">                        readContacts();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                showConfirmDialog(getString(R.string.permission_set),</span><br><span class="line">                    getString(R.string.set_read_phone_permission),</span><br><span class="line">                    <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">false</span>,</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">TwoBtnTextDialog</span>.OnTwoBtnTextClick() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLeftClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line">                        </span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRightClick</span><span class="params">(TextView v)</span> &#123;</span><br><span class="line">                            setting.start();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .onGranted(data -&gt; readContacts())</span><br><span class="line">        .start();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取联系人</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readContacts</span><span class="params">()</span> &#123;</span><br><span class="line">    mBooks = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//cursor指针 query询问 contract协议 kinds种类</span></span><br><span class="line">        cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cursor.moveToNext()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">displayName</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));</span><br><span class="line">                <span class="type">String</span> <span class="variable">number</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));</span><br><span class="line">                <span class="keyword">if</span> (number != <span class="literal">null</span>) &#123;</span><br><span class="line">                    number = number.replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                mBooks.add(<span class="keyword">new</span> <span class="title class_">AddressBookEntity</span>(displayName, number));</span><br><span class="line">            &#125;</span><br><span class="line">            Log.e(<span class="string">&quot;TTT&quot;</span>, <span class="string">&quot;books=&quot;</span>+ mBooks.toString());</span><br><span class="line">            <span class="comment">//notify公布</span></span><br><span class="line">            mAdapter.setData(mBooks);</span><br><span class="line">            mSidebar.setShowString(CollectionUtil.listToString(mAdapter.getLetters()));</span><br><span class="line">            mSidebar.setTextSize(ScreenAdapterUtil.getInstance().getScaledValue(<span class="number">36</span>));</span><br><span class="line">            mLlNoData.setVisibility(CollectionUtil.isEmpty(mBooks) ? View.VISIBLE : View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cursor != <span class="literal">null</span>) &#123;</span><br><span class="line">            cursor.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-部分库报错红色却能编译通过解决方案</title>
      <link href="/2018/10/29/AndroidStudio%E6%8A%80%E5%B7%A7-%E9%83%A8%E5%88%86%E5%BA%93%E6%8A%A5%E9%94%99%E7%BA%A2%E8%89%B2%E5%8D%B4%E8%83%BD%E7%BC%96%E8%AF%91%E9%80%9A%E8%BF%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2018/10/29/AndroidStudio%E6%8A%80%E5%B7%A7-%E9%83%A8%E5%88%86%E5%BA%93%E6%8A%A5%E9%94%99%E7%BA%A2%E8%89%B2%E5%8D%B4%E8%83%BD%E7%BC%96%E8%AF%91%E9%80%9A%E8%BF%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1 id="方案1（推荐）"><a href="#方案1（推荐）" class="headerlink" title="方案1（推荐）"></a>方案1（推荐）</h1><ul><li>1.删除.gradle和.idea文件夹；</li><li>2.重启项目；</li></ul><h1 id="方案2"><a href="#方案2" class="headerlink" title="方案2"></a>方案2</h1><blockquote><p>File-&gt;Invalidate Caches&#x2F;Restart</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-8.0新特性-通知通道配置</title>
      <link href="/2018/10/26/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E9%80%9A%E7%9F%A5%E9%80%9A%E9%81%93%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/26/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E9%80%9A%E7%9F%A5%E9%80%9A%E9%81%93%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Android 8.0开始发送通知需要配置渠道id；</p></blockquote><h1 id="Application-onCreate-中配置"><a href="#Application-onCreate-中配置" class="headerlink" title="Application#onCreate()中配置"></a>Application#onCreate()中配置</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//8.0</span></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">    <span class="type">NotificationManager</span> <span class="variable">mNotificationManager</span> <span class="operator">=</span> (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">    <span class="comment">// 通知渠道的id</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;你的渠道id&quot;</span>;</span><br><span class="line">    <span class="comment">// 用户可以看到的通知渠道的名字.</span></span><br><span class="line">    <span class="type">CharSequence</span> <span class="variable">name</span> <span class="operator">=</span> getString(R.string.app_name);</span><br><span class="line">    <span class="comment">// 用户可以看到的通知渠道的描述</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> getString(R.string.app_push_message_hint);</span><br><span class="line">    <span class="type">int</span> <span class="variable">importance</span> <span class="operator">=</span> NotificationManager.IMPORTANCE_HIGH;</span><br><span class="line">    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, importance);</span><br><span class="line">    mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);</span><br><span class="line">    <span class="comment">// 配置通知渠道的属性</span></span><br><span class="line">    mChannel.setDescription(description);</span><br><span class="line">    <span class="comment">// 设置通知出现时的闪灯（如果 android 设备支持的话）</span></span><br><span class="line">    mChannel.enableLights(<span class="literal">true</span>);</span><br><span class="line">    mChannel.setLightColor(Color.RED);</span><br><span class="line">    mChannel.setSound(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_zz_four), <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// 设置通知出现时的震动（如果 android 设备支持的话）</span></span><br><span class="line">    mChannel.enableVibration(<span class="literal">true</span>);</span><br><span class="line">    mChannel.setVibrationPattern(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;);</span><br><span class="line">    <span class="comment">//最后在notificationmanager中创建该通知渠道</span></span><br><span class="line">    <span class="keyword">if</span> (mNotificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">        mNotificationManager.createNotificationChannel(mChannel);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="发送通知"><a href="#发送通知" class="headerlink" title="发送通知"></a>发送通知</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送通知则需要使用渠道id</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, MemoListActivity.class);</span><br><span class="line"><span class="type">PendingIntent</span> <span class="variable">pi</span> <span class="operator">=</span> PendingIntent.getActivity(context, <span class="number">0</span>, it, PendingIntent.FLAG_CANCEL_CURRENT);</span><br><span class="line"><span class="type">Resources</span> <span class="variable">res</span> <span class="operator">=</span> context.getResources();</span><br><span class="line"><span class="type">Bitmap</span> <span class="variable">bmp</span> <span class="operator">=</span> BitmapFactory.decodeResource(res, R.mipmap.ic_launcher);</span><br><span class="line"><span class="type">NotificationManager</span> <span class="variable">notificationManager</span> <span class="operator">=</span> (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line"><span class="comment">//定义notification</span></span><br><span class="line">NotificationCompat.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(context, <span class="string">&quot;你的渠道id&quot;</span>);</span><br><span class="line">builder.setContentTitle(<span class="string">&quot;备忘录通知&quot;</span>)</span><br><span class="line">    .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">    .setLargeIcon(bmp)</span><br><span class="line">    .setContentText(content + <span class="string">&quot;&quot;</span>)</span><br><span class="line">    .setTicker(<span class="string">&quot;备忘录通知&quot;</span>)</span><br><span class="line">    .setSound(Uri.parse(<span class="string">&quot;android.resource://您的包名/&quot;</span> + R.raw.hint))</span><br><span class="line">    .setVibrate(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;)</span><br><span class="line">    <span class="comment">// 单机 面板自动取消通知</span></span><br><span class="line">    .setAutoCancel(<span class="literal">true</span>)</span><br><span class="line">    .setContentIntent(pi);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (notificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">    notificationManager.notify(<span class="number">1</span>, builder.build());<span class="comment">// 通过管理器发送通知（通知的id，Notification对象）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android版本特性 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-阿里云推送</title>
      <link href="/2018/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A8%E9%80%81/"/>
      <url>/2018/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A8%E9%80%81/</url>
      
        <content type="html"><![CDATA[<h1 id="集成依赖"><a href="#集成依赖" class="headerlink" title="集成依赖"></a>集成依赖</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation &#x27;com.aliyun.ams:alicloud-android-push:3.1.2&#x27;</span><br></pre></td></tr></table></figure><h1 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化云推送通道</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initCloudChannel</span><span class="params">(Context applicationContext)</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//8.0</span></span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">        <span class="type">NotificationManager</span> <span class="variable">mNotificationManager</span> <span class="operator">=</span> (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">        <span class="comment">// 通知渠道的id</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="comment">// 用户可以看到的通知渠道的名字.</span></span><br><span class="line">        <span class="type">CharSequence</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;测试渠道名&quot;</span>;</span><br><span class="line">        <span class="comment">// 用户可以看到的通知渠道的描述</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;测试渠道描述&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">importance</span> <span class="operator">=</span> NotificationManager.IMPORTANCE_HIGH;</span><br><span class="line">        <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, importance);</span><br><span class="line">        mChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);</span><br><span class="line">        <span class="comment">// 配置通知渠道的属性</span></span><br><span class="line">        mChannel.setDescription(description);</span><br><span class="line">        <span class="comment">// 设置通知出现时的闪灯（如果 android 设备支持的话）</span></span><br><span class="line">        mChannel.enableLights(<span class="literal">true</span>);</span><br><span class="line">        mChannel.setLightColor(Color.RED);</span><br><span class="line">        mChannel.setSound(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_four), <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// 设置通知出现时的震动（如果 android 设备支持的话）</span></span><br><span class="line">        mChannel.enableVibration(<span class="literal">true</span>);</span><br><span class="line">        mChannel.setVibrationPattern(<span class="keyword">new</span> <span class="title class_">long</span>[]&#123;<span class="number">100</span>, <span class="number">200</span> , <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>&#125;);</span><br><span class="line">        <span class="comment">//最后在notificationmanager中创建该通知渠道</span></span><br><span class="line">        <span class="keyword">if</span> (mNotificationManager != <span class="literal">null</span>) &#123;</span><br><span class="line">            mNotificationManager.createNotificationChannel(mChannel);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    PushServiceFactory.init(applicationContext);</span><br><span class="line">    <span class="type">CloudPushService</span> <span class="variable">pushService</span> <span class="operator">=</span> PushServiceFactory.getCloudPushService();</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) &#123;</span><br><span class="line">        pushService.setNotificationSoundFilePath(Uri.parse(<span class="string">&quot;android.resource://&quot;</span> + BaseUtil.getPackageInfo(BaseUtil.getApp()).packageName + <span class="string">&quot;/&quot;</span> + R.raw.hint_four).toString());</span><br><span class="line">    &#125;</span><br><span class="line">    pushService.register(applicationContext, <span class="keyword">new</span> <span class="title class_">CommonCallback</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSuccess</span><span class="params">(String response)</span> &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;init cloudchannel success&quot;</span>);</span><br><span class="line">            pushService.turnOnPushChannel(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFailed</span><span class="params">(String errorCode, String errorMessage)</span> &#123;</span><br><span class="line">            Log.d(TAG, <span class="string">&quot;init cloudchannel failed -- errorcode:&quot;</span> + errorCode + <span class="string">&quot; -- errorMessage:&quot;</span> + errorMessage);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.app.appkey&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">&quot;你的appKey&quot;</span>/&gt;</span> <span class="comment">&lt;!-- 请填写你自己的- appKey --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.app.appsecret&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">&quot;你的appSecret&quot;</span>/&gt;</span> <span class="comment">&lt;!-- 请填写你自己的appSecret --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 消息接收监听器 （用户可自主扩展） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.common.receiver.MyMessageReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span>&gt;</span> <span class="comment">&lt;!-- 为保证receiver安全，建议设置不可导出，如需对其他应用开放可通过android：permission进行限制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.push2.action.NOTIFICATION_OPENED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.push2.action.NOTIFICATION_REMOVED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.alibaba.sdk.android.push.RECEIVE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMessageReceiver</span> <span class="keyword">extends</span> <span class="title class_">MessageReceiver</span> &#123;</span><br><span class="line">    <span class="comment">// 消息接收部分的LOG_TAG</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REC_TAG</span> <span class="operator">=</span> <span class="string">&quot;receiver&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNotification</span><span class="params">(Context context, String title, String summary, Map&lt;String, String&gt; extraMap)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 处理推送通知</span></span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;Receive notification, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap: &quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(Context context, CPushMessage cPushMessage)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onMessage, messageId: &quot;</span> + cPushMessage.getMessageId() + <span class="string">&quot;, title: &quot;</span> + cPushMessage.getTitle() + <span class="string">&quot;, content:&quot;</span> + cPushMessage.getContent());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNotificationOpened</span><span class="params">(Context context, String title, String summary, String extraMap)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationOpened, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationClickedWithNoAction</span><span class="params">(Context context, String title, String summary, String extraMap)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationClickedWithNoAction, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationReceivedInApp</span><span class="params">(Context context, String title, String summary, Map&lt;String, String&gt; extraMap, <span class="type">int</span> openType, String openActivity, String openUrl)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationReceivedInApp, title: &quot;</span> + title + <span class="string">&quot;, summary: &quot;</span> + summary + <span class="string">&quot;, extraMap:&quot;</span> + extraMap + <span class="string">&quot;, openType:&quot;</span> + openType + <span class="string">&quot;, openActivity:&quot;</span> + openActivity + <span class="string">&quot;, openUrl:&quot;</span> + openUrl);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNotificationRemoved</span><span class="params">(Context context, String messageId)</span> &#123;</span><br><span class="line">        Log.e(<span class="string">&quot;MyMessageReceiver&quot;</span>, <span class="string">&quot;onNotificationRemoved&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-发布library到jitpack并带注释</title>
      <link href="/2018/09/25/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%8F%91%E5%B8%83library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%B3%A8%E9%87%8A/"/>
      <url>/2018/09/25/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%8F%91%E5%B8%83library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%B3%A8%E9%87%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="在project的build-gralde中添加classpath"><a href="#在project的build-gralde中添加classpath" class="headerlink" title="在project的build.gralde中添加classpath"></a>在project的build.gralde中添加classpath</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">classpath &#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&#x27;</span><br></pre></td></tr></table></figure><blockquote><p>注意：如果没有加google()，必须加上这个，并且buildscript和allprojects都得加上。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &#x27;com.android.tools.build:gradle:3.1.2&#x27;</span><br><span class="line">        classpath &#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&#x27;</span><br><span class="line">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        // in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="在library的build-gradle中添加"><a href="#在library的build-gradle中添加" class="headerlink" title="在library的build.gradle中添加"></a>在library的build.gradle中添加</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#x27;com.github.dcendents.android-maven&#x27;</span><br><span class="line">  </span><br><span class="line">//&#123;github用户名&#125;改为自己github的用户名</span><br><span class="line">group=&#x27;com.github.&#123;github用户名&#125;&#x27;</span><br><span class="line">  </span><br><span class="line">//...</span><br><span class="line">  </span><br><span class="line">//添加下面这些才会有文档注释。</span><br><span class="line">  </span><br><span class="line">// build a jar with source files</span><br><span class="line">task sourcesJar(type: Jar) &#123;</span><br><span class="line">    from android.sourceSets.main.java.srcDirs</span><br><span class="line">    classifier = &#x27;sources&#x27;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">task javadoc(type: Javadoc) &#123;</span><br><span class="line">    failOnError  false</span><br><span class="line">    source = android.sourceSets.main.java.sourceFiles</span><br><span class="line">    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))</span><br><span class="line">    classpath += configurations.compile</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">// build a jar with javadoc</span><br><span class="line">task javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class="line">    classifier = &#x27;javadoc&#x27;</span><br><span class="line">    from javadoc.destinationDir</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives sourcesJar</span><br><span class="line">    archives javadocJar</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="提交代码到github"><a href="#提交代码到github" class="headerlink" title="提交代码到github"></a>提交代码到github</h1><h1 id="在github项目页面release一个新版本"><a href="#在github项目页面release一个新版本" class="headerlink" title="在github项目页面release一个新版本"></a>在github项目页面release一个新版本</h1><h1 id="访问jitpack官网查看"><a href="#访问jitpack官网查看" class="headerlink" title="访问jitpack官网查看"></a>访问jitpack官网查看</h1><p><a href="https://jitpack.io/">https://jitpack.io</a></p><h1 id="搜索框输入github项目地址"><a href="#搜索框输入github项目地址" class="headerlink" title="搜索框输入github项目地址"></a>搜索框输入github项目地址</h1><p>如： <a href="https://github.com/zhouzhuo810/Magpie">https://github.com/zhouzhuo810/Magpie</a></p><p>点击最新版的<code>get</code>按钮，即开始编译，编译成功即可使用。<br>使用方法该页面下方有。</p><h1 id="更多可参考官方demo"><a href="#更多可参考官方demo" class="headerlink" title="更多可参考官方demo"></a>更多可参考官方demo</h1><p><a href="https://github.com/jitpack/android-example">https://github.com/jitpack/android-example</a></p>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-购物车商品种类和商品列表联动效果</title>
      <link href="/2018/05/16/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%95%86%E5%93%81%E7%A7%8D%E7%B1%BB%E5%92%8C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E8%81%94%E5%8A%A8%E6%95%88%E6%9E%9C/"/>
      <url>/2018/05/16/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%95%86%E5%93%81%E7%A7%8D%E7%B1%BB%E5%92%8C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E8%81%94%E5%8A%A8%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><blockquote><p>基于BaseRecyclerViewAdapterHelper</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.30&#x27;</span><br></pre></td></tr></table></figure><h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/images/shop_car.gif"></p><span id="more"></span><h1 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.gftstore.entity;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.AbstractExpandableItem;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CateEntity</span> <span class="keyword">extends</span> <span class="title class_">AbstractExpandableItem</span>&lt;CateEntity.ContentEntity&gt; <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> choose;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> index;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ContentEntity&gt; contents;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.index = index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isChoose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> choose;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setChoose</span><span class="params">(<span class="type">boolean</span> choose)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.choose = choose;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> List&lt;ContentEntity&gt; <span class="title function_">getContents</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> contents;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContents</span><span class="params">(List&lt;ContentEntity&gt; contents)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.contents = contents;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLevel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ContentEntity</span> <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> String picUrl;</span><br><span class="line">        <span class="keyword">private</span> Float price;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> index;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getPicUrl</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> picUrl;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPicUrl</span><span class="params">(String picUrl)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.picUrl = picUrl;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> Float <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> price;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Float price)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.price = price;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.count = count;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="菜单adapter"><a href="#菜单adapter" class="headerlink" title="菜单adapter"></a>菜单adapter</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.TypedValue;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.entity.CateEntity;</span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> zhouzhuo810.me.zzandframe.ui.adapter.RvAutoBaseAdapter;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CateRvAdapter</span> <span class="keyword">extends</span> <span class="title class_">RvAutoBaseAdapter</span>&lt;CateEntity&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CateRvAdapter</span><span class="params">(Context context, List&lt;CateEntity&gt; data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, data);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">(<span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.rv_item_cate;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">fillData</span><span class="params">(ViewHolder holder, CateEntity item, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        holder.setText(R.id.tv_name, item.getName())</span><br><span class="line">                .setBackgroundRes(R.id.list_root, item.isChoose() ? R.color.colorWhite : R.color.colorBg)</span><br><span class="line">                .setTextColor(R.id.tv_name, item.isChoose() ? <span class="number">0xff000000</span> : <span class="number">0xff888888</span>)</span><br><span class="line">                .setGone(R.id.iv_icon, position != <span class="number">0</span>);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tvName</span> <span class="operator">=</span> holder.getView(R.id.tv_name);</span><br><span class="line">        <span class="keyword">if</span> (item.isChoose()) &#123;</span><br><span class="line">            tvName.setTextSize(TypedValue.COMPLEX_UNIT_PX, AutoUtils.getPercentWidthSize(<span class="number">41</span>));</span><br><span class="line">            tvName.requestLayout();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tvName.setTextSize(TypedValue.COMPLEX_UNIT_PX, AutoUtils.getPercentWidthSize(<span class="number">36</span>));</span><br><span class="line">            tvName.requestLayout();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSelection</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (CateEntity entity : getData()) &#123;</span><br><span class="line">                entity.setChoose(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            getData().get(position).setChoose(<span class="literal">true</span>);</span><br><span class="line">            notifyDataSetChanged();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="菜单点击监听"><a href="#菜单点击监听" class="headerlink" title="菜单点击监听"></a>菜单点击监听</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cateRvAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">RvAutoBaseAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cateRvAdapter.getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (CateEntity entity : cateRvAdapter.getData()) &#123;</span><br><span class="line">                entity.setChoose(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            cateRvAdapter.getData().get(position).setChoose(<span class="literal">true</span>);</span><br><span class="line">            cateRvAdapter.notifyDataSetChanged();</span><br><span class="line">  </span><br><span class="line">            ((LinearLayoutManager)rvContent.getLayoutManager()).scrollToPositionWithOffset(contentRvAdapter.getFirstPositionOfGroup(position), <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="菜单adapter-1"><a href="#菜单adapter-1" class="headerlink" title="菜单adapter"></a>菜单adapter</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseMultiItemQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.gftstore.entity.CateEntity;</span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/5/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContentRvAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseMultiItemQuickAdapter</span>&lt;MultiItemEntity, BaseViewHolder&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ContentRvAdapter</span><span class="params">(<span class="meta">@Nullable</span> List&lt;MultiItemEntity&gt; data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(data);</span><br><span class="line">        addItemType(<span class="number">0</span>, R.layout.rv_item_right_title);</span><br><span class="line">        addItemType(<span class="number">1</span>, R.layout.rv_item_right_content);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> BaseViewHolder <span class="title function_">createBaseViewHolder</span><span class="params">(ViewGroup parent, <span class="type">int</span> layoutResId)</span> &#123;</span><br><span class="line">        <span class="type">BaseViewHolder</span> <span class="variable">baseViewHolder</span> <span class="operator">=</span> <span class="built_in">super</span>.createBaseViewHolder(parent, layoutResId);</span><br><span class="line">        AutoUtils.auto(baseViewHolder.itemView);</span><br><span class="line">        baseViewHolder.setNestView(R.id.iv_dec);</span><br><span class="line">        baseViewHolder.setNestView(R.id.iv_add);</span><br><span class="line">        <span class="keyword">return</span> baseViewHolder;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(BaseViewHolder helper, MultiItemEntity item)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (helper.getItemViewType()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) item;</span><br><span class="line">                helper.setText(R.id.tv_title_name, cate.getName());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) item;</span><br><span class="line">                helper.setText(R.id.tv_goods_name, content.getName())</span><br><span class="line">                        .setText(R.id.tv_price, content.getPrice() + <span class="string">&quot;&quot;</span>)</span><br><span class="line">                        .setText(R.id.tv_shop_qty, content.getCount() + <span class="string">&quot;&quot;</span>)</span><br><span class="line">                        .setVisible(R.id.iv_dec, content.getCount() != <span class="number">0</span>)</span><br><span class="line">                        .setVisible(R.id.tv_shop_qty, content.getCount() != <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFirstPositionOfGroup</span><span class="params">(<span class="type">int</span> group)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            List&lt;MultiItemEntity&gt; data = getData();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.size(); i++) &#123;</span><br><span class="line">                <span class="type">MultiItemEntity</span> <span class="variable">multiItemEntity</span> <span class="operator">=</span> data.get(i);</span><br><span class="line">                <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity) &#123;</span><br><span class="line">                    <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) multiItemEntity;</span><br><span class="line">                    <span class="keyword">if</span> (cate.getIndex() == group) &#123;</span><br><span class="line">                        Log.e(<span class="string">&quot;TTT&quot;</span>, <span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">                        <span class="keyword">return</span> i;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGroupForPosition</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getData() != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">MultiItemEntity</span> <span class="variable">multiItemEntity</span> <span class="operator">=</span> getData().get(position);</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="keyword">return</span> content.getIndex();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">CateEntity</span> <span class="variable">cate</span> <span class="operator">=</span> (CateEntity) multiItemEntity;</span><br><span class="line">                <span class="keyword">return</span> cate.getIndex();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">countMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0f</span>;</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">float</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount() * content.getPrice();</span><br><span class="line">                count += v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount();</span><br><span class="line">                count += v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> List&lt;CateEntity.ContentEntity&gt; getCarShop() &#123;</span><br><span class="line">        List&lt;CateEntity.ContentEntity&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (MultiItemEntity multiItemEntity : getData()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (multiItemEntity <span class="keyword">instanceof</span> CateEntity.ContentEntity) &#123;</span><br><span class="line">                CateEntity.<span class="type">ContentEntity</span> <span class="variable">content</span> <span class="operator">=</span> (CateEntity.ContentEntity) multiItemEntity;</span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> content.getCount();</span><br><span class="line">                <span class="keyword">if</span> (v &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    list.add(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="内容滚动监听"><a href="#内容滚动监听" class="headerlink" title="内容滚动监听"></a>内容滚动监听</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rvContent.addOnScrollListener(<span class="keyword">new</span> <span class="title class_">RecyclerView</span>.OnScrollListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onScrolled</span><span class="params">(RecyclerView recyclerView, <span class="type">int</span> dx, <span class="type">int</span> dy)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onScrolled(recyclerView, dx, dy);</span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> (LinearLayoutManager) rvContent.getLayoutManager();</span><br><span class="line">        <span class="type">int</span> firstVisibleItemPosition=linearLayoutManager.findFirstVisibleItemPosition();<span class="comment">//可见范围内的第一项的位置</span></span><br><span class="line">        <span class="type">int</span> lastVisibleItemPosition=linearLayoutManager.findLastVisibleItemPosition();<span class="comment">//可见范围内的最后一项的位置</span></span><br><span class="line">        <span class="type">int</span> itemCount=linearLayoutManager.getItemCount();<span class="comment">//recyclerview中的item的所有的数目</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (firstVisibleItemPosition &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">group</span> <span class="operator">=</span> contentRvAdapter.getGroupForPosition(firstVisibleItemPosition);</span><br><span class="line">            cateRvAdapter.setSelection(group);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="数据模拟与填充"><a href="#数据模拟与填充" class="headerlink" title="数据模拟与填充"></a>数据模拟与填充</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭闪烁动画</span></span><br><span class="line">((SimpleItemAnimator) rvContent.getItemAnimator()).setSupportsChangeAnimations(<span class="literal">false</span>);</span><br><span class="line">((SimpleItemAnimator) rvShopCar.getItemAnimator()).setSupportsChangeAnimations(<span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">String[] names = &#123;</span><br><span class="line">        <span class="string">&quot;我的最爱&quot;</span>,</span><br><span class="line">        <span class="string">&quot;饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;饮料&quot;</span>,</span><br><span class="line">        <span class="string">&quot;方便面&quot;</span>,</span><br><span class="line">        <span class="string">&quot;水果&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">String[] shops = &#123;</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span>,</span><br><span class="line">        <span class="string">&quot;奥利奥夹心饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span>,</span><br><span class="line">        <span class="string">&quot;奥利奥夹心饼干&quot;</span>,</span><br><span class="line">        <span class="string">&quot;可口可乐330ml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Dole都乐菲律宾高地蕉&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">List&lt;CateEntity&gt; cates = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">    <span class="type">CateEntity</span> <span class="variable">entity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CateEntity</span>();</span><br><span class="line">    entity.setName(names[i]);</span><br><span class="line">    entity.setChoose(i == <span class="number">0</span>);</span><br><span class="line">    cates.add(entity);</span><br><span class="line">    List&lt;CateEntity.ContentEntity&gt; contents = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>; i1 &lt; shops.length; i1++) &#123;</span><br><span class="line">        CateEntity.<span class="type">ContentEntity</span> <span class="variable">contentEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CateEntity</span>.ContentEntity();</span><br><span class="line">        contentEntity.setName(shops[i1]);</span><br><span class="line">        contentEntity.setPrice(<span class="number">4f</span>);</span><br><span class="line">        contents.add(contentEntity);</span><br><span class="line">    &#125;</span><br><span class="line">    entity.setContents(contents);</span><br><span class="line">&#125;</span><br><span class="line">cateRvAdapter.updateAll(cates);</span><br><span class="line">  </span><br><span class="line">List&lt;MultiItemEntity&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cates.size(); i++) &#123;</span><br><span class="line">    <span class="type">CateEntity</span> <span class="variable">entity</span> <span class="operator">=</span> cates.get(i);</span><br><span class="line">    <span class="comment">//设置GroupPosition</span></span><br><span class="line">    entity.setIndex(i);</span><br><span class="line">    <span class="comment">//这个必须加！！！，不然刷新数据会重复添加。</span></span><br><span class="line">    <span class="keyword">if</span> (entity.getSubItems() != <span class="literal">null</span>) &#123;</span><br><span class="line">        entity.getSubItems().clear();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (entity.getContents() != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (CateEntity.ContentEntity contentEntity : entity.getContents()) &#123;</span><br><span class="line">            <span class="comment">//设置GroupPosition</span></span><br><span class="line">            contentEntity.setIndex(i);</span><br><span class="line">            entity.addSubItem(contentEntity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    list.add(entity);</span><br><span class="line">&#125;</span><br><span class="line">contentRvAdapter.setNewData(list);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cates.size(); i++) &#123;</span><br><span class="line">    <span class="comment">//注意！！！，这里如果adapter添加了n个header则i+n。</span></span><br><span class="line">    contentRvAdapter.collapse(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">contentRvAdapter.expandAll();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-使用javaemail发送邮件</title>
      <link href="/2018/05/11/JavaEE-%E4%BD%BF%E7%94%A8javaemail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"/>
      <url>/2018/05/11/JavaEE-%E4%BD%BF%E7%94%A8javaemail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="使用163邮箱发送邮件"><a href="#使用163邮箱发送邮件" class="headerlink" title="使用163邮箱发送邮件"></a>使用163邮箱发送邮件</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javamail;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.mail.Authenticator;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Message;</span><br><span class="line"><span class="keyword">import</span> javax.mail.MessagingException;</span><br><span class="line"><span class="keyword">import</span> javax.mail.PasswordAuthentication;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Session;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Transport;</span><br><span class="line"><span class="keyword">import</span> javax.mail.Message.RecipientType;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.AddressException;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mail163Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">//0.1 确定连接位置</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">//获取163邮箱smtp服务器的地址，</span></span><br><span class="line">        props.setProperty(<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.163.com&quot;</span>);</span><br><span class="line">        <span class="comment">//是否进行权限验证。</span></span><br><span class="line">        props.setProperty(<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//0.2确定权限（账号和密码）</span></span><br><span class="line">        <span class="type">Authenticator</span> <span class="variable">authenticator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Authenticator</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> PasswordAuthentication <span class="title function_">getPasswordAuthentication</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">//填写自己的163邮箱的登录帐号和授权密码，授权密码的获取，在后面会进行讲解。</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PasswordAuthentication</span>(<span class="string">&quot;163邮箱的帐号&quot;</span>,<span class="string">&quot;授权码&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//1 获得连接</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * props：包含配置信息的对象，Properties类型</span></span><br><span class="line"><span class="comment">         *         配置邮箱服务器地址、配置是否进行权限验证(帐号密码验证)等</span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * authenticator：确定权限(帐号和密码)        </span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * 所以就要在上面构建这两个对象。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> Session.getDefaultInstance(props, authenticator);</span><br><span class="line">  </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2 创建消息</span></span><br><span class="line">        <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessage</span>(session);</span><br><span class="line">        <span class="comment">// 2.1 发件人        xxx@163.com 我们自己的邮箱地址，就是名称</span></span><br><span class="line">        message.setFrom(<span class="keyword">new</span> <span class="title class_">InternetAddress</span>(<span class="string">&quot;xxx@163.com&quot;</span>));</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 2.2 收件人 </span></span><br><span class="line"><span class="comment">         *         第一个参数：</span></span><br><span class="line"><span class="comment">         *             RecipientType.TO    代表收件人 </span></span><br><span class="line"><span class="comment">         *             RecipientType.CC    抄送</span></span><br><span class="line"><span class="comment">         *             RecipientType.BCC    暗送</span></span><br><span class="line"><span class="comment">         *         比如A要给B发邮件，但是A觉得有必要给要让C也看看其内容，就在给B发邮件时，</span></span><br><span class="line"><span class="comment">         *         将邮件内容抄送给C，那么C也能看到其内容了，但是B也能知道A给C抄送过该封邮件</span></span><br><span class="line"><span class="comment">         *         而如果是暗送(密送)给C的话，那么B就不知道A给C发送过该封邮件。</span></span><br><span class="line"><span class="comment">         *     第二个参数</span></span><br><span class="line"><span class="comment">         *         收件人的地址，或者是一个Address[]，用来装抄送或者暗送人的名单。或者用来群发。可以是相同邮箱服务器的，也可以是不同的</span></span><br><span class="line"><span class="comment">         *         这里我们发送给我们的qq邮箱</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        message.setRecipient(RecipientType.TO, <span class="keyword">new</span> <span class="title class_">InternetAddress</span>(<span class="string">&quot;526745683@qq.com&quot;</span>));</span><br><span class="line">        <span class="comment">// 2.3 主题（标题）</span></span><br><span class="line">        message.setSubject(<span class="string">&quot;邮件的标题&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.4 正文</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;李四： &lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;您好，您在本论坛注册用户，点击下面url进行激活&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;http://ww......&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;如果不能点击，请复制直接激活&lt;br/&gt;&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;如果不是本人，请删除邮件&quot;</span>;</span><br><span class="line">        <span class="comment">//设置编码，防止发送的内容中文乱码。</span></span><br><span class="line">        message.setContent(str, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3发送消息</span></span><br><span class="line">        Transport.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-仿星空散点图</title>
      <link href="/2018/04/13/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-%E4%BB%BF%E6%98%9F%E7%A9%BA%E6%95%A3%E7%82%B9%E5%9B%BE/"/>
      <url>/2018/04/13/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-%E4%BB%BF%E6%98%9F%E7%A9%BA%E6%95%A3%E7%82%B9%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/images/starbglayout.png"></p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;StartBgView&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_bg_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_star_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sbv_star_qty&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.RequiresApi;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.zjkq.highnet_jt.R;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 仿星空背景</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/4/10.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StarBgView</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bgColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> starColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> starQty;</span><br><span class="line">    <span class="keyword">private</span> Paint starPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> hasInit;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> List&lt;StarData&gt; stars;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StarData</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> alpha;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> color;</span><br><span class="line">        <span class="keyword">private</span> RectF rect;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> RectF <span class="title function_">getRect</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> rect;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRect</span><span class="params">(RectF rect)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.rect = rect;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAlpha</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> alpha;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAlpha</span><span class="params">(<span class="type">int</span> alpha)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.alpha = alpha;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.x = x;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> y;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.y = y;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getColor</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> color;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(<span class="type">int</span> color)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.color = color;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StarBgView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (attrs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">TypedArray</span> <span class="variable">a</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.StarBgView);</span><br><span class="line">            bgColor = a.getColor(R.styleable.StarBgView_sbv_bg_color, <span class="number">0xff0a224a</span>);</span><br><span class="line">            starColor = a.getColor(R.styleable.StarBgView_sbv_star_color, <span class="number">0xffffffff</span>);</span><br><span class="line">            starQty = a.getInteger(R.styleable.StarBgView_sbv_star_qty, <span class="number">50</span>);</span><br><span class="line">            a.recycle();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            bgColor = <span class="number">0xff0a224a</span>;</span><br><span class="line">            starColor = <span class="number">0xffffffff</span>;</span><br><span class="line">            starQty = <span class="number">50</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        initPaint();</span><br><span class="line">        setBackgroundColor(bgColor);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">generateStarData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stars != <span class="literal">null</span>) &#123;</span><br><span class="line">            stars.clear();</span><br><span class="line">            stars = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        stars = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; starQty; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> getRandomX();</span><br><span class="line">            <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> getRandomY();</span><br><span class="line">            <span class="type">int</span> <span class="variable">alpha</span> <span class="operator">=</span> getRandomAlpha();</span><br><span class="line">            <span class="type">StarData</span> <span class="variable">starData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StarData</span>();</span><br><span class="line">            starData.setX(x);</span><br><span class="line">            starData.setY(y);</span><br><span class="line">            starData.setAlpha(alpha);</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                starData.setRect(<span class="keyword">new</span> <span class="title class_">RectF</span>(x, y, x + <span class="number">1</span>, y + <span class="number">2</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                starData.setRect(<span class="keyword">new</span> <span class="title class_">RectF</span>(x, y, x + <span class="number">2</span>, y + <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//            starData.setColor();</span></span><br><span class="line">            stars.add(starData);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomAlpha</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (<span class="number">255</span> * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (getWidth() * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (getHeight() * Math.random() + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawStar</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (stars != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (StarData star : stars) &#123;</span><br><span class="line">                starPaint.setAlpha(star.getAlpha());</span><br><span class="line">                canvas.drawRoundRect(star.getRect(), <span class="number">1</span>, <span class="number">1</span>, starPaint);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">        <span class="keyword">if</span> (stars == <span class="literal">null</span>) &#123;</span><br><span class="line">            generateStarData();</span><br><span class="line">        &#125;</span><br><span class="line">        drawStar(canvas);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initPaint</span><span class="params">()</span> &#123;</span><br><span class="line">        starPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        starPaint.setColor(starColor);</span><br><span class="line">        starPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        starPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">        starPaint.setStrokeWidth(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-自定义RecyclerView的LayoutManager</title>
      <link href="/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89RecyclerView%E7%9A%84LayoutManager/"/>
      <url>/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89RecyclerView%E7%9A%84LayoutManager/</url>
      
        <content type="html"><![CDATA[<h1 id="禁用RecyclerView手动滑动功能；"><a href="#禁用RecyclerView手动滑动功能；" class="headerlink" title="禁用RecyclerView手动滑动功能；"></a>禁用RecyclerView手动滑动功能；</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PlanDateRecyclerView</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanDateRecyclerView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyle)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyle);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        setOnTouchListener(<span class="keyword">new</span> <span class="title class_">OnTouchListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouch</span><span class="params">(View v, MotionEvent event)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/4/12.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PlanCalendarLayoutManager</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.LayoutManager &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalWidth;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalHeight;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> verticalScrollOffset;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> horizontalScrollOffset;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> List&lt;PlanOrderEntity&gt; frames;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> todayX;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlanCalendarLayoutManager</span><span class="params">(Context ctx, List&lt;PlanOrderEntity&gt; frames, <span class="type">int</span> todayX)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.frames = frames;</span><br><span class="line">        <span class="built_in">this</span>.todayX = todayX;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> RecyclerView.LayoutParams <span class="title function_">generateDefaultLayoutParams</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RecyclerView</span>.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLayoutChildren</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (getItemCount() &lt;= <span class="number">0</span> || state.isPreLayout()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        detachAndScrapAttachedViews(recycler);</span><br><span class="line">        fill(recycler, state);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">itemCount</span> <span class="operator">=</span> state.getItemCount();</span><br><span class="line">        <span class="keyword">if</span> (itemCount &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (frames != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Math.min(getItemCount(), frames.size());</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">                <span class="type">Rect</span> <span class="variable">rect</span> <span class="operator">=</span> frames.get(i).getRect();</span><br><span class="line">                totalHeight = Math.max(rect.bottom, totalHeight);</span><br><span class="line">                totalWidth = Math.max(rect.right, totalWidth);</span><br><span class="line">                <span class="type">View</span> <span class="variable">viewForPosition</span> <span class="operator">=</span> recycler.getViewForPosition(i);</span><br><span class="line">                <span class="keyword">if</span> (viewForPosition <span class="keyword">instanceof</span> ViewGroup) &#123;</span><br><span class="line">                    ViewGroup.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> viewForPosition.getLayoutParams();</span><br><span class="line">                &#125;</span><br><span class="line">                addView(viewForPosition);</span><br><span class="line">                measureChildWithMargins(viewForPosition, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                layoutDecoratedWithMargins(viewForPosition, rect.left, rect.top, rect.right, rect.bottom);</span><br><span class="line">            &#125;</span><br><span class="line">            totalHeight = Math.max(totalHeight, getHeight());</span><br><span class="line">            totalWidth = Math.max(totalWidth, getWidth());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTodayX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todayX - horizontalScrollOffset;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canScrollVertically</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canScrollHorizontally</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scrollHorizontallyBy</span><span class="params">(<span class="type">int</span> dx, RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">travelX</span> <span class="operator">=</span> dx;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//如果滑动到最左边</span></span><br><span class="line">        <span class="keyword">if</span> (horizontalScrollOffset + dx &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            travelX = -horizontalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (horizontalScrollOffset + dx &gt; totalWidth - getHorizontalSpace()) &#123;<span class="comment">//如果滑动到最右边</span></span><br><span class="line">            travelX = totalWidth - getHorizontalSpace() - horizontalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//将水平方向的偏移量+travel</span></span><br><span class="line">        horizontalScrollOffset += travelX;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 调用该方法通知view在y方向上移动指定距离</span></span><br><span class="line">        offsetChildrenHorizontal(-travelX);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> travelX;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalWidth</span><span class="params">(<span class="type">int</span> totalWidth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalWidth = totalWidth;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scrollVerticallyBy</span><span class="params">(<span class="type">int</span> dy, RecyclerView.Recycler recycler, RecyclerView.State state)</span> &#123;</span><br><span class="line">        <span class="comment">//列表向下滚动dy为正，列表向上滚动dy为负，这点与Android坐标系保持一致。</span></span><br><span class="line">        <span class="comment">//实际要滑动的距离</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">travel</span> <span class="operator">=</span> dy;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//如果滑动到最顶部</span></span><br><span class="line">        <span class="keyword">if</span> (verticalScrollOffset + dy &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            travel = -verticalScrollOffset;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (verticalScrollOffset + dy &gt; totalHeight - getVerticalSpace()) &#123;<span class="comment">//如果滑动到最底部</span></span><br><span class="line">            travel = totalHeight - getVerticalSpace() - verticalScrollOffset;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//将竖直方向的偏移量+travel</span></span><br><span class="line">        verticalScrollOffset += travel;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 调用该方法通知view在y方向上移动指定距离</span></span><br><span class="line">        offsetChildrenVertical(-travel);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> travel;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getVerticalSpace</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//计算RecyclerView的可用高度，除去上下Padding值</span></span><br><span class="line">        <span class="keyword">return</span> getHeight() - getPaddingBottom() - getPaddingTop();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHorizontalSpace</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getWidth() - getPaddingLeft() - getPaddingRight();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalWidth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalWidth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="双RecyclerView滑动绑定功能实现"><a href="#双RecyclerView滑动绑定功能实现" class="headerlink" title="双RecyclerView滑动绑定功能实现"></a>双RecyclerView滑动绑定功能实现</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rv.addOnScrollListener(new RecyclerView.OnScrollListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123;</span><br><span class="line">        rvDate.scrollBy(dx, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂证-解决ViewPager和Fragment中水平滑动控件冲突问题</title>
      <link href="/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E8%AF%81-%E8%A7%A3%E5%86%B3ViewPager%E5%92%8CFragment%E4%B8%AD%E6%B0%B4%E5%B9%B3%E6%BB%91%E5%8A%A8%E6%8E%A7%E4%BB%B6%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/"/>
      <url>/2018/04/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E8%AF%81-%E8%A7%A3%E5%86%B3ViewPager%E5%92%8CFragment%E4%B8%AD%E6%B0%B4%E5%B9%B3%E6%BB%91%E5%8A%A8%E6%8E%A7%E4%BB%B6%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="终极解决方案"><a href="#终极解决方案" class="headerlink" title="终极解决方案"></a>终极解决方案</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> zhouzhuo810.me.zzandframe.ui.widget.ZzViewPager;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/4/11.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoConflictViewPager</span> <span class="keyword">extends</span> <span class="title class_">ZzViewPager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoConflictViewPager</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoConflictViewPager</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">canScroll</span><span class="params">(View v, <span class="type">boolean</span> checkV, <span class="type">int</span> dx, <span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="comment">//这里添加冲突的控件类型</span></span><br><span class="line">        <span class="keyword">if</span> (v <span class="keyword">instanceof</span> PickerView) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.canScroll(v, checkV, dx, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-再按一次退出App</title>
      <link href="/2018/04/13/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%86%8D%E6%8C%89%E4%B8%80%E6%AC%A1%E9%80%80%E5%87%BAApp/"/>
      <url>/2018/04/13/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%86%8D%E6%8C%89%E4%B8%80%E6%AC%A1%E9%80%80%E5%87%BAApp/</url>
      
        <content type="html"><![CDATA[<h1 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBackPressed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isExit) &#123;</span><br><span class="line">        finish();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        isExit = <span class="literal">true</span>;</span><br><span class="line">        ToastUtils.showCustomBgToast(getString(R.string.press_angin_exit_text));</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Timer</span>().schedule(<span class="keyword">new</span> <span class="title class_">TimerTask</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                isExit = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-渐变背景色shape</title>
      <link href="/2018/04/09/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%B8%90%E5%8F%98%E8%83%8C%E6%99%AF%E8%89%B2shape/"/>
      <url>/2018/04/09/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%B8%90%E5%8F%98%E8%83%8C%E6%99%AF%E8%89%B2shape/</url>
      
        <content type="html"><![CDATA[<h1 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:angle</span>=<span class="string">&quot;90&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:endColor</span>=<span class="string">&quot;#3A559B&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startColor</span>=<span class="string">&quot;#5c7bbb&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-8.0新特性-服务启动问题</title>
      <link href="/2018/04/02/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2018/04/02/Android-8.0%E6%96%B0%E7%89%B9%E6%80%A7-%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><ul><li>Android 8.0 启动后台service 出错 IllegalStateException: Not allowed to start service Intent</li></ul><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><ul><li>极光推送老版本sdk启动推送服务未兼容8.0才出现的问题；</li></ul><blockquote><p>Android O对应用在后台运行时可以执行的操作施加了限制，称为后台执行限制（Background Execution Limits），这可以大大减少应用的内存使用和耗电量，提高用户体验。后台执行限制分为两个部分：后台服务限制（Background Service Limitations）、广播限&gt; 制（BroadcastLimitations）。</p></blockquote><span id="more"></span><h1 id="本案例解决方式"><a href="#本案例解决方式" class="headerlink" title="本案例解决方式"></a>本案例解决方式</h1><ul><li>更新极光推送sdk就好了。</li></ul><h1 id="其他解决方式"><a href="#其他解决方式" class="headerlink" title="其他解决方式"></a>其他解决方式</h1><blockquote><p>如果自己启动服务遇到此问题，可以这样解决</p></blockquote><ul><li><ol><li>修改启动方式</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">    context.startForegroundService(intent);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    context.startService(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><ol start="2"><li>并且在service里再调用startForeground方法，不然就会出现ANR</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">context.startForeground(SERVICE_ID, builder.getNotification());</span><br><span class="line">\</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android版本特性 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-自定义View和ViewGroup</title>
      <link href="/2018/03/20/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%87%AA%E5%AE%9A%E4%B9%89View%E5%92%8CViewGroup/"/>
      <url>/2018/03/20/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E8%87%AA%E5%AE%9A%E4%B9%89View%E5%92%8CViewGroup/</url>
      
        <content type="html"><![CDATA[<h1 id="一、自定义View"><a href="#一、自定义View" class="headerlink" title="一、自定义View"></a>一、自定义View</h1><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><ul><li>以ZzHorizontalProgressBar为例</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//attrs.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;ZzHorizontalProgressBar&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--大小--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_padding&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--颜色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_bg_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_pb_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_second_pb_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--整数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_max&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_progress&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_second_progress&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--布尔--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_show_second_progress&quot;</span> <span class="attr">format</span>=<span class="string">&quot;boolean&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--枚举--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;zpb_show_second_point_shape&quot;</span> <span class="attr">format</span>=<span class="string">&quot;enum&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enum</span> <span class="attr">name</span>=<span class="string">&quot;point&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enum</span> <span class="attr">name</span>=<span class="string">&quot;line&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TypedArray</span> <span class="variable">a</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.SomeWidgetName);</span><br><span class="line"><span class="comment">//整数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a.getInteger(R.styleable.ZzHorizontalProgressBar_zpb_max, <span class="number">100</span>);</span><br><span class="line"><span class="comment">//颜色</span></span><br><span class="line"><span class="type">int</span> <span class="variable">bgColor</span> <span class="operator">=</span> a.getColor(R.styleable.ZzHorizontalProgressBar_zpb_bg_color, <span class="number">0xff3F51B5</span>);</span><br><span class="line"><span class="comment">//尺寸大小</span></span><br><span class="line"><span class="type">int</span> <span class="variable">padding</span> <span class="operator">=</span> a.getDimensionPixelSize(R.styleable.ZzHorizontalProgressBar_zpb_padding, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//布尔类型</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">showSecondProgress</span> <span class="operator">=</span> a.getBoolean(R.styleable.ZzHorizontalProgressBar_zpb_show_second_progress, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">//枚举</span></span><br><span class="line"><span class="type">int</span> <span class="variable">secondProgressShape</span> <span class="operator">=</span> a.getInteger(R.styleable.ZzHorizontalProgressBar_zpb_show_second_point_shape, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//... ...</span></span><br><span class="line">a.recycle();</span><br></pre></td></tr></table></figure><h2 id="Paint相关"><a href="#Paint相关" class="headerlink" title="Paint相关"></a>Paint相关</h2><h3 id="设置文字大小"><a href="#设置文字大小" class="headerlink" title="设置文字大小"></a>设置文字大小</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setTextSize(AutoUtils.getPercentWidthSize(20));</span><br></pre></td></tr></table></figure><h3 id="获取文字宽度"><a href="#获取文字宽度" class="headerlink" title="获取文字宽度"></a>获取文字宽度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float textWidth = mPaint.measureText(text);</span><br></pre></td></tr></table></figure><h3 id="获取文字高度"><a href="#获取文字高度" class="headerlink" title="获取文字高度"></a>获取文字高度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float textHeight = mPaint.descent() - mPaint.ascent();</span><br></pre></td></tr></table></figure><h3 id="获取文字基线"><a href="#获取文字基线" class="headerlink" title="获取文字基线"></a>获取文字基线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//posX 和 posY 为文字的左上角的坐标</span><br><span class="line">Paint.FontMetrics metrics = new Paint.FontMetrics();</span><br><span class="line">mPaint.getFontMetrics(metrics);</span><br><span class="line">float baseLineY = posY - metrics.top;</span><br><span class="line">//... ...</span><br><span class="line">canvas.drawText(textTop, posX, baseLineY, mPaint);</span><br></pre></td></tr></table></figure><h3 id="透明度"><a href="#透明度" class="headerlink" title="透明度"></a>透明度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setAlpha(255); //0~255</span><br></pre></td></tr></table></figure><h3 id="抗锯齿"><a href="#抗锯齿" class="headerlink" title="抗锯齿"></a>抗锯齿</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setAntiAlias(true);</span><br></pre></td></tr></table></figure><h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setColor(Color.WHITE);</span><br></pre></td></tr></table></figure><h3 id="填充样式"><a href="#填充样式" class="headerlink" title="填充样式"></a>填充样式</h3><blockquote><p>填充</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setStyle(Paint.Style.FILL);</span><br></pre></td></tr></table></figure><blockquote><p>边框</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setStyle(Paint.Style.STROKE);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.setStyle(Paint.Style.FILL_AND_STROKE);</span><br></pre></td></tr></table></figure><h3 id="渐变色"><a href="#渐变色" class="headerlink" title="渐变色"></a>渐变色</h3><h4 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以画渐变进度条为例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">progressWidth</span> <span class="operator">=</span> width - padding * <span class="number">2</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">mDx</span> <span class="operator">=</span> progressWidth * percent;</span><br><span class="line"><span class="type">int</span> colors[] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line"><span class="type">float</span> positions[] = <span class="keyword">new</span> <span class="title class_">float</span>[<span class="number">2</span>];</span><br><span class="line"><span class="comment">//渐变开始颜色</span></span><br><span class="line">colors[<span class="number">0</span>] = gradientFrom;</span><br><span class="line">positions[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//渐变结束颜色</span></span><br><span class="line">colors[<span class="number">1</span>] = gradientTo;</span><br><span class="line">positions[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="type">LinearGradient</span> <span class="variable">shader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearGradient</span>(</span><br><span class="line">        padding + progressHeight / <span class="number">2</span>, padding, padding + progressHeight / <span class="number">2</span> + mDx, padding + progressHeight,</span><br><span class="line">        colors,</span><br><span class="line">        positions,</span><br><span class="line">        Shader.TileMode.MIRROR);</span><br><span class="line"><span class="comment">//gradient</span></span><br><span class="line">mPaint.setShader(shader);</span><br></pre></td></tr></table></figure><blockquote><p>LinearGradient构造方法说明</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public LinearGradient(float x0, float y0,float x1, float y1, int colors[], float positions[],TileMode tile)&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>x0 渐变线起点的x坐标</li><li>y0 渐变线起点的y坐标</li><li>x1 渐变线结束处的x坐标</li><li>y1 渐变线结束处的y坐标</li><li>colors 沿渐变线分布的颜色</li><li>positions 可能为null,颜色数组中每个对应颜色的相对位置[0..1]。如果它为空，则颜色沿梯度线均匀分布</li><li>tile 着色器平铺模式</li></ul><h4 id="弧形渐变"><a href="#弧形渐变" class="headerlink" title="弧形渐变"></a>弧形渐变</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SweepGradient shader = new SweepGradient(getWidth() / 2, getHeight() / 2, startProgressColor, endProgressColor);</span><br><span class="line">//gradient</span><br><span class="line">progressPaint.setShader(shader);</span><br></pre></td></tr></table></figure><h4 id="SweepGradient构造方法说明"><a href="#SweepGradient构造方法说明" class="headerlink" title="SweepGradient构造方法说明"></a>SweepGradient构造方法说明</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public SweepGradient(float cx, float cy, @ColorInt int color0, @ColorInt int color1) &#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>cx 中心的x坐标</li><li>cy 中心的y坐标</li><li>color0 在扫描开始时使用的颜色</li><li>color1 扫描结束时使用的颜色</li></ul><h2 id="Canvas相关"><a href="#Canvas相关" class="headerlink" title="Canvas相关"></a>Canvas相关</h2><h3 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">canvas.drawText(textTop, posX, baseLineY, mPaint);</span><br></pre></td></tr></table></figure><blockquote><p>方法说明</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void drawText(@NonNull String text, float x, float y, @NonNull Paint paint)&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>text 要绘制的文本</li><li>x 正在绘制的文本原点的x坐标</li><li>y 正在绘制的文本的基线的y坐标，注意是baseLine的坐标</li><li>paint 用于绘制文本的画笔</li></ul><h3 id="圆形"><a href="#圆形" class="headerlink" title="圆形"></a>圆形</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//设置实心</span><br><span class="line">mPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">canvas.drawCircle(padding + s_progressHeight / 2, padding + s_progressHeight / 2, s_progressHeight / 2, mPaint);</span><br></pre></td></tr></table></figure><h3 id="圆环"><a href="#圆环" class="headerlink" title="圆环"></a>圆环</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//设置空心</span><br><span class="line">mPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">//设置环厚</span><br><span class="line">mPaint.setStrokeWidth(10f);</span><br><span class="line">canvas.drawCircle(padding + s_progressHeight / 2, padding + s_progressHeight / 2, s_progressHeight / 2, mPaint);</span><br></pre></td></tr></table></figure><blockquote><p>方法说明</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void drawCircle(float cx, float cy, float radius, @NonNull Paint paint)&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>cx 要绘制的圆的中心的x坐标</li><li>cy 要绘制的圆的中心的y坐标</li><li>radius 要绘制的圆的半径</li><li>paint 用于绘制圆的画笔</li></ul><h3 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h3><h3 id="圆角矩形"><a href="#圆角矩形" class="headerlink" title="圆角矩形"></a>圆角矩形</h3><h3 id="扇形"><a href="#扇形" class="headerlink" title="扇形"></a>扇形</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">canvas.drawArc(outRect, mData.getStartAngle(), mData.getSwipeAngle(), true, mPaint);</span><br></pre></td></tr></table></figure><blockquote><p>方法说明</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void drawArc(@NonNull RectF oval, float startAngle, float sweepAngle, boolean useCenter, @NonNull Paint paint)&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>oval 椭圆的边界用于定义弧的形状和大小</li><li>startAngle 圆弧开始的起始角度（以度为单位）</li><li>sweepAngle 扫描角度（以度为单位）顺时针测量</li><li>useCenter 如果为true，则将椭圆的中心包含在弧中，如果为false，则将其关闭。这将画一个楔子</li><li>paint 用于绘制弧线的画笔</li></ul><h3 id="贝塞尔曲线"><a href="#贝塞尔曲线" class="headerlink" title="贝塞尔曲线"></a>贝塞尔曲线</h3><h3 id="直线"><a href="#直线" class="headerlink" title="直线"></a>直线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//垂直直线</span><br><span class="line">canvas.drawLine(x, 0, x, getHeight(), paint);</span><br><span class="line">//水平直线</span><br><span class="line">canvas.drawLine(0, y, getWidth(), y, paint);</span><br></pre></td></tr></table></figure><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><h3 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Path path = new Path();</span><br><span class="line">path.moveTo(centerX, AutoUtils.getPercentHeightSize(20));// 此点为多边形的起点</span><br><span class="line">path.lineTo(centerX-AutoUtils.getPercentWidthSize(30), 0);</span><br><span class="line">path.lineTo(centerX+AutoUtils.getPercentWidthSize(30), 0);</span><br><span class="line">path.close(); // 使这些点构成封闭的多边形</span><br><span class="line">c.drawPath(path, paint);</span><br></pre></td></tr></table></figure><h3 id="五角星"><a href="#五角星" class="headerlink" title="五角星"></a>五角星</h3><h3 id="网格"><a href="#网格" class="headerlink" title="网格"></a>网格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">private void drawGrid(Canvas canvas) &#123;</span><br><span class="line">    int width = getWidth();</span><br><span class="line">    int height = getHeight();</span><br><span class="line">    int rectWidth = width / totalColumn;</span><br><span class="line">    int rectHeight = height / totalRow;</span><br><span class="line">  </span><br><span class="line">    int posY = 1;</span><br><span class="line">    canvas.drawLine(0, posY, getWidth(), posY, gridPaint);</span><br><span class="line">    for (int i = 1; i &lt;= totalRow; i++) &#123;</span><br><span class="line">        posY = i * rectHeight;</span><br><span class="line">        canvas.drawLine(0, posY, getWidth(), posY, gridPaint);</span><br><span class="line">    &#125;</span><br><span class="line">    int posX = 1;</span><br><span class="line">    canvas.drawLine(posX, 0, posX, getHeight(), gridPaint);</span><br><span class="line">    for (int i = 1; i &lt;= totalColumn; i++) &#123;</span><br><span class="line">        posX = i * rectWidth;</span><br><span class="line">        canvas.drawLine(posX, 0, posX, getHeight(), gridPaint);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><h1 id="二、自定义ViewGroup"><a href="#二、自定义ViewGroup" class="headerlink" title="二、自定义ViewGroup"></a>二、自定义ViewGroup</h1><h2 id="onLayout"><a href="#onLayout" class="headerlink" title="onLayout"></a>onLayout</h2>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-TV开发-使用OkHttp定时请求网络数据不刷新问题</title>
      <link href="/2018/03/15/Android-TV%E5%BC%80%E5%8F%91-%E4%BD%BF%E7%94%A8OkHttp%E5%AE%9A%E6%97%B6%E8%AF%B7%E6%B1%82%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%88%B7%E6%96%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2018/03/15/Android-TV%E5%BC%80%E5%8F%91-%E4%BD%BF%E7%94%A8OkHttp%E5%AE%9A%E6%97%B6%E8%AF%B7%E6%B1%82%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%88%B7%E6%96%B0%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><ul><li>电视APP某个页面需要每隔若干秒刷新一次数据；</li><li>但是，刷新一定时间后数据不更新了，电视网络没问题；</li><li>并且，使用电视的清理APP缓存功能后，会刷新；</li><li>而且，隔一段时间后又出现此问题了。</li></ul><span id="more"></span><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> KqApi <span class="title function_">getDefaultApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">serverIp</span> <span class="operator">=</span> KqSharedUtil.getServerIp();</span><br><span class="line">        <span class="keyword">if</span> (api0 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Api.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (api0 == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="type">File</span> <span class="variable">cache</span> <span class="operator">=</span> KqApplication.getINSTANCE().getCacheDir();</span><br><span class="line"><span class="comment">/*                    HttpLoggingInterceptor logging = new HttpLoggingInterceptor();</span></span><br><span class="line"><span class="comment">                    logging.setLevel(HttpLoggingInterceptor.Level.BASIC);</span></span><br><span class="line"><span class="comment">                    HttpLoggingInterceptor logging1 = new HttpLoggingInterceptor();</span></span><br><span class="line"><span class="comment">                    logging1.setLevel(HttpLoggingInterceptor.Level.BODY);*/</span></span><br><span class="line">                    <span class="type">OkHttpClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OkHttpClient</span>.Builder()</span><br><span class="line">                            .cache(<span class="keyword">new</span> <span class="title class_">Cache</span>(cache, <span class="number">1024</span>))</span><br><span class="line">                            .readTimeout(<span class="number">20</span>, TimeUnit.SECONDS)</span><br><span class="line">                            .writeTimeout(<span class="number">20</span>, TimeUnit.SECONDS)</span><br><span class="line">                            .connectTimeout(<span class="number">10</span>, TimeUnit.SECONDS)</span><br><span class="line">                            <span class="comment">//！！！关键代码，强制不使用缓存</span></span><br><span class="line">                            .addNetworkInterceptor(<span class="keyword">new</span> <span class="title class_">Interceptor</span>() &#123;</span><br><span class="line">                                <span class="meta">@Override</span></span><br><span class="line">                                <span class="keyword">public</span> Response <span class="title function_">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                                    <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> chain.request().newBuilder()</span><br><span class="line">                                            .cacheControl(<span class="keyword">new</span> <span class="title class_">CacheControl</span>.Builder().noCache().build())</span><br><span class="line">                                            .build();</span><br><span class="line">                                    <span class="keyword">return</span> chain.proceed(request);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;)</span><br><span class="line"><span class="comment">//                            .addInterceptor(logging)</span></span><br><span class="line"><span class="comment">//                            .addInterceptor(logging1)</span></span><br><span class="line">                            .build();</span><br><span class="line">                    <span class="type">Retrofit</span> <span class="variable">retrofit</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Retrofit</span>.Builder()</span><br><span class="line">                            .client(client)</span><br><span class="line">                            .addConverterFactory(GsonConverterFactory.create())<span class="comment">//添加 json 转换器</span></span><br><span class="line">                            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())<span class="comment">//添加 RxJava 适配器</span></span><br><span class="line">                            .baseUrl(serverIp)</span><br><span class="line">                            .build();</span><br><span class="line">                    api0 = retrofit.create(KqApi.class);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> api0;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="依赖说明"><a href="#依赖说明" class="headerlink" title="依赖说明"></a>依赖说明</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//retrofit</span><br><span class="line">compile &#x27;com.squareup.retrofit2:retrofit:2.1.0&#x27;</span><br><span class="line">//gson</span><br><span class="line">compile &#x27;com.squareup.retrofit2:converter-gson:2.1.0&#x27;</span><br><span class="line">//rxjava</span><br><span class="line">compile &#x27;io.reactivex:rxjava:1.1.9&#x27;</span><br><span class="line">compile &#x27;io.reactivex:rxandroid:1.2.1&#x27;</span><br><span class="line">compile &#x27;com.squareup.retrofit2:adapter-rxjava:2.1.0&#x27;</span><br><span class="line">//okhttp</span><br><span class="line">compile &#x27;com.squareup.okhttp3:okhttp:3.4.1&#x27;</span><br><span class="line">compile &#x27;com.squareup.okhttp3:okhttp-urlconnection:3.4.1&#x27;</span><br><span class="line">compile &#x27;com.squareup.okhttp3:logging-interceptor:3.4.1&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android-TV开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-TV开发-RecyclerView刷新焦点丢失以及局部刷新问题</title>
      <link href="/2018/03/15/Android-TV%E5%BC%80%E5%8F%91-RecyclerView%E5%88%B7%E6%96%B0%E7%84%A6%E7%82%B9%E4%B8%A2%E5%A4%B1%E4%BB%A5%E5%8F%8A%E5%B1%80%E9%83%A8%E5%88%B7%E6%96%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2018/03/15/Android-TV%E5%BC%80%E5%8F%91-RecyclerView%E5%88%B7%E6%96%B0%E7%84%A6%E7%82%B9%E4%B8%A2%E5%A4%B1%E4%BB%A5%E5%8F%8A%E5%B1%80%E9%83%A8%E5%88%B7%E6%96%B0%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h2><blockquote><p>使用GridLayoutManager时，多选的情况下，点击item刷新后，焦点被抢问题；</p></blockquote><ul><li>解决方式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">holder.setText(R.id.tv_name, data.get(position).getcName())</span><br><span class="line">        .setChecked(R.id.cb_choose, data.get(position).isChoosed())</span><br><span class="line">        .setOnClickListener(R.id.ll_cb, new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                data.get(position).setChoosed(!data.get(position).isChoosed());</span><br><span class="line">                notifyItemChanged(position); //关键代码</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h2><blockquote><p>在问题1解决后，手机上没问题，电视上会出现牵连闪烁问题，就是点击某一行的某一个item，该行最左边一个item也会跟着闪烁一下；</p></blockquote><ul><li>解决方式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//关闭闪烁动画</span><br><span class="line">((SimpleItemAnimator)rv.getItemAnimator()).setSupportsChangeAnimations(false);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android-TV开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-横竖屏切换</title>
      <link href="/2018/02/26/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2/"/>
      <url>/2018/02/26/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="自动切换"><a href="#自动切换" class="headerlink" title="自动切换"></a>自动切换</h1><ul><li>Android Manifest在需要切换的Activity中添加</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:configChanges=&quot;orientation|keyboardHidden|layoutDirection|screenSize|screenLayout&quot;</span><br><span class="line">android:screenOrientation=&quot;sensor&quot;</span><br></pre></td></tr></table></figure><ul><li><p>res添加layout-land和layout-port文件夹，分别放两套布局。</p></li><li><p>Activity代码中实现</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">    <span class="keyword">if</span>(newConfig.orientation == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT)&#123;</span><br><span class="line">        <span class="comment">//切换到竖屏</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//切换到横屏</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="手动切换"><a href="#手动切换" class="headerlink" title="手动切换"></a>手动切换</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">findViewById(R.id.btn_click).setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;  </span><br><span class="line">  <span class="meta">@Override</span> </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;   </span><br><span class="line">      <span class="comment">//判断当前屏幕方向  </span></span><br><span class="line">      <span class="keyword">if</span>(getRequestedOrientation() == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) &#123;     </span><br><span class="line">       <span class="comment">//切换竖屏   </span></span><br><span class="line">         MainActivity.<span class="built_in">this</span>.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);   </span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;   </span><br><span class="line">         <span class="comment">//切换横屏     </span></span><br><span class="line">         MainActivity.<span class="built_in">this</span>.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);  </span><br><span class="line">      &#125; </span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><blockquote><p>配置<code>android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;</code>，才不会销毁 activity，且只调用<code>onConfigurationChanged</code>方法。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-7.0系统PopupWindow#showAsDropDown()显示异常</title>
      <link href="/2018/02/09/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-7.0%E7%B3%BB%E7%BB%9FPopupWindow#showAsDropDown()%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8/"/>
      <url>/2018/02/09/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-7.0%E7%B3%BB%E7%BB%9FPopupWindow#showAsDropDown()%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">PopupWindow</span> <span class="variable">popupWindow</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PopupWindow</span>(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</span><br><span class="line"><span class="comment">//... ...</span></span><br><span class="line">popupWindow.showAsDropDown(anchor);</span><br></pre></td></tr></table></figure><blockquote><p>上述代码在7.0手机上不会在anchor下方弹出，而是在屏幕最上方弹出，7.0以下手机则没问题；<br>高度MATCH_PARENT时才会这样，WRAP_CONTENT时不会。</p></blockquote><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><ul><li>7.0系统的一个bug；</li></ul><span id="more"></span><h1 id="现有解决措施"><a href="#现有解决措施" class="headerlink" title="现有解决措施"></a>现有解决措施</h1><ul><li>重写PopupWindow的showAsDropDown()系列方法。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.PopupWindow;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解决7.0PopupWindow全屏问题；</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2018/2/9.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FixedPopupWindow</span> <span class="keyword">extends</span> <span class="title class_">PopupWindow</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(View contentView)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(contentView);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(width, height);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(View contentView, <span class="type">int</span> width, <span class="type">int</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(contentView, width, height);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(View contentView, <span class="type">int</span> width, <span class="type">int</span> height, <span class="type">boolean</span> focusable)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(contentView, width, height, focusable);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FixedPopupWindow</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showAsDropDown</span><span class="params">(View anchor)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">24</span>) &#123;</span><br><span class="line">            <span class="type">Rect</span> <span class="variable">rect</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rect</span>();</span><br><span class="line">            anchor.getGlobalVisibleRect(rect);</span><br><span class="line">            <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> anchor.getResources().getDisplayMetrics().heightPixels - rect.bottom;</span><br><span class="line">            setHeight(h);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">super</span>.showAsDropDown(anchor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="仍存在兼容性问题"><a href="#仍存在兼容性问题" class="headerlink" title="仍存在兼容性问题"></a>仍存在兼容性问题</h1><p>虽然官方在25版本修复了该问题；<br>但是部分国产机的25版本并未修复该问题；<br>因此此方法并不通用；</p><h1 id="终极解决方案"><a href="#终极解决方案" class="headerlink" title="终极解决方案"></a>终极解决方案</h1><ul><li>设置高度为WRAP_CONTENT；</li><li>layout中在anchor的下方覆盖一层半透明的View，默认GONE。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">popupWindow.setOnDismissListener(<span class="keyword">new</span> <span class="title class_">PopupWindow</span>.OnDismissListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDismiss</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//隐藏遮罩</span></span><br><span class="line">        viewMask.setVisibility(View.GONE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//显示遮罩</span></span><br><span class="line">viewMask.setVisibility(View.VISIBLE);</span><br><span class="line">popupWindow.showAsDropDown(lineAnchor);</span><br></pre></td></tr></table></figure><blockquote><p>哈哈哈，在经过一番折腾后突然出现了这么个想法，关键是效果还不错！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-EditText各种样式背景</title>
      <link href="/2018/02/08/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-EditText%E5%90%84%E7%A7%8D%E6%A0%B7%E5%BC%8F%E8%83%8C%E6%99%AF/"/>
      <url>/2018/02/08/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-EditText%E5%90%84%E7%A7%8D%E6%A0%B7%E5%BC%8F%E8%83%8C%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="底部变色直线"><a href="#底部变色直线" class="headerlink" title="底部变色直线"></a>底部变色直线</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorPrimary&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@android:color/white&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:state_pressed</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#ddd&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@android:color/white&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="圆角变色边框-调大radius大小可实现全圆角"><a href="#圆角变色边框-调大radius大小可实现全圆角" class="headerlink" title="圆角变色边框(调大radius大小可实现全圆角)"></a>圆角变色边框(调大radius大小可实现全圆角)</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;4dp&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorWhite&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorMain&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;4dp&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorWhite&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorTransparent&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="虚线半圆圆角边框"><a href="#虚线半圆圆角边框" class="headerlink" title="虚线半圆圆角边框"></a>虚线半圆圆角边框</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;100dp&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorMain&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorGrayB&quot;</span> <span class="attr">android:dashGap</span>=<span class="string">&quot;2dp&quot;</span> <span class="attr">android:dashWidth</span>=<span class="string">&quot;3dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;100dp&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorWhite&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorGrayB&quot;</span> <span class="attr">android:dashGap</span>=<span class="string">&quot;2dp&quot;</span> <span class="attr">android:dashWidth</span>=<span class="string">&quot;3dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="直角变色边框"><a href="#直角变色边框" class="headerlink" title="直角变色边框"></a>直角变色边框</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorWhite&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorMain&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/colorWhite&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;#eee&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-发送验证码倒计时</title>
      <link href="/2018/02/08/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%8F%91%E9%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E5%80%92%E8%AE%A1%E6%97%B6/"/>
      <url>/2018/02/08/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%8F%91%E9%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E5%80%92%E8%AE%A1%E6%97%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="使用RxJava优雅的实现"><a href="#使用RxJava优雅的实现" class="headerlink" title="使用RxJava优雅的实现"></a>使用RxJava优雅的实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">btnVerifyCode.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        btnVerifyCode.setEnabled(<span class="literal">false</span>);</span><br><span class="line">        Observable.interval(<span class="number">0</span>, <span class="number">1</span>, TimeUnit.SECONDS)</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                .subscribeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                .limit(<span class="number">31</span>)</span><br><span class="line">                .map(<span class="keyword">new</span> <span class="title class_">Func1</span>&lt;Long, Long&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Long <span class="title function_">call</span><span class="params">(Long aLong)</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="number">30</span> - aLong;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .doOnSubscribe(<span class="keyword">new</span> <span class="title class_">Action0</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">                        btnVerifyCode.setEnabled(<span class="literal">false</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .doOnCompleted(<span class="keyword">new</span> <span class="title class_">Action0</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">                        btnVerifyCode.setEnabled(<span class="literal">true</span>);</span><br><span class="line">                        btnVerifyCode.setText(<span class="string">&quot;重新发送&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .subscribe(<span class="keyword">new</span> <span class="title class_">Action1</span>&lt;Long&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Long aLong)</span> &#123;</span><br><span class="line">                        btnVerifyCode.setText(<span class="string">&quot;重新发送（&quot;</span>+aLong + <span class="string">&quot; s ）&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, <span class="keyword">new</span> <span class="title class_">Action1</span>&lt;Throwable&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Throwable throwable)</span> &#123;</span><br><span class="line">                        ToastUtils.showCustomBgToast(<span class="string">&quot;获取失败，错误信息：&quot;</span> + throwable.getMessage() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="布局示例"><a href="#布局示例" class="headerlink" title="布局示例"></a>布局示例</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_verify_code&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;70px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_verify_Code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;108px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/et_bg_line&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;@string/et_hint_code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingLeft</span>=<span class="string">&quot;100px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingRight</span>=<span class="string">&quot;280px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorBlack&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColorHint</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;36px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;50px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;50px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/verification&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_clear_verify_code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;right|center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;320px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/undo&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_verify_code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;78px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;?borderlessButtonStyle&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical|right&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/full_round_shape_white_with_gray_border&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingLeft</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingRight</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/get_code&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/btn_code_color_selector&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-时间轴布局</title>
      <link href="/2018/02/05/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%97%B6%E9%97%B4%E8%BD%B4%E5%B8%83%E5%B1%80/"/>
      <url>/2018/02/05/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E6%97%B6%E9%97%B4%E8%BD%B4%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="时间轴特征"><a href="#时间轴特征" class="headerlink" title="时间轴特征"></a>时间轴特征</h1><ul><li>某人</li><li>某个时间</li><li>做了某个事情</li></ul><h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="/images/time_line_demo.png"></p><h1 id="圆点背景"><a href="#圆点背景" class="headerlink" title="圆点背景"></a>圆点背景</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">&quot;oval&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#61b4fe&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="布局代码"><a href="#布局代码" class="headerlink" title="布局代码"></a>布局代码</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@color/colorWhite&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;216px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;70px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;13:52&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#666&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;36px&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;14px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;01-12&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;1px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#e5e5e5&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/point_state&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/point_time_line_first&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;1px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#e5e5e5&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_person&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;王五&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#666&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;36px&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_time_before&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;50px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;10分钟前&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;26px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;进行了首件确认进行了首件确认进行了首件确认进行了首件确认进行了首件确认&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;36px&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端-Web移动端适配值rem和sass</title>
      <link href="/2018/02/02/%E5%89%8D%E7%AB%AF-Web%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D%E5%80%BCrem%E5%92%8Csass/"/>
      <url>/2018/02/02/%E5%89%8D%E7%AB%AF-Web%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D%E5%80%BCrem%E5%92%8Csass/</url>
      
        <content type="html"><![CDATA[<h1 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h1><p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p><h1 id="安装node-sass"><a href="#安装node-sass" class="headerlink" title="安装node-sass"></a>安装node-sass</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass -g</span><br></pre></td></tr></table></figure><h1 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack"></a>安装webpack</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack -g</span><br></pre></td></tr></table></figure><h1 id="安装sass-loader"><a href="#安装sass-loader" class="headerlink" title="安装sass-loader"></a>安装sass-loader</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader -g</span><br></pre></td></tr></table></figure><h1 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Path追加(安装路径)</span><br><span class="line">例如：</span><br><span class="line">C:\Users\admin\AppData\Roaming\npm</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="项目目录下安装"><a href="#项目目录下安装" class="headerlink" title="项目目录下安装"></a>项目目录下安装</h1><ul><li>创建package.json</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;TestApp&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;zhouzhuo810&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;css-loader&quot;: &quot;^0.28.7&quot;,</span><br><span class="line">    &quot;node-sass&quot;: &quot;^4.7.2&quot;,</span><br><span class="line">    &quot;sass-loader&quot;: &quot;^6.0.6&quot;,</span><br><span class="line">    &quot;style-loader&quot;: &quot;^0.19.0&quot;,</span><br><span class="line">    &quot;url-loader&quot;: &quot;^0.6.2&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^3.8.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;css-loader&quot;: &quot;^0.28.9&quot;,</span><br><span class="line">    &quot;node-sass&quot;: &quot;^4.7.2&quot;,</span><br><span class="line">    &quot;sass-loader&quot;: &quot;^6.0.6&quot;,</span><br><span class="line">    &quot;style-loader&quot;: &quot;^0.19.1&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^3.10.0&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>项目下执行命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader node-sass webpack css-loader style-loader url-loader --save-dev</span><br></pre></td></tr></table></figure><h1 id="sass基本用法"><a href="#sass基本用法" class="headerlink" title="sass基本用法"></a>sass基本用法</h1><ul><li>嵌套</li></ul><blockquote><p>Sass允许嵌套规则，使CSS更易于维护。</p></blockquote><ul><li>&amp;</li></ul><blockquote><p>Sass 提供了 &amp; 用于引用父选择器。</p></blockquote><ul><li>@import</li></ul><blockquote><p>Sass 的 @import 指令用于导入其他样式模块。</p></blockquote><ul><li>运算</li></ul><blockquote><p>Sass 支持对数字标准的算术运算(加法 +，减法 - ，乘法 *，除法 &#x2F; 和取模 %) 并保留单位。</p></blockquote><ul><li>注释</li></ul><blockquote><p>单行注释 &#x2F;&#x2F; 会在 .scss 被编译成 .css 后移除。<br>多行注释 &#x2F;* *&#x2F; 会在 .scss 被编译成 .css 后保留。</p></blockquote><ul><li>编译</li></ul><blockquote><p>假设项目目录下有 css 和 scss 文件夹，运行以下命令会持续观察文件变化并即时编译。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node-sass -wro css scss</span><br></pre></td></tr></table></figure><p>在终端按 Control + C 停止编译。</p><h1 id="webpack基本用法"><a href="#webpack基本用法" class="headerlink" title="webpack基本用法"></a>webpack基本用法</h1><p>&#x2F;&#x2F;webpack.config.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var webpack = require(&#x27;webpack&#x27;);</span><br><span class="line">var path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports=&#123;</span><br><span class="line">entry: [</span><br><span class="line">&#x27;./app.js&#x27;</span><br><span class="line">],</span><br><span class="line">output:&#123;</span><br><span class="line">path: path.resolve(__dirname, &#x27;./build&#x27;),</span><br><span class="line">filename: &#x27;bundle.js&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">module: &#123;</span><br><span class="line">loaders: [</span><br><span class="line">&#123; test: /\.css$/, loader: &#x27;style-loader!css-loader&#x27;&#125;,</span><br><span class="line">&#123; test: /\.scss$/, loader: &#x27;style-loader!css-loader!sass-loader&#x27;&#125;,</span><br><span class="line">&#123; test: /\.(png|jpg)$/, loader: &#x27;url-loader?limit=8192&#x27;&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>执行命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --watch</span><br></pre></td></tr></table></figure><h1 id="rem单位的说明"><a href="#rem单位的说明" class="headerlink" title="rem单位的说明"></a>rem单位的说明</h1><ul><li>rem是一个单位，可以代替px。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 rem = html[0].style.fontSize px;</span><br></pre></td></tr></table></figure><blockquote><p>当不设置font-size时，默认的font-size为第一个html元素的font-size，用js动态设置第一个html元素的font-size属性即可动态改变rem对应的px大小。</p></blockquote><h1 id="reset-css"><a href="#reset-css" class="headerlink" title="reset.css"></a>reset.css</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* http://meyerweb.com/eric/tools/css/reset/</span></span><br><span class="line"><span class="comment">   v2.0 | 20110126</span></span><br><span class="line"><span class="comment">   License: none (public domain)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  </span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span>, <span class="selector-tag">div</span>, <span class="selector-tag">span</span>, applet, <span class="selector-tag">object</span>, <span class="selector-tag">iframe</span>,</span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span>, <span class="selector-tag">p</span>, <span class="selector-tag">blockquote</span>, pre,</span><br><span class="line"><span class="selector-tag">a</span>, <span class="selector-tag">abbr</span>, acronym, <span class="selector-tag">address</span>, big, <span class="selector-tag">cite</span>, <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">del</span>, <span class="selector-tag">dfn</span>, <span class="selector-tag">em</span>, <span class="selector-tag">img</span>, <span class="selector-tag">ins</span>, <span class="selector-tag">kbd</span>, <span class="selector-tag">q</span>, s, <span class="selector-tag">samp</span>,</span><br><span class="line">small, strike, <span class="selector-tag">strong</span>, sub, <span class="selector-tag">sup</span>, tt, <span class="selector-tag">var</span>,</span><br><span class="line"><span class="selector-tag">b</span>, u, <span class="selector-tag">i</span>, center,</span><br><span class="line"><span class="selector-tag">dl</span>, <span class="selector-tag">dt</span>, <span class="selector-tag">dd</span>, <span class="selector-tag">ol</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-tag">fieldset</span>, <span class="selector-tag">form</span>, <span class="selector-tag">label</span>, <span class="selector-tag">legend</span>,</span><br><span class="line"><span class="selector-tag">table</span>, <span class="selector-tag">caption</span>, <span class="selector-tag">tbody</span>, <span class="selector-tag">tfoot</span>, <span class="selector-tag">thead</span>, <span class="selector-tag">tr</span>, <span class="selector-tag">th</span>, <span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">canvas</span>, <span class="selector-tag">details</span>, embed,</span><br><span class="line"><span class="selector-tag">figure</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>,</span><br><span class="line"><span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, output, ruby, <span class="selector-tag">section</span>, <span class="selector-tag">summary</span>,</span><br><span class="line"><span class="selector-tag">time</span>, <span class="selector-tag">mark</span>, <span class="selector-tag">audio</span>, <span class="selector-tag">video</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">font</span>: inherit;</span><br><span class="line"><span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* HTML5 display-role reset for older browsers */</span></span><br><span class="line"><span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">details</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">figure</span>,</span><br><span class="line"><span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>, <span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, <span class="selector-tag">section</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ol</span>, <span class="selector-tag">ul</span> &#123;</span><br><span class="line"><span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span>, <span class="selector-tag">q</span> &#123;</span><br><span class="line"><span class="attribute">quotes</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">blockquote</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">content</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line"><span class="attribute">border-collapse</span>: collapse;</span><br><span class="line"><span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="index-scss"><a href="#index-scss" class="headerlink" title="index.scss"></a>index.scss</h1><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> px2rem(<span class="variable">$px</span>) &#123;</span><br><span class="line"><span class="variable">$rem</span>: <span class="number">37.5px</span>;</span><br><span class="line"><span class="keyword">@return</span> (<span class="variable">$px</span> / <span class="variable">$rem</span>) + rem;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="built_in">px2rem</span>(<span class="number">40px</span>);</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./index.scss&#x27;</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//窗口宽度</span></span><br><span class="line"><span class="keyword">let</span> htmlWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//html根元素</span></span><br><span class="line"><span class="keyword">let</span> htmlDom = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">  </span><br><span class="line"><span class="comment">//设置html根元素的font-size</span></span><br><span class="line">htmlDom.<span class="property">style</span>.<span class="property">fontSize</span> = htmlWidth / <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//监听窗口大小变化，动态缩放</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> htmlWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>;</span><br><span class="line">  <span class="comment">//设置根元素html的font-size即1 rem，为屏幕宽度的1/10</span></span><br><span class="line">htmlDom.<span class="property">style</span>.<span class="property">fontSize</span> = htmlWidth / <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initail-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">ref</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./reset.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">      测试头部</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./build/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --watch</span><br></pre></td></tr></table></figure><h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">width:100%;</span><br><span class="line">padding-left:20px;</span><br><span class="line">padding-right:20px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>100%宽度时，如果有左右内边距，会在使移动端界面产生左右滑动；  </p><p>需要添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">box-sizing</span>:border-box;</span><br><span class="line">-moz-<span class="attribute">box-sizing</span>:border-box; <span class="comment">/* Firefox */</span></span><br><span class="line">-webkit-<span class="attribute">box-sizing</span>:border-box; <span class="comment">/* Safari */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制。</p>]]></content>
      
      
      <categories>
          
          <category> 网页前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网页前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-底部弹出PopupWindow</title>
      <link href="/2018/01/30/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BA%95%E9%83%A8%E5%BC%B9%E5%87%BAPopupWindow/"/>
      <url>/2018/01/30/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BA%95%E9%83%A8%E5%BC%B9%E5%87%BAPopupWindow/</url>
      
        <content type="html"><![CDATA[<h1 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示自定义底部弹出PopupWindow</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parent            传根布局就好了</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> contentView       PopupWindow内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> bgColor           背景颜色(窗体变暗效果)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> focusable         是否点击空白区域取消(非全屏时可以)和返回键关闭</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fullScreen        是否全屏</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> onDismissListener 取消监听</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showBottomPopupWindow</span><span class="params">(View parent, View contentView, <span class="type">int</span> bgColor, <span class="type">boolean</span> focusable, <span class="type">boolean</span> fullScreen, PopupWindow.OnDismissListener onDismissListener)</span> &#123;</span><br><span class="line">    hideBottomDialog();</span><br><span class="line">    AutoUtils.auto(contentView);</span><br><span class="line">    popupWindow = <span class="keyword">new</span> <span class="title class_">PopupWindow</span>(ViewGroup.LayoutParams.MATCH_PARENT, fullScreen ? ViewGroup.LayoutParams.MATCH_PARENT : ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class="line">    popupWindow.setContentView(contentView);</span><br><span class="line">    <span class="comment">// 设置弹出窗体可点击</span></span><br><span class="line">    popupWindow.setFocusable(focusable);</span><br><span class="line">    <span class="comment">// 设置弹出窗体的背景</span></span><br><span class="line">    popupWindow.setBackgroundDrawable(<span class="keyword">new</span> <span class="title class_">ColorDrawable</span>(bgColor));</span><br><span class="line">    <span class="keyword">if</span> (onDismissListener != <span class="literal">null</span>) &#123;</span><br><span class="line">        popupWindow.setOnDismissListener(onDismissListener);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//设置弹出窗体显示时的动画，从底部向上弹出</span></span><br><span class="line">    popupWindow.setAnimationStyle(R.style.ZzAnimationDialog);</span><br><span class="line">    popupWindow.showAtLocation(parent, Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 隐藏自定义底部弹出PopupWindow</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hideBottomDialog</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (popupWindow != <span class="literal">null</span>) &#123;</span><br><span class="line">        popupWindow.dismiss();</span><br><span class="line">        popupWindow = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="动画文件"><a href="#动画文件" class="headerlink" title="动画文件"></a>动画文件</h1><ul><li>bottom_dialog_enter.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:interpolator</span>=<span class="string">&quot;@android:anim/decelerate_interpolator&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;100%p&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromAlpha</span>=<span class="string">&quot;0.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toAlpha</span>=<span class="string">&quot;1.0&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>bottom_dialog_exit.xml</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;&gt;</span><br><span class="line">    &lt;translate</span><br><span class="line">        android:duration=&quot;300&quot;</span><br><span class="line">        android:fromYDelta=&quot;0&quot;</span><br><span class="line">        android:toYDelta=&quot;100%p&quot; /&gt;</span><br><span class="line">    &lt;alpha</span><br><span class="line">        android:duration=&quot;300&quot;</span><br><span class="line">        android:fromAlpha=&quot;1.0&quot;</span><br><span class="line">        android:toAlpha=&quot;0.0&quot; /&gt;</span><br><span class="line">&lt;/set&gt;</span><br></pre></td></tr></table></figure><h1 id="样式文件"><a href="#样式文件" class="headerlink" title="样式文件"></a>样式文件</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ZzAnimationDialog&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowEnterAnimation&quot;</span>&gt;</span>@anim/bottom_dialog_enter<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowExitAnimation&quot;</span>&gt;</span>@anim/bottom_dialog_exit<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">View</span> <span class="variable">root</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.dialog_login_more, <span class="literal">null</span>);</span><br><span class="line"><span class="type">ImageView</span> <span class="variable">ivClose</span> <span class="operator">=</span> (ImageView) root.findViewById(R.id.iv_close);</span><br><span class="line">ivClose.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        hideBottomDialog();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">showBottomPopupWindow(findViewById(R.id.root), root, Color.TRANSPARENT, <span class="literal">true</span>, <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">PopupWindow</span>.OnDismissListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDismiss</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS-Github常用控件收藏</title>
      <link href="/2018/01/26/iOS-Github%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E6%94%B6%E8%97%8F/"/>
      <url>/2018/01/26/iOS-Github%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E6%94%B6%E8%97%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>不求多，但求精。</p></blockquote><h2 id="一、特殊需求"><a href="#一、特殊需求" class="headerlink" title="一、特殊需求"></a>一、特殊需求</h2><h3 id="多层列表"><a href="#多层列表" class="headerlink" title="多层列表"></a>多层列表</h3><p><a href="https://github.com/Augustyniak/RATreeView">https://github.com/Augustyniak/RATreeView</a></p><hr><span id="more"></span><h2 id="二、UI控件"><a href="#二、UI控件" class="headerlink" title="二、UI控件"></a>二、UI控件</h2><h3 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h3><p><a href="https://github.com/CoderMJLee/MJRefresh">https://github.com/CoderMJLee/MJRefresh</a></p><p><a href="https://github.com/samvermette/SVPullToRefresh">https://github.com/samvermette/SVPullToRefresh</a></p><h3 id="菜单"><a href="#菜单" class="headerlink" title="菜单"></a>菜单</h3><p><a href="https://github.com/romaonthego/RESideMenu">https://github.com/romaonthego/RESideMenu</a></p><h3 id="角标"><a href="#角标" class="headerlink" title="角标"></a>角标</h3><p><a href="https://github.com/cwRichardKim/RKNotificationHub">https://github.com/cwRichardKim/RKNotificationHub</a></p><p><a href="https://github.com/JaviSoto/JSBadgeView">https://github.com/JaviSoto/JSBadgeView</a></p><h3 id="顶部弹窗"><a href="#顶部弹窗" class="headerlink" title="顶部弹窗"></a>顶部弹窗</h3><p><a href="https://github.com/cruffenach/CRToast">https://github.com/cruffenach/CRToast</a></p><h3 id="顶部菜单"><a href="#顶部菜单" class="headerlink" title="顶部菜单"></a>顶部菜单</h3><p><a href="https://github.com/xmartlabs/XLPagerTabStrip">https://github.com/xmartlabs/XLPagerTabStrip</a></p><h3 id="底部菜单-Tab"><a href="#底部菜单-Tab" class="headerlink" title="底部菜单(Tab)"></a>底部菜单(Tab)</h3><p><a href="https://github.com/Ramotion/animated-tab-bar">https://github.com/Ramotion/animated-tab-bar</a></p><h3 id="轮播控件"><a href="#轮播控件" class="headerlink" title="轮播控件"></a>轮播控件</h3><p><a href="https://github.com/gsdios/SDCycleScrollView">https://github.com/gsdios/SDCycleScrollView</a></p><h3 id="图表控件"><a href="#图表控件" class="headerlink" title="图表控件"></a>图表控件</h3><p><a href="https://github.com/danielgindi/Charts">https://github.com/danielgindi/Charts</a></p><h3 id="日历控件"><a href="#日历控件" class="headerlink" title="日历控件"></a>日历控件</h3><p><a href="https://github.com/jonathantribouharet/JTCalendar">https://github.com/jonathantribouharet/JTCalendar</a></p><p><a href="https://github.com/WenchaoD/FSCalendar">https://github.com/WenchaoD/FSCalendar</a></p><p><a href="https://github.com/patchthecode/JTAppleCalendar">https://github.com/patchthecode/JTAppleCalendar</a></p><h3 id="一套控件"><a href="#一套控件" class="headerlink" title="一套控件"></a>一套控件</h3><p><a href="https://github.com/Grouper/FlatUIKit">https://github.com/Grouper/FlatUIKit</a></p><h3 id="消息视图"><a href="#消息视图" class="headerlink" title="消息视图"></a>消息视图</h3><p><a href="https://github.com/jessesquires/JSQMessagesViewController">https://github.com/jessesquires/JSQMessagesViewController</a></p><h3 id="进度提示"><a href="#进度提示" class="headerlink" title="进度提示"></a>进度提示</h3><p><a href="https://github.com/jdg/MBProgressHUD">https://github.com/jdg/MBProgressHUD</a></p><p><a href="https://github.com/danielamitay/DACircularProgress">https://github.com/danielamitay/DACircularProgress</a></p><h3 id="星级评定条"><a href="#星级评定条" class="headerlink" title="星级评定条"></a>星级评定条</h3><p><a href="https://github.com/erndev/EDStarRating">https://github.com/erndev/EDStarRating</a></p><h3 id="侧滑菜单"><a href="#侧滑菜单" class="headerlink" title="侧滑菜单"></a>侧滑菜单</h3><p><a href="https://github.com/ViewDeck/ViewDeck">https://github.com/ViewDeck/ViewDeck</a></p><h3 id="分段控件-Segment"><a href="#分段控件-Segment" class="headerlink" title="分段控件(Segment)"></a>分段控件(Segment)</h3><p><a href="https://github.com/samvermette/SVSegmentedControl">https://github.com/samvermette/SVSegmentedControl</a></p><p><a href="https://github.com/u10int/URBSegmentedControl">https://github.com/u10int/URBSegmentedControl</a></p><p><a href="https://github.com/HeshamMegid/HMSegmentedControl">https://github.com/HeshamMegid/HMSegmentedControl</a></p><h3 id="开关"><a href="#开关" class="headerlink" title="开关"></a>开关</h3><p><a href="https://github.com/twotoasters/TTSwitch">https://github.com/twotoasters/TTSwitch</a></p><hr><h2 id="三、网络相关"><a href="#三、网络相关" class="headerlink" title="三、网络相关"></a>三、网络相关</h2><h3 id="图片缓存及加载"><a href="#图片缓存及加载" class="headerlink" title="图片缓存及加载"></a>图片缓存及加载</h3><p><a href="https://github.com/rs/SDWebImage">https://github.com/rs/SDWebImage</a></p><h3 id="HTTP网络框架"><a href="#HTTP网络框架" class="headerlink" title="HTTP网络框架"></a>HTTP网络框架</h3><p><a href="https://github.com/AFNetworking/AFNetworking">https://github.com/AFNetworking/AFNetworking</a></p><h3 id="JSON解析-第三方"><a href="#JSON解析-第三方" class="headerlink" title="JSON解析(第三方)"></a>JSON解析(第三方)</h3><p><a href="https://github.com/johnezang/JSONKit">https://github.com/johnezang/JSONKit</a></p><h3 id="字典与模型转换"><a href="#字典与模型转换" class="headerlink" title="字典与模型转换"></a>字典与模型转换</h3><p><a href="https://github.com/CoderMJLee/MJExtension">https://github.com/CoderMJLee/MJExtension</a></p><hr><h2 id="四、数据库"><a href="#四、数据库" class="headerlink" title="四、数据库"></a>四、数据库</h2><p><a href="https://github.com/ccgus/fmdb">https://github.com/ccgus/fmdb</a></p><hr><h2 id="五、动画效果"><a href="#五、动画效果" class="headerlink" title="五、动画效果"></a>五、动画效果</h2><h3 id="波动效果"><a href="#波动效果" class="headerlink" title="波动效果"></a>波动效果</h3><p><a href="https://github.com/inFullMobile/WobbleView">https://github.com/inFullMobile/WobbleView</a></p><h3 id="跑马灯"><a href="#跑马灯" class="headerlink" title="跑马灯"></a>跑马灯</h3><p><a href="https://github.com/cbpowell/MarqueeLabel">https://github.com/cbpowell/MarqueeLabel</a></p><hr><h2 id="六、图片、视频处理"><a href="#六、图片、视频处理" class="headerlink" title="六、图片、视频处理"></a>六、图片、视频处理</h2><p><a href="https://github.com/BradLarson/GPUImage">https://github.com/BradLarson/GPUImage</a></p><hr><h2 id="七、二维码相关"><a href="#七、二维码相关" class="headerlink" title="七、二维码相关"></a>七、二维码相关</h2><h3 id="二维码生成和解析"><a href="#二维码生成和解析" class="headerlink" title="二维码生成和解析"></a>二维码生成和解析</h3><p><a href="https://github.com/TheLevelUp/ZXingObjC">https://github.com/TheLevelUp/ZXingObjC</a></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PhotoShop-图片太宽或太高切除中间部分</title>
      <link href="/2018/01/26/PhotoShop-%E5%9B%BE%E7%89%87%E5%A4%AA%E5%AE%BD%E6%88%96%E5%A4%AA%E9%AB%98%E5%88%87%E9%99%A4%E4%B8%AD%E9%97%B4%E9%83%A8%E5%88%86/"/>
      <url>/2018/01/26/PhotoShop-%E5%9B%BE%E7%89%87%E5%A4%AA%E5%AE%BD%E6%88%96%E5%A4%AA%E9%AB%98%E5%88%87%E9%99%A4%E4%B8%AD%E9%97%B4%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ol><li>矩形选框，选中头部，ctrl+j</li><li>矩形选框，选中尾部，ctrl+j</li><li>移动尾部(用键盘移动，按shift可以加速)，拼接到头部。</li><li>合并头部和尾部(ctrl+e)。</li></ol>]]></content>
      
      
      <categories>
          
          <category> PhotoShop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PhotoShop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端-JQuery学习笔记</title>
      <link href="/2018/01/25/%E5%89%8D%E7%AB%AF-JQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/01/25/%E5%89%8D%E7%AB%AF-JQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="checkbox类型的input的取值、赋值和监听"><a href="#checkbox类型的input的取值、赋值和监听" class="headerlink" title="checkbox类型的input的取值、赋值和监听"></a>checkbox类型的input的取值、赋值和监听</h3><p>插件推荐：<a href="https://github.com/flatlogic/awesome-bootstrap-checkbox">https://github.com/flatlogic/awesome-bootstrap-checkbox</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全选逻辑</span></span><br><span class="line">    $(<span class="string">&quot;#checkbox-all&quot;</span>).<span class="title function_">change</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//是否选中</span></span><br><span class="line">        <span class="keyword">var</span> isCheck = $(<span class="variable language_">this</span>).<span class="title function_">is</span>(<span class="string">&#x27;:checked&#x27;</span>);</span><br><span class="line">        <span class="comment">//jquery1.6之后使用.prop而不是.attr来选中或取消选中</span></span><br><span class="line">        $(<span class="string">&quot;.checkbox-child&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, isCheck);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="表格添加id隐藏列"><a href="#表格添加id隐藏列" class="headerlink" title="表格添加id隐藏列"></a>表格添加id隐藏列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class=&quot;checkbox-child data-id hide&quot;</span><br></pre></td></tr></table></figure><h3 id="表格获取选中行的id"><a href="#表格获取选中行的id" class="headerlink" title="表格获取选中行的id"></a>表格获取选中行的id</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*获取选中的行数*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getChooseRowsCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> trs = $(<span class="string">&quot;#project-list&quot;</span>).<span class="title function_">find</span>(<span class="string">&quot;tr&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> row = trs.<span class="title function_">eq</span>(i);</span><br><span class="line">        <span class="keyword">var</span> cb = row.<span class="title function_">find</span>(<span class="string">&quot;:checkbox&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> isCheck = cb.<span class="title function_">is</span>(<span class="string">&#x27;:checked&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (isCheck) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*获取选中行的数据库id，多个用逗号隔开*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getChooseRowsDbIds</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> ids = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> trs = $(<span class="string">&quot;#project-list&quot;</span>).<span class="title function_">find</span>(<span class="string">&quot;tr&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> row = trs.<span class="title function_">eq</span>(i);</span><br><span class="line">        <span class="keyword">var</span> cb = row.<span class="title function_">find</span>(<span class="string">&quot;:checkbox&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> isCheck = cb.<span class="title function_">is</span>(<span class="string">&#x27;:checked&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (isCheck) &#123;</span><br><span class="line">            <span class="keyword">var</span> colDbId = row.<span class="title function_">find</span>(<span class="string">&quot;td.data-id&quot;</span>);</span><br><span class="line">            ids += colDbId.<span class="title function_">text</span>();</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="title function_">getChooseRowsCount</span>() - <span class="number">1</span>) &#123;</span><br><span class="line">                ids += <span class="string">&quot;,&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="twbsPagination页码不刷新问题"><a href="#twbsPagination页码不刷新问题" class="headerlink" title="twbsPagination页码不刷新问题"></a>twbsPagination页码不刷新问题</h3><p>相关插件：<a href="https://github.com/esimakin/twbs-pagination">https://github.com/esimakin/twbs-pagination</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先销毁，保证总页码动态</span></span><br><span class="line">$(<span class="string">&quot;#page-indicator&quot;</span>).<span class="title function_">twbsPagination</span>(<span class="string">&quot;destroy&quot;</span>);</span><br><span class="line"><span class="comment">//分页绑定</span></span><br><span class="line">$(<span class="string">&#x27;#page-indicator&#x27;</span>).<span class="title function_">twbsPagination</span>(&#123;</span><br><span class="line">    <span class="attr">totalPages</span>: data.<span class="property">totalPage</span>,</span><br><span class="line">    <span class="attr">visiblePages</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">onPageClick</span>: <span class="keyword">function</span> (<span class="params">event, page</span>) &#123;</span><br><span class="line">        <span class="comment">//全选取消</span></span><br><span class="line">        $(<span class="string">&quot;#checkbox-all&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//重载数据</span></span><br><span class="line">        <span class="keyword">var</span> mid = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;userId&quot;</span>);</span><br><span class="line">        <span class="comment">//回调里面不要再调用销毁和绑定方法，否则死循环。</span></span><br><span class="line">        <span class="title function_">justUpdateList</span>(mid, page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网页前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网页前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-火车票抢票技巧</title>
      <link href="/2018/01/25/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%81%AB%E8%BD%A6%E7%A5%A8%E6%8A%A2%E7%A5%A8%E6%8A%80%E5%B7%A7/"/>
      <url>/2018/01/25/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E7%81%AB%E8%BD%A6%E7%A5%A8%E6%8A%A2%E7%A5%A8%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul><li>Windows 7&#x2F;8&#x2F;10</li><li>12306ByPass</li></ul><p><a href="http://www.12306bypass.com/">http://www.12306bypass.com/</a></p><h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ul><li>如果不是VIP，先花20块成为VIP；</li><li>选好出发日期；</li><li>选好起始地和终点(别选反了)</li><li>选好乘客、座次。</li><li>选两个最中意的车次(不要多选，否则拖慢抢票速度)。</li><li>选择定时抢票(提前1分钟)</li><li>修改间隔时间(200ms)</li><li>选择QQ通知(登录qq小号，打开qq大号聊天窗口)</li><li>选择qq版本，勾选qq电话，点击获取聊天窗口。</li><li>点击开始抢票。</li></ul><span id="more"></span><h3 id="捡漏"><a href="#捡漏" class="headerlink" title="捡漏"></a>捡漏</h3><ul><li>一般情况下黄牛手中有大量的票，如果卖不出就会退掉。</li><li>一定范围内一般越临近发车，捡漏成功率越高；</li><li>如果发现一辆车商务座和一等座开始多了，说明二等座也不远了，如果觉得该趟车勉强能接受，直接抢该趟车。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>InteliJ IDEA插件开发-StringKiller</title>
      <link href="/2018/01/23/InteliJ-IDEA%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91-StringKiller/"/>
      <url>/2018/01/23/InteliJ-IDEA%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91-StringKiller/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/zhouzhuo810/StringKiller">Github传送门</a></p><h1 id="StringKiller"><a href="#StringKiller" class="headerlink" title="StringKiller"></a>StringKiller</h1><p>一个简洁的Android Studio插件。用于一键将layout文件夹中的text字符串资源提取到strings.xml中。</p><h3 id="插件下载地址：点这里"><a href="#插件下载地址：点这里" class="headerlink" title="插件下载地址：点这里"></a>插件下载地址：<a href="https://github.com/zhouzhuo810/StringKiller/blob/master/StringKiller.jar">点这里</a></h3><span id="more"></span><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>安卓开发过程中，大部分开发者为了偷懒，直接将字符串资源写在布局文件中，<br>这种方式主要有如下缺点：</p><ul><li>导入工程中文容易出现乱码；</li><li>国际化不利于统一翻译；</li><li>修改字符串内容时不能快速定位;</li></ul><p>因此，为了解决这一系列问题，本人开发了这个插件。</p><h2 id="功能特性"><a href="#功能特性" class="headerlink" title="功能特性"></a>功能特性</h2><ul><li>目前支持android:text和android:hint两个属性提取字符串。</li><li>支持智能跳过@string&#x2F;xxx.</li><li>资源采用【”布局文件名称”+”text”&#x2F;“hint_text”+序号】的命名方式，<br>如【@string&#x2F;activity_main_text_0】代表activity_main.xml文件中<br>第1个android:text字符串资源。</li><li>如果strings.xml文件中有内容，新提取的字符串会自动追加在后面，不会覆盖。</li><li>默认快捷键：【Alt+3】</li></ul><h2 id="示例图片"><a href="#示例图片" class="headerlink" title="示例图片"></a>示例图片</h2><p><img src="/../../../../images/stringkiller.gif" alt="图2"></p><h2 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果有小伙伴对命名方式或功能有什么更好的想法，欢迎提建议。</span><br><span class="line">下面是我的邮箱：</span><br></pre></td></tr></table></figure><p><a href="mailto:&#97;&#x64;&#x6d;&#x69;&#x6e;&#64;&#122;&#104;&#x6f;&#117;&#122;&#x68;&#117;&#x6f;&#x38;&#x31;&#48;&#x2e;&#109;&#101;">&#97;&#x64;&#x6d;&#x69;&#x6e;&#64;&#122;&#104;&#x6f;&#117;&#122;&#x68;&#117;&#x6f;&#x38;&#x31;&#48;&#x2e;&#109;&#101;</a></p><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Copyright © zhouzhuo810</span><br><span class="line">  </span><br><span class="line">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line">you may not use this file except in compliance with the License.</span><br><span class="line">You may obtain a copy of the License at</span><br><span class="line">  </span><br><span class="line">   http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line">  </span><br><span class="line">Unless required by applicable law or agreed to in writing, software</span><br><span class="line">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">See the License for the specific language governing permissions and</span><br><span class="line">limitations under the License.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> InteliJ IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> InteliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-JDK环境变量配置</title>
      <link href="/2018/01/22/%E5%B0%8F%E5%B8%B8%E8%AF%86-JDK%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/01/22/%E5%B0%8F%E5%B8%B8%E8%AF%86-JDK%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ul><li>我的电脑<ul><li>属性<ul><li>高级系统设置<ul><li>环境变量<ul><li>系统环境变量<ul><li>新建</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME</span><br><span class="line">  </span><br><span class="line">//jdk绝对路径</span><br><span class="line">C:\Program Files\Java\jdk1.8.0_60</span><br></pre></td></tr></table></figure><pre><code>                - 新建</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CLASSPATH</span><br><span class="line">  </span><br><span class="line">.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar;</span><br></pre></td></tr></table></figure><pre><code>                - 找到Path环境变量,追加如下内容</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-Android SDK环境变量配置</title>
      <link href="/2018/01/22/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android-SDK%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/01/22/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android-SDK%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ul><li>我的电脑<ul><li>属性<ul><li>高级系统设置<ul><li>环境变量<ul><li>系统环境变量<ul><li>新建</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ANDROID_HOME</span><br><span class="line">  </span><br><span class="line">//sdk绝对路径</span><br><span class="line">E:\Android\SDK</span><br></pre></td></tr></table></figure><pre><code>                - 找到Path环境变量,追加如下内容</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-Android Studio上传library到jitpack并带有中文文档注释</title>
      <link href="/2018/01/19/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android-Studio%E4%B8%8A%E4%BC%A0library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%9C%89%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E6%B3%A8%E9%87%8A/"/>
      <url>/2018/01/19/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android-Studio%E4%B8%8A%E4%BC%A0library%E5%88%B0jitpack%E5%B9%B6%E5%B8%A6%E6%9C%89%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E6%B3%A8%E9%87%8A/</url>
      
        <content type="html"><![CDATA[<h3 id="工程的build-gradle中添加"><a href="#工程的build-gradle中添加" class="headerlink" title="工程的build.gradle中添加"></a>工程的build.gradle中添加</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &#x27;com.android.tools.build:gradle:2.3.1&#x27;</span><br><span class="line">  </span><br><span class="line">        //gradle 2.2+ 使用1.4.1</span><br><span class="line">        classpath &#x27;com.github.dcendents:android-maven-gradle-plugin:1.4.1&#x27;</span><br><span class="line">  </span><br><span class="line">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        // in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="library的build-gradle中添加"><a href="#library的build-gradle中添加" class="headerlink" title="library的build.gradle中添加"></a>library的build.gradle中添加</h3><ul><li>顶部添加<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#x27;com.github.dcendents.android-maven&#x27; // 添加这个</span><br><span class="line">  </span><br><span class="line">group=&#x27;com.github.zhouzhuo810&#x27; // 指定group，com.github.&lt;用户名&gt;</span><br></pre></td></tr></table></figure></li><li>底部添加<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 指定编码</span><br><span class="line">tasks.withType(JavaCompile) &#123;</span><br><span class="line">    options.encoding = &quot;UTF-8&quot;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">// 打包源码</span><br><span class="line">task sourcesJar(type: Jar) &#123;</span><br><span class="line">    from android.sourceSets.main.java.srcDirs</span><br><span class="line">    classifier = &#x27;sources&#x27;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">task javadoc(type: Javadoc) &#123;</span><br><span class="line">    failOnError  false</span><br><span class="line">    source = android.sourceSets.main.java.sourceFiles</span><br><span class="line">    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))</span><br><span class="line">    classpath += configurations.compile</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">// 制作文档(Javadoc)</span><br><span class="line">task javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class="line">    classifier = &#x27;javadoc&#x27;</span><br><span class="line">    from javadoc.destinationDir</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives sourcesJar</span><br><span class="line">    archives javadocJar</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h3><ul><li>打开Android Studio 的Terminal</li><li>输入.&#x2F;gradlew install</li><li>如果成功就没问题了。</li></ul><h3 id="最后分享到github"><a href="#最后分享到github" class="headerlink" title="最后分享到github"></a>最后分享到github</h3><h3 id="release一个版本即可"><a href="#release一个版本即可" class="headerlink" title="release一个版本即可"></a>release一个版本即可</h3><h3 id="前往jitpack查看"><a href="#前往jitpack查看" class="headerlink" title="前往jitpack查看"></a>前往jitpack查看</h3><ul><li>访问jitpack官网<br><a href="https://jitpack.io/">https://jitpack.io</a></li><li>输入github仓库地址搜索</li><li>使用方法该页面有说明</li></ul>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-修改hosts文件</title>
      <link href="/2018/01/18/Python-%E4%BF%AE%E6%94%B9hosts%E6%96%87%E4%BB%B6/"/>
      <url>/2018/01/18/Python-%E4%BF%AE%E6%94%B9hosts%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><ul><li>Window 7&#x2F;8&#x2F;10</li><li>Node.js环境</li><li>Python环境</li><li>requests插件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure></li><li>beautifulsoup4插件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h3 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">github.com</span></span><br><span class="line"><span class="string">assets-cdn.github.com</span></span><br><span class="line"><span class="string">avatars0.githubusercontent.com</span></span><br><span class="line"><span class="string">avatars1.githubusercontent.com</span></span><br><span class="line"><span class="string">github-cloud.s3.amazonaws.com</span></span><br><span class="line"><span class="string">documentcloud.github.com </span></span><br><span class="line"><span class="string">help.github.com</span></span><br><span class="line"><span class="string">nodeload.github.com</span></span><br><span class="line"><span class="string">raw.github.com</span></span><br><span class="line"><span class="string">status.github.com</span></span><br><span class="line"><span class="string">training.github.com</span></span><br><span class="line"><span class="string">github.io</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">  </span><br><span class="line">ans = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> s.split():</span><br><span class="line">    url = <span class="string">&quot;http://ip.chinaz.com/&quot;</span> + i.strip()</span><br><span class="line">    resp = requests.get(url)</span><br><span class="line">    soup = BeautifulSoup(resp.text)</span><br><span class="line">    x = soup.find(class_=<span class="string">&quot;IcpMain02&quot;</span>)</span><br><span class="line">    x = x.find_all(<span class="string">&quot;span&quot;</span>, class_=<span class="string">&quot;Whwtdhalf&quot;</span>)</span><br><span class="line">    x = <span class="string">&quot;%s %s&quot;</span> % (x[<span class="number">5</span>].string.strip(), i.strip())</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line">    ans.append(x)</span><br><span class="line">  </span><br><span class="line">hosts = <span class="string">r&quot;C:\Windows\System32\drivers\etc\hosts&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(hosts, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    content = [i <span class="keyword">for</span> i <span class="keyword">in</span> f.readlines() <span class="keyword">if</span> i.startswith(<span class="string">&quot;#&quot;</span>)]</span><br><span class="line">    content.extend(ans)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(hosts, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&quot;\n&quot;</span>.join(content))</span><br></pre></td></tr></table></figure><h3 id="刷新DNS缓存"><a href="#刷新DNS缓存" class="headerlink" title="刷新DNS缓存"></a>刷新DNS缓存</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-让服务器通过公网IP连接远程桌面</title>
      <link href="/2018/01/12/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E8%AE%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91IP%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/"/>
      <url>/2018/01/12/%E5%B0%8F%E5%B8%B8%E8%AF%86-%E8%AE%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91IP%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ul><li>路由器添加端口映射3389</li><li>windows用户设置登陆密码</li><li>设置自动登陆<a href="http://blog.csdn.net/qq244570672/article/details/48250139">参考这个</a></li><li>我的电脑-&gt;属性-&gt;远程设置</li><li>配置如下：</li></ul><p><img src="/../../../../images/remotedesk.png" alt="图1"></p>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-Mac OS修改Conmand和Control互换</title>
      <link href="/2018/01/12/%E5%B0%8F%E5%B8%B8%E8%AF%86-Mac-OS%E4%BF%AE%E6%94%B9Conmand%E5%92%8CControl%E4%BA%92%E6%8D%A2/"/>
      <url>/2018/01/12/%E5%B0%8F%E5%B8%B8%E8%AF%86-Mac-OS%E4%BF%AE%E6%94%B9Conmand%E5%92%8CControl%E4%BA%92%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ul><li>打开【系统偏好设置】</li><li>选择【键盘】，点击【修饰键】</li><li>Control键改为Command</li><li>Conmand键改为Control</li><li>点击【好】</li></ul><h3 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h3><ul><li>Windows操作习惯了，Command使用起来别扭。</li><li>复制，粘贴，撤销，剪切，保存等操作更顺手。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-多文件替换字符串</title>
      <link href="/2018/01/12/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%A4%9A%E6%96%87%E4%BB%B6%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2018/01/12/AndroidStudio%E6%8A%80%E5%B7%A7-%E5%A4%9A%E6%96%87%E4%BB%B6%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul><li>鼠标右键文件夹</li><li>选择Replace In Path…</li><li>输入Text To Find</li><li>输入Replace With</li><li>勾选Case sensitive(区分大小写字母)</li><li>点击Find，替换完成。</li></ul><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul><li>复制一个library中的代码到自己包下，一键修改import中的包名；</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-从相册扫二维码</title>
      <link href="/2018/01/08/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E4%BB%8E%E7%9B%B8%E5%86%8C%E6%89%AB%E4%BA%8C%E7%BB%B4%E7%A0%81/"/>
      <url>/2018/01/08/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E4%BB%8E%E7%9B%B8%E5%86%8C%E6%89%AB%E4%BA%8C%E7%BB%B4%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h3 id="导入zxing包"><a href="#导入zxing包" class="headerlink" title="导入zxing包"></a>导入zxing包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//zxing</span><br><span class="line">compile &#x27;com.google.zxing:core:3.2.1&#x27;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">scanAlbum</span><span class="params">(String path)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(path)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// DecodeHintType 和EncodeHintType</span></span><br><span class="line">    Hashtable&lt;DecodeHintType, String&gt; hints = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line">    hints.put(DecodeHintType.CHARACTER_SET, <span class="string">&quot;utf-8&quot;</span>); <span class="comment">// 设置二维码内容的编码</span></span><br><span class="line">    BitmapFactory.<span class="type">Options</span> <span class="variable">options</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BitmapFactory</span>.Options();</span><br><span class="line">    options.inJustDecodeBounds = <span class="literal">false</span>; <span class="comment">// 获取新的大小</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">sampleSize</span> <span class="operator">=</span> (<span class="type">int</span>) (options.outHeight / (<span class="type">float</span>) <span class="number">200</span>);</span><br><span class="line">    <span class="keyword">if</span> (sampleSize &lt;= <span class="number">0</span>)</span><br><span class="line">        sampleSize = <span class="number">1</span>;</span><br><span class="line">    options.inSampleSize = sampleSize;</span><br><span class="line">    <span class="type">Bitmap</span> <span class="variable">scanBitmap</span> <span class="operator">=</span> BitmapFactory.decodeFile(path, options);</span><br><span class="line">    <span class="type">int</span>[] intArray = <span class="keyword">new</span> <span class="title class_">int</span>[scanBitmap.getWidth() * scanBitmap.getHeight()];</span><br><span class="line">    scanBitmap.getPixels(intArray, <span class="number">0</span>, scanBitmap.getWidth(), <span class="number">0</span>, <span class="number">0</span>, scanBitmap.getWidth(), scanBitmap.getHeight());</span><br><span class="line">    <span class="type">RGBLuminanceSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RGBLuminanceSource</span>(scanBitmap.getWidth(), scanBitmap.getHeight(), intArray);</span><br><span class="line">    <span class="type">BinaryBitmap</span> <span class="variable">bitmap1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryBitmap</span>(<span class="keyword">new</span> <span class="title class_">HybridBinarizer</span>(source));</span><br><span class="line">    <span class="type">QRCodeReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QRCodeReader</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Result</span> <span class="variable">decode</span> <span class="operator">=</span> reader.decode(bitmap1, hints);</span><br><span class="line">        <span class="keyword">return</span> recode(decode.toString());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NotFoundException | com.google.zxing.FormatException | ChecksumException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">recode</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">formart</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">ISO</span> <span class="operator">=</span> Charset.forName(<span class="string">&quot;ISO-8859-1&quot;</span>).newEncoder().canEncode(str);</span><br><span class="line">        <span class="keyword">if</span> (ISO) &#123;</span><br><span class="line">            formart = <span class="keyword">new</span> <span class="title class_">String</span>(str.getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;GB2312&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            formart = str;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> formart;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">showPd(getString(R.string.scaning_text), <span class="literal">false</span>);</span><br><span class="line">Observable.just(filePath)</span><br><span class="line">        .map(<span class="keyword">new</span> <span class="title class_">Func1</span>&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> scanAlbum(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .compose(RxHelper.&lt;String&gt;io_main())</span><br><span class="line">        .subscribe(<span class="keyword">new</span> <span class="title class_">Action1</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                hidePd();</span><br><span class="line">                <span class="keyword">if</span> (s != <span class="literal">null</span>) &#123;</span><br><span class="line">                    ToastUtils.showCustomBgToast(s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="keyword">new</span> <span class="title class_">Action1</span>&lt;Throwable&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Throwable throwable)</span> &#123;</span><br><span class="line">                throwable.printStackTrace();</span><br><span class="line">                hidePd();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端-Bootstrap学习笔记</title>
      <link href="/2018/01/06/%E5%89%8D%E7%AB%AF-Bootstrap%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/01/06/%E5%89%8D%E7%AB%AF-Bootstrap%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h2><ul><li>Twitter</li></ul><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul><li>一个Web开发框架</li></ul><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul><li><a href="http://getbootstrap.com/">getbootstrap</a></li><li><a href="http://www.bootcss.com/">bootcss</a></li><li><a href="http://www.bootcdn.cn/">bootcnd</a></li></ul><span id="more"></span><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><ul><li>官网下载预编译好的压缩包，解压即可；</li><li>依赖于JQuery，所以必须先引入JQuery；</li><li>引入css文件和js文件。</li></ul><h3 id="最简单模版"><a href="#最简单模版" class="headerlink" title="最简单模版"></a>最简单模版</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Bootstrap 101 Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- Bootstrap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- WARNING: Respond.js doesn&#x27;t work if you view the page via file:// --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src=&quot;https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src=&quot;https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">    &lt;![endif]--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好，世界！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- jQuery (necessary for Bootstrap&#x27;s JavaScript plugins) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h3><ul><li><code>.container</code> 类用于固定宽度并支持响应式布局的容器。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>.container-fluid</code> 类用于 100% 宽度，占据全部视口（viewport）的容器。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-1&quot;</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>详见<a href="https://v3.bootcss.com/css/#grid-options">https://v3.bootcss.com/css/#grid-options</a></p><h3 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h3><p>访问如下网址定制：</p><p><a href="https://v3.bootcss.com/customize/">https://v3.bootcss.com/customize/</a></p><h3 id="常用样式"><a href="#常用样式" class="headerlink" title="常用样式"></a>常用样式</h3><ul><li>访问如下网址查找</li></ul><p><a href="https://v3.bootcss.com/css/">https://v3.bootcss.com/css/</a></p><h3 id="常用组件"><a href="#常用组件" class="headerlink" title="常用组件"></a>常用组件</h3><ul><li>访问如下网址查找</li></ul><p><a href="https://v3.bootcss.com/components/">https://v3.bootcss.com/components/</a></p><h3 id="常用插件"><a href="#常用插件" class="headerlink" title="常用插件"></a>常用插件</h3><ul><li>访问如下网址查找</li></ul><p><a href="https://v3.bootcss.com/javascript/">https://v3.bootcss.com/javascript/</a></p><h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><h3 id="导航栏练习"><a href="#导航栏练习" class="headerlink" title="导航栏练习"></a>导航栏练习</h3><ul><li>题目</li></ul><p><img src="http://img.mukewang.com/5412aa420001eedc08180368.jpg" alt="导航栏练习1"></p><ul><li>实现代码</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>某管理系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>功能<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-header&quot;</span>&gt;</span>业务功能<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息建立<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息查询<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-header&quot;</span>&gt;</span>系统功能<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>帮助<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;navbar-form navbar-right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名...&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码...&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="轮播图练习"><a href="#轮播图练习" class="headerlink" title="轮播图练习"></a>轮播图练习</h3><ul><li>题目</li></ul><p><img src="http://img.mukewang.com/5412ac5a0001086009850612.jpg" alt="轮播图练习1"></p><ul><li>实现代码</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;carousel-example-generic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span> <span class="attr">data-ride</span>=<span class="string">&quot;carousel&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Indicators --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-generic&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-generic&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-example-generic&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- Wrapper for slides --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span> <span class="attr">role</span>=<span class="string">&quot;listbox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://img.mukewang.com/5412ad400001e52014280484.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>11 英寸 MacBook Air 充电一次可运行长达 9 小时，而 13 英寸机型则可运行长达 12 小时。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://img.mukewang.com/5412ad7c0001d2eb10880541.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>无论是什么任务，配备 Intel HD Graphics 5000 图形处理器的第四代 Intel Core 处理器都能应对自如。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://img.mukewang.com/5412ae5c0001653b12800644.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>有了新一代 802.11ac 技术，MacBook Air 令 Wi-Fi 速度超越极限。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Controls --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-generic&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Previous<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-example-generic&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="栅格系统练习"><a href="#栅格系统练习" class="headerlink" title="栅格系统练习"></a>栅格系统练习</h3><ul><li>题目</li></ul><p><strong>桌面显示器：</strong></p><p><img src="http://img.mukewang.com/5412b0f90001e80e12800575.jpg"></p><p><strong>平板电脑或手机：</strong></p><p><img src="http://img.mukewang.com/5412b1140001f03809010640.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">任务</span><br><span class="line">1. 搭建基础的bootstrap页面</span><br><span class="line"></span><br><span class="line">2. 根据课程所学或官方文档搭建基础的栅格结构</span><br><span class="line"></span><br><span class="line">3. 注意</span><br><span class="line"></span><br><span class="line">使用 .col-md-offset-* 类可以将列向右侧偏移。这些类实际是通过使用 * 选择器为当前元素增加了左侧的边距（margin）。例如，.col-md-offset-4 类将 .col-md-4 元素向右侧偏移了4个列（column）的宽度。</span><br><span class="line">使用什么样的类前缀，此例子应该使用 .col-md-*</span><br><span class="line">给p添加样式，加边框和padding</span><br><span class="line">4. 文字：慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。</span><br></pre></td></tr></table></figure><ul><li>代码实现</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: solid <span class="number">1px</span> <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4  col-md-offset-4&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-3 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-3  col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是一家从事互联网免费教学的网络教育公司。秉承&quot;开拓、创新、公平、分享&quot;的精神，将互联网特性全面的应用在教育领域，致力于为教育机构及求学者打造一站式互动在线教育品牌。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="标签页练习"><a href="#标签页练习" class="headerlink" title="标签页练习"></a>标签页练习</h3><ul><li>题目</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基于Bootstrap实现下图所示效果的页面，一个标签页，页面载入完毕后，默认打开第二个标签：</span><br><span class="line">任务</span><br><span class="line">1. 搭建基础的bootstrap页面</span><br><span class="line">2. 根据课程所学或官方文档搭建基础的标签页结构</span><br><span class="line">3. 注意页面载入完毕后，调用标签页的js api，打开第二个标签。</span><br></pre></td></tr></table></figure><p><img src="http://img.mukewang.com/5412b2d90001276908980347.jpg"></p><ul><li>代码实现</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- Nav tabs --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-tabs&quot;</span> <span class="attr">role</span>=<span class="string">&quot;tablist&quot;</span> <span class="attr">id</span>=<span class="string">&quot;feature-tab&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#first&quot;</span> <span class="attr">aria-controls</span>=<span class="string">&quot;first&quot;</span> <span class="attr">role</span>=<span class="string">&quot;tab&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>第一项<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#second&quot;</span> <span class="attr">aria-controls</span>=<span class="string">&quot;second&quot;</span> <span class="attr">role</span>=<span class="string">&quot;tab&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>第二项<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#third&quot;</span> <span class="attr">aria-controls</span>=<span class="string">&quot;third&quot;</span> <span class="attr">role</span>=<span class="string">&quot;tab&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>第三项<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#forth&quot;</span> <span class="attr">aria-controls</span>=<span class="string">&quot;forth&quot;</span> <span class="attr">role</span>=<span class="string">&quot;tab&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;tab&quot;</span>&gt;</span>第四项<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- Tab panes --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tab-content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">role</span>=<span class="string">&quot;tabpanel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tab-pane active&quot;</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是做什么的？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>互联网技能教育，免费的哦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">role</span>=<span class="string">&quot;tabpanel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tab-pane&quot;</span> <span class="attr">id</span>=<span class="string">&quot;second&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是做什么的？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>互联网技能教育，免费的哦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">role</span>=<span class="string">&quot;tabpanel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tab-pane&quot;</span> <span class="attr">id</span>=<span class="string">&quot;third&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是做什么的？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>互联网技能教育，免费的哦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">role</span>=<span class="string">&quot;tabpanel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tab-pane&quot;</span> <span class="attr">id</span>=<span class="string">&quot;forth&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>慕课网是做什么的？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>互联网技能教育，免费的哦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#feature-tab a[href=#second]&#x27;</span>).<span class="title function_">tab</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="实战演练"><a href="#实战演练" class="headerlink" title="实战演练"></a>实战演练</h3><ul><li>题目</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">基于Bootstrap实现下图所示效果的页面，一个管理系统的首页，包含：</span><br><span class="line">1.导航栏（带登录和下拉菜单，黑色背景）；</span><br><span class="line">  </span><br><span class="line">2.左侧导航栏（可参考栅格布局，并添加样式）；</span><br><span class="line">  </span><br><span class="line">3.右侧管理面板：栅格布局，包含标题、按钮、面板、警告框、表格、徽章、进度条等多个组件</span><br></pre></td></tr></table></figure><p><img src="http://img.mukewang.com/543747c10001b14d19200943.jpg"></p><ul><li>代码实现</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>某管理系统<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;js/html5shiv.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;js/respond.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-id">#left-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#dddddd</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">900px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#left-container</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#right-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#setting</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.left-table</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#btn-box</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.pro-title</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-top</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-bottom</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.progress</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.badge</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-inverse&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>某管理系统<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>功能<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-header&quot;</span>&gt;</span>业务功能<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息建立<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息查询<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-header&quot;</span>&gt;</span>系统功能<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>帮助<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;navbar-form navbar-right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名...&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码...&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;left-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;bg-primary&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-pills nav-stacked&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息建立<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息查询<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">id</span>=<span class="string">&quot;setting&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>帮助<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-10&quot;</span> <span class="attr">id</span>=<span class="string">&quot;right-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>管理控制台<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;btn-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Standard button --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default btn-lg&quot;</span>&gt;</span>操作1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-lg&quot;</span>&gt;</span>操作2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Indicates a successful or positive action --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success btn-lg&quot;</span>&gt;</span>操作3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Contextual button for informational alert messages --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info btn-lg&quot;</span>&gt;</span>操作4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Indicates caution should be taken with this action --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-warning btn-lg&quot;</span>&gt;</span>操作5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Indicates a dangerous or potentially negative action --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-lg&quot;</span>&gt;</span>操作6<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6 left-table&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>最新提醒<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-info&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">strong</span>&gt;</span>提示 <span class="tag">&lt;/<span class="name">strong</span>&gt;</span>您的订单（2014001）已被审核通过！ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-warning&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">strong</span>&gt;</span>提示 <span class="tag">&lt;/<span class="name">strong</span>&gt;</span>您的订单（2014002）已被打回！ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-danger&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">strong</span>&gt;</span>提示 <span class="tag">&lt;/<span class="name">strong</span>&gt;</span>您的订单（2013001）客户付款延时！ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>我的任务<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-info&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span> 订单审批<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;badge&quot;</span>&gt;</span>42<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-info&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span> 收款确认<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;badge&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-info&quot;</span> <span class="attr">role</span>=<span class="string">&quot;alert&quot;</span>&gt;</span> 付款确认<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;badge&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6 left-table&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>最新订单<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-striped&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">th</span>&gt;</span>产品<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">th</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">th</span>&gt;</span>金额<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">th</span>&gt;</span>业务员<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apple Macbook air<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>10<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>80000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>王小贱<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apple iPad air<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>20<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>65000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>尹开花<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apple Macbook pro<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>50000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>刘老根<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>查看详情&gt;&gt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>工程进度<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;label label-primary pro-title&quot;</span>&gt;</span>水井挖掘工程<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar&quot;</span> <span class="attr">role</span>=<span class="string">&quot;progressbar&quot;</span> <span class="attr">aria-valuenow</span>=<span class="string">&quot;60&quot;</span> <span class="attr">aria-valuemin</span>=<span class="string">&quot;0&quot;</span> <span class="attr">aria-valuemax</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 60%;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>60% Complete<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;label label-danger pro-title&quot;</span>&gt;</span>基建工程<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar progress-bar-danger&quot;</span> <span class="attr">role</span>=<span class="string">&quot;progressbar&quot;</span> <span class="attr">aria-valuenow</span>=<span class="string">&quot;80&quot;</span> <span class="attr">aria-valuemin</span>=<span class="string">&quot;0&quot;</span> <span class="attr">aria-valuemax</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>80% Complete (danger)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="插件拓展"><a href="#插件拓展" class="headerlink" title="插件拓展"></a>插件拓展</h3><ul><li>复选框(css)<br><a href="https://github.com/flatlogic/awesome-bootstrap-checkbox">https://github.com/flatlogic/awesome-bootstrap-checkbox</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkbox1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;styled&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;checkbox1&quot;</span>&gt;</span></span><br><span class="line">        全选</span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>分页绑定(js)<br><a href="https://github.com/esimakin/twbs-pagination">twbs-pagination</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#page-indicator&quot;</span>).<span class="title function_">twbsPagination</span>(<span class="string">&quot;destroy&quot;</span>);</span><br><span class="line">$(<span class="string">&#x27;#page-indicator&#x27;</span>).<span class="title function_">twbsPagination</span>(&#123;</span><br><span class="line">    <span class="attr">totalPages</span>: data.<span class="property">totalPage</span>,</span><br><span class="line">    <span class="attr">visiblePages</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">onPageClick</span>: <span class="keyword">function</span> (<span class="params">event, page</span>) &#123;</span><br><span class="line">        <span class="title function_">getProjectList</span>(userId, page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>下拉选框(js和css)<br><a href="https://github.com/silviomoreto/bootstrap-select">bootstrap-select</a><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;selectpicker&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>Mustard<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>Ketchup<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>Barbecue<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网页前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网页前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-一个TextView显示黑色标题和灰色内容</title>
      <link href="/2018/01/05/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E4%B8%80%E4%B8%AATextView%E6%98%BE%E7%A4%BA%E9%BB%91%E8%89%B2%E6%A0%87%E9%A2%98%E5%92%8C%E7%81%B0%E8%89%B2%E5%86%85%E5%AE%B9/"/>
      <url>/2018/01/05/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E4%B8%80%E4%B8%AATextView%E6%98%BE%E7%A4%BA%E9%BB%91%E8%89%B2%E6%A0%87%E9%A2%98%E5%92%8C%E7%81%B0%E8%89%B2%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><ul><li>标题黑色，内容灰色；</li><li>标题后紧跟内容；</li><li>内容换行后和标题对齐；</li></ul><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><ul><li>两个TextView不能实现；</li></ul><h3 id="可行方案"><a href="#可行方案" class="headerlink" title="可行方案"></a>可行方案</h3><ul><li>方案1：一个TextView，使用SpannableString</li><li>方案2：一个TextView，使用Html标签控制样式</li></ul><span id="more"></span><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> SpannableStringBuilder <span class="title function_">generateTitleContent</span><span class="params">(String title, String content)</span> &#123;</span><br><span class="line">    <span class="type">SpannableStringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpannableStringBuilder</span>(title + content);</span><br><span class="line">    sb.setSpan(<span class="keyword">new</span> <span class="title class_">StyleSpan</span>(Typeface.BOLD), <span class="number">0</span>, title.length(), </span><br><span class="line">    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class="line">    sb.setSpan(<span class="keyword">new</span> <span class="title class_">ForegroundColorSpan</span>(Color.BLACK), <span class="number">0</span>, title.length(), </span><br><span class="line">    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class="line">    sb.setSpan(<span class="keyword">new</span> <span class="title class_">ForegroundColorSpan</span>(Color.parseColor(<span class="string">&quot;#5f656e&quot;</span>)), title.length(), title.length() + content.length(), </span><br><span class="line">    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class="line">    <span class="keyword">return</span> sb;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mTextView.setText(generateTitleContent(title, content));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-Android桌面Logo尺寸要求</title>
      <link href="/2018/01/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android%E6%A1%8C%E9%9D%A2Logo%E5%B0%BA%E5%AF%B8%E8%A6%81%E6%B1%82/"/>
      <url>/2018/01/04/%E5%B0%8F%E5%B8%B8%E8%AF%86-Android%E6%A1%8C%E9%9D%A2Logo%E5%B0%BA%E5%AF%B8%E8%A6%81%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h3 id="Android-Icon-Size-and-Location-for-Apps"><a href="#Android-Icon-Size-and-Location-for-Apps" class="headerlink" title="Android Icon Size and Location for Apps"></a>Android Icon Size and Location for Apps</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DENSITY   SIZE      LOCATION            RATIO    SCREEN     MARGIN</span><br><span class="line">XXXHDPI   192×192   drawable-xxxhdpi    4        640 DPI    12 to 16 pixels</span><br><span class="line">XXHDPI    144×144   drawable-xxhdpi     3        480 DPI    8 to 12 pixels</span><br><span class="line">XHDPI     96×96     drawable-xhdpi      2        320 DPI    6 to 8 pixels</span><br><span class="line">HDPI      72×72     drawable-hdpi       1.5      240 DPI    4 to 6 pixels</span><br><span class="line">MDPI      48×48     drawable-mdpi       1        160 DPI    3 to 4 pixels</span><br><span class="line">MDPI      48×48     drawable (Cupcake)  1        160 DPI    3 to 4 pixels</span><br><span class="line">LDPI      36×36     drawable-ldpi       0.75     120 DPI    2 to 3 pixels</span><br><span class="line">NA        512×512   Google Play         NA       NA         As required</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-SlidingValidationView</title>
      <link href="/2017/12/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-SlidingValidationView/"/>
      <url>/2017/12/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-SlidingValidationView/</url>
      
        <content type="html"><![CDATA[<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/../../../../images/SlidingValidation.gif" alt="图2"></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;SlidingValidationView&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_drag_view_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_line_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_final_point_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_sliding_progress&quot;</span> <span class="attr">format</span>=<span class="string">&quot;integer&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_draw_radius&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_final_point_radius&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;sv_line_point_radius&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension|reference&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.annotation.TargetApi;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 滑动验证</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2017/12/27.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SlidingValidationView</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> dragViewColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> lineColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> finalPointColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> progress;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> showDragViewShadow;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> slidingX;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> dragRadius;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> finalPointRadius;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> linePointRadius;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> Paint dragViewPaint;</span><br><span class="line">    <span class="keyword">private</span> Paint leftLinePaint;</span><br><span class="line">    <span class="keyword">private</span> Paint rightLinePaint;</span><br><span class="line">    <span class="keyword">private</span> Paint finalPointPaint;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isDragging;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> dragEnable;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> OnSlidingListener slidingListener;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> downX;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnSlidingListener</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">onSlidingProgress</span><span class="params">(<span class="type">int</span> progress)</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">onOk</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSlidingListener</span><span class="params">(OnSlidingListener slidingListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.slidingListener = slidingListener;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SlidingValidationView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SlidingValidationView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SlidingValidationView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@TargetApi(android.os.Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SlidingValidationView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (attrs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">TypedArray</span> <span class="variable">t</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.SlidingValidationView);</span><br><span class="line">            dragViewColor = t.getColor(R.styleable.SlidingValidationView_sv_drag_view_color, <span class="number">0xff35559b</span>);</span><br><span class="line">            lineColor = t.getColor(R.styleable.SlidingValidationView_sv_line_color, <span class="number">0xff45c1f9</span>);</span><br><span class="line">            finalPointColor = t.getColor(R.styleable.SlidingValidationView_sv_final_point_color, <span class="number">0xff7ed321</span>);</span><br><span class="line">            progress = t.getInteger(R.styleable.SlidingValidationView_sv_sliding_progress, <span class="number">0</span>);</span><br><span class="line">            dragRadius = t.getInteger(R.styleable.SlidingValidationView_sv_draw_radius, <span class="number">60</span>);</span><br><span class="line">            finalPointRadius = t.getInteger(R.styleable.SlidingValidationView_sv_final_point_radius, <span class="number">18</span>);</span><br><span class="line">            linePointRadius = t.getInteger(R.styleable.SlidingValidationView_sv_line_point_radius, <span class="number">6</span>);</span><br><span class="line">            t.recycle();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dragViewColor = <span class="number">0xff35559b</span>;</span><br><span class="line">            lineColor = <span class="number">0xff45c1f9</span>;</span><br><span class="line">            finalPointColor = <span class="number">0xff7ed321</span>;</span><br><span class="line">            progress = <span class="number">0</span>;</span><br><span class="line">            dragRadius = <span class="number">60</span>;</span><br><span class="line">            finalPointRadius = <span class="number">18</span>;</span><br><span class="line">            linePointRadius = <span class="number">6</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dragRadius = AutoUtils.getPercentWidthSize(dragRadius);</span><br><span class="line">        finalPointRadius = AutoUtils.getPercentWidthSize(finalPointRadius);</span><br><span class="line">        linePointRadius = AutoUtils.getPercentWidthSize(linePointRadius);</span><br><span class="line">  </span><br><span class="line">        dragEnable = <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">        initPaint();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initPaint</span><span class="params">()</span> &#123;</span><br><span class="line">        dragViewPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        dragViewPaint.setColor(dragViewColor);</span><br><span class="line">        dragViewPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        dragViewPaint.setStrokeWidth(<span class="number">6f</span>);</span><br><span class="line">        dragViewPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">  </span><br><span class="line">        leftLinePaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        leftLinePaint.setColor(finalPointColor);</span><br><span class="line">        leftLinePaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        leftLinePaint.setStrokeWidth(<span class="number">2f</span>);</span><br><span class="line">        leftLinePaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">  </span><br><span class="line">        rightLinePaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        rightLinePaint.setColor(lineColor);</span><br><span class="line">        rightLinePaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        rightLinePaint.setStrokeWidth(<span class="number">2f</span>);</span><br><span class="line">        rightLinePaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">  </span><br><span class="line">        finalPointPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        finalPointPaint.setColor(finalPointColor);</span><br><span class="line">        finalPointPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        finalPointPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">        drawFinalPoint(canvas);</span><br><span class="line">        drawLeftLine(canvas);</span><br><span class="line">        drawRightLine(canvas);</span><br><span class="line">        drawDragView(canvas);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawFinalPoint</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        finalPointPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        finalPointPaint.setColor(finalPointColor);</span><br><span class="line">        canvas.drawCircle(centerX, centerY, finalPointRadius / <span class="number">2</span>, finalPointPaint);</span><br><span class="line">        finalPointPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        finalPointPaint.setStrokeWidth(<span class="number">1f</span>);</span><br><span class="line">        finalPointPaint.setColor(<span class="number">0xff3a559b</span>);</span><br><span class="line">        canvas.drawCircle(centerX, centerY, finalPointRadius, finalPointPaint);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawLeftLine</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pointStartX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pointEndX</span> <span class="operator">=</span> (<span class="type">int</span>) ((progress * <span class="number">1.0f</span> / <span class="number">100</span>) * (endX - startX));</span><br><span class="line">        <span class="type">int</span> <span class="variable">dx</span> <span class="operator">=</span> pointEndX - pointStartX;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> dx / (linePointRadius * <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> pointStartX + i * dx / count;</span><br><span class="line">            canvas.drawCircle(x, centerY, linePointRadius, leftLinePaint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawRightLine</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pointStartX</span> <span class="operator">=</span> centerX * <span class="number">2</span> + <span class="number">20</span> + (<span class="type">int</span>) ((progress * <span class="number">1.0f</span> / <span class="number">100</span>) * (endX - startX));</span><br><span class="line">        <span class="type">int</span> <span class="variable">pointEndX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span> - finalPointRadius;</span><br><span class="line">        <span class="type">int</span> <span class="variable">dx</span> <span class="operator">=</span> pointEndX - pointStartX;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> dx / (linePointRadius * <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> pointStartX + i * dx / count;</span><br><span class="line">            canvas.drawCircle(x, centerY, linePointRadius, rightLinePaint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawDragView</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span> + (<span class="type">int</span>) ((progress * <span class="number">1.0f</span> / <span class="number">100</span>) * (endX - startX));</span><br><span class="line">        <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">        <span class="comment">//画圆</span></span><br><span class="line">        dragViewPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        dragViewPaint.setAlpha((<span class="type">int</span>) (<span class="number">255</span> * <span class="number">0.8</span>));</span><br><span class="line">        <span class="keyword">if</span> (progress &lt; <span class="number">90</span>) &#123;</span><br><span class="line">            dragViewPaint.setColor(dragViewColor);</span><br><span class="line">            canvas.drawCircle(centerX, centerY, dragRadius, dragViewPaint);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dragViewPaint.setColor(finalPointColor);</span><br><span class="line">            canvas.drawCircle(centerX, centerY, dragRadius, dragViewPaint);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        dragViewPaint.setColor(dragViewColor);</span><br><span class="line">        dragViewPaint.setAlpha(<span class="number">255</span>);</span><br><span class="line">        <span class="keyword">if</span> (progress &lt; <span class="number">90</span>) &#123;</span><br><span class="line">            <span class="comment">//画点</span></span><br><span class="line">            dragViewPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">            <span class="type">int</span> <span class="variable">pointStartX</span> <span class="operator">=</span> centerX - dragRadius / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">pointEndX</span> <span class="operator">=</span> centerX + dragRadius / <span class="number">5</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">dx</span> <span class="operator">=</span> pointEndX - pointStartX;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">4</span>; i++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> pointStartX + i * dx / <span class="number">4</span>;</span><br><span class="line">                canvas.drawCircle(x, centerY, <span class="number">3</span>, dragViewPaint);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//画箭头</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">arrayStartX</span> <span class="operator">=</span> pointEndX + dx / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">arrayEntTopY</span> <span class="operator">=</span> centerY - dx / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">arrayEndBottomY</span> <span class="operator">=</span> centerY + dx / <span class="number">2</span>;</span><br><span class="line">            canvas.drawCircle(arrayStartX, centerY, <span class="number">2</span>, dragViewPaint);</span><br><span class="line">            canvas.drawLine(arrayStartX, centerY, pointEndX, arrayEntTopY, dragViewPaint);</span><br><span class="line">            canvas.drawLine(arrayStartX, centerY, pointEndX, arrayEndBottomY, dragViewPaint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 还原</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reset</span><span class="params">()</span> &#123;</span><br><span class="line">        dragEnable = <span class="literal">true</span>;</span><br><span class="line">        setProgress(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(MotionEvent event)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dragEnable) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (event.getAction()) &#123;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                    <span class="type">int</span> <span class="variable">centerX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">centerY</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">                    <span class="type">float</span> <span class="variable">x</span> <span class="operator">=</span> event.getX();</span><br><span class="line">                    <span class="type">float</span> <span class="variable">y</span> <span class="operator">=</span> event.getY();</span><br><span class="line">                    <span class="type">double</span> <span class="variable">r</span> <span class="operator">=</span> Math.sqrt(Math.pow((centerX - x), <span class="number">2</span>) + Math.pow((centerY - y), <span class="number">2</span>));</span><br><span class="line">                    <span class="keyword">if</span> (r &lt; dragRadius) &#123;</span><br><span class="line">                        downX = event.getX();</span><br><span class="line">                        isDragging = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">                    <span class="keyword">if</span> (isDragging) &#123;</span><br><span class="line">                        <span class="type">float</span> <span class="variable">rawX</span> <span class="operator">=</span> event.getX();</span><br><span class="line">                        <span class="type">float</span> <span class="variable">dx</span> <span class="operator">=</span> rawX - downX;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">endX</span> <span class="operator">=</span> getWidth() - dragRadius - <span class="number">10</span>;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> dragRadius + <span class="number">10</span>;</span><br><span class="line">                        progress = (<span class="type">int</span>) (dx * <span class="number">100.0f</span> / (endX - startX) + <span class="number">0.5f</span>);</span><br><span class="line">                        <span class="keyword">if</span> (progress &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                            progress = <span class="number">0</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (progress &gt; <span class="number">100</span>) &#123;</span><br><span class="line">                            progress = <span class="number">100</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (slidingListener != <span class="literal">null</span>) &#123;</span><br><span class="line">                            slidingListener.onSlidingProgress(progress);</span><br><span class="line">                        &#125;</span><br><span class="line">                        invalidate();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">                    isDragging = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">if</span> (progress &gt; <span class="number">90</span>) &#123;</span><br><span class="line">                        progress = <span class="number">100</span>;</span><br><span class="line">                        dragEnable = <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">if</span> (slidingListener != <span class="literal">null</span>) &#123;</span><br><span class="line">                            slidingListener.onOk();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (slidingListener != <span class="literal">null</span>) &#123;</span><br><span class="line">                            slidingListener.onCancel();</span><br><span class="line">                        &#125;</span><br><span class="line">                        progress = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    invalidate();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDragging</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isDragging;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDragEnable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dragEnable;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置拖动开关</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dragEnable 开／关</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDragEnable</span><span class="params">(<span class="type">boolean</span> dragEnable)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dragEnable = dragEnable;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDragViewColor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dragViewColor;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDragViewColor</span><span class="params">(<span class="type">int</span> dragViewColor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dragViewColor = dragViewColor;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLineColor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lineColor;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLineColor</span><span class="params">(<span class="type">int</span> lineColor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lineColor = lineColor;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFinalPointColor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> finalPointColor;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFinalPointColor</span><span class="params">(<span class="type">int</span> finalPointColor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.finalPointColor = finalPointColor;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isShowDragViewShadow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> showDragViewShadow;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setShowDragViewShadow</span><span class="params">(<span class="type">boolean</span> showDragViewShadow)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.showDragViewShadow = showDragViewShadow;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">getSlidingX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> slidingX;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSlidingX</span><span class="params">(<span class="type">float</span> slidingX)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.slidingX = slidingX;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getProgress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> progress;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProgress</span><span class="params">(<span class="type">int</span> progress)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.progress = progress;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDragRadius</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dragRadius;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDragRadius</span><span class="params">(<span class="type">int</span> dragRadius)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dragRadius = dragRadius;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFinalPointRadius</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> finalPointRadius;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFinalPointRadius</span><span class="params">(<span class="type">int</span> finalPointRadius)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.finalPointRadius = finalPointRadius;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLinePointRadius</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> linePointRadius;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLinePointRadius</span><span class="params">(<span class="type">int</span> linePointRadius)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.linePointRadius = linePointRadius;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> dragRadius * <span class="number">2</span> + <span class="number">20</span>;</span><br><span class="line">        setMeasuredDimension(width, height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注意包名改成自己的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">com.example.slidingverificationtest.ui.widget.SlidingValidationView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/sv&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;40px&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SlidingValidationView</span> <span class="variable">sv</span> <span class="operator">=</span> (SlidingValidationView) findViewById(R.id.sv);</span><br><span class="line">sv.setOnSlidingListener(<span class="keyword">new</span> <span class="title class_">SlidingValidationView</span>.OnSlidingListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSlidingProgress</span><span class="params">(<span class="type">int</span> progress)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOk</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-RatioColorBar</title>
      <link href="/2017/12/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-RatioColorBar/"/>
      <url>/2017/12/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-RatioColorBar/</url>
      
        <content type="html"><![CDATA[<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/../../../../images/RatioColorBar.png" alt="图2"></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;RatioColorBar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;rcb_show_border&quot;</span> <span class="attr">format</span>=<span class="string">&quot;boolean&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;rcb_show_padding&quot;</span> <span class="attr">format</span>=<span class="string">&quot;boolean&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;rcb_border_width&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;rcb_border_padding&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension|reference&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;rcb_border_color&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color|reference&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.annotation.TargetApi;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 彩虹条</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2017/12/28.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RatioColorBar</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> showBorder;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> showPadding;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> borderWidth;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> borderColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> padding;</span><br><span class="line">    <span class="keyword">private</span> List&lt;RatioBarData&gt; colorBars;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> Paint borderPaint;</span><br><span class="line">    <span class="keyword">private</span> Paint barPaint;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RatioColorBar</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RatioColorBar</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RatioColorBar</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@TargetApi(Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RatioColorBar</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (attrs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">TypedArray</span> <span class="variable">t</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.RatioColorBar);</span><br><span class="line">            showBorder = t.getBoolean(R.styleable.RatioColorBar_rcb_show_border, <span class="literal">false</span>);</span><br><span class="line">            showPadding = t.getBoolean(R.styleable.RatioColorBar_rcb_show_padding, <span class="literal">false</span>);</span><br><span class="line">            borderColor = t.getColor(R.styleable.RatioColorBar_rcb_border_color, <span class="number">0xffeeeeee</span>);</span><br><span class="line">            borderWidth = t.getDimensionPixelSize(R.styleable.RatioColorBar_rcb_border_width, <span class="number">1</span>);</span><br><span class="line">            padding = t.getDimensionPixelSize(R.styleable.RatioColorBar_rcb_border_padding, <span class="number">1</span>);</span><br><span class="line">            t.recycle();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            showBorder = <span class="literal">false</span>;</span><br><span class="line">            showPadding = <span class="literal">false</span>;</span><br><span class="line">            borderColor = <span class="number">0xffeeeeee</span>;</span><br><span class="line">            borderWidth = <span class="number">1</span>;</span><br><span class="line">            padding = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        borderWidth = AutoUtils.getPercentWidthSize(borderWidth);</span><br><span class="line">        padding = AutoUtils.getPercentWidthSize(padding);</span><br><span class="line">  </span><br><span class="line">        initPaints();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initPaints</span><span class="params">()</span> &#123;</span><br><span class="line">        borderPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        borderPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">        borderPaint.setColor(borderColor);</span><br><span class="line">        borderPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        borderPaint.setStrokeWidth(borderWidth);</span><br><span class="line">  </span><br><span class="line">        barPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">        barPaint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">        barPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">        <span class="keyword">if</span> (colorBars != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">endX</span> <span class="operator">=</span> getWidth();</span><br><span class="line">            <span class="type">int</span> <span class="variable">startY</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">endY</span> <span class="operator">=</span> getHeight();</span><br><span class="line">            <span class="keyword">if</span> (showBorder) &#123;</span><br><span class="line">                startX += borderWidth;</span><br><span class="line">                endX -= borderWidth;</span><br><span class="line">                startY += borderWidth;</span><br><span class="line">                endY -= borderWidth;</span><br><span class="line">                canvas.drawRect(startX, startY, endX, endY, borderPaint);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (showPadding) &#123;</span><br><span class="line">                startX += padding;</span><br><span class="line">                endX -= padding;</span><br><span class="line">                startY += padding;</span><br><span class="line">                endY -= padding;</span><br><span class="line">            &#125;</span><br><span class="line">            Log.e(<span class="string">&quot;RRR&quot;</span>, <span class="string">&quot;sx=&quot;</span> + startX + <span class="string">&quot;,ex=&quot;</span> + endX + <span class="string">&quot;,sy=&quot;</span> + startY + <span class="string">&quot;,ey=&quot;</span> + endY);</span><br><span class="line">            <span class="type">int</span> <span class="variable">dx</span> <span class="operator">=</span> endX - startX;</span><br><span class="line">            Log.e(<span class="string">&quot;RRR&quot;</span>, <span class="string">&quot;dx=&quot;</span> + dx);</span><br><span class="line">            <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (RatioBarData colorBar : colorBars) &#123;</span><br><span class="line">                sum += colorBar.getValue();</span><br><span class="line">            &#125;</span><br><span class="line">            Log.e(<span class="string">&quot;RRR&quot;</span>, <span class="string">&quot;sum=&quot;</span> + sum);</span><br><span class="line">            <span class="keyword">if</span> (sum != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">realStartX</span> <span class="operator">=</span> startX;</span><br><span class="line">                <span class="keyword">for</span> (RatioBarData colorBar : colorBars) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">color</span> <span class="operator">=</span> colorBar.getColor();</span><br><span class="line">                    <span class="type">int</span> <span class="variable">ratioWidth</span> <span class="operator">=</span> (<span class="type">int</span>) ((dx * (colorBar.getValue() * <span class="number">1.0</span> / sum)) + <span class="number">0.5f</span>);</span><br><span class="line">                    Log.e(<span class="string">&quot;RRR&quot;</span>, <span class="string">&quot;ratioWidth=&quot;</span> + ratioWidth);</span><br><span class="line">                    barPaint.setColor(color);</span><br><span class="line">                    Log.e(<span class="string">&quot;RRR&quot;</span>, <span class="string">&quot;realStartX=&quot;</span> + realStartX);</span><br><span class="line">                    canvas.drawRect(realStartX, startY, realStartX + ratioWidth, endY, barPaint);</span><br><span class="line">                    realStartX += ratioWidth;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColorBars</span><span class="params">(List&lt;RatioBarData&gt; colorBars)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.colorBars = colorBars;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">RatioBarData</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> value;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> color;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">RatioBarData</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">RatioBarData</span><span class="params">(<span class="type">long</span> value, <span class="type">int</span> color)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.color = color;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="type">long</span> value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getColor</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> color;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(<span class="type">int</span> color)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.color = color;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注意包名改成自己的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">com.example.slidingverificationtest.ui.widget.RatioColorBar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/rcb&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;75px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:rcb_border_color</span>=<span class="string">&quot;#eee&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:rcb_border_padding</span>=<span class="string">&quot;3px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:rcb_border_width</span>=<span class="string">&quot;3px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:rcb_show_border</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:rcb_show_padding</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RatioColorBar</span> <span class="variable">bar</span> <span class="operator">=</span> (RatioColorBar) findViewById(R.id.rcb);</span><br><span class="line">List&lt;RatioColorBar.RatioBarData&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">200</span>, <span class="number">0xffd8d8d8</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">200</span>, <span class="number">0xff7ed321</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">50</span>, <span class="number">0xffd0021b</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">200</span>, <span class="number">0xff7ed321</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">10</span>, <span class="number">0xffd0021b</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">20</span>, <span class="number">0xff7ed321</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">10</span>, <span class="number">0xffd0021b</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">300</span>, <span class="number">0xfff5a623</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">200</span>, <span class="number">0xff7ed321</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">60</span>, <span class="number">0xffd8d8d8</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">100</span>, <span class="number">0xfff5a623</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">RatioColorBar</span>.RatioBarData(<span class="number">600</span>, <span class="number">0xff7ed321</span>));</span><br><span class="line">bar.setColorBars(list);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小常识-Foxmail配置网易企业邮箱</title>
      <link href="/2017/12/26/%E5%B0%8F%E5%B8%B8%E8%AF%86-Foxmail%E9%85%8D%E7%BD%AE%E7%BD%91%E6%98%93%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1/"/>
      <url>/2017/12/26/%E5%B0%8F%E5%B8%B8%E8%AF%86-Foxmail%E9%85%8D%E7%BD%AE%E7%BD%91%E6%98%93%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1/</url>
      
        <content type="html"><![CDATA[<h2 id="Foxmail邮件配置"><a href="#Foxmail邮件配置" class="headerlink" title="Foxmail邮件配置"></a>Foxmail邮件配置</h2><h3 id="网易企业邮箱"><a href="#网易企业邮箱" class="headerlink" title="网易企业邮箱"></a>网易企业邮箱</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POP3</span><br><span class="line">pop.ym.163.com  SSL 995</span><br><span class="line">smtp.ym.163.com SSL 465</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 常识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-控件任意拖动+点击监听</title>
      <link href="/2017/12/22/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%8E%A7%E4%BB%B6%E4%BB%BB%E6%84%8F%E6%8B%96%E5%8A%A8-%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC/"/>
      <url>/2017/12/22/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%8E%A7%E4%BB%B6%E4%BB%BB%E6%84%8F%E6%8B%96%E5%8A%A8-%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC/</url>
      
        <content type="html"><![CDATA[<h3 id="实现代码-ImageView为例"><a href="#实现代码-ImageView为例" class="headerlink" title="实现代码(ImageView为例)"></a>实现代码(ImageView为例)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.highcloud.ui.widget;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by KID on 2017/11/14.</span></span><br><span class="line"><span class="comment"> * 随意拖动的view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressLint(&quot;AppCompatCustomView&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DragView</span> <span class="keyword">extends</span> <span class="title class_">ImageView</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> width;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> height;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> screenWidth;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> screenHeight;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">dragEnable</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//是否拖动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isDrag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDrag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isDrag;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDragEnable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dragEnable;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDragEnable</span><span class="params">(<span class="type">boolean</span> dragEnable)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dragEnable = dragEnable;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DragView</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        dragEnable = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        width = getMeasuredWidth();</span><br><span class="line">        height = getMeasuredHeight();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> downX;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> downY;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(MotionEvent event)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onTouchEvent(event);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.isEnabled()) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (event.getAction()) &#123;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                    isDrag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="type">ViewGroup</span> <span class="variable">mViewGroup</span> <span class="operator">=</span> (ViewGroup) getParent();</span><br><span class="line">                    <span class="keyword">if</span> (<span class="literal">null</span> != mViewGroup) &#123;</span><br><span class="line">                        screenWidth = mViewGroup.getWidth();</span><br><span class="line">                        screenHeight = mViewGroup.getHeight();</span><br><span class="line">                    &#125;</span><br><span class="line">                    downX = event.getX();</span><br><span class="line">                    downY = event.getY();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">                    Log.e(<span class="string">&quot;kid&quot;</span>, <span class="string">&quot;ACTION_MOVE&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (dragEnable) &#123;</span><br><span class="line">                        <span class="keyword">final</span> <span class="type">float</span> <span class="variable">xDistance</span> <span class="operator">=</span> event.getX() - downX;</span><br><span class="line">                        <span class="keyword">final</span> <span class="type">float</span> <span class="variable">yDistance</span> <span class="operator">=</span> event.getY() - downY;</span><br><span class="line">                        <span class="type">int</span> l, r, t, b;</span><br><span class="line">                        <span class="comment">//当水平或者垂直滑动距离大于10,才算拖动事件</span></span><br><span class="line">                        <span class="keyword">if</span> (Math.abs(xDistance) &gt; <span class="number">10</span> || Math.abs(yDistance) &gt; <span class="number">10</span>) &#123;</span><br><span class="line">                            Log.e(<span class="string">&quot;kid&quot;</span>, <span class="string">&quot;Drag&quot;</span>);</span><br><span class="line">                            isDrag = <span class="literal">true</span>;</span><br><span class="line">                            l = (<span class="type">int</span>) (getLeft() + xDistance);</span><br><span class="line">                            r = l + width;</span><br><span class="line">                            t = (<span class="type">int</span>) (getTop() + yDistance);</span><br><span class="line">                            b = t + height;</span><br><span class="line">                            <span class="comment">//不划出边界判断,此处应按照项目实际情况,因为本项目需求移动的位置是手机全屏,</span></span><br><span class="line">                            <span class="comment">// 所以才能这么写,如果是固定区域,要得到父控件的宽高位置后再做处理</span></span><br><span class="line">                            <span class="keyword">if</span> (l &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                l = <span class="number">0</span>;</span><br><span class="line">                                r = l + width;</span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r &gt; screenWidth) &#123;</span><br><span class="line">                                r = screenWidth;</span><br><span class="line">                                l = r - width;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (t &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                t = <span class="number">0</span>;</span><br><span class="line">                                b = t + height;</span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (b &gt; screenHeight) &#123;</span><br><span class="line">                                b = screenHeight;</span><br><span class="line">                                t = b - height;</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="built_in">this</span>.layout(l, t, r, b);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">                    setPressed(<span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MotionEvent.ACTION_CANCEL:</span><br><span class="line">                    setPressed(<span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-DieJiaIndicator</title>
      <link href="/2017/12/21/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-DieJiaIndicator/"/>
      <url>/2017/12/21/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-DieJiaIndicator/</url>
      
        <content type="html"><![CDATA[<h2 id="固定数量效果图"><a href="#固定数量效果图" class="headerlink" title="固定数量效果图"></a>固定数量效果图</h2><p><img src="/../../../../images/DieJiaIndicatorDemo2.gif" alt="图2"></p><h2 id="动态数量效果图"><a href="#动态数量效果图" class="headerlink" title="动态数量效果图"></a>动态数量效果图</h2><p><img src="/../../../../images/DieJiaIndicatorDemo.gif" alt="图1"></p><span id="more"></span><h3 id="固定数量代码实现"><a href="#固定数量代码实现" class="headerlink" title="固定数量代码实现"></a>固定数量代码实现</h3><ul><li><p>layout关键代码</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_top_tabs&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10px&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_top_tabs_childs&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_error&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;85px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/machinestate_error_selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_working&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;85px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/machinestate_working_selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_free&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;85px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/machinestate_free_selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_disconnect&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;85px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/machinestate_disconnect_selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_all&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;85px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">&quot;@drawable/machinestate_all_selected&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">&quot;width&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_top_tabs_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingBottom</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingTop</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;所有 80&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingBottom</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingTop</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;失联 20&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingBottom</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingTop</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;空闲 20&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingBottom</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingTop</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;工作 20&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingBottom</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingTop</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;故障 20&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;31px&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>java关键代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; llTopTabsTv.getChildCount(); i++) &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">childAt</span> <span class="operator">=</span> llTopTabsTv.getChildAt(i);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">finalI</span> <span class="operator">=</span> i;</span><br><span class="line">        childAt.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                setTopTabSelection(finalI);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setTopTabSelection</span><span class="params">(<span class="type">int</span> finalI)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (finalI) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivError);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivFree);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivAll);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivError);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivFree);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivAll);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivError);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivAll);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivFree);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivError);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivAll);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivFree);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivAll);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivFree);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</span><br><span class="line">            flTopTabsChilds.bringChildToFront(ivError);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="动态数量代码实现"><a href="#动态数量代码实现" class="headerlink" title="动态数量代码实现"></a>动态数量代码实现</h3><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.annotation.TargetApi;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Parcel;</span><br><span class="line"><span class="keyword">import</span> android.os.Parcelable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.util.TypedValue;</span><br><span class="line"><span class="keyword">import</span> android.view.Gravity;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.FrameLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.HorizontalScrollView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 叠加的Tab</span></span><br><span class="line"><span class="comment"> * Created by admin on 2017/12/20.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DieJiaIndicator</span> <span class="keyword">extends</span> <span class="title class_">HorizontalScrollView</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> normalDrawableId;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> selectDrawableId;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; items;</span><br><span class="line">    <span class="keyword">private</span> FrameLayout flBg;</span><br><span class="line">    <span class="keyword">private</span> FrameLayout flTv;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ImageView&gt; imgs;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> OnItemClickListener onItemClickListener;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnItemClickListener</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(<span class="type">int</span> position, <span class="type">boolean</span> changed)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onItemClickListener = onItemClickListener;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DieJiaIndicator</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@TargetApi(Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyleAttr, <span class="type">int</span> defStyleRes)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        setHorizontalScrollBarEnabled(<span class="literal">false</span>);</span><br><span class="line">        imgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">RelativeLayout</span> <span class="variable">rlRoot</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RelativeLayout</span>(context, attrs);</span><br><span class="line">        flBg = <span class="keyword">new</span> <span class="title class_">FrameLayout</span>(context, attrs);</span><br><span class="line">        flTv = <span class="keyword">new</span> <span class="title class_">FrameLayout</span>(context, attrs);</span><br><span class="line">        rlRoot.addView(flBg);</span><br><span class="line">        rlRoot.addView(flTv);</span><br><span class="line">        addView(rlRoot);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setItems</span><span class="params">(<span class="type">int</span> normalDrawableId, <span class="type">int</span> selectDrawableId, List&lt;String&gt; items)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.normalDrawableId = normalDrawableId;</span><br><span class="line">        <span class="built_in">this</span>.selectDrawableId = selectDrawableId;</span><br><span class="line">        <span class="built_in">this</span>.items = items;</span><br><span class="line">        initChildren();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initChildren</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (items != <span class="literal">null</span> &amp;&amp; items.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flBg.removeAllViews();</span><br><span class="line">            flTv.removeAllViews();</span><br><span class="line">            imgs.clear();</span><br><span class="line">            <span class="keyword">for</span> (String item : items) &#123;</span><br><span class="line">                addTab(item);</span><br><span class="line">            &#125;</span><br><span class="line">            setSelection(<span class="number">0</span>);</span><br><span class="line">            initEvent();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initEvent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; flTv.getChildCount(); i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">TextView</span> <span class="variable">childAt</span> <span class="operator">=</span> (TextView) flTv.getChildAt(i);</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">finalI</span> <span class="operator">=</span> i;</span><br><span class="line">            childAt.setOnClickListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                    setSelection(finalI);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addTab</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> imgs.size();</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">ivBg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageView</span>(getContext());</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> AutoUtils.getPercentWidthSize(<span class="number">206</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> AutoUtils.getPercentHeightSize(<span class="number">78</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMargin</span> <span class="operator">=</span> AutoUtils.getPercentWidthSize(<span class="number">170</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftPadding</span> <span class="operator">=</span> AutoUtils.getPercentWidthSize(<span class="number">50</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">bottomPadding</span> <span class="operator">=</span> AutoUtils.getPercentHeightSize(<span class="number">10</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="type">LayoutParams</span> <span class="variable">lpImg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LayoutParams</span>(width, height);</span><br><span class="line">        lpImg.leftMargin = leftMargin * position;</span><br><span class="line">        ivBg.setLayoutParams(lpImg);</span><br><span class="line">        ivBg.setScaleType(ImageView.ScaleType.FIT_XY);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tvMsg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TextView</span>(getContext());</span><br><span class="line">        tvMsg.setLayoutParams(lpImg);</span><br><span class="line">        tvMsg.setGravity(Gravity.BOTTOM);</span><br><span class="line">        tvMsg.setTextColor(Color.WHITE);</span><br><span class="line">        tvMsg.setPadding(leftPadding, <span class="number">0</span>, <span class="number">0</span>, bottomPadding);</span><br><span class="line">        tvMsg.setText(msg);</span><br><span class="line">        ivBg.setImageResource(normalDrawableId);</span><br><span class="line">        flBg.addView(ivBg);</span><br><span class="line">        flTv.addView(tvMsg);</span><br><span class="line">        imgs.add(ivBg);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSelection</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">normalTextSize</span> <span class="operator">=</span> AutoUtils.getPercentWidthSize(<span class="number">31</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">largetTextSize</span> <span class="operator">=</span> AutoUtils.getPercentWidthSize(<span class="number">36</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; flTv.getChildCount(); i++) &#123;</span><br><span class="line">            <span class="type">TextView</span> <span class="variable">childAt</span> <span class="operator">=</span> (TextView) flTv.getChildAt(i);</span><br><span class="line">            childAt.setTextSize(TypedValue.COMPLEX_UNIT_PX, normalTextSize);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">childAt</span> <span class="operator">=</span> (TextView) flTv.getChildAt(position);</span><br><span class="line">        childAt.setTextSize(TypedValue.COMPLEX_UNIT_PX, largetTextSize);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>; i1 &lt; imgs.size(); i1++) &#123;</span><br><span class="line">            <span class="type">ImageView</span> <span class="variable">childAt1</span> <span class="operator">=</span> imgs.get(i1);</span><br><span class="line">            childAt1.setImageResource(position == i1 ? selectDrawableId : normalDrawableId);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; position; j++) &#123;</span><br><span class="line">            flBg.bringChildToFront(imgs.get(j));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> imgs.size() - <span class="number">1</span>; j &gt; position; j--) &#123;</span><br><span class="line">            flBg.bringChildToFront(imgs.get(j));</span><br><span class="line">        &#125;</span><br><span class="line">        flBg.bringChildToFront(imgs.get(position));</span><br><span class="line">        <span class="keyword">if</span> (onItemClickListener != <span class="literal">null</span>) &#123;</span><br><span class="line">            onItemClickListener.onItemClick(position, DieJiaIndicator.<span class="built_in">this</span>.position != position);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.position = position;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Parcelable <span class="title function_">onSaveInstanceState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Parcelable</span> <span class="variable">superState</span> <span class="operator">=</span> <span class="built_in">super</span>.onSaveInstanceState();</span><br><span class="line">        <span class="type">SaveState</span> <span class="variable">saveState</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaveState</span>(superState);</span><br><span class="line">        saveState.position = <span class="built_in">this</span>.position;</span><br><span class="line">        <span class="keyword">return</span> saveState;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onRestoreInstanceState</span><span class="params">(Parcelable state)</span> &#123;</span><br><span class="line">        <span class="type">SaveState</span> <span class="variable">savedState</span> <span class="operator">=</span> (SaveState) state;</span><br><span class="line">        <span class="built_in">super</span>.onRestoreInstanceState(savedState.getSuperState());</span><br><span class="line">        <span class="built_in">this</span>.position = savedState.position;</span><br><span class="line">        setSelection(position);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSelection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SaveState</span> <span class="keyword">extends</span> <span class="title class_">BaseSavedState</span> &#123;</span><br><span class="line">        <span class="type">int</span> position;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Creator&lt;SaveState&gt; CREATOR = <span class="keyword">new</span> <span class="title class_">Creator</span>&lt;SaveState&gt;() &#123;</span><br><span class="line">            <span class="keyword">public</span> SaveState <span class="title function_">createFromParcel</span><span class="params">(Parcel source)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaveState</span>(source);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">public</span> SaveState[] newArray(<span class="type">int</span> size) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaveState</span>[size];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">describeContents</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeToParcel</span><span class="params">(Parcel dest, <span class="type">int</span> flags)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.writeToParcel(dest, flags);</span><br><span class="line">            dest.writeInt(<span class="built_in">this</span>.position);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">SaveState</span><span class="params">(Parcelable superState)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(superState);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">protected</span> <span class="title function_">SaveState</span><span class="params">(Parcel in)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(in);</span><br><span class="line">            <span class="built_in">this</span>.position = in.readInt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">indicator.setItems(R.drawable.detailinfotabtitle, </span><br><span class="line">R.drawable.detailinfotabtitlecheckedfull, items);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mViewPager.addOnPageChangeListener(<span class="keyword">new</span> <span class="title class_">ViewPager</span>.OnPageChangeListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrolled</span><span class="params">(<span class="type">int</span> position, <span class="type">float</span> positionOffset, <span class="type">int</span> positionOffsetPixels)</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        indicator.setSelection(position);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrollStateChanged</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">indicator.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">DieJiaIndicator</span>.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(<span class="type">int</span> position, <span class="type">boolean</span> changed)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (changed) &#123;</span><br><span class="line">            mViewPager.setCurrentItem(position);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-onRestoreInstanceState类型强转报错</title>
      <link href="/2017/12/21/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-onRestoreInstanceState%E7%B1%BB%E5%9E%8B%E5%BC%BA%E8%BD%AC%E6%8A%A5%E9%94%99/"/>
      <url>/2017/12/21/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-onRestoreInstanceState%E7%B1%BB%E5%9E%8B%E5%BC%BA%E8%BD%AC%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<h2 id="问题重现"><a href="#问题重现" class="headerlink" title="问题重现"></a>问题重现</h2><h3 id="层级关系"><a href="#层级关系" class="headerlink" title="层级关系"></a>层级关系</h3><ul><li>ViewPager+Indicator<br> -&gt;Fragment<br>   -&gt;ViewPager+Indicator<br>  -&gt;Fragment</li></ul><span id="more"></span><h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">java.lang.ClassCastException: android.view.AbsSavedState$1 cannot be cast to com.keqiang.highcloud.ui.widget.DieJiaIndicator$SaveState</span><br><span class="line">     at android.view.View.dispatchRestoreInstanceState(View.java:12799)</span><br><span class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2637)</span><br><span class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</span><br><span class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</span><br><span class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</span><br><span class="line">     at android.view.View.restoreHierarchyState(View.java:12777)</span><br><span class="line">     at android.support.v4.app.Fragment.restoreViewState(Fragment.java:475)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1329)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1528)</span><br><span class="line">     at android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:753)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2363)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2149)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.optimizeAndExecuteOps(FragmentManager.java:2103)</span><br><span class="line">     at android.support.v4.app.FragmentManagerImpl.execSingleAction(FragmentManager.java:1984)</span><br><span class="line">     at android.support.v4.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:626)</span><br><span class="line">     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:143)</span><br><span class="line">     at android.support.v4.view.ViewPager.populate(ViewPager.java:1268)</span><br><span class="line">     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:668)</span><br><span class="line">     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:630)</span><br><span class="line">     at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:622)</span><br><span class="line">     at zhouzhuo810.me.zzandframe.ui.widget.zzpagerindicator.ZzPagerIndicator.setCurrentItem(ZzPagerIndicator.java:248)</span><br><span class="line">     at zhouzhuo810.me.zzandframe.ui.widget.zzpagerindicator.ZzPagerIndicator$3.onClick(ZzPagerIndicator.java:360)</span><br><span class="line">     at android.view.View.performClick(View.java:4438)</span><br><span class="line">     at android.view.View$PerformClick.run(View.java:18422)</span><br><span class="line">     at android.os.Handler.handleCallback(Handler.java:733)</span><br><span class="line">     at android.os.Handler.dispatchMessage(Handler.java:95)</span><br><span class="line">     at android.os.Looper.loop(Looper.java:136)</span><br><span class="line">     at android.app.ActivityThread.main(ActivityThread.java:5045)</span><br><span class="line">     at java.lang.reflect.Method.invokeNative(Native Method)</span><br><span class="line">     at java.lang.reflect.Method.invoke(Method.java:515)</span><br><span class="line">     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)</span><br><span class="line">     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)</span><br><span class="line">     at dalvik.system.NativeStart.main(Native Method)</span><br></pre></td></tr></table></figure><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><ul><li>上层ViewPager重新创建Fragment时下层ViewPager中的Fragment恢复状态时类型强转报错。</li></ul><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ul><li>方案1：避免重新创建</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//如果页数固定，直接设置页数；如果动态，尽可能设置到大于页数。</span></span><br><span class="line">viewPager.setOffscreenPageLimit(一个较大值);</span><br></pre></td></tr></table></figure><ul><li>方案2：寻找强转类型报错的原因(暂未找到，有人说是Id重复使用问题)</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RxJava-无限重复定时任务</title>
      <link href="/2017/12/12/RxJava-%E6%97%A0%E9%99%90%E9%87%8D%E5%A4%8D%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2017/12/12/RxJava-%E6%97%A0%E9%99%90%E9%87%8D%E5%A4%8D%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="开启任务"><a href="#开启任务" class="headerlink" title="开启任务"></a>开启任务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getAllDatas</span><span class="params">(<span class="keyword">final</span> <span class="type">long</span> delay)</span> &#123;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//解除上次订阅</span></span><br><span class="line">    <span class="keyword">if</span> (subscribe != <span class="literal">null</span>) &#123;</span><br><span class="line">        subscribe.unsubscribe();</span><br><span class="line">        subscribe = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    subscribe = Observable.timer(delay, TimeUnit.MILLISECONDS)</span><br><span class="line">            .flatMap(<span class="keyword">new</span> <span class="title class_">Func1</span>&lt;Long, Observable&lt;GetSomeThingResult&gt;&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> Observable&lt;GetSomeThingResult&gt; <span class="title function_">call</span><span class="params">(Long aLong)</span> &#123;</span><br><span class="line">                <span class="comment">//接口调用</span></span><br><span class="line">                    <span class="keyword">return</span> Api.getDefaultApi().getSomeThing();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">            .subscribeOn(Schedulers.io())</span><br><span class="line">            .subscribe(<span class="keyword">new</span> <span class="title class_">Subscriber</span>&lt;GetSomeThingResult&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">                    ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</span><br><span class="line">                    getAllDatas(Constants.AUTO_REFRESH_DURATION);</span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(GetSomeThingResult result)</span> &#123;</span><br><span class="line">                <span class="comment">//... do some thing with data</span></span><br><span class="line">  </span><br><span class="line">                    getAllDatas(Constants.AUTO_REFRESH_DURATION);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="取消任务"><a href="#取消任务" class="headerlink" title="取消任务"></a>取消任务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (subscribe != <span class="literal">null</span> &amp;&amp; !subscribe.isUnsubscribed()) &#123;</span><br><span class="line">            subscribe.unsubscribe();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> RxJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RxJava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RxJava-模拟进度</title>
      <link href="/2017/12/11/RxJava-%E6%A8%A1%E6%8B%9F%E8%BF%9B%E5%BA%A6/"/>
      <url>/2017/12/11/RxJava-%E6%A8%A1%E6%8B%9F%E8%BF%9B%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0-100 每隔20ms +1</span></span><br><span class="line">Observable.just(<span class="number">100</span>)</span><br><span class="line">        .flatMap(<span class="keyword">new</span> <span class="title class_">Func1</span>&lt;Integer, Observable&lt;Long&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Observable&lt;Long&gt; <span class="title function_">call</span><span class="params">(Integer integer)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Observable.timer(<span class="number">20</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .compose(RxHelper.&lt;Long&gt;io_main())</span><br><span class="line">        .subscribe(<span class="keyword">new</span> <span class="title class_">Subscriber</span>&lt;Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(Long aLong)</span> &#123;</span><br><span class="line">                pb.setProgress(aLong.intValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul><li>计时器</li><li>进度模拟</li><li>定时任务</li></ul>]]></content>
      
      
      <categories>
          
          <category> RxJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RxJava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-bugly集成</title>
      <link href="/2017/12/07/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-bugly%E9%9B%86%E6%88%90/"/>
      <url>/2017/12/07/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-bugly%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h2 id="集成bugly"><a href="#集成bugly" class="headerlink" title="集成bugly"></a>集成bugly</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//bugly</span><br><span class="line">compile &#x27;com.tencent.bugly:crashreport:latest.release&#x27;</span><br></pre></td></tr></table></figure><h2 id="添加权限"><a href="#添加权限" class="headerlink" title="添加权限"></a>添加权限</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bugly start--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_LOGS&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--bugly end--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Application的onCreate方法中初始化"><a href="#Application的onCreate方法中初始化" class="headerlink" title="Application的onCreate方法中初始化"></a>Application的onCreate方法中初始化</h2><h3 id="不带X5内核"><a href="#不带X5内核" class="headerlink" title="不带X5内核"></a>不带X5内核</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    CrashReport.initCrashReport(<span class="built_in">this</span>, <span class="string">&quot;你的appID&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="带X5内核"><a href="#带X5内核" class="headerlink" title="带X5内核"></a>带X5内核</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*bugly+x5内核*/</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    CrashReport.<span class="type">UserStrategy</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CrashReport</span>.UserStrategy(<span class="built_in">this</span>);</span><br><span class="line">    strategy.setCrashHandleCallback(<span class="keyword">new</span> <span class="title class_">CrashReport</span>.CrashHandleCallback() &#123;</span><br><span class="line">        <span class="keyword">public</span> Map <span class="title function_">onCrashHandleStart</span><span class="params">(<span class="type">int</span> crashType, String errorType, String errorMessage, String errorStack)</span> &#123;</span><br><span class="line">            <span class="type">LinkedHashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">x5CrashInfo</span> <span class="operator">=</span> com.tencent.smtt.sdk.WebView.getCrashExtraMessage(GFApplication.<span class="built_in">this</span>);</span><br><span class="line">            map.put(<span class="string">&quot;x5crashInfo&quot;</span>, x5CrashInfo);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">byte</span>[] onCrashHandleStart2GetExtraDatas(<span class="type">int</span> crashType, String errorType, String errorMessage, String errorStack) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;Extra data.&quot;</span>.getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    CrashReport.initCrashReport(<span class="built_in">this</span>, <span class="string">&quot;你的appID&quot;</span>, <span class="literal">false</span>, strategy);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android签名打包-多渠道打包</title>
      <link href="/2017/12/07/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/"/>
      <url>/2017/12/07/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="复制libs"><a href="#复制libs" class="headerlink" title="复制libs"></a>复制libs</h3><ul><li>common</li><li>analytics</li></ul><h3 id="集成友盟-App统计功能"><a href="#集成友盟-App统计功能" class="headerlink" title="集成友盟+ App统计功能"></a>集成友盟+ App统计功能</h3><p>在Application的onCreate方法中调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化common库</span></span><br><span class="line"><span class="comment"> * 参数1:上下文，不能为空</span></span><br><span class="line"><span class="comment"> * 参数2:设备类型，UMConfigure.DEVICE_TYPE_PHONE为手机、UMConfigure.DEVICE_TYPE_BOX为盒子，默认为手机</span></span><br><span class="line"><span class="comment"> * 参数3:Push推送业务的secret</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    UMConfigure.init(<span class="built_in">this</span>, UMConfigure.DEVICE_TYPE_PHONE, <span class="string">&quot;你的appID&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="添加相应权限"><a href="#添加相应权限" class="headerlink" title="添加相应权限"></a>添加相应权限</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 必须的权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_PHONE_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- 推荐的权限 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加如下权限，以便使用更多的第三方SDK和更精准的统计数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.CHANGE_WIFI_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置渠道"><a href="#配置渠道" class="headerlink" title="配置渠道"></a>配置渠道</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> ……&gt;</span></span><br><span class="line">        ……</span><br><span class="line">        <span class="comment">&lt;!--umeng start--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;你的AppID&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;UMENG_APPKEY&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">&quot;$&#123;UMENG_CHANNEL_VALUE&#125;&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;UMENG_CHANNEL&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--umeng end--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="代码混淆"><a href="#代码混淆" class="headerlink" title="代码混淆"></a>代码混淆</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keep class com.umeng.commonsdk.** &#123;*;&#125;</span><br></pre></td></tr></table></figure><h3 id="多渠道配置"><a href="#多渠道配置" class="headerlink" title="多渠道配置"></a>多渠道配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        wandoujia &#123;&#125;</span><br><span class="line">        yingyongbao &#123;&#125;</span><br><span class="line">        c360 &#123;&#125;</span><br><span class="line">        kq &#123;&#125;</span><br><span class="line">        productFlavors.all &#123; flavor -&gt;</span><br><span class="line">            flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    applicationVariants.all &#123; variant -&gt;</span><br><span class="line">        variant.outputs.each &#123; output -&gt;</span><br><span class="line">            def outputFile = output.outputFile</span><br><span class="line">            def fileName</span><br><span class="line">            def flavor = productFlavors.name;</span><br><span class="line">            if (outputFile != null &amp;&amp; outputFile.name.endsWith(&#x27;.apk&#x27;)) &#123;</span><br><span class="line">                if (variant.buildType.name.equals(&#x27;release&#x27;)) &#123;</span><br><span class="line">                    fileName = &quot;名字_$&#123;defaultConfig.versionName&#125;_$&#123;flavor&#125;.apk&quot;</span><br><span class="line">                &#125; else if (variant.buildType.name.equals(&#x27;debug&#x27;)) &#123;</span><br><span class="line">                    fileName = &quot;名字_$&#123;defaultConfig.versionName&#125;_debug_$&#123;flavor&#125;.apk&quot;</span><br><span class="line">                &#125;</span><br><span class="line">                output.outputFile = new File(outputFile.parent, fileName)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android签名打包 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-Terminal权限问题</title>
      <link href="/2017/11/21/AndroidStudio%E6%8A%80%E5%B7%A7-Terminal%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/"/>
      <url>/2017/11/21/AndroidStudio%E6%8A%80%E5%B7%A7-Terminal%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h3><p>macOs Sierra 10.12.6系统</p><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>Android Studio 2.3.1 Terminal</p><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>执行.&#x2F;gradlew install命令时提示<br>gradlew: Permission Denied</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x gradlew</span><br></pre></td></tr></table></figure><p>再操作即可。</p>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-ViewPager+分组列表+指示器悬停</title>
      <link href="/2017/11/15/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-%E5%88%86%E7%BB%84%E5%88%97%E8%A1%A8-%E6%8C%87%E7%A4%BA%E5%99%A8%E6%82%AC%E5%81%9C/"/>
      <url>/2017/11/15/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-%E5%88%86%E7%BB%84%E5%88%97%E8%A1%A8-%E6%8C%87%E7%A4%BA%E5%99%A8%E6%82%AC%E5%81%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="系统自带方案"><a href="#系统自带方案" class="headerlink" title="系统自带方案"></a>系统自带方案</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> &gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:expandedTitleMarginEnd</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:expandedTitleMarginStart</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">&quot;scroll|exitUntilCollapsed&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/main.backdrop&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/material_img&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;parallax&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;?android:attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;pin&quot;</span>  /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">  </span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingTop</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/my_txt&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此方案不利于屏幕适配，故不采用。</p><span id="more"></span><h2 id="指示器悬停"><a href="#指示器悬停" class="headerlink" title="指示器悬停"></a>指示器悬停</h2><p>参考的张鸿洋大神的Demo。<br><a href="http://blog.csdn.net/lmj623565791/article/details/43649913">张鸿洋大神的Demo</a></p><h3 id="新建values-ids-sticky-nav-layout-xml-xml"><a href="#新建values-ids-sticky-nav-layout-xml-xml" class="headerlink" title="新建values&#x2F;ids_sticky_nav_layout.xml.xml"></a>新建values&#x2F;ids_sticky_nav_layout.xml.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;id_stickynavlayout_topview&quot;</span> <span class="attr">type</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;id_stickynavlayout_viewpager&quot;</span> <span class="attr">type</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;id_stickynavlayout_indicator&quot;</span> <span class="attr">type</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;id_stickynavlayout_innerscrollview&quot;</span> <span class="attr">type</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="新建StickyNavLayout"><a href="#新建StickyNavLayout" class="headerlink" title="新建StickyNavLayout"></a>新建StickyNavLayout</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.view.widget.stickynavlayout;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.NestedScrollingParent;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.ViewCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.widget.SwipeRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.VelocityTracker;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewConfiguration;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.Interpolator;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.OverScroller;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> com.example.demo.R;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StickyNavLayout</span> <span class="keyword">extends</span> <span class="title class_">LinearLayout</span> <span class="keyword">implements</span> <span class="title class_">NestedScrollingParent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;StickyNavLayout&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onStartNestedScroll</span><span class="params">(View child, View target, <span class="type">int</span> nestedScrollAxes)</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;onStartNestedScroll&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNestedScrollAccepted</span><span class="params">(View child, View target, <span class="type">int</span> nestedScrollAxes)</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;onNestedScrollAccepted&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStopNestedScroll</span><span class="params">(View target)</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;onStopNestedScroll&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNestedScroll</span><span class="params">(View target, <span class="type">int</span> dxConsumed, <span class="type">int</span> dyConsumed, <span class="type">int</span> dxUnconsumed, <span class="type">int</span> dyUnconsumed)</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;onNestedScroll&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNestedPreScroll</span><span class="params">(View target, <span class="type">int</span> dx, <span class="type">int</span> dy, <span class="type">int</span>[] consumed)</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;onNestedPreScroll&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">hiddenTop</span> <span class="operator">=</span> dy &gt; <span class="number">0</span> &amp;&amp; getScrollY() &lt; mTopViewHeight;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">showTop</span> <span class="operator">=</span> dy &lt; <span class="number">0</span> &amp;&amp; getScrollY() &gt;= <span class="number">0</span> &amp;&amp; !ViewCompat.canScrollVertically(target, -<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (hiddenTop || showTop) &#123;</span><br><span class="line">            scrollBy(<span class="number">0</span>, dy);</span><br><span class="line">            consumed[<span class="number">1</span>] = dy;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">TOP_CHILD_FLING_THRESHOLD</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNestedFling</span><span class="params">(View target, <span class="type">float</span> velocityX, <span class="type">float</span> velocityY, <span class="type">boolean</span> consumed)</span> &#123;</span><br><span class="line">        <span class="comment">//如果是recyclerView 根据判断第一个元素是哪个位置可以判断是否消耗</span></span><br><span class="line">        <span class="comment">//这里判断如果第一个元素的位置是大于TOP_CHILD_FLING_THRESHOLD的</span></span><br><span class="line">        <span class="comment">//认为已经被消耗，在animateScroll里不会对velocityY&lt;0时做处理</span></span><br><span class="line">        <span class="keyword">if</span> ((target <span class="keyword">instanceof</span> RecyclerView) &amp;&amp; velocityY &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">RecyclerView</span> <span class="variable">recyclerView</span> <span class="operator">=</span> (RecyclerView) target;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">View</span> <span class="variable">firstChild</span> <span class="operator">=</span> recyclerView.getChildAt(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">childAdapterPosition</span> <span class="operator">=</span> recyclerView.getChildAdapterPosition(firstChild);</span><br><span class="line">            consumed = childAdapterPosition &gt; TOP_CHILD_FLING_THRESHOLD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!consumed) &#123;</span><br><span class="line">            animateScroll(velocityY, computeDuration(<span class="number">0</span>), consumed);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            animateScroll(velocityY, computeDuration(velocityY), consumed);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNestedPreFling</span><span class="params">(View target, <span class="type">float</span> velocityX, <span class="type">float</span> velocityY)</span> &#123;</span><br><span class="line">        <span class="comment">//不做拦截 可以传递给子View</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNestedScrollAxes</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.e(TAG, <span class="string">&quot;getNestedScrollAxes&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据速度计算滚动动画持续时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> velocityY</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">computeDuration</span><span class="params">(<span class="type">float</span> velocityY)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> distance;</span><br><span class="line">        <span class="keyword">if</span> (velocityY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            distance = Math.abs(mTop.getHeight() - getScrollY());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            distance = Math.abs(mTop.getHeight() - (mTop.getHeight() - getScrollY()));</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> duration;</span><br><span class="line">        velocityY = Math.abs(velocityY);</span><br><span class="line">        <span class="keyword">if</span> (velocityY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            duration = <span class="number">3</span> * Math.round(<span class="number">1000</span> * (distance / velocityY));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">float</span> <span class="variable">distanceRatio</span> <span class="operator">=</span> (<span class="type">float</span>) distance / getHeight();</span><br><span class="line">            duration = (<span class="type">int</span>) ((distanceRatio + <span class="number">1</span>) * <span class="number">150</span>);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> duration;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">animateScroll</span><span class="params">(<span class="type">float</span> velocityY, <span class="keyword">final</span> <span class="type">int</span> duration, <span class="type">boolean</span> consumed)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">currentOffset</span> <span class="operator">=</span> getScrollY();</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">topHeight</span> <span class="operator">=</span> mTop.getHeight();</span><br><span class="line">        <span class="keyword">if</span> (mOffsetAnimator == <span class="literal">null</span>) &#123;</span><br><span class="line">            mOffsetAnimator = <span class="keyword">new</span> <span class="title class_">ValueAnimator</span>();</span><br><span class="line">            mOffsetAnimator.setInterpolator(mInterpolator);</span><br><span class="line">            mOffsetAnimator.addUpdateListener(<span class="keyword">new</span> <span class="title class_">ValueAnimator</span>.AnimatorUpdateListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (animation.getAnimatedValue() <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">                        scrollTo(<span class="number">0</span>, (Integer) animation.getAnimatedValue());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mOffsetAnimator.cancel();</span><br><span class="line">        &#125;</span><br><span class="line">        mOffsetAnimator.setDuration(Math.min(duration, <span class="number">600</span>));</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (velocityY &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            mOffsetAnimator.setIntValues(currentOffset, topHeight);</span><br><span class="line">            mOffsetAnimator.start();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果子View没有消耗down事件 那么就让自身滑倒0位置</span></span><br><span class="line">            <span class="keyword">if</span> (!consumed) &#123;</span><br><span class="line">                mOffsetAnimator.setIntValues(currentOffset, <span class="number">0</span>);</span><br><span class="line">                mOffsetAnimator.start();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> View mTop;</span><br><span class="line">    <span class="keyword">private</span> View mNav;</span><br><span class="line">    <span class="keyword">private</span> ViewPager mViewPager;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mTopViewHeight;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> OverScroller mScroller;</span><br><span class="line">    <span class="keyword">private</span> VelocityTracker mVelocityTracker;</span><br><span class="line">    <span class="keyword">private</span> ValueAnimator mOffsetAnimator;</span><br><span class="line">    <span class="keyword">private</span> Interpolator mInterpolator;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mTouchSlop;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mMaximumVelocity, mMinimumVelocity;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> mLastY;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> mDragging;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StickyNavLayout</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        setOrientation(LinearLayout.VERTICAL);</span><br><span class="line"></span><br><span class="line">        mScroller = <span class="keyword">new</span> <span class="title class_">OverScroller</span>(context);</span><br><span class="line">        mTouchSlop = ViewConfiguration.get(context).getScaledTouchSlop();</span><br><span class="line">        mMaximumVelocity = ViewConfiguration.get(context)</span><br><span class="line">                .getScaledMaximumFlingVelocity();</span><br><span class="line">        mMinimumVelocity = ViewConfiguration.get(context)</span><br><span class="line">                .getScaledMinimumFlingVelocity();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initVelocityTrackerIfNotExists</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mVelocityTracker == <span class="literal">null</span>) &#123;</span><br><span class="line">            mVelocityTracker = VelocityTracker.obtain();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">recycleVelocityTracker</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mVelocityTracker != <span class="literal">null</span>) &#123;</span><br><span class="line">            mVelocityTracker.recycle();</span><br><span class="line">            mVelocityTracker = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public boolean onTouchEvent(MotionEvent event)</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        initVelocityTrackerIfNotExists();</span></span><br><span class="line"><span class="comment">//        mVelocityTracker.addMovement(event);</span></span><br><span class="line"><span class="comment">//        int action = event.getAction();</span></span><br><span class="line"><span class="comment">//        float y = event.getY();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        switch (action)</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            case MotionEvent.ACTION_DOWN:</span></span><br><span class="line"><span class="comment">//                if (!mScroller.isFinished())</span></span><br><span class="line"><span class="comment">//                    mScroller.abortAnimation();</span></span><br><span class="line"><span class="comment">//                mLastY = y;</span></span><br><span class="line"><span class="comment">//                return true;</span></span><br><span class="line"><span class="comment">//            case MotionEvent.ACTION_MOVE:</span></span><br><span class="line"><span class="comment">//                float dy = y - mLastY;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                if (!mDragging &amp;&amp; Math.abs(dy) &gt; mTouchSlop)</span></span><br><span class="line"><span class="comment">//                &#123;</span></span><br><span class="line"><span class="comment">//                    mDragging = true;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                if (mDragging)</span></span><br><span class="line"><span class="comment">//                &#123;</span></span><br><span class="line"><span class="comment">//                    scrollBy(0, (int) -dy);</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                mLastY = y;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case MotionEvent.ACTION_CANCEL:</span></span><br><span class="line"><span class="comment">//                mDragging = false;</span></span><br><span class="line"><span class="comment">//                recycleVelocityTracker();</span></span><br><span class="line"><span class="comment">//                if (!mScroller.isFinished())</span></span><br><span class="line"><span class="comment">//                &#123;</span></span><br><span class="line"><span class="comment">//                    mScroller.abortAnimation();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case MotionEvent.ACTION_UP:</span></span><br><span class="line"><span class="comment">//                mDragging = false;</span></span><br><span class="line"><span class="comment">//                mVelocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);</span></span><br><span class="line"><span class="comment">//                int velocityY = (int) mVelocityTracker.getYVelocity();</span></span><br><span class="line"><span class="comment">//                if (Math.abs(velocityY) &gt; mMinimumVelocity)</span></span><br><span class="line"><span class="comment">//                &#123;</span></span><br><span class="line"><span class="comment">//                    fling(-velocityY);</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                recycleVelocityTracker();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        return super.onTouchEvent(event);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onFinishInflate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onFinishInflate();</span><br><span class="line">        mTop = findViewById(R.id.id_stickynavlayout_topview);</span><br><span class="line">        mNav = findViewById(R.id.id_stickynavlayout_indicator);</span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> findViewById(R.id.id_stickynavlayout_viewpager);</span><br><span class="line">        <span class="keyword">if</span> (!(view <span class="keyword">instanceof</span> ViewPager)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(</span><br><span class="line">                    <span class="string">&quot;id_stickynavlayout_viewpager show used by ViewPager !&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        mViewPager = (ViewPager) view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="comment">//不限制顶部的高度</span></span><br><span class="line">        <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        getChildAt(<span class="number">0</span>).measure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(<span class="number">0</span>, MeasureSpec.UNSPECIFIED));</span><br><span class="line">        ViewGroup.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> mViewPager.getLayoutParams();</span><br><span class="line">        params.height = getMeasuredHeight() - mNav.getMeasuredHeight();</span><br><span class="line">        setMeasuredDimension(getMeasuredWidth(), mTop.getMeasuredHeight() + mNav.getMeasuredHeight() + mViewPager.getMeasuredHeight());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onSizeChanged</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h, <span class="type">int</span> oldw, <span class="type">int</span> oldh)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onSizeChanged(w, h, oldw, oldh);</span><br><span class="line">        mTopViewHeight = mTop.getMeasuredHeight();</span><br><span class="line">        Log.e(<span class="string">&quot;TTT&quot;</span>, <span class="string">&quot;height=&quot;</span> + mTopViewHeight);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fling</span><span class="params">(<span class="type">int</span> velocityY)</span> &#123;</span><br><span class="line">        mScroller.fling(<span class="number">0</span>, getScrollY(), <span class="number">0</span>, velocityY, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, mTopViewHeight);</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">scrollTo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            y = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (y &gt; mTopViewHeight) &#123;</span><br><span class="line">            y = mTopViewHeight;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (y != getScrollY()) &#123;</span><br><span class="line">            <span class="built_in">super</span>.scrollTo(x, y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">computeScroll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mScroller.computeScrollOffset()) &#123;</span><br><span class="line">            scrollTo(<span class="number">0</span>, mScroller.getCurrY());</span><br><span class="line">            invalidate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="布局结构"><a href="#布局结构" class="headerlink" title="布局结构"></a>布局结构</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">com.example.demo.view.widget.stickynavlayout.StickyNavLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- top view --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@id/id_stickynavlayout_topview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#4400ff00&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.youth.banner.Banner</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/banner&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;400px&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 指示器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.example.demo.view.widget.PagerSlidingTabStrip</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@id/id_stickynavlayout_indicator&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/activity_title_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsDividerColor</span>=<span class="string">&quot;@android:color/transparent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsIndicatorColor</span>=<span class="string">&quot;@color/colorMain&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsIndicatorHeight</span>=<span class="string">&quot;3px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsShouldExpand</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsUnderlineColor</span>=<span class="string">&quot;@android:color/transparent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:pstsUnderlineHeight</span>=<span class="string">&quot;6px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:zmsSelectedTabTextColor</span>=<span class="string">&quot;@color/colorMain&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:zmsSelectedTabTextSize</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:zmsTabTextColor</span>=<span class="string">&quot;@android:color/black&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">zz:zmsTabTextSize</span>=<span class="string">&quot;34px&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ViewPager --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@id/id_stickynavlayout_viewpager&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">com.example.demo.view.widget.stickynavlayout.StickyNavLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="分组列表"><a href="#分组列表" class="headerlink" title="分组列表"></a>分组列表</h2><p>本来考虑使用ExpandableListView，但是和StickyNavLayout不兼容。</p><p>于是找了另一个解决方案：</p><p><a href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper">BaseRecyclerViewAdapterHelper</a></p><h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        ...</span><br><span class="line">        maven &#123; url &quot;https://jitpack.io&quot; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">        compile &#x27;com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.30&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义分组适配器"><a href="#定义分组适配器" class="headerlink" title="定义分组适配器"></a>定义分组适配器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.highcloud.view.adapter;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseMultiItemQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.model.http.entity.test.MachineDetailsTabEntity;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.utils.display.ViewUtil;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by user999 on 2016/6/7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MachineDetailTabAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseMultiItemQuickAdapter</span>&lt;MultiItemEntity, BaseViewHolder&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TYPE_GROUP</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TYPE_CHILD</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Same as QuickAdapter#QuickAdapter(Context,int) but with</span></span><br><span class="line"><span class="comment">     * some initialization data.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data A new list is created out of this one to avoid mutable list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MachineDetailTabAdapter</span><span class="params">(List&lt;MultiItemEntity&gt; data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(data);</span><br><span class="line">        addItemType(TYPE_GROUP, R.layout.list_expand_group_item);</span><br><span class="line">        addItemType(TYPE_CHILD, R.layout.list_expand_child_item);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> BaseViewHolder <span class="title function_">createBaseViewHolder</span><span class="params">(ViewGroup parent, <span class="type">int</span> layoutResId)</span> &#123;</span><br><span class="line">        <span class="type">BaseViewHolder</span> <span class="variable">root</span> <span class="operator">=</span> <span class="built_in">super</span>.createBaseViewHolder(parent, layoutResId);</span><br><span class="line">        ViewUtil.scaleContentView((ViewGroup) root.itemView);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(<span class="keyword">final</span> BaseViewHolder helper, <span class="keyword">final</span> MultiItemEntity item)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (helper.getItemViewType()) &#123;</span><br><span class="line">            <span class="keyword">case</span> TYPE_GROUP:</span><br><span class="line">                <span class="keyword">final</span> MachineDetailsTabEntity.DataBean.TasksBean.<span class="type">DetailInfoBean</span> <span class="variable">entity</span> <span class="operator">=</span> (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean) item;</span><br><span class="line">                <span class="keyword">switch</span> (entity.getIndex()) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_one);</span><br><span class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_one));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_two);</span><br><span class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_two));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_three);</span><br><span class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_three));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_last);</span><br><span class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_other));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                helper.setText(R.id.list_group_title, entity.getMainTitle());</span><br><span class="line">                helper.itemView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> helper.getAdapterPosition();</span><br><span class="line">                        <span class="keyword">if</span> (entity.isExpanded()) &#123;</span><br><span class="line">                            collapse(pos);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            expand(pos);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> TYPE_CHILD:</span><br><span class="line">                <span class="keyword">final</span> MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.<span class="type">InfoBean</span> <span class="variable">entity1</span> <span class="operator">=</span> (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.InfoBean) item;</span><br><span class="line">                helper.setText(R.id.list_item_machine_detail_tv_device_title, entity1.getTitle());</span><br><span class="line">                helper.setText(R.id.list_item_machine_detail_tv_device_value, entity1.getValue());</span><br><span class="line">                <span class="keyword">switch</span> (entity1.getIndex()) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_one_shape);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_two_shape);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_three_shape);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_other_shape);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实体类添加分组功能"><a href="#实体类添加分组功能" class="headerlink" title="实体类添加分组功能"></a>实体类添加分组功能</h3><ul><li>分组对应实体类必须继承AbstractExpandableItem&lt;组员实体类&gt; 和实现接口MultiItemEntity；</li><li>组员对应实体类必须实现接口MultiItemEntity。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DetailInfoBean</span> <span class="keyword">extends</span> <span class="title class_">AbstractExpandableItem</span>&lt;DetailInfoBean.InfoBean&gt; <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.index = index;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLevel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> MachineDetailTabAdapter.TYPE_GROUP;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">InfoBean</span> <span class="keyword">implements</span> <span class="title class_">MultiItemEntity</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLevel</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemType</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> MachineDetailTabAdapter.TYPE_GROUP;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure><h3 id="Activity数据填充"><a href="#Activity数据填充" class="headerlink" title="Activity数据填充"></a>Activity数据填充</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;String&gt; tabNames = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.getTasks().size(); i++) &#123;</span><br><span class="line">    tabNames.add(<span class="string">&quot;任务&quot;</span> + (i + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">final</span> List&lt;MachineDetailFragment&gt; fragments = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; tabNames.size(); i++) &#123;</span><br><span class="line">    fragments.add(MachineDetailFragment.newInstance(macId, tabNames.get(i), data.getTasks().get(i)));</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">mAdapter = <span class="keyword">new</span> <span class="title class_">FragmentPagerAdapter</span>(getSupportFragmentManager()) &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fragments.size();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fragment <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fragments.get(position);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> CharSequence <span class="title function_">getPageTitle</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tabNames.get(position);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line">mViewPager.setAdapter(mAdapter);</span><br><span class="line">mViewPager.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">mIndicator.setViewPager(mViewPager);</span><br><span class="line">mIndicator.updatePosition(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h3 id="Fragment填数据"><a href="#Fragment填数据" class="headerlink" title="Fragment填数据"></a>Fragment填数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">List&lt;MultiItemEntity&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean&gt; detailInfo = data.getDetailInfo();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; detailInfo.size(); i++) &#123;</span><br><span class="line">    MachineDetailsTabEntity.DataBean.TasksBean.<span class="type">DetailInfoBean</span> <span class="variable">entity</span> <span class="operator">=</span> detailInfo.get(i);</span><br><span class="line">    <span class="comment">//设置GroupPosition</span></span><br><span class="line">    entity.setIndex(i);</span><br><span class="line">    <span class="comment">//这个必须加！！！，不然刷新数据会重复添加。</span></span><br><span class="line">    <span class="keyword">if</span> (entity.getSubItems() != <span class="literal">null</span>) &#123;</span><br><span class="line">        entity.getSubItems().clear();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (entity.getInfo() != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.InfoBean infoEntity : entity.getInfo()) &#123;</span><br><span class="line">        <span class="comment">//设置GroupPosition</span></span><br><span class="line">            infoEntity.setIndex(i);</span><br><span class="line">            entity.addSubItem(infoEntity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    list.add(entity);</span><br><span class="line">&#125;</span><br><span class="line">adapter.setNewData(list);</span><br><span class="line"><span class="comment">//为了保证能展示出来，先收起来。</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; detailInfo.size(); i++) &#123;</span><br><span class="line">    <span class="comment">//注意！！！，这里如果adapter添加了n个header则i+n。</span></span><br><span class="line">    adapter.collapse(i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//全部展开</span></span><br><span class="line">adapter.expandAll();</span><br></pre></td></tr></table></figure><h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="/../../../../images/viewpager_rv_banner_demo.gif" alt="demo"></p><h2 id="潜在解决方案"><a href="#潜在解决方案" class="headerlink" title="潜在解决方案"></a>潜在解决方案</h2><p><a href="https://github.com/zhouzhuo810/Android-ObservableScrollView">Android-ObservableScrollView</a></p><p>由于时间有限，还没来得及尝试此方案，后续再研究一下。</p>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidd开源控件-Glide</title>
      <link href="/2017/11/14/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-Glide/"/>
      <url>/2017/11/14/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-Glide/</url>
      
        <content type="html"><![CDATA[<h2 id="Glide-4-3-1-4-x用起来更麻烦了"><a href="#Glide-4-3-1-4-x用起来更麻烦了" class="headerlink" title="Glide 4.3.1 (4.x用起来更麻烦了)"></a>Glide 4.3.1 (4.x用起来更麻烦了)</h2><h3 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">  mavenCentral()</span><br><span class="line">  maven &#123; url &#x27;https://maven.google.com&#x27; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">  compile &#x27;com.github.bumptech.glide:glide:4.3.1&#x27;</span><br><span class="line">  annotationProcessor &#x27;com.github.bumptech.glide:compiler:4.3.1&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="清理缓存"><a href="#清理缓存" class="headerlink" title="清理缓存"></a>清理缓存</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Glide.get(getActivity()).clearMemory();</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        Glide.get(getActivity()).clearDiskCache();</span><br><span class="line">        getActivity().runOnUiThread(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                ToastUtils.showCustomBgToast(<span class="string">&quot;清理成功！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure><h3 id="圆形图片"><a href="#圆形图片" class="headerlink" title="圆形图片"></a>圆形图片</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(mContext).load(url)</span><br><span class="line">.apply(<span class="keyword">new</span> <span class="title class_">RequestOptions</span>()</span><br><span class="line">.circleCrop())</span><br><span class="line">.into(ivPhoto);</span><br></pre></td></tr></table></figure><h3 id="默认和错误图片"><a href="#默认和错误图片" class="headerlink" title="默认和错误图片"></a>默认和错误图片</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(mContext).load(url)</span><br><span class="line">.apply(<span class="keyword">new</span> <span class="title class_">RequestOptions</span>()</span><br><span class="line">.error(R.drawable.photo_me)</span><br><span class="line">.placeholder(R.drawable.photo_me))</span><br><span class="line">.into(ivPhoto);</span><br></pre></td></tr></table></figure><h3 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(mContext).load(url)</span><br><span class="line">.transition(<span class="keyword">new</span> <span class="title class_">DrawableTransitionOptions</span>().crossFade(<span class="number">300</span>))</span><br><span class="line">.into(ivPhoto);</span><br></pre></td></tr></table></figure><h2 id="Glide-3-8-0"><a href="#Glide-3-8-0" class="headerlink" title="Glide 3.8.0"></a>Glide 3.8.0</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">  mavenCentral()</span><br><span class="line">  maven &#123; url &#x27;https://maven.google.com&#x27; &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">dependencies &#123;</span><br><span class="line">  compile &#x27;com.github.bumptech.glide:glide:3.8.0&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(<span class="built_in">this</span>)</span><br><span class="line">.load(url)</span><br><span class="line">.placeholder(R.drawable.ic_default)</span><br><span class="line">.error(R.drawable.ic_default)</span><br><span class="line">.crossFade()</span><br><span class="line">.listener(<span class="keyword">new</span> <span class="title class_">RequestListener</span>&lt;String, GlideDrawable&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onException</span><span class="params">(Exception e, String model, Target&lt;GlideDrawable&gt; target, <span class="type">boolean</span> isFirstResource)</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onResourceReady</span><span class="params">(GlideDrawable resource, String model, Target&lt;GlideDrawable&gt; target, <span class="type">boolean</span> isFromMemoryCache, <span class="type">boolean</span> isFirstResource)</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">.into(iv);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android开源控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-App更新</title>
      <link href="/2017/11/10/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-App%E6%9B%B4%E6%96%B0/"/>
      <url>/2017/11/10/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-App%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="APP更新逻辑"><a href="#APP更新逻辑" class="headerlink" title="APP更新逻辑"></a>APP更新逻辑</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> SpUtil.getKey();</span><br><span class="line"></span><br><span class="line">    Api.getApi0()</span><br><span class="line">            .CheckUpdate(key, SystemUtil.getPackageInfo(<span class="built_in">this</span>).versionCode)</span><br><span class="line">            .compose(RxHelper.&lt;CheckUpdateResult&gt;io_main())</span><br><span class="line">            .subscribe(<span class="keyword">new</span> <span class="title class_">Subscriber</span>&lt;CheckUpdateResult&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(CheckUpdateResult checkUpdateResult)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (checkUpdateResult.getCode() == <span class="number">1</span>) &#123;</span><br><span class="line">                        CheckUpdateResult.<span class="type">DataEntity</span> <span class="variable">data</span> <span class="operator">=</span> checkUpdateResult.getData();</span><br><span class="line">                        showUpdate(data);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showUpdate</span><span class="params">(<span class="keyword">final</span> CheckUpdateResult.DataEntity data)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span><br><span class="line">        showTwoBtnDialog(<span class="string">&quot;更新&quot;</span>, <span class="string">&quot;v&quot;</span> + data.getVersionName() + <span class="string">&quot;\n&quot;</span> + data.getUpdateInfo(), <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">IBaseActivity</span>.OnTwoBtnClick() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOk</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">final</span> TextView[] tv = <span class="keyword">new</span> <span class="title class_">TextView</span>[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">final</span> ProgressBar[] pb = <span class="keyword">new</span> <span class="title class_">ProgressBar</span>[<span class="number">1</span>];</span><br><span class="line">                showUpdateDialog(<span class="string">&quot;更新&quot;</span>, <span class="string">&quot;即将开始下载...&quot;</span>, <span class="literal">false</span>, <span class="keyword">new</span> <span class="title class_">IBaseActivity</span>.OnOneBtnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onProgress</span><span class="params">(TextView textView, ProgressBar progressBar)</span> &#123;</span><br><span class="line">                        tv[<span class="number">0</span>] = textView;</span><br><span class="line">                        pb[<span class="number">0</span>] = progressBar;</span><br><span class="line">                    &#125;</span><br><span class="line">  </span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOK</span><span class="params">()</span> &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> Constants.API + File.separator + data.getUrl();</span><br><span class="line">                <span class="keyword">final</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;HighNetFix_&quot;</span> + data.getVersionName() + <span class="string">&quot;_&quot;</span> + data.getVersionCode() + <span class="string">&quot;.apk&quot;</span>;</span><br><span class="line">                OkGo.&lt;File&gt;get(url)</span><br><span class="line">                        .tag(<span class="built_in">this</span>)</span><br><span class="line">                        .execute(<span class="keyword">new</span> <span class="title class_">FileCallback</span>(Constants.APK_DOWNLOAD_PATH, name) &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSuccess</span><span class="params">(Response&lt;File&gt; response)</span> &#123;</span><br><span class="line">                                hideUpdateDialog();</span><br><span class="line">                                ApkUtils.installApk(HomePageActivity.<span class="built_in">this</span>, BuildConfig.APPLICATION_ID, Constants.APK_DOWNLOAD_PATH, name);</span><br><span class="line">                            &#125;</span><br><span class="line">  </span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Response&lt;File&gt; response)</span> &#123;</span><br><span class="line">                                hideUpdateDialog();</span><br><span class="line">                                ToastUtils.showCustomBgToast(<span class="string">&quot;下载失败，请检查您的网络设置。&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">  </span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">downloadProgress</span><span class="params">(Progress progress)</span> &#123;</span><br><span class="line">                                <span class="type">long</span> <span class="variable">currentSize</span> <span class="operator">=</span> progress.currentSize;</span><br><span class="line">                                <span class="type">long</span> <span class="variable">totalSize</span> <span class="operator">=</span> progress.totalSize;</span><br><span class="line">                                <span class="type">int</span> <span class="variable">pro</span> <span class="operator">=</span> (<span class="type">int</span>) (currentSize * <span class="number">100.0</span> / totalSize + <span class="number">0.5f</span>);</span><br><span class="line">                                tv[<span class="number">0</span>].setText(<span class="string">&quot;已下载：&quot;</span> + pro + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">                                pb[<span class="number">0</span>].setProgress(pro);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">()</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-Mac系统升级导致svn失效问题</title>
      <link href="/2017/11/08/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Mac%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E5%AF%BC%E8%87%B4svn%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/"/>
      <url>/2017/11/08/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Mac%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E5%AF%BC%E8%87%B4svn%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>Mac系统升级或Xcode系统升级后，打开Android Studio的老项目，svn没法使用了。</p><p>且打开终端，输入svn upgrade会出现如下问题。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="升级之后权限问题"><a href="#升级之后权限问题" class="headerlink" title="升级之后权限问题"></a>升级之后权限问题</h3><h4 id="方式1（推荐）"><a href="#方式1（推荐）" class="headerlink" title="方式1（推荐）"></a>方式1（推荐）</h4><p>打开XCode，同意协议。</p><h4 id="方式2"><a href="#方式2" class="headerlink" title="方式2"></a>方式2</h4><p>1、打开终端，输入  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcodebuild -license</span><br></pre></td></tr></table></figure><p>2、终端提示敲回车键（enter）打开许可协议，照做</p><p>3、终端提示 按下  “space” 键阅读许可协议，按“q” 不阅读</p><p>4、最终，终端会出现三个选项，agree 、print、cancel，不用想，能不是agree 吗！输入agree，然后enter</p><h3 id="还原svn"><a href="#还原svn" class="headerlink" title="还原svn"></a>还原svn</h3><p>1、终端，切换到项目根目录</p><p>2、输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn upgrade</span><br></pre></td></tr></table></figure><p>3、问题解决。</p>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidStudio技巧-mac上导入导出SVN项目</title>
      <link href="/2017/11/07/AndroidStudio%E6%8A%80%E5%B7%A7-mac%E5%AF%BC%E5%85%A5SVN%E9%A1%B9%E7%9B%AE/"/>
      <url>/2017/11/07/AndroidStudio%E6%8A%80%E5%B7%A7-mac%E5%AF%BC%E5%85%A5SVN%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="Android-Studio-SVN"><a href="#Android-Studio-SVN" class="headerlink" title="Android Studio -&gt; SVN"></a>Android Studio -&gt; SVN</h3><ul><li>1.打开项目</li><li>2.Preferences -&gt; Version Control -&gt; Ignored Files<br>（1）app&#x2F;build<br>（2）build<br>（3）*.iml</li><li>3.VCS -&gt; import into version control -&gt; import into subversion</li><li>4.Submit</li></ul><h3 id="SVN-Android-Studio"><a href="#SVN-Android-Studio" class="headerlink" title="SVN -&gt; Android Studio"></a>SVN -&gt; Android Studio</h3><ul><li>1.Check out project from version control</li><li>2.选择Subversion</li><li>3.选中项目文件夹根目录</li><li>4.选择保存路径(非中文路径，新建一个项目文件夹)</li><li>5.等待完成(如果打开会报错,大多是找不到gradle,别急)。</li><li>6.复制其他项目的local.properties文件到项目文件夹。</li><li>7.open a new Android Studio project打开项目</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-ViewPager禁止左右滑动</title>
      <link href="/2017/10/31/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager%E7%A6%81%E6%AD%A2%E5%B7%A6%E5%8F%B3%E6%BB%91%E5%8A%A8/"/>
      <url>/2017/10/31/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager%E7%A6%81%E6%AD%A2%E5%B7%A6%E5%8F%B3%E6%BB%91%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2017/10/31.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoScrollViewPager</span> <span class="keyword">extends</span> <span class="title class_">ViewPager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoScrollViewPager</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoScrollViewPager</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(MotionEvent ev)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java工具类-二维码生成和解析</title>
      <link href="/2017/10/20/JavaEE-%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90%E5%92%8C%E8%A7%A3%E6%9E%90/"/>
      <url>/2017/10/20/JavaEE-%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90%E5%92%8C%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="zxing生成和解析二维码"><a href="#zxing生成和解析二维码" class="headerlink" title="zxing生成和解析二维码"></a>zxing生成和解析二维码</h2><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.google.zxing/core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.google.zxing/javase --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javase<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.zxing.*;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.client.j2se.MatrixToImageWriter;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.common.BitMatrix;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.common.HybridBinarizer;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.qrcode.QRCodeWriter;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二维码解析工具类</span></span><br><span class="line"><span class="comment"> * Created by zz on 2017/10/20.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QrCodeUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成二维码Bitmap</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> widthPix     宽</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> heightPix    高</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content      二维码内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileSavePath 保存路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">encodeQrCode</span><span class="params">(<span class="type">int</span> widthPix, <span class="type">int</span> heightPix, String content, String fileSavePath)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (content == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(content)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//配置参数</span></span><br><span class="line">            Map&lt;EncodeHintType, Object&gt; hints = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            hints.put(EncodeHintType.CHARACTER_SET, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//容错级别</span></span><br><span class="line">            hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);</span><br><span class="line">            <span class="comment">//设置空白边距的宽度</span></span><br><span class="line">            hints.put(EncodeHintType.MARGIN, <span class="number">6</span>); <span class="comment">//default is 4</span></span><br><span class="line">            <span class="comment">// 图像数据转换，使用了矩阵转换</span></span><br><span class="line">            <span class="type">BitMatrix</span> <span class="variable">bitMatrix</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QRCodeWriter</span>().encode(content, BarcodeFormat.QR_CODE, widthPix, heightPix, hints);</span><br><span class="line">            <span class="type">Path</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileSavePath).toPath();</span><br><span class="line">            MatrixToImageWriter.writeToPath(bitMatrix, <span class="string">&quot;png&quot;</span>, file);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="comment">//必须使用compress方法将bitmap保存到文件中再进行读取。直接返回的bitmap是没有任何压缩的，内存消耗巨大！</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (WriterException | IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析二维码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filePath 二维码路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 二维码内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decodeQrCode</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">        BufferedImage image;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            image = ImageIO.read(<span class="keyword">new</span> <span class="title class_">File</span>(filePath));</span><br><span class="line">            <span class="type">LuminanceSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImageLuminanceSource</span>(image);</span><br><span class="line">            <span class="type">Binarizer</span> <span class="variable">binarizer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HybridBinarizer</span>(source);</span><br><span class="line">            <span class="type">BinaryBitmap</span> <span class="variable">binaryBitmap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryBitmap</span>(binarizer);</span><br><span class="line">            Map&lt;DecodeHintType, Object&gt; hints = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;DecodeHintType, Object&gt;();</span><br><span class="line">            hints.put(DecodeHintType.CHARACTER_SET, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiFormatReader</span>().decode(binaryBitmap, hints);<span class="comment">// 对图像进行解码</span></span><br><span class="line">            <span class="keyword">return</span> result.getText();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | NotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> Java工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-XML解析</title>
      <link href="/2017/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-XML%E8%A7%A3%E6%9E%90/"/>
      <url>/2017/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-XML%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="常见XML解析方法"><a href="#常见XML解析方法" class="headerlink" title="常见XML解析方法"></a>常见XML解析方法</h2><ul><li>SAX</li><li>DOM</li><li>PULL</li><li>Dom4j</li></ul><h2 id="推荐Dom4j"><a href="#推荐Dom4j" class="headerlink" title="推荐Dom4j"></a>推荐Dom4j</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><ul><li>jar百度云下载地址</li></ul><p><a href="https://pan.baidu.com/s/1i3hduPf">https://pan.baidu.com/s/1i3hduPf</a></p><h3 id="用法简介"><a href="#用法简介" class="headerlink" title="用法简介"></a>用法简介</h3><p>3个概念：元素，属性，值。</p><span id="more"></span><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line"><span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(file);</span><br><span class="line"><span class="comment">//获取根节点</span></span><br><span class="line"><span class="type">Element</span> <span class="variable">root</span> <span class="operator">=</span> document.getRootElement();</span><br></pre></td></tr></table></figure><h4 id="元素"><a href="#元素" class="headerlink" title="元素"></a>元素</h4><ul><li>获取所有子元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Element&gt; elements = root.elements();</span><br></pre></td></tr></table></figure><ul><li>获取某一个名为username子元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Element</span> <span class="variable">element</span> <span class="operator">=</span> root.element(<span class="string">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ul><li>获取元素的某个属性的值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">firstName</span> <span class="operator">=</span> root.attributeValue(<span class="string">&quot;firstName&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="值"><a href="#值" class="headerlink" title="值"></a>值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取username元素的值</span></span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> root.elementText(<span class="string">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure><p>也可以这么写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> root.element(<span class="string">&quot;username&quot;</span>).getText();</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Dom4j性能非常好，灵活性高，易使用.</p>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-微信QQ分享文件</title>
      <link href="/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1QQ%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E5%AD%97/"/>
      <url>/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1QQ%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<p>不使用SDK实现QQ和微信文件与文字的分享。</p><h3 id="QQ分享文件"><a href="#QQ分享文件" class="headerlink" title="QQ分享文件"></a>QQ分享文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">private void shareFileToQQ(File file) throws Exception&#123;</span><br><span class="line">    Intent share = new Intent(Intent.ACTION_SEND);</span><br><span class="line">    ComponentName component = new ComponentName(&quot;com.tencent.mobileqq&quot;, &quot;com.tencent.mobileqq.activity.JumpActivity&quot;);</span><br><span class="line">    share.setComponent(component);</span><br><span class="line">    Uri uri = null;</span><br><span class="line">    if (Build.VERSION.SDK_INT &gt; 23) &#123;</span><br><span class="line">        uri = FileProvider.getUriForFile(getActivity(),</span><br><span class="line">                BuildConfig.APPLICATION_ID + &quot;.provider&quot;,</span><br><span class="line">                file);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        uri = Uri.fromFile(file);</span><br><span class="line">    &#125;</span><br><span class="line">    share.putExtra(Intent.EXTRA_STREAM, uri);</span><br><span class="line">    share.setType(&quot;*/*&quot;);</span><br><span class="line">    startActivity(Intent.createChooser(share, &quot;发送&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="QQ分享文字"><a href="#QQ分享文字" class="headerlink" title="QQ分享文字"></a>QQ分享文字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分享文字给QQ好友</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shareQQ</span><span class="params">(Context context, String content)</span> &#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">sendIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">    sendIntent.setAction(Intent.ACTION_SEND);</span><br><span class="line">    sendIntent.putExtra(Intent.EXTRA_TEXT, content);</span><br><span class="line">    sendIntent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        sendIntent.setClassName(<span class="string">&quot;com.tencent.mobileqq&quot;</span>, <span class="string">&quot;com.tencent.mobileqq.activity.JumpActivity&quot;</span>);</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">chooserIntent</span> <span class="operator">=</span> Intent.createChooser(sendIntent, <span class="string">&quot;选择分享途径&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (chooserIntent == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        context.startActivity(sendIntent);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        context.startActivity(sendIntent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="微信分享文件"><a href="#微信分享文件" class="headerlink" title="微信分享文件"></a>微信分享文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shareFileToWx</span><span class="params">(String title, File file)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">    <span class="type">ComponentName</span> <span class="variable">comp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(<span class="string">&quot;com.tencent.mm&quot;</span>, <span class="string">&quot;com.tencent.mm.ui.tools.ShareImgUI&quot;</span>);</span><br><span class="line">    intent.setComponent(comp);</span><br><span class="line">    <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        uri = FileProvider.getUriForFile(getActivity(),</span><br><span class="line">                BuildConfig.APPLICATION_ID + <span class="string">&quot;.provider&quot;</span>,</span><br><span class="line">                file);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        uri = Uri.fromFile(file);</span><br><span class="line">    &#125;</span><br><span class="line">    intent.setAction(<span class="string">&quot;android.intent.action.SEND&quot;</span>);</span><br><span class="line">    intent.setType(<span class="string">&quot;file/*&quot;</span>);</span><br><span class="line">    intent.putExtra(Intent.EXTRA_TEXT, title);</span><br><span class="line">    intent.putExtra(Intent.EXTRA_STREAM, uri);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="微信分享文字"><a href="#微信分享文字" class="headerlink" title="微信分享文字"></a>微信分享文字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分享文字给微信好友</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shareToFriend</span><span class="params">(Context context, String content)</span> &#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">    intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">    intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">    intent.putExtra(Intent.EXTRA_TEXT, content);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        intent.setClassName(<span class="string">&quot;com.tencent.mm&quot;</span>, <span class="string">&quot;com.tencent.mm.ui.tools.ShareImgUI&quot;</span>);</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">chooserIntent</span> <span class="operator">=</span> Intent.createChooser(intent, <span class="string">&quot;选择分享途径&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (chooserIntent == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        context.startActivity(intent);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        context.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul><li>问题1(个别手机上会报错，如’小米 REDMI NOTE 3’)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.content.ActivityNotFoundException</span><br></pre></td></tr></table></figure><p>Unable to find explicit activity class {com.tencent.mm&#x2F;com.tencent.mm.ui.tools.ShareImgUI}; have you declared this activity in your AndroidManifest.xml?<br>解决方式</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.tencent.mm.ui.tools.ShareImgUI&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.tencent.mobileqq.activity.JumpActivity&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-微信支付宝支付</title>
      <link href="/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/"/>
      <url>/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/</url>
      
        <content type="html"><![CDATA[<p>记录一下支付功能简单实现逻辑。</p><h2 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h2><h3 id="注册一个入口Activity"><a href="#注册一个入口Activity" class="headerlink" title="注册一个入口Activity"></a>注册一个入口Activity</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--weixin pay--&gt;</span><br><span class="line">&lt;activity</span><br><span class="line">    android:name=&quot;.wxapi.WXPayEntryActivity&quot;</span><br><span class="line">    android:exported=&quot;true&quot;</span><br><span class="line">    android:launchMode=&quot;singleTop&quot; /&gt;</span><br><span class="line">&lt;!--weixin pay--&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="可自定义界面"><a href="#可自定义界面" class="headerlink" title="可自定义界面"></a>可自定义界面</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.highcloud.wxapi;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.Constants;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.R;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.view.activity.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.keqiang.highcloud.view.activity.shop.ShopMyOrderActivity;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.constants.ConstantsAPI;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseReq;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseResp;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPIEventHandler;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WXPayEntryActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span> <span class="keyword">implements</span> <span class="title class_">IWXAPIEventHandler</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;MicroMsg.SDKSample.WXPayEntryActivity&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> IWXAPI api;</span><br><span class="line">    <span class="keyword">private</span> TextView tvResult;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">  </span><br><span class="line">        api = WXAPIFactory.createWXAPI(<span class="built_in">this</span>, Constants.APP_ID);</span><br><span class="line">        api.handleIntent(getIntent(), <span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//        finish();</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.pay_result;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        tvResult = (TextView) findViewById(R.id.tv_result);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initEvent</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">restoreState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDefaultBackClose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onNewIntent</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onNewIntent(intent);</span><br><span class="line">        setIntent(intent);</span><br><span class="line">        api.handleIntent(intent, <span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//        finish();</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReq</span><span class="params">(BaseReq req)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResp</span><span class="params">(BaseResp resp)</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) &#123;</span><br><span class="line">            <span class="keyword">if</span> (resp.errCode == <span class="number">0</span>) &#123;</span><br><span class="line">                tvResult.setText(<span class="string">&quot;微信支付完成！&quot;</span>);</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(WXPayEntryActivity.<span class="built_in">this</span>, ShopMyOrderActivity.class);</span><br><span class="line">                startActWithIntent(intent);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tvResult.setText(resp.errStr);</span><br><span class="line">            &#125;</span><br><span class="line">            finish();</span><br><span class="line">  </span><br><span class="line"><span class="comment">/*            AlertDialog.Builder builder = new AlertDialog.Builder(this);</span></span><br><span class="line"><span class="comment">            builder.setTitle(R.string.app_tip);</span></span><br><span class="line"><span class="comment">            builder.setMessage(getString(R.string.pay_result_callback_msg, String.valueOf(resp.errCode)));</span></span><br><span class="line"><span class="comment">            builder.show();*/</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="为保证支付前已将app注册到微信"><a href="#为保证支付前已将app注册到微信" class="headerlink" title="为保证支付前已将app注册到微信"></a>为保证支付前已将app注册到微信</h3><ul><li>注册一个广播</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- wx pay start--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.other.receiver.AppRegister&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:permission</span>=<span class="string">&quot;com.tencent.mm.plugin.permission.SEND&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.tencent.mm.plugin.openapi.Intent.ACTION_REFRESH_WXAPP&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--wx pay end--&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在Application中发送广播</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*注册APP到微信*/</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setAction(<span class="string">&quot;com.tencent.mm.plugin.openapi.Intent.ACTION_REFRESH_WXAPP&quot;</span>);</span><br><span class="line">sendBroadcast(intent);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="支付宝支付"><a href="#支付宝支付" class="headerlink" title="支付宝支付"></a>支付宝支付</h2><h3 id="网页登陆支付"><a href="#网页登陆支付" class="headerlink" title="网页登陆支付"></a>网页登陆支付</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- alipay sdk begin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alipay.sdk.app.H5PayActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|keyboardHidden|navigation|screenSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;behind&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustResize|stateHidden&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.alipay.sdk.app.H5AuthActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|keyboardHidden|navigation&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;behind&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustResize|stateHidden&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- alipay sdk end --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="支付界面"><a href="#支付界面" class="headerlink" title="支付界面"></a>支付界面</h2><h3 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/root&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">com.example.view.widget.ZzTitleBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/title_bar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/activity_title_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/colorMain&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:leftImg</span>=<span class="string">&quot;@drawable/iv_back&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:leftText</span>=<span class="string">&quot;@string/back_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showLeftLayout</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showRightLayout</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:textColorAll</span>=<span class="string">&quot;@color/color_white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:textSizeAll</span>=<span class="string">&quot;@dimen/activity_title_text_size&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:titleText</span>=<span class="string">&quot;支付订单&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;88px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;支付剩余时间&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#666&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;24px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_minute_shi&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/zhifu_top_kuang&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_minute_ge&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/zhifu_top_kuang&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;:&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_second_shi&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;5px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/zhifu_top_kuang&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_second_ge&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/zhifu_top_kuang&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;1px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#f1f1f1&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;112px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;260px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_product_name&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;80px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;畅享管&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;24px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;80px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;数量：&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_number&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;100px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/order_round_bg_shape&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;2px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingRight</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;2px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#ff6631&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18px&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;80px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;型号：&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_type&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;100px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/order_round_bg_shape&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;2px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingRight</span>=<span class="string">&quot;15px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;2px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#ff6631&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18px&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;1px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;4px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#f1f1f1&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;¥&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#f74e37&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_count&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;#f74e37&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;60px&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_alipay&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;120px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/setting_item_bg_selector&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:clickable</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/alipay_logo&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:text</span>=<span class="string">&quot;支付宝&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:textColor</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:textSize</span>=<span class="string">&quot;30px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_width</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_height</span>=<span class="string">&quot;26px&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20px&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/pay_type_recomend&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;亿万用户的选择 , 更快更安全&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb_alipay&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/dingdan_btn_xuanzhe_selector&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:clickable</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#f1f1f1&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_wxpay&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;120px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/setting_item_bg_selector&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:clickable</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;60px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/weixin_logo&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;微信&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;30px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10px&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;数亿用户都在用 , 安全可托付&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#999&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;20px&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb_weixin_pay&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;34px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/dingdan_btn_xuanzhe_selector&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:checked</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:clickable</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_pay&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;110px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;140px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/btn_main_selector&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;确认付款&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/color_white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;36px&quot;</span> /&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keqiang.highcloud.view.activity.setting;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> android.content.DialogInterface;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.alipay.sdk.app.EnvUtils;</span><br><span class="line"><span class="keyword">import</span> com.alipay.sdk.app.PayTask;</span><br><span class="line"><span class="keyword">import</span> com.ta.utdid2.android.utils.PhoneInfoUtils;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelpay.PayReq;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> org.apache.http.conn.util.InetAddressUtils;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.NetworkInterface;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> rx.Subscriber;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 支付宝或微信支付</span></span><br><span class="line"><span class="comment"> * Created by zz on 2017/4/7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> TextView tvCount;</span><br><span class="line">    <span class="keyword">private</span> ZzTitleBar titleBar;</span><br><span class="line">    <span class="keyword">private</span> TextView tvPay;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SDK_PAY_FLAG</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SDK_AUTH_FLAG</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> LinearLayout llAlipay;</span><br><span class="line">    <span class="keyword">private</span> LinearLayout llWxPay;</span><br><span class="line">    <span class="keyword">private</span> CheckBox cbAlipay;</span><br><span class="line">    <span class="keyword">private</span> CheckBox cbWxpay;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//微信支付部分</span></span><br><span class="line">    <span class="keyword">private</span> IWXAPI api;</span><br><span class="line">    <span class="keyword">private</span> TextView tvMinteShi;</span><br><span class="line">    <span class="keyword">private</span> TextView tvMinuteGe;</span><br><span class="line">    <span class="keyword">private</span> TextView tvSecondShi;</span><br><span class="line">    <span class="keyword">private</span> TextView tvSecondGe;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">Handler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>();</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            runOnUiThread(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                    countTime(time);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> TextView tvProductName;</span><br><span class="line">    <span class="keyword">private</span> TextView tvNumber;</span><br><span class="line">    <span class="keyword">private</span> TextView tvType;</span><br><span class="line">    <span class="keyword">private</span> String orderNo;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.activity_alipay;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@SuppressLint(&quot;HandlerLeak&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Handler</span> <span class="variable">mHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>() &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unused&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(Message msg)</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (msg.what) &#123;</span><br><span class="line">                <span class="keyword">case</span> SDK_PAY_FLAG: &#123;</span><br><span class="line">                    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                    <span class="type">PayResult</span> <span class="variable">payResult</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PayResult</span>((Map&lt;String, String&gt;) msg.obj);</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     对于支付结果，请商户依赖服务端的异步通知结果。同步通知结果，仅作为支付结束的通知。</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">resultInfo</span> <span class="operator">=</span> payResult.getResult();<span class="comment">// 同步返回需要验证的信息</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">resultStatus</span> <span class="operator">=</span> payResult.getResultStatus();</span><br><span class="line">                    <span class="comment">// 判断resultStatus 为9000则代表支付成功</span></span><br><span class="line">                    <span class="keyword">if</span> (TextUtils.equals(resultStatus, <span class="string">&quot;9000&quot;</span>)) &#123;</span><br><span class="line">                        <span class="comment">// 该笔订单是否真实支付成功，需要依赖服务端的异步通知。</span></span><br><span class="line">                        ToastUtils.showCustomBgToast(<span class="string">&quot;支付成功！&quot;</span>);</span><br><span class="line">                        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(PayActivity.<span class="built_in">this</span>, ShopMyOrderActivity.class);</span><br><span class="line">                        startActWithIntent(intent);</span><br><span class="line">                        closeAct();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 该笔订单真实的支付结果，需要依赖服务端的异步通知。</span></span><br><span class="line">                        <span class="keyword">switch</span> (resultStatus) &#123;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;6001&quot;</span>:</span><br><span class="line">                                ToastUtils.showCustomBgToast(<span class="string">&quot;已取消支付操作&quot;</span>);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">default</span>:</span><br><span class="line">                                ToastUtils.showCustomBgToast(<span class="string">&quot;支付失败，错误代码：&quot;</span>+resultStatus);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        titleBar = (ZzTitleBar) findViewById(R.id.title_bar);</span><br><span class="line">        tvCount = (TextView) findViewById(R.id.tv_count);</span><br><span class="line">        tvPay = (TextView) findViewById(R.id.tv_pay);</span><br><span class="line"> </span><br><span class="line">        tvType = (TextView) findViewById(R.id.tv_type);</span><br><span class="line"> </span><br><span class="line">        tvProductName = (TextView) findViewById(R.id.tv_product_name);</span><br><span class="line">        tvNumber = (TextView) findViewById(R.id.tv_number);</span><br><span class="line">  </span><br><span class="line">        llAlipay = (LinearLayout) findViewById(R.id.ll_alipay);</span><br><span class="line">        llWxPay = (LinearLayout) findViewById(R.id.ll_wxpay);</span><br><span class="line">   </span><br><span class="line">        cbAlipay = (CheckBox) findViewById(R.id.cb_alipay);</span><br><span class="line">        cbWxpay = (CheckBox) findViewById(R.id.cb_weixin_pay);</span><br><span class="line">  </span><br><span class="line">        tvMinteShi = (TextView) findViewById(R.id.tv_minute_shi);</span><br><span class="line">        tvMinuteGe = (TextView) findViewById(R.id.tv_minute_ge);</span><br><span class="line">        tvSecondShi = (TextView) findViewById(R.id.tv_second_shi);</span><br><span class="line">        tvSecondGe = (TextView) findViewById(R.id.tv_second_ge);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//微信api</span></span><br><span class="line">        api = WXAPIFactory.createWXAPI(<span class="built_in">this</span>, Constants.APP_ID, <span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">        orderId = getIntent().getStringExtra(<span class="string">&quot;orderId&quot;</span>);</span><br><span class="line">        orderNo = getIntent().getStringExtra(<span class="string">&quot;orderNo&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">productName</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;productName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">total</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;total&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">number</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;number&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">model</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;model&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        tvType.setText(model);</span><br><span class="line">        tvProductName.setText(productName);</span><br><span class="line">        tvNumber.setText(number);</span><br><span class="line">        tvCount.setText(total);</span><br><span class="line">  </span><br><span class="line">        <span class="type">String</span> <span class="variable">createTime</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;createTime&quot;</span>);</span><br><span class="line">        time = DateUtil.getTimeAddMinute(createTime, <span class="number">16</span>);</span><br><span class="line">        <span class="keyword">if</span> (time == <span class="literal">null</span>) &#123;</span><br><span class="line">            ToastUtils.showCustomBgToast(<span class="string">&quot;订单超时或已取消&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        handler.postDelayed(runnable, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">countTime</span><span class="params">(String time)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">curTime</span> <span class="operator">=</span> DateUtil.getYearMonthDayHourMinuteSecond();</span><br><span class="line">        <span class="type">long</span> <span class="variable">seconds</span> <span class="operator">=</span> DateUtil.getSecondDuration(curTime, time);</span><br><span class="line">        <span class="keyword">if</span> (seconds &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">m</span> <span class="operator">=</span> seconds / <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">if</span> (m &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                tvMinteShi.setText(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">                tvMinuteGe.setText(<span class="string">&quot;&quot;</span> + m);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tvMinteShi.setText(<span class="string">&quot;&quot;</span> + (m / <span class="number">10</span>));</span><br><span class="line">                tvMinuteGe.setText(<span class="string">&quot;&quot;</span> + (m % <span class="number">10</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">long</span> <span class="variable">s</span> <span class="operator">=</span> seconds % <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">if</span> (s &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                tvSecondShi.setText(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">                tvSecondGe.setText(<span class="string">&quot;&quot;</span> + s);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tvSecondShi.setText(<span class="string">&quot;&quot;</span> + (s / <span class="number">10</span>));</span><br><span class="line">                tvSecondGe.setText(<span class="string">&quot;&quot;</span> + (s % <span class="number">10</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            handler.postDelayed(runnable, <span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            handler.removeCallbacks(runnable);</span><br><span class="line">            ToastUtils.showCustomBgToast(<span class="string">&quot;订单超时&quot;</span>);</span><br><span class="line">            closeAct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initEvent</span><span class="params">()</span> &#123;</span><br><span class="line">        titleBar.setOnTitleBarClickListener(<span class="keyword">new</span> <span class="title class_">ZzTitleBar</span>.OnTitleBarClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLeftClick</span><span class="params">()</span> &#123;</span><br><span class="line">                closeAct();</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRightClick</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        tvPay.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (cbAlipay.isChecked()) &#123;</span><br><span class="line">                    payV2();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    payVX();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        llAlipay.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                cbAlipay.setChecked(<span class="literal">true</span>);</span><br><span class="line">                cbWxpay.setChecked(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        llWxPay.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                cbWxpay.setChecked(<span class="literal">true</span>);</span><br><span class="line">                cbAlipay.setChecked(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">payVX</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">        Api.getRegisterApi(HCApplication.getContext())</span><br><span class="line">                .vxPay(HCSharedUtil.getPhoneNumber(<span class="built_in">this</span>), orderId)</span><br><span class="line">                .compose(RxHelper.&lt;VxPayResult&gt;io_main())</span><br><span class="line">                .subscribe(<span class="keyword">new</span> <span class="title class_">Subscriber</span>&lt;VxPayResult&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">                    &#125;</span><br><span class="line">  </span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">                        ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</span><br><span class="line">                    &#125;</span><br><span class="line">  </span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(VxPayResult vxPayResult)</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (vxPayResult.getCode().equals(<span class="string">&quot;1&quot;</span>)) &#123;</span><br><span class="line">                            <span class="type">PayReq</span> <span class="variable">req</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PayReq</span>();</span><br><span class="line">                            req.appId = vxPayResult.getData().getAppid();</span><br><span class="line">                            req.partnerId = vxPayResult.getData().getMch_id();</span><br><span class="line">                            req.prepayId = vxPayResult.getData().getPrepay_id();</span><br><span class="line">                            req.nonceStr = vxPayResult.getData().getOld_nonce_str();</span><br><span class="line">                            req.packageValue = <span class="string">&quot;Sign=WXPay&quot;</span>;</span><br><span class="line">                            req.sign = vxPayResult.getData().getOld_sign();</span><br><span class="line">                            req.timeStamp = vxPayResult.getData().getTimestamp();</span><br><span class="line">                            api.sendReq(req);</span><br><span class="line">                            closeAct();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            ToastUtils.showCustomBgToast(vxPayResult.getMsg());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 支付宝支付业务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">payV2</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">        Api.getRegisterApi(HCApplication.getContext())</span><br><span class="line">                .aliPay(HCSharedUtil.getPhoneNumber(<span class="built_in">this</span>), orderId)</span><br><span class="line">                .compose(RxHelper.&lt;AliPayResult&gt;io_main())</span><br><span class="line">                .subscribe(<span class="keyword">new</span> <span class="title class_">Subscriber</span>&lt;AliPayResult&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">                        ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</span><br><span class="line">                    &#125;</span><br><span class="line">  </span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(AliPayResult aliPayResult)</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (aliPayResult.getCode().equals(<span class="string">&quot;1&quot;</span>)) &#123;</span><br><span class="line">                            <span class="keyword">final</span> <span class="type">String</span> <span class="variable">orderInfo</span> <span class="operator">=</span> aliPayResult.getOrderInfo();</span><br><span class="line">  </span><br><span class="line">                            <span class="type">Runnable</span> <span class="variable">payRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                                <span class="meta">@Override</span></span><br><span class="line">                                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                                    <span class="type">PayTask</span> <span class="variable">alipay</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PayTask</span>(PayActivity.<span class="built_in">this</span>);</span><br><span class="line">                                    Map&lt;String, String&gt; result = alipay.payV2(orderInfo, <span class="literal">true</span>);</span><br><span class="line">  </span><br><span class="line">                                    <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>();</span><br><span class="line">                                    msg.what = SDK_PAY_FLAG;</span><br><span class="line">                                    msg.obj = result;</span><br><span class="line">                                    mHandler.sendMessage(msg);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;;</span><br><span class="line">  </span><br><span class="line">                            <span class="type">Thread</span> <span class="variable">payThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(payRunnable);</span><br><span class="line">                            payThread.start();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">restoreState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDefaultBackClose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        handler.removeCallbacks(runnable);</span><br><span class="line">        handler.removeCallbacksAndMessages(<span class="literal">null</span>);</span><br><span class="line">        handler = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><ul><li>支付宝支付后台需要<em>支付宝公钥</em>和<em>app私钥</em>。</li><li>支付宝支付App公私钥加密格式：Java和非Java。</li><li>微信商户平台需要设置API密钥。</li><li>微信支付后台需要二次签名。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git常见问题-Android Studio重新分享项目到Github提示项目已存在</title>
      <link href="/2017/10/16/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-Android-Studio%E9%87%8D%E6%96%B0%E5%88%86%E4%BA%AB%E9%A1%B9%E7%9B%AE%E5%88%B0Github%E6%8F%90%E7%A4%BA%E9%A1%B9%E7%9B%AE%E5%B7%B2%E5%AD%98%E5%9C%A8/"/>
      <url>/2017/10/16/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-Android-Studio%E9%87%8D%E6%96%B0%E5%88%86%E4%BA%AB%E9%A1%B9%E7%9B%AE%E5%88%B0Github%E6%8F%90%E7%A4%BA%E9%A1%B9%E7%9B%AE%E5%B7%B2%E5%AD%98%E5%9C%A8/</url>
      
        <content type="html"><![CDATA[<ul><li>打开Git Bash</li><li>cd ${项目跟目录}</li><li>git remote rm origin</li><li>git remote add origin <a href="mailto:&#103;&#105;&#116;&#x40;&#x67;&#105;&#116;&#x68;&#x75;&#x62;&#46;&#99;&#111;&#109;">&#103;&#105;&#116;&#x40;&#x67;&#105;&#116;&#x68;&#x75;&#x62;&#46;&#99;&#111;&#109;</a>:${用户名}&#x2F;${项目名}</li><li>vi .git&#x2F;config</li><li>删除[remote “origin”]那一行<br>(vi操作方法，输入i进入输入模式，删除该行之后，按下Esc，输入”:wq”保存并退出)</li></ul>]]></content>
      
      
      <categories>
          
          <category> Git常见问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android开源控件-常用控件地址</title>
      <link href="/2017/10/12/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E5%9C%B0%E5%9D%80/"/>
      <url>/2017/10/12/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E5%9C%B0%E5%9D%80/</url>
      
        <content type="html"><![CDATA[<h2 id="图片加载"><a href="#图片加载" class="headerlink" title="图片加载"></a>图片加载</h2><h3 id="Glide"><a href="#Glide" class="headerlink" title="Glide"></a>Glide</h3><p><a href="https://github.com/bumptech/glide">https://github.com/bumptech/glide</a></p><h2 id="网络框架"><a href="#网络框架" class="headerlink" title="网络框架"></a>网络框架</h2><h3 id="Okhttp"><a href="#Okhttp" class="headerlink" title="Okhttp"></a>Okhttp</h3><p><a href="https://github.com/square/okhttp">https://github.com/square/okhttp</a></p><h3 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a>Retrofit</h3><p><a href="https://github.com/square/retrofit">https://github.com/square/retrofit</a></p><h3 id="Okhttp-OkGo"><a href="#Okhttp-OkGo" class="headerlink" title="Okhttp-OkGo"></a>Okhttp-OkGo</h3><p><a href="https://github.com/jeasonlzy/okhttp-OkGo">https://github.com/jeasonlzy/okhttp-OkGo</a></p><h3 id="NoHttp"><a href="#NoHttp" class="headerlink" title="NoHttp"></a>NoHttp</h3><p><a href="https://github.com/yanzhenjie/NoHttp">https://github.com/yanzhenjie/NoHttp</a></p><span id="more"></span><h2 id="线程调度"><a href="#线程调度" class="headerlink" title="线程调度"></a>线程调度</h2><h3 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h3><p><a href="https://github.com/ReactiveX/RxJava">https://github.com/ReactiveX/RxJava</a></p><h3 id="RxAndroid"><a href="#RxAndroid" class="headerlink" title="RxAndroid"></a>RxAndroid</h3><p><a href="https://github.com/ReactiveX/RxAndroid">https://github.com/ReactiveX/RxAndroid</a></p><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="GreenDao"><a href="#GreenDao" class="headerlink" title="GreenDao"></a>GreenDao</h3><p><a href="https://github.com/greenrobot/greenDAO">https://github.com/greenrobot/greenDAO</a></p><h3 id="Realm-Java"><a href="#Realm-Java" class="headerlink" title="Realm-Java"></a>Realm-Java</h3><p><a href="https://github.com/realm/realm-java">https://github.com/realm/realm-java</a></p><h3 id="xUtils3"><a href="#xUtils3" class="headerlink" title="xUtils3"></a>xUtils3</h3><p><a href="https://github.com/wyouflf/xUtils3">https://github.com/wyouflf/xUtils3</a></p><h2 id="系统特性"><a href="#系统特性" class="headerlink" title="系统特性"></a>系统特性</h2><h3 id="6-0动态权限"><a href="#6-0动态权限" class="headerlink" title="6.0动态权限"></a>6.0动态权限</h3><h4 id="AndPermission"><a href="#AndPermission" class="headerlink" title="AndPermission"></a>AndPermission</h4><p><a href="https://github.com/yanzhenjie/AndPermission">https://github.com/yanzhenjie/AndPermission</a></p><h4 id="RxPermissions"><a href="#RxPermissions" class="headerlink" title="RxPermissions"></a>RxPermissions</h4><p><a href="https://github.com/tbruyelle/RxPermissions">https://github.com/tbruyelle/RxPermissions</a></p><h2 id="UI控件"><a href="#UI控件" class="headerlink" title="UI控件"></a>UI控件</h2><h3 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h3><h4 id="Banner"><a href="#Banner" class="headerlink" title="Banner"></a>Banner</h4><p><a href="https://github.com/youth5201314/banner">https://github.com/youth5201314/banner</a></p><h3 id="下拉刷新上拉加载"><a href="#下拉刷新上拉加载" class="headerlink" title="下拉刷新上拉加载"></a>下拉刷新上拉加载</h3><h4 id="SmartRefreshLayout"><a href="#SmartRefreshLayout" class="headerlink" title="SmartRefreshLayout"></a>SmartRefreshLayout</h4><p><a href="https://github.com/scwang90/SmartRefreshLayout">https://github.com/scwang90/SmartRefreshLayout</a></p><h3 id="图表"><a href="#图表" class="headerlink" title="图表"></a>图表</h3><h4 id="MPAndroidChart"><a href="#MPAndroidChart" class="headerlink" title="MPAndroidChart"></a>MPAndroidChart</h4><p><a href="https://github.com/PhilJay/MPAndroidChart">https://github.com/PhilJay/MPAndroidChart</a></p><h4 id="Hellocharts-android"><a href="#Hellocharts-android" class="headerlink" title="Hellocharts-android"></a>Hellocharts-android</h4><p><a href="https://github.com/lecho/hellocharts-android">https://github.com/lecho/hellocharts-android</a></p><h3 id="多功能列表"><a href="#多功能列表" class="headerlink" title="多功能列表"></a>多功能列表</h3><h4 id="SwipeRecyclerView"><a href="#SwipeRecyclerView" class="headerlink" title="SwipeRecyclerView"></a>SwipeRecyclerView</h4><p><a href="https://github.com/yanzhenjie/SwipeRecyclerView">https://github.com/yanzhenjie/SwipeRecyclerView</a></p><h4 id="BaseRecyclerViewAdapterHelper"><a href="#BaseRecyclerViewAdapterHelper" class="headerlink" title="BaseRecyclerViewAdapterHelper"></a>BaseRecyclerViewAdapterHelper</h4><p><a href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper">https://github.com/CymChad/BaseRecyclerViewAdapterHelper</a></p>]]></content>
      
      
      <categories>
          
          <category> Android开源控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-多图测试数据集合</title>
      <link href="/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%9A%E5%9B%BE%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E9%9B%86%E5%90%88/"/>
      <url>/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%9A%E5%9B%BE%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; data = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">data.add(<span class="string">&quot;http://p1.so.qhmsg.com/dmfd/326_204_/t01ad675c2d6620f626.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhmsg.com/dmfd/326_204_/t01e7b8da6f7881d669.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t016b83625d3693e592.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhimgs1.com/dmfd/326_204_/t019a8f0f4789b91170.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p1.so.qhimgs1.com/dmfd/326_204_/t01da7b6be4c2e7485d.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhimgs1.com/dmfd/326_204_/t016122ec45c5fdc5fa.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhmsg.com/dmfd/326_204_/t015ba6df95da81c21f.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhimgs1.com/dmfd/326_204_/t012c852c8f981d6a00.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhimgs1.com/dmfd/326_204_/t01bc3afb43b885f79a.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhmsg.com/dmfd/326_204_/t016f319fe697b397a7.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhmsg.com/dmfd/326_204_/t01260296831eb4e1c9.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t01f70e3d434b658072.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p1.so.qhimgs1.com/dmfd/326_204_/t01ff382f9ac4ff3b41.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p3.so.qhimgs1.com/dmfd/326_204_/t0136c51e038b8eb443.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhimgs1.com/dmfd/326_204_/t01510b700b852c19ea.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhmsg.com/dmfd/326_204_/t01ee2021295046db97.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t011827d91512e21f1e.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhimgs1.com/dmfd/326_204_/t01e0d10a1d9c967b6a.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p5.so.qhimgs1.com/dmfd/326_204_/t014dee2f747c97027b.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhmsg.com/dmfd/326_204_/t015937ffe391b99cbf.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t01c8781008ac43b8b2.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhimgs1.com/dmfd/326_204_/t0157cf838838b73380.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t01486d9595e7e72a7e.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p1.so.qhmsg.com/dmfd/326_204_/t016ddb799a12726bc6.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p4.so.qhimgs1.com/dmfd/326_204_/t01cbfab89caa120e9a.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhmsg.com/dmfd/326_204_/t01fd0af7e89abd4615.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p2.so.qhimgs1.com/dmfd/326_204_/t0155c730d796084202.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p0.so.qhmsg.com/dmfd/326_204_/t01007ed5e564c9c99f.jpg&quot;</span>);</span><br><span class="line">data.add(<span class="string">&quot;http://p1.so.qhimgs1.com/dmfd/326_204_/t0127d36bd652e5f6ed.jpg&quot;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-切换主题</title>
      <link href="/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/"/>
      <url>/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setThemeColor</span><span class="params">(<span class="type">int</span> colorPrimary, <span class="type">int</span> colorPrimaryDark)</span> &#123;</span><br><span class="line">    mToolbar.setBackgroundResource(colorPrimary);</span><br><span class="line">    mToolbar.setTitleTextColor(ContextCompat.getColor(<span class="built_in">this</span>, android.R.color.white));</span><br><span class="line">    mToolbar.setNavigationIcon(R.drawable.ic_arrow_back_white_24dp);</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</span><br><span class="line">        getWindow().setStatusBarColor(ContextCompat.getColor(<span class="built_in">this</span>, colorPrimaryDark));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">23</span>) &#123;</span><br><span class="line">        <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> getWindow();</span><br><span class="line">        <span class="type">int</span> <span class="variable">systemUiVisibility</span> <span class="operator">=</span> window.getDecorView().getSystemUiVisibility();</span><br><span class="line">        systemUiVisibility &amp;= ~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;</span><br><span class="line">        window.getDecorView().setSystemUiVisibility(systemUiVisibility);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setThemeColor(R.color.colorPrimary, R.color.colorPrimaryDark);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-ViewPager+PhotoView问题</title>
      <link href="/2017/10/11/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-PhotoView%E9%97%AE%E9%A2%98/"/>
      <url>/2017/10/11/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-PhotoView%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="版本说明"><a href="#版本说明" class="headerlink" title="版本说明"></a>版本说明</h2><p>PhotoView版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//photoView</span><br><span class="line">compile &#x27;com.mcxiaoke.photoview:library:1.2.3&#x27;</span><br></pre></td></tr></table></figure><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><ul><li>ViewPager+PhotoView缩放操作时报错</li><li>ViewPager+PhotoView左右滑动图片加载错位</li><li>指定显示第几张图片</li></ul><span id="more"></span><h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><h3 id="重写ViewPager的onInterceptTouchEvent方法"><a href="#重写ViewPager的onInterceptTouchEvent方法" class="headerlink" title="重写ViewPager的onInterceptTouchEvent方法"></a>重写ViewPager的onInterceptTouchEvent方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">super</span>.onInterceptTouchEvent(ev);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义Adapter"><a href="#定义Adapter" class="headerlink" title="定义Adapter"></a>定义Adapter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MultiImagePageAdapter</span> <span class="keyword">extends</span> <span class="title class_">PagerAdapter</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> PhotoViewAttacher.OnViewTapListener onViewTapListener;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//设置点击任意一张图片结束预览</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnViewTapListener</span><span class="params">(PhotoViewAttacher.OnViewTapListener onViewTapListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onViewTapListener = onViewTapListener;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DisplayImageOptions options;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; imgs;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MultiImagePageAdapter</span><span class="params">(List&lt;String&gt; imgs)</span> &#123;</span><br><span class="line">        options = <span class="keyword">new</span> <span class="title class_">DisplayImageOptions</span>.Builder()</span><br><span class="line">                .showImageOnLoading(R.drawable.product_default)</span><br><span class="line">                .showImageForEmptyUri(R.drawable.product_default)</span><br><span class="line">                .showImageOnFail(R.drawable.product_default)</span><br><span class="line">                .bitmapConfig(Bitmap.Config.ARGB_8888)</span><br><span class="line">                .imageScaleType(ImageScaleType.EXACTLY)</span><br><span class="line">                .cacheInMemory(<span class="literal">true</span>)</span><br><span class="line">                .cacheOnDisk(<span class="literal">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="built_in">this</span>.imgs = imgs;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imgs == <span class="literal">null</span> ? <span class="number">0</span> : imgs.size();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isViewFromObject</span><span class="params">(View view, Object object)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> view == object;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="type">PhotoView</span> <span class="variable">photoView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PhotoView</span>(container.getContext());</span><br><span class="line">        <span class="comment">//关键</span></span><br><span class="line">        container.addView(photoView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</span><br><span class="line">        photoView.setScaleType(ImageView.ScaleType.FIT_CENTER);</span><br><span class="line">        photoView.setOnViewTapListener(onViewTapListener);</span><br><span class="line">        <span class="comment">//网络加载</span></span><br><span class="line">        HCApplication.getImageLoader().displayImage(imgs.get(position), photoView, options);</span><br><span class="line">        <span class="keyword">return</span> photoView;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> &#123;</span><br><span class="line">    <span class="comment">//别忘了</span></span><br><span class="line">        container.removeView((View) object);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/view_pager&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; imgs = getIntent().getStringArrayListExtra(<span class="string">&quot;imgs&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> getIntent().getIntExtra(<span class="string">&quot;position&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (imgs != <span class="literal">null</span> &amp;&amp; imgs.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="type">MultiImagePageAdapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiImagePageAdapter</span>(imgs);</span><br><span class="line">    adapter.setOnViewTapListener(<span class="keyword">new</span> <span class="title class_">PhotoViewAttacher</span>.OnViewTapListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onViewTap</span><span class="params">(View view, <span class="type">float</span> x, <span class="type">float</span> y)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</span><br><span class="line">                onBackPressed();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                closeAct();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    viewPager.setAdapter(adapter);</span><br><span class="line">    viewPager.setCurrentItem(position);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(activity, MultiImagePreviewActivity.class);</span><br><span class="line"><span class="comment">//传入图片和位置信息</span></span><br><span class="line">intent.putExtra(<span class="string">&quot;imgs&quot;</span>, imgs);</span><br><span class="line">intent.putExtra(<span class="string">&quot;position&quot;</span>, position);</span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</span><br><span class="line">    <span class="type">ActivityOptionsCompat</span> <span class="variable">options</span> <span class="operator">=</span> ActivityOptionsCompat.makeSceneTransitionAnimation(activity,</span><br><span class="line">            banner, getString(R.string.transition_product_img));</span><br><span class="line">    ActivityCompat.startActivity(activity, intent, options.toBundle());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    startActWithIntent(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Activity实例"><a href="#Activity实例" class="headerlink" title="Activity实例"></a>Activity实例</h3><ul><li>布局</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/root&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@color/colorBlack&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/view_pager&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.PagerAdapter;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.nostra13.universalimageloader.core.DisplayImageOptions;</span><br><span class="line"><span class="keyword">import</span> com.nostra13.universalimageloader.core.assist.ImageScaleType;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> uk.co.senab.photoview.PhotoView;</span><br><span class="line"><span class="keyword">import</span> uk.co.senab.photoview.PhotoViewAttacher;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2017/10/11.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiImagePreviewActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> HackyViewPager viewPager;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.activity_multi_img_preview;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        viewPager = (HackyViewPager) findViewById(R.id.view_pager);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line">  </span><br><span class="line">        List&lt;String&gt; imgs = getIntent().getStringArrayListExtra(<span class="string">&quot;imgs&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> getIntent().getIntExtra(<span class="string">&quot;position&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (imgs != <span class="literal">null</span> &amp;&amp; imgs.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">MultiImagePageAdapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiImagePageAdapter</span>(imgs);</span><br><span class="line">            adapter.setOnViewTapListener(<span class="keyword">new</span> <span class="title class_">PhotoViewAttacher</span>.OnViewTapListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onViewTap</span><span class="params">(View view, <span class="type">float</span> x, <span class="type">float</span> y)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</span><br><span class="line">                        onBackPressed();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        closeAct();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            viewPager.setAdapter(adapter);</span><br><span class="line">            viewPager.setCurrentItem(position);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MultiImagePageAdapter</span> <span class="keyword">extends</span> <span class="title class_">PagerAdapter</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">private</span> PhotoViewAttacher.OnViewTapListener onViewTapListener;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnViewTapListener</span><span class="params">(PhotoViewAttacher.OnViewTapListener onViewTapListener)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.onViewTapListener = onViewTapListener;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> DisplayImageOptions options;</span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; imgs;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MultiImagePageAdapter</span><span class="params">(List&lt;String&gt; imgs)</span> &#123;</span><br><span class="line">            options = <span class="keyword">new</span> <span class="title class_">DisplayImageOptions</span>.Builder()</span><br><span class="line">                    .showImageOnLoading(R.drawable.product_default)</span><br><span class="line">                    .showImageForEmptyUri(R.drawable.product_default)</span><br><span class="line">                    .showImageOnFail(R.drawable.product_default)</span><br><span class="line">                    .bitmapConfig(Bitmap.Config.ARGB_8888)</span><br><span class="line">                    .imageScaleType(ImageScaleType.EXACTLY)</span><br><span class="line">                    .cacheInMemory(<span class="literal">true</span>)</span><br><span class="line">                    .cacheOnDisk(<span class="literal">true</span>)</span><br><span class="line">                    .build();</span><br><span class="line">            <span class="built_in">this</span>.imgs = imgs;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> imgs == <span class="literal">null</span> ? <span class="number">0</span> : imgs.size();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isViewFromObject</span><span class="params">(View view, Object object)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> view == object;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">            <span class="type">PhotoView</span> <span class="variable">photoView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PhotoView</span>(container.getContext());</span><br><span class="line">            container.addView(photoView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</span><br><span class="line">            photoView.setScaleType(ImageView.ScaleType.FIT_CENTER);</span><br><span class="line">            photoView.setOnViewTapListener(onViewTapListener);</span><br><span class="line">            HCApplication.getImageLoader().displayImage(imgs.get(position), photoView, options);</span><br><span class="line">            <span class="keyword">return</span> photoView;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> &#123;</span><br><span class="line">            container.removeView((View) object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initEvent</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">restoreState</span><span class="params">(Bundle bundle)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDefaultBackClose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-Tomcat使用服务开机自启动</title>
      <link href="/2017/10/04/JavaEE-Tomcat%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/"/>
      <url>/2017/10/04/JavaEE-Tomcat%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ul><li>JDK和Tomcat同为32位或同为64位。</li><li>配置JDK环境变量。</li><li>配置Tomcat环境变量。</li></ul><span id="more"></span><h2 id="设置服务"><a href="#设置服务" class="headerlink" title="设置服务"></a>设置服务</h2><ul><li>打开cmd</li><li>切换到tomcat bin目录</li><li>运行下列命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service.bat install Tomcat</span><br></pre></td></tr></table></figure><h2 id="卸载服务"><a href="#卸载服务" class="headerlink" title="卸载服务"></a>卸载服务</h2><ul><li>打开cmd</li><li>切换到tomcat bin目录</li><li>运行下列命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service.bat uninstall Tomcat</span><br></pre></td></tr></table></figure><h2 id="设置服务开机自启动"><a href="#设置服务开机自启动" class="headerlink" title="设置服务开机自启动"></a>设置服务开机自启动</h2><ul><li>打开服务管理</li><li>设置为自动，应用。</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-根据资源名称获取资源Id</title>
      <link href="/2017/10/04/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%A0%B9%E6%8D%AE%E8%B5%84%E6%BA%90%E5%90%8D%E7%A7%B0%E8%8E%B7%E5%8F%96%E8%B5%84%E6%BA%90Id/"/>
      <url>/2017/10/04/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%A0%B9%E6%8D%AE%E8%B5%84%E6%BA%90%E5%90%8D%E7%A7%B0%E8%8E%B7%E5%8F%96%E8%B5%84%E6%BA%90Id/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Resources</span> <span class="variable">resources</span> <span class="operator">=</span> context.getResources();</span><br><span class="line"><span class="type">int</span> id= getResources().getIdentifier(<span class="string">&quot;图标名称(不带后缀)&quot;</span>, <span class="string">&quot;drawable&quot;</span>, <span class="string">&quot;包名&quot;</span>);</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul><li>用数字图片表示剩余天数</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setLeftDays</span><span class="params">(<span class="type">int</span> days)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">dayStr</span> <span class="operator">=</span> Integer.toString(days);</span><br><span class="line">    llLeftDays.removeAllViews();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=dayStr.length()-<span class="number">1</span>; i&gt;<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> (<span class="type">int</span>) (days / (Math.pow(<span class="number">10</span>, i)));</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> d%<span class="number">10</span>;</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">iv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageView</span>(context);</span><br><span class="line">        iv.setImageResource(getResources().getIdentifier(<span class="string">&quot;image_number&quot;</span>+s, <span class="string">&quot;drawable&quot;</span>, <span class="string">&quot;me.zhouzhuo810.test&quot;</span>));</span><br><span class="line">        iv.setLayoutParams(<span class="keyword">new</span> <span class="title class_">LinearLayout</span>.LayoutParams(ViewUtil.scaleTextValue(context, <span class="number">52</span>)</span><br><span class="line">                ,ViewUtil.scaleTextValue(context, <span class="number">64</span>)));</span><br><span class="line">        llLeftDays.addView(iv);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> days%<span class="number">10</span>;</span><br><span class="line">    <span class="type">ImageView</span> <span class="variable">iv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageView</span>(context);</span><br><span class="line">    iv.setImageResource(getResources().getIdentifier(<span class="string">&quot;image_number&quot;</span>+l, <span class="string">&quot;drawable&quot;</span>, <span class="string">&quot;me.zhouzhuo810.test&quot;</span>));</span><br><span class="line">    iv.setLayoutParams(<span class="keyword">new</span> <span class="title class_">LinearLayout</span>.LayoutParams(ViewUtil.scaleTextValue(context, <span class="number">52</span>)</span><br><span class="line">            ,ViewUtil.scaleTextValue(context, <span class="number">64</span>)));</span><br><span class="line">    llLeftDays.addView(iv);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="工具封装"><a href="#工具封装" class="headerlink" title="工具封装"></a>工具封装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 资源文件工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesUtils</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_ID</span> <span class="operator">=</span> <span class="string">&quot;id&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_STRING</span> <span class="operator">=</span> <span class="string">&quot;string&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_DRABLE</span> <span class="operator">=</span> <span class="string">&quot;drable&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_LAYOUT</span> <span class="operator">=</span> <span class="string">&quot;layout&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_STYLE</span> <span class="operator">=</span> <span class="string">&quot;style&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_COLOR</span> <span class="operator">=</span> <span class="string">&quot;color&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_DIMEN</span> <span class="operator">=</span> <span class="string">&quot;dimen&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_ANIM</span> <span class="operator">=</span> <span class="string">&quot;anim&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RES_MENU</span> <span class="operator">=</span> <span class="string">&quot;menu&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_ID);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件string的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getStringId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_STRING);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件drable的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getDrableId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_DRABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件layout的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_LAYOUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件style的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getStyleId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_STYLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件color的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getColorId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_COLOR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件dimen的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getDimenId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_DIMEN);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件ainm的id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getAnimId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_ANIM);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件menu的id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getMenuId</span><span class="params">(Context context,String resName)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> getResId(context,resName,RES_MENU);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取资源文件ID</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> defType</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getResId</span><span class="params">(Context context,String resName,String defType)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> context.getResources().getIdentifier(resName, defType, context.getPackageName());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android支付宝支付-返回签名错误问题</title>
      <link href="/2017/09/30/Android%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-%E8%BF%94%E5%9B%9E%E7%AD%BE%E5%90%8D%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98/"/>
      <url>/2017/09/30/Android%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-%E8%BF%94%E5%9B%9E%E7%AD%BE%E5%90%8D%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。"><a href="#首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。" class="headerlink" title="首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。"></a>首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。</h3><h3 id="其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配-推荐RSA2-；"><a href="#其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配-推荐RSA2-；" class="headerlink" title="其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配(推荐RSA2)；"></a>其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配(推荐RSA2)；</h3><h3 id="最后，沙箱环境是否注释。"><a href="#最后，沙箱环境是否注释。" class="headerlink" title="最后，沙箱环境是否注释。"></a>最后，沙箱环境是否注释。</h3>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android微信支付返回-1问题解决</title>
      <link href="/2017/09/30/Android%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E8%BF%94%E5%9B%9E-1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2017/09/30/Android%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E8%BF%94%E5%9B%9E-1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="整体流程回顾"><a href="#整体流程回顾" class="headerlink" title="整体流程回顾"></a>整体流程回顾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">商户系统和微信支付系统主要交互说明：</span><br><span class="line">  </span><br><span class="line">步骤1：用户在商户APP中选择商品，提交订单，选择微信支付。</span><br><span class="line">  </span><br><span class="line">步骤2：商户后台收到用户支付单，调用微信支付统一下单接口。参见【统一下单API】。</span><br><span class="line">  </span><br><span class="line">步骤3：统一下单接口返回正常的prepay_id，再按签名规范重新生成签名后，将数据传输给APP。参与签名的字段名为appid，partnerid，prepayid，noncestr，timestamp，package。注意：package的值格式为Sign=WXPay </span><br><span class="line">  </span><br><span class="line">步骤4：商户APP调起微信支付。api参见本章节【app端开发步骤说明】</span><br><span class="line">  </span><br><span class="line">步骤5：商户后台接收支付通知。api参见【支付结果通知API】</span><br><span class="line">  </span><br><span class="line">步骤6：商户后台查询支付结果。，api参见【查询订单API】</span><br><span class="line">  </span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><h3 id="首先，检查微信平台的APP-ID是否正确；"><a href="#首先，检查微信平台的APP-ID是否正确；" class="headerlink" title="首先，检查微信平台的APP ID是否正确；"></a>首先，检查微信平台的APP ID是否正确；</h3><h3 id="其次，检查微信商户平台的API密钥-随机32位即可-是否设置且正确使用；"><a href="#其次，检查微信商户平台的API密钥-随机32位即可-是否设置且正确使用；" class="headerlink" title="其次，检查微信商户平台的API密钥(随机32位即可)是否设置且正确使用；"></a>其次，检查微信商户平台的API密钥(随机32位即可)是否设置且正确使用；</h3><p><a href="https://suijimimashengcheng.51240.com/">随机字符串生成地址</a></p><h3 id="然后，检查微信平台的包名和签名-注意字母小写-是否配置并正确；"><a href="#然后，检查微信平台的包名和签名-注意字母小写-是否配置并正确；" class="headerlink" title="然后，检查微信平台的包名和签名(注意字母小写)是否配置并正确；"></a>然后，检查微信平台的包名和签名(注意字母小写)是否配置并正确；</h3><h3 id="再然后，检查服务端是否二次签名；并且二次签名是否正确；"><a href="#再然后，检查服务端是否二次签名；并且二次签名是否正确；" class="headerlink" title="再然后，检查服务端是否二次签名；并且二次签名是否正确；"></a>再然后，检查服务端是否二次签名；并且二次签名是否正确；</h3><h3 id="最后，检查返回的时间戳是不是使用二次签名的时间戳；"><a href="#最后，检查返回的时间戳是不是使用二次签名的时间戳；" class="headerlink" title="最后，检查返回的时间戳是不是使用二次签名的时间戳；"></a>最后，检查返回的时间戳是不是使用二次签名的时间戳；</h3><h3 id="返回的随机字符串是不是二次签名时的随机字符串。"><a href="#返回的随机字符串是不是二次签名时的随机字符串。" class="headerlink" title="返回的随机字符串是不是二次签名时的随机字符串。"></a>返回的随机字符串是不是二次签名时的随机字符串。</h3>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用demo-微信支付</title>
      <link href="/2017/09/13/Android%E5%B8%B8%E7%94%A8demo-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"/>
      <url>/2017/09/13/Android%E5%B8%B8%E7%94%A8demo-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/</url>
      
        <content type="html"><![CDATA[<h2 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h2><p><a href="http://pan.baidu.com/s/1hszQj0w">百度云下载</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提取码： 79nk</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-文件存储</title>
      <link href="/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8/"/>
      <url>/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="文件存储工具整理"><a href="#文件存储工具整理" class="headerlink" title="文件存储工具整理"></a>文件存储工具整理</h2><ul><li>随机名字存储</li><li>指定文件名存储</li><li>字节存储</li></ul><span id="more"></span><h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by admin on 2017/7/22.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">saveFileToPathWithRandomName</span><span class="params">(String content, String path)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建目录</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">            dir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 读取文件流并保持在指定路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> System.currentTimeMillis() + <span class="string">&quot;.txt&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mPath</span> <span class="operator">=</span> path + File.separator</span><br><span class="line">                + filename;</span><br><span class="line">        System.out.println(path);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(mPath);</span><br><span class="line">        <span class="type">byte</span>[] buffer = content.getBytes(Charset.forName(<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">        outputStream.write(buffer);</span><br><span class="line">        outputStream.flush();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        <span class="keyword">return</span> filename;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">saveFileToPathWithName</span><span class="params">(String content, String path, String filename)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建目录</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">            dir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 读取文件流并保持在指定路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">mPath</span> <span class="operator">=</span> path + File.separator</span><br><span class="line">                + filename;</span><br><span class="line">        System.out.println(path);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(mPath);</span><br><span class="line">        <span class="type">byte</span>[] buffer = content.getBytes(Charset.forName(<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">        outputStream.write(buffer);</span><br><span class="line">        outputStream.flush();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        <span class="keyword">return</span> filename;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteFiles</span><span class="params">(String dir)</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dir);</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">            File[] files = file.listFiles();</span><br><span class="line">            <span class="keyword">if</span> (files != <span class="literal">null</span> &amp;&amp; files.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (File file1 : files) &#123;</span><br><span class="line">                    file1.delete();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">saveFile</span><span class="params">(<span class="type">byte</span>[] data, String dirName, String fileName)</span> &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> request.getRealPath(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">newpath</span> <span class="operator">=</span> realPath + File.separator + dirName;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(newpath);</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> newpath + File.separator + fileName;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(filePath), <span class="literal">false</span>);</span><br><span class="line">            fos.write(data);</span><br><span class="line">            fos.flush();</span><br><span class="line">            fos.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filePath;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> Java工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-文件压缩与解压</title>
      <link href="/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"/>
      <url>/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="文件压缩与解压工具整理"><a href="#文件压缩与解压工具整理" class="headerlink" title="文件压缩与解压工具整理"></a>文件压缩与解压工具整理</h2><ul><li>文件或文件夹压缩</li><li>文件解压</li></ul><span id="more"></span><h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipOutputStream;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZipUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ZipUtils</span><span class="params">()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doCompress</span><span class="params">(String srcFile, String zipFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        doCompress(<span class="keyword">new</span> <span class="title class_">File</span>(srcFile), <span class="keyword">new</span> <span class="title class_">File</span>(zipFile));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件压缩</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcFile 目录或者单个文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zipFile 压缩后的ZIP文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doCompress</span><span class="params">(File srcFile, File zipFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ZipOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(zipFile));</span><br><span class="line">            doCompress(srcFile, out);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            out.close();<span class="comment">//记得关闭资源</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doCompress</span><span class="params">(String filelName, ZipOutputStream out)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        doCompress(<span class="keyword">new</span> <span class="title class_">File</span>(filelName), out);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doCompress</span><span class="params">(File file, ZipOutputStream out)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        doCompress(file, out, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doCompress</span><span class="params">(File inFile, ZipOutputStream out, String dir)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">if</span> ( inFile.isDirectory() ) &#123;</span><br><span class="line">            File[] files = inFile.listFiles();</span><br><span class="line">            <span class="keyword">if</span> (files!=<span class="literal">null</span> &amp;&amp; files.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> inFile.getName();</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(dir)) &#123;</span><br><span class="line">                        name = dir + <span class="string">&quot;/&quot;</span> + name;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ZipUtils.doCompress(file, out, name);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ZipUtils.doZip(inFile, out, dir);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">doZip</span><span class="params">(File inFile, ZipOutputStream out, String dir)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">entryName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(dir)) &#123;</span><br><span class="line">            entryName = dir + <span class="string">&quot;/&quot;</span> + inFile.getName();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            entryName = inFile.getName();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ZipEntry</span> <span class="variable">entry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipEntry</span>(entryName);</span><br><span class="line">        out.putNextEntry(entry);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(inFile);</span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            out.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        out.closeEntry();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        doCompress(<span class="string">&quot;D:/java/&quot;</span>, <span class="string">&quot;D:/java.zip&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> Java工具类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-SpingMVC之log4j日志配置</title>
      <link href="/2017/08/23/JavaEE-SpingMVC%E4%B9%8Blog4j%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/08/23/JavaEE-SpingMVC%E4%B9%8Blog4j%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="web-xml-添加配置"><a href="#web-xml-添加配置" class="headerlink" title="web.xml 添加配置"></a>web.xml 添加配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring的log4j监听器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>webAppRootKey<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>webapp.root1<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jRefreshInterval<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>6000<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="resources中添加log4j-properties"><a href="#resources中添加log4j-properties" class="headerlink" title="resources中添加log4j.properties"></a>resources中添加log4j.properties</h3><ul><li>注意：webAppRootKey的值和${webapp.root1}的内容相对相。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">### 设置###</span><br><span class="line">log4j.rootLogger = debug,stdout,D,E</span><br><span class="line">### 输出信息到控制抬 ###</span><br><span class="line">#log4j.appender.stdout = org.apache.log4j.ConsoleAppender</span><br><span class="line">#log4j.appender.stdout.Target = System.out</span><br><span class="line">#log4j.appender.stdout.layout = org.apache.log4j.PatternLayout</span><br><span class="line">#log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span><br><span class="line">### 输出DEBUG 级别以上的日志到=E://logs/error.log ###</span><br><span class="line">log4j.appender.D = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.D.File = $&#123;webapp.root1&#125;/WEB-INF/logs/log.log</span><br><span class="line">log4j.appender.D.Append = true</span><br><span class="line">log4j.appender.D.Threshold = INFO</span><br><span class="line">log4j.appender.D.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [%X&#123;ip&#125;] [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line">### 输出ERROR 级别以上的日志到=E://logs/error.log ###</span><br><span class="line">log4j.appender.E = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.E.File =$&#123;webapp.root1&#125;/WEB-INF/logs/error.log</span><br><span class="line">log4j.appender.E.Append = true</span><br><span class="line">log4j.appender.E.Threshold = ERROR</span><br><span class="line">log4j.appender.E.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.E.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [%X&#123;ip&#125;] [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line">#log4j.rootLogger=INFO,CONSOLE,DAILY_ALL</span><br><span class="line">#console log</span><br><span class="line">#log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</span><br><span class="line">#log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#log4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%t] %-5p %c - %m%n</span><br><span class="line">##all log</span><br><span class="line">#log4j.appender.DAILY_ALL=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">#log4j.appender.DAILY_ALL.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#log4j.appender.DAILY_ALL.layout.ConversionPattern=&quot;%p %d&#123;yyyy-MM-dd HH:mm:ss&#125; %-50.50c(%L) - %m%n</span><br><span class="line">##$&#123;webapp.root&#125; == the path of your tomcat path</span><br><span class="line">#log4j.appender.DAILY_ALL.File=$&#123;webapp.root&#125;/WEB-INF/logs/app.log</span><br><span class="line">## General Apache libraries</span><br><span class="line">#log4j.logger.org.apache=WARN</span><br><span class="line">## Spring</span><br><span class="line">#log4j.logger.org.springframework=WARN</span><br><span class="line"># email</span><br><span class="line">log4j.logger.com.alexgaoyh.util.email=INFO, email</span><br><span class="line">log4j.appender.email=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.email.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.email.layout.ConversionPattern=&quot;%p %d&#123;yyyy-MM-dd HH:mm:ss&#125; %-50.50c(%L) - %m%n</span><br><span class="line">log4j.appender.email.File=$&#123;webapp.root1&#125;/WEB-INF/logs/email/email.log</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-串口通讯</title>
      <link href="/2017/08/23/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/"/>
      <url>/2017/08/23/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/mik3y/usb-serial-for-android">usb-serial-for-android</a></p><p>在这个项目的基础上我将串口通信的功能封装了起来，用起来更加简单了。</p><p>Github传送门：<a href="https://github.com/zhouzhuo810/OkUSB">OkUSB</a></p><h1 id="OkUSB"><a href="#OkUSB" class="headerlink" title="OkUSB"></a>OkUSB</h1><p>一个简洁的Android串口通信框架。</p><h2 id="功能简介"><a href="#功能简介" class="headerlink" title="功能简介"></a>功能简介</h2><ul><li>支持设置波特率</li><li>支持设置数据位</li><li>支持设置停止位</li><li>支持设置校验位</li><li>支持DTS和RTS</li><li>支持串口连接状态监听</li></ul><span id="more"></span><h2 id="用法简介"><a href="#用法简介" class="headerlink" title="用法简介"></a>用法简介</h2><h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        ...</span><br><span class="line">        maven &#123; url &#x27;https://jitpack.io&#x27; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">        compile &#x27;com.github.zhouzhuo810:OkUSB:1.0.0&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="具体用法"><a href="#具体用法" class="headerlink" title="具体用法"></a>具体用法</h3><p>1.在AndroidManifest.xml中添加如下特性：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.usb.host&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>在需要连接串口的Activity中添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:resource</span>=<span class="string">&quot;@xml/device_filter&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>2.在res文件夹创建xml文件夹，新建device_filter.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 要进行通信的USB设备的供应商ID（VID）和产品识别码（PID）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">usb-device</span> <span class="attr">vendor-id</span>=<span class="string">&quot;0403&quot;</span> <span class="attr">product-id</span>=<span class="string">&quot;6001&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.前面都是准备工作，这里才真正使用。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line">usb = <span class="keyword">new</span> <span class="title class_">USB</span>.USBBuilder(<span class="built_in">this</span>)</span><br><span class="line">        .setBaudRate(<span class="number">115200</span>)  <span class="comment">//波特率</span></span><br><span class="line">        .setDataBits(<span class="number">8</span>)       <span class="comment">//数据位</span></span><br><span class="line">        .setStopBits(UsbSerialPort.STOPBITS_1) <span class="comment">//停止位</span></span><br><span class="line">        .setParity(UsbSerialPort.PARITY_NONE)  <span class="comment">//校验位</span></span><br><span class="line">        .setMaxReadBytes(<span class="number">20</span>)   <span class="comment">//接受数据最大长度</span></span><br><span class="line">        .setReadDuration(<span class="number">500</span>)  <span class="comment">//读数据间隔时间</span></span><br><span class="line">        .setDTR(<span class="literal">false</span>)    <span class="comment">//DTR enable</span></span><br><span class="line">        .setRTS(<span class="literal">false</span>)    <span class="comment">//RTS enable</span></span><br><span class="line">        .build();</span><br><span class="line">  </span><br><span class="line"><span class="comment">//实现监听连接状态和数据收发。</span></span><br><span class="line">usb.setOnUsbChangeListener(<span class="keyword">new</span> <span class="title class_">USB</span>.OnUsbChangeListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUsbConnect</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;conencted&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUsbDisconnect</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;disconencted&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDataReceive</span><span class="params">(<span class="type">byte</span>[] data)</span> &#123;</span><br><span class="line">        tvResult.setText(<span class="keyword">new</span> <span class="title class_">String</span>(data, Charset.forName(<span class="string">&quot;GB2312&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUsbConnectFailed</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;connect fail&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPermissionGranted</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;permission ok&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPermissionRefused</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;permission fail&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDriverNotSupport</span><span class="params">()</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;no driver&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onWriteDataFailed</span><span class="params">(String error)</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;write fail&quot;</span> + error, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onWriteSuccess</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;write ok &quot;</span> + num, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>4.发送数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (usb != <span class="literal">null</span>) &#123;</span><br><span class="line">    usb.destroy();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.如果是Activity，可以在onDestroy中调用如下代码关闭串口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> (usb != <span class="literal">null</span>) &#123;</span><br><span class="line">    usb.destroy();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-SpringMVC之获取项目根目录</title>
      <link href="/2017/08/23/JavaEE-SpringMVC%E4%B9%8B%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95/"/>
      <url>/2017/08/23/JavaEE-SpringMVC%E4%B9%8B%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="代码很少，但是很有用"><a href="#代码很少，但是很有用" class="headerlink" title="代码很少，但是很有用"></a>代码很少，但是很有用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line"><span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> request.getRealPath(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-复制与粘贴</title>
      <link href="/2017/08/23/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%8D%E5%88%B6%E4%B8%8E%E7%B2%98%E8%B4%B4/"/>
      <url>/2017/08/23/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%8D%E5%88%B6%E4%B8%8E%E7%B2%98%E8%B4%B4/</url>
      
        <content type="html"><![CDATA[<h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">cm.setPrimaryClip(ClipData.newPlainText(label, text));</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="工具类封装"><a href="#工具类封装" class="headerlink" title="工具类封装"></a>工具类封装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.ClipData;</span><br><span class="line"><span class="keyword">import</span> android.content.ClipboardManager;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.RequiresApi;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Android 复制粘贴工具</span></span><br><span class="line"><span class="comment"> * Created by zhouzhuo810 on 2017/8/12.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CopyUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyUrl</span><span class="params">(Context context,CharSequence label, String url)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        cm.setPrimaryClip(ClipData.newRawUri(label, Uri.parse(url)));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyUri</span><span class="params">(Context context,CharSequence label, Uri uri)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        cm.setPrimaryClip(ClipData.newRawUri(label, uri));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RequiresApi(value = 16)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyHtml</span><span class="params">(Context context,CharSequence label, String text, String html)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        cm.setPrimaryClip(ClipData.newHtmlText(label,text, html));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyPlainText</span><span class="params">(Context context, CharSequence label, String text)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        cm.setPrimaryClip(ClipData.newPlainText(label, text));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyIntent</span><span class="params">(Context context,CharSequence label, Intent intent)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        cm.setPrimaryClip(ClipData.newIntent(label, intent));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CharSequence <span class="title function_">getCopyPlainText</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getText();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Intent <span class="title function_">getCopyIntent</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getIntent();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RequiresApi(value = 16)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CharSequence <span class="title function_">getCopyHtmlText</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getHtmlText();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Uri <span class="title function_">getCopyUri</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">cm</span> <span class="operator">=</span> (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getUri();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-使用itext生成PDF总结</title>
      <link href="/2017/08/18/JavaEE-%E4%BD%BF%E7%94%A8itext%E7%94%9F%E6%88%90PDF%E6%80%BB%E7%BB%93/"/>
      <url>/2017/08/18/JavaEE-%E4%BD%BF%E7%94%A8itext%E7%94%9F%E6%88%90PDF%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h3 id="添加pom依赖"><a href="#添加pom依赖" class="headerlink" title="添加pom依赖"></a>添加pom依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pdf start--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itextpdf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>itextpdf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.5.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itextpdf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>itext-asian<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- pdf end --&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h2><h3 id="添加普通文字-不换行"><a href="#添加普通文字-不换行" class="headerlink" title="添加普通文字(不换行)"></a>添加普通文字(不换行)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addText</span><span class="params">(Document document, String text, Font font)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (font == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Chunk</span> <span class="variable">chunk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chunk</span>(text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(chunk);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        font.setSize(<span class="number">12f</span>);</span><br><span class="line">        font.setStyle(Font.NORMAL);</span><br><span class="line">        <span class="type">Chunk</span> <span class="variable">chunk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chunk</span>(text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text, font);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(chunk);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加普通文字-换行"><a href="#添加普通文字-换行" class="headerlink" title="添加普通文字(换行)"></a>添加普通文字(换行)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addTextLine</span><span class="params">(Document document, String text, Font font)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (font == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Chunk</span> <span class="variable">chunk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chunk</span>((text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text) + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(chunk);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        font.setSize(<span class="number">12f</span>);</span><br><span class="line">        font.setStyle(Font.NORMAL);</span><br><span class="line">        <span class="type">Chunk</span> <span class="variable">chunk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chunk</span>((text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text) + <span class="string">&quot;\n&quot;</span>, font);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(chunk);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加下划线文字-带超链接"><a href="#添加下划线文字-带超链接" class="headerlink" title="添加下划线文字(带超链接)"></a>添加下划线文字(带超链接)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加下划线(带超链接)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> document Document对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text     链接文字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fontPath 字体路径</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException       异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> DocumentException 异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addUnderLineText</span><span class="params">(Document document, String text, String fontPath)</span> <span class="keyword">throws</span> IOException, DocumentException &#123;</span><br><span class="line">    <span class="type">Font</span> <span class="variable">font</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Font</span>(BaseFont.createFont(fontPath + <span class="string">&quot;Arial.ttf&quot;</span>, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED), <span class="number">12f</span>, Font.UNDERLINE);</span><br><span class="line">    font.setColor(BaseColor.BLUE);</span><br><span class="line">    <span class="type">Anchor</span> <span class="variable">anchor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Anchor</span>(text, font);</span><br><span class="line">    anchor.setReference(text);</span><br><span class="line">    anchor.setName(text);</span><br><span class="line">    document.add(anchor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加表格"><a href="#添加表格" class="headerlink" title="添加表格"></a>添加表格</h3><ul><li>方法封装</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加表格</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> document     Document对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tableTitle   表格标题</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> titles       标题</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> widthRatio   标题宽的比例</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values       内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> titleBgColor 标题行背景颜色</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> font         字体</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> DocumentException 异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> List&lt;PdfPRow&gt; <span class="title function_">addTable</span><span class="params">(Document document, String tableTitle, String[] titles, <span class="type">float</span>[] widthRatio, String[][] values, BaseColor titleBgColor, Font font)</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">    <span class="comment">//添加表格标题</span></span><br><span class="line">    font.setSize(<span class="number">14f</span>);</span><br><span class="line">    font.setStyle(Font.BOLD);</span><br><span class="line">    <span class="type">Chunk</span> <span class="variable">paragraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chunk</span>(tableTitle == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : tableTitle, font);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        document.add(paragraph);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    font.setSize(<span class="number">12f</span>);</span><br><span class="line">    font.setStyle(Font.NORMAL);</span><br><span class="line">    <span class="comment">//添加表格</span></span><br><span class="line">    <span class="type">PdfPTable</span> <span class="variable">inter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfPTable</span>(titles.length);</span><br><span class="line">    inter.setWidthPercentage(<span class="number">100</span>); <span class="comment">// 宽度100%填充</span></span><br><span class="line">    inter.setSpacingBefore(<span class="number">1f</span>); <span class="comment">// 前间距</span></span><br><span class="line">    inter.setSpacingAfter(<span class="number">1f</span>); <span class="comment">// 后间距</span></span><br><span class="line">    List&lt;PdfPRow&gt; listRow = inter.getRows(); <span class="comment">//行</span></span><br><span class="line">    <span class="comment">//设置列宽比例</span></span><br><span class="line">    inter.setWidths(widthRatio);</span><br><span class="line">    <span class="comment">//标题</span></span><br><span class="line">    PdfPCell cells[] = <span class="keyword">new</span> <span class="title class_">PdfPCell</span>[titles.length];</span><br><span class="line">    <span class="type">PdfPRow</span> <span class="variable">titleRow</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfPRow</span>(cells);</span><br><span class="line">    <span class="comment">//单元格</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; titles.length; i++) &#123;</span><br><span class="line">        cells[i] = <span class="keyword">new</span> <span class="title class_">PdfPCell</span>(<span class="keyword">new</span> <span class="title class_">Paragraph</span>(titles[i], font));</span><br><span class="line">        cells[i].setBackgroundColor(titleBgColor == <span class="literal">null</span> ? BaseColor.LIGHT_GRAY : titleBgColor);</span><br><span class="line">        cells[i].setPaddingTop(<span class="number">6f</span>);</span><br><span class="line">        cells[i].setPaddingBottom(<span class="number">6f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//把第一行添加到集合</span></span><br><span class="line">    listRow.add(titleRow);</span><br><span class="line">    <span class="keyword">for</span> (String[] value : values) &#123;</span><br><span class="line">        PdfPCell childCells[] = <span class="keyword">new</span> <span class="title class_">PdfPCell</span>[value.length];</span><br><span class="line">        <span class="type">PdfPRow</span> <span class="variable">row</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfPRow</span>(childCells);</span><br><span class="line">        <span class="comment">//添加列</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; value.length; i++) &#123;</span><br><span class="line">            childCells[i] = <span class="keyword">new</span> <span class="title class_">PdfPCell</span>(<span class="keyword">new</span> <span class="title class_">Paragraph</span>(value[i], font));<span class="comment">//单元格内容</span></span><br><span class="line">            childCells[i].setPaddingTop(<span class="number">4f</span>);</span><br><span class="line">            childCells[i].setPaddingBottom(<span class="number">4f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//添加行</span></span><br><span class="line">        listRow.add(row);</span><br><span class="line">    &#125;</span><br><span class="line">    document.add(inter);</span><br><span class="line">    <span class="keyword">return</span> listRow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>用法示例</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pdfAddRequestHeaders</span><span class="params">(Document document, String projectId, String id, Font font)</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">    List&lt;RequestHeaderEntity&gt; globals = mRequestHeaderService.getGlobalRequestHeaders(projectId);</span><br><span class="line">    List&lt;RequestHeaderEntity&gt; args = mRequestHeaderService.getBaseDao().executeCriteria(ResponseArgUtils.getArgByInterfaceId(id));</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (globals != <span class="literal">null</span> &amp;&amp; globals.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//设置列宽</span></span><br><span class="line">        <span class="type">float</span>[] columnWidths = &#123;<span class="number">3f</span>, <span class="number">2f</span>, <span class="number">5f</span>&#125;;</span><br><span class="line">        String[][] values = <span class="keyword">new</span> <span class="title class_">String</span>[args.size()][<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.size(); i++) &#123;</span><br><span class="line">            <span class="type">RequestHeaderEntity</span> <span class="variable">entity</span> <span class="operator">=</span> args.get(i);</span><br><span class="line">            values[i][<span class="number">0</span>] = entity.getName();</span><br><span class="line">            values[i][<span class="number">1</span>] = entity.getValue() == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : entity.getValue();</span><br><span class="line">            values[i][<span class="number">2</span>] = entity.getNote() == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : entity.getNote();</span><br><span class="line">        &#125;</span><br><span class="line">        addTable(document, <span class="string">&quot;全局请求头&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;名称&quot;</span>, <span class="string">&quot;默认值&quot;</span>, <span class="string">&quot;说明&quot;</span>&#125;, columnWidths, values, <span class="literal">null</span>, font);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (args != <span class="literal">null</span> &amp;&amp; args.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//设置列宽</span></span><br><span class="line">        <span class="type">float</span>[] columnWidths = &#123;<span class="number">3f</span>, <span class="number">2f</span>, <span class="number">5f</span>&#125;;</span><br><span class="line">        String[][] values = <span class="keyword">new</span> <span class="title class_">String</span>[args.size()][<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.size(); i++) &#123;</span><br><span class="line">            <span class="type">RequestHeaderEntity</span> <span class="variable">entity</span> <span class="operator">=</span> args.get(i);</span><br><span class="line">            values[i][<span class="number">0</span>] = entity.getName();</span><br><span class="line">            values[i][<span class="number">1</span>] = entity.getValue() == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : entity.getValue();</span><br><span class="line">            values[i][<span class="number">2</span>] = entity.getNote() == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : entity.getNote();</span><br><span class="line">        &#125;</span><br><span class="line">        addTable(document, <span class="string">&quot;其他请求头&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;名称&quot;</span>, <span class="string">&quot;默认值&quot;</span>, <span class="string">&quot;说明&quot;</span>&#125;, columnWidths, values, <span class="literal">null</span>, font);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h2><h3 id="添加页码"><a href="#添加页码" class="headerlink" title="添加页码"></a>添加页码</h3><ul><li>使用</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PdfWriter</span> <span class="variable">pdfWriter</span> <span class="operator">=</span> PdfWriter.getInstance(document, <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath));</span><br><span class="line"><span class="type">PdfReportM1HeaderFooter</span> <span class="variable">footer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfReportM1HeaderFooter</span>();</span><br><span class="line">pdfWriter.setPageEvent(footer);</span><br><span class="line"><span class="comment">//打开文档</span></span><br><span class="line">document.open();</span><br><span class="line"><span class="comment">//... ...</span></span><br></pre></td></tr></table></figure><ul><li>工具类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Project Name:report</span></span><br><span class="line"><span class="comment"> * File Name:PdfReportM1HeaderFooter.java</span></span><br><span class="line"><span class="comment"> * Package Name:com.riambsoft.report.pdf</span></span><br><span class="line"><span class="comment"> * Date:2013-9-16上午08:59:00</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2013, riambsoft All Rights Reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Document;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.DocumentException;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Element;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Font;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.PageSize;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Phrase;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Rectangle;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.BaseFont;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.ColumnText;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfContentByte;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfPageEventHelper;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfTemplate;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfWriter;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PdfReportM1HeaderFooter</span> <span class="keyword">extends</span> <span class="title class_">PdfPageEventHelper</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页眉</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文档字体大小，页脚页眉最好和文本大小一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">presentFontSize</span> <span class="operator">=</span> <span class="number">12</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文档页面大小，最好前面传入，否则默认为A4纸张</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">Rectangle</span> <span class="variable">pageSize</span> <span class="operator">=</span> PageSize.A4;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 模板</span></span><br><span class="line">    <span class="keyword">public</span> PdfTemplate total;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 基础字体对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">BaseFont</span> <span class="variable">bf</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 利用基础字体生成的字体对象，一般用于生成中文文字</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">Font</span> <span class="variable">fontDetail</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Creates a new instance of PdfReportM1HeaderFooter 无参构造方法.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PdfReportM1HeaderFooter</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Creates a new instance of PdfReportM1HeaderFooter 构造方法.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> yeMei</span></span><br><span class="line"><span class="comment">     *            页眉字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> presentFontSize</span></span><br><span class="line"><span class="comment">     *            数据体字体大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment">     *            页面文档大小，A4，A5，A6横转翻转等Rectangle对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PdfReportM1HeaderFooter</span><span class="params">(String yeMei, <span class="type">int</span> presentFontSize, Rectangle pageSize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.header = yeMei;</span><br><span class="line">        <span class="built_in">this</span>.presentFontSize = presentFontSize;</span><br><span class="line">        <span class="built_in">this</span>.pageSize = pageSize;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeader</span><span class="params">(String header)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.header = header;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPresentFontSize</span><span class="params">(<span class="type">int</span> presentFontSize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.presentFontSize = presentFontSize;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * TODO 文档打开时创建模板</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onOpenDocument(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpenDocument</span><span class="params">(PdfWriter writer, Document document)</span> &#123;</span><br><span class="line">        total = writer.getDirectContent().createTemplate(<span class="number">70</span>, <span class="number">70</span>);<span class="comment">// 共 页 的矩形的长宽高</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * TODO 关闭每页的时候，写入页眉，写入&#x27;第几页共&#x27;这几个字。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onEndPage(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEndPage</span><span class="params">(PdfWriter writer, Document document)</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (bf == <span class="literal">null</span>) &#123;</span><br><span class="line">                bf = BaseFont.createFont(<span class="string">&quot;STSong-Light&quot;</span>, <span class="string">&quot;UniGB-UCS2-H&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fontDetail == <span class="literal">null</span>) &#123;</span><br><span class="line">                fontDetail = <span class="keyword">new</span> <span class="title class_">Font</span>(bf, presentFontSize, Font.NORMAL);<span class="comment">// 数据体字体</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 1.写入页眉</span></span><br><span class="line">        ColumnText.showTextAligned(writer.getDirectContent(), Element.ALIGN_LEFT, <span class="keyword">new</span> <span class="title class_">Phrase</span>(header, fontDetail), document.left(), document.top() + <span class="number">20</span>, <span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 2.写入前半部分的 第 X页/共</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pageS</span> <span class="operator">=</span> writer.getPageNumber();</span><br><span class="line">        <span class="type">String</span> <span class="variable">foot1</span> <span class="operator">=</span> <span class="string">&quot;第 &quot;</span> + pageS + <span class="string">&quot; 页 /共&quot;</span>;</span><br><span class="line">        <span class="type">Phrase</span> <span class="variable">footer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Phrase</span>(foot1, fontDetail);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 3.计算前半部分的foot1的长度，后面好定位最后一部分的&#x27;Y页&#x27;这俩字的x轴坐标，字体长度也要计算进去 = len</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">len</span> <span class="operator">=</span> bf.getWidthPoint(foot1, presentFontSize);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 4.拿到当前的PdfContentByte</span></span><br><span class="line">        <span class="type">PdfContentByte</span> <span class="variable">cb</span> <span class="operator">=</span> writer.getDirectContent();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//自己增加的</span></span><br><span class="line"><span class="comment">/*        if (pageS == 1) &#123;</span></span><br><span class="line"><span class="comment">            Phrase footerLeft = new Phrase(&quot;&quot;, fontDetail);</span></span><br><span class="line"><span class="comment">            ColumnText.showTextAligned(cb, Element.ALIGN_LEFT, footerLeft, document.left(), document.bottom() - 20, 0);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">// 5.写入页脚1，x轴就是(右margin+左margin + right() -left()- len)/2.0F 再给偏移20F适合人类视觉感受，否则肉眼看上去就太偏左了 ,y轴就是底边界-20,否则就贴边重叠到数据体里了就不是页脚了；注意Y轴是从下往上累加的，最上方的Top值是大于Bottom好几百开外的。</span></span><br><span class="line">        ColumnText.showTextAligned(cb, Element.ALIGN_CENTER, footer, (document.rightMargin() + document.right() + document.leftMargin() - document.left() - len) / <span class="number">2.0F</span> + <span class="number">20F</span>, document.bottom() - <span class="number">20</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 6.写入页脚2的模板（就是页脚的Y页这俩字）添加到文档中，计算模板的和Y轴,X=(右边界-左边界 - 前半部分的len值)/2.0F + len ， y 轴和之前的保持一致，底边界-20</span></span><br><span class="line">        cb.addTemplate(total, (document.rightMargin() + document.right() + document.leftMargin() - document.left()) / <span class="number">2.0F</span> + <span class="number">20F</span>, document.bottom() - <span class="number">20</span>); <span class="comment">// 调节模版显示的位置</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * TODO 关闭文档时，替换模板，完成整个页眉页脚组件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onCloseDocument(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCloseDocument</span><span class="params">(PdfWriter writer, Document document)</span> &#123;</span><br><span class="line">        <span class="comment">// 7.最后一步了，就是关闭文档的时候，将模板替换成实际的 Y 值,至此，page x of y 制作完毕，完美兼容各种文档size。</span></span><br><span class="line">        total.beginText();</span><br><span class="line">        total.setFontAndSize(bf, presentFontSize);<span class="comment">// 生成的模版的字体、颜色</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">foot2</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span> + (writer.getPageNumber()) + <span class="string">&quot; 页&quot;</span>;</span><br><span class="line">        total.showText(foot2);<span class="comment">// 模版显示的内容</span></span><br><span class="line">        total.endText();</span><br><span class="line">        total.closePath();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加书签"><a href="#添加书签" class="headerlink" title="添加书签"></a>添加书签</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加分组标题(带标签)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> document Document对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text 标题内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number 标题数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> font 字体</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Chapter对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Chapter <span class="title function_">addGroup</span><span class="params">(Document document, String text, <span class="type">int</span> number, Font font)</span> &#123;</span><br><span class="line">    addTextLine(document, <span class="string">&quot;&quot;</span>, font);</span><br><span class="line">    addTextLine(document, <span class="string">&quot;&quot;</span>, font);</span><br><span class="line">    <span class="keyword">if</span> (font != <span class="literal">null</span>) &#123;</span><br><span class="line">        font.setSize(<span class="number">22f</span>);</span><br><span class="line">        font.setStyle(Font.BOLD);</span><br><span class="line">        <span class="type">Paragraph</span> <span class="variable">paragraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paragraph</span>( (text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text), font);</span><br><span class="line">        <span class="type">Chapter</span> <span class="variable">chapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chapter</span>(paragraph, number);</span><br><span class="line">        chapter.setBookmarkOpen(<span class="literal">true</span>);</span><br><span class="line">        chapter.setBookmarkTitle(number + <span class="string">&quot;. &quot;</span> + text);</span><br><span class="line">        chapter.setTriggerNewPage(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(chapter);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> chapter;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Paragraph</span> <span class="variable">paragraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paragraph</span>((text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text));</span><br><span class="line">        <span class="type">Chapter</span> <span class="variable">chapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chapter</span>(paragraph, number);</span><br><span class="line">        chapter.setBookmarkOpen(<span class="literal">true</span>);</span><br><span class="line">        chapter.setBookmarkTitle(number + <span class="string">&quot;. &quot;</span> + text);</span><br><span class="line">        chapter.setTriggerNewPage(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(paragraph);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> chapter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加组内小标题(带标签)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> document Document对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> chapter  Chapter对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text     标题</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number   序号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> font     字体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addGroupItem</span><span class="params">(Document document, Chapter chapter, String text, <span class="type">int</span> groupNumber, <span class="type">int</span> number, Font font)</span> &#123;</span><br><span class="line">    addTextLine(document, <span class="string">&quot;&quot;</span>, font);</span><br><span class="line">    <span class="keyword">if</span> (font != <span class="literal">null</span>) &#123;</span><br><span class="line">        font.setSize(<span class="number">18f</span>);</span><br><span class="line">        font.setStyle(Font.BOLD);</span><br><span class="line">        <span class="type">Paragraph</span> <span class="variable">paragraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paragraph</span>((text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text), font);</span><br><span class="line">        <span class="type">Section</span> <span class="variable">section</span> <span class="operator">=</span> chapter.addSection(paragraph);</span><br><span class="line">        section.setBookmarkOpen(<span class="literal">true</span>);</span><br><span class="line">        section.setBookmarkTitle(groupNumber + <span class="string">&quot;.&quot;</span> + number + <span class="string">&quot;. &quot;</span> + text);</span><br><span class="line">        section.setTriggerNewPage(<span class="literal">false</span>);</span><br><span class="line">        section.setNumberStyle(Section.NUMBERSTYLE_DOTTED_WITHOUT_FINAL_DOT);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(section);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Paragraph</span> <span class="variable">paragraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paragraph</span>((text == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : text));</span><br><span class="line">        <span class="type">Section</span> <span class="variable">section</span> <span class="operator">=</span> chapter.addSection(paragraph);</span><br><span class="line">        section.setBookmarkOpen(<span class="literal">true</span>);</span><br><span class="line">        section.setBookmarkTitle(groupNumber + <span class="string">&quot;.&quot;</span> + number + <span class="string">&quot;. &quot;</span> + text);</span><br><span class="line">        section.setNumberStyle(Section.NUMBERSTYLE_DOTTED_WITHOUT_FINAL_DOT);</span><br><span class="line">        section.setTriggerNewPage(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            document.add(section);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加水印"><a href="#添加水印" class="headerlink" title="添加水印"></a>添加水印</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 【功能描述：添加文字水印】</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFile    待加水印文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destFile   加水印后存放地址</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text       加水印的文本内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> textWidth  文字横坐标 推荐300-400</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> textHeight 文字纵坐标 推荐300-400</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addWaterMark</span><span class="params">(String srcFile, String destFile, String text,</span></span><br><span class="line"><span class="params">                           <span class="type">int</span> textWidth, <span class="type">int</span> textHeight)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 待加水印的文件</span></span><br><span class="line">    <span class="type">PdfReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfReader</span>(srcFile);</span><br><span class="line">    <span class="comment">// 加完水印的文件</span></span><br><span class="line">    <span class="type">PdfStamper</span> <span class="variable">stamper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PdfStamper</span>(reader, <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(</span><br><span class="line">            destFile));</span><br><span class="line">    <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> reader.getNumberOfPages() + <span class="number">1</span>;</span><br><span class="line">    PdfContentByte content;</span><br><span class="line">    <span class="comment">// 设置字体</span></span><br><span class="line">    <span class="type">BaseFont</span> <span class="variable">font</span> <span class="operator">=</span> BaseFont.createFont();</span><br><span class="line">    <span class="comment">// 循环对每页插入水印</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; total; i++) &#123;</span><br><span class="line">        <span class="comment">// 水印的起始</span></span><br><span class="line">        content = stamper.getUnderContent(i);</span><br><span class="line">        <span class="comment">// 开始</span></span><br><span class="line">        content.beginText();</span><br><span class="line">        <span class="comment">// 设置颜色 默认为浅灰色</span></span><br><span class="line">        content.setColorFill(<span class="keyword">new</span> <span class="title class_">BaseColor</span>(<span class="number">238</span>, <span class="number">238</span>, <span class="number">238</span>));</span><br><span class="line">        <span class="comment">// 设置字体及字号</span></span><br><span class="line">        content.setFontAndSize(font, <span class="number">50</span>);</span><br><span class="line">        <span class="comment">// 设置起始位置</span></span><br><span class="line">        <span class="comment">// content.setTextMatrix(400, 880);</span></span><br><span class="line">        content.setTextMatrix(textWidth, textHeight);</span><br><span class="line">        <span class="comment">// 开始写入水印</span></span><br><span class="line">        content.showTextAligned(Element.ALIGN_CENTER, text, textWidth,</span><br><span class="line">                textHeight, <span class="number">45</span>);</span><br><span class="line">        content.endText();</span><br><span class="line">    &#125;</span><br><span class="line">    stamper.close();</span><br><span class="line">    <span class="keyword">return</span> destFile;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP-多文件上传接口实现</title>
      <link href="/2017/08/10/PHP-%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0/"/>
      <url>/2017/08/10/PHP-%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>想测试多文件上传功能；</p><p>使用PHP接口模拟一个接口非常方便；</p><p>PHP多文件上传接收接口示例：</p><span id="more"></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">//忽略警告</span></span><br><span class="line">    <span class="title function_ invoke__">error_reporting</span>(E_ALL || ~E_NOTICE);</span><br><span class="line">    <span class="comment">//设置编码</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type: text/html; charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">/*设置时区*/</span></span><br><span class="line">    <span class="title function_ invoke__">date_default_timezone_set</span>(<span class="string">&#x27;prc&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="title function_ invoke__">saveFiles</span>();</span><br><span class="line">  </span><br><span class="line">    <span class="variable">$isError</span> = <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saveFiles</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$_FILES</span> <span class="keyword">as</span> <span class="variable">$name</span> =&gt; <span class="variable">$values</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">saveFile</span>(<span class="variable">$name</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$isError</span> == <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&#123;&quot;code&quot;:&quot;successfully&quot;, &quot;data&quot;:&#123;&quot;msg&quot;:&quot;上传成功！&quot;&#125;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saveFile</span>(<span class="params"><span class="variable">$file</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$allowedExts</span> = <span class="keyword">array</span>(<span class="string">&quot;gif&quot;</span>, <span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;png&quot;</span>);</span><br><span class="line">        <span class="variable">$temp</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&quot;.&quot;</span>, <span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;name&quot;</span>]);</span><br><span class="line">        <span class="variable">$extension</span> = <span class="title function_ invoke__">end</span>(<span class="variable">$temp</span>);</span><br><span class="line">        <span class="keyword">if</span> (((<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/gif&quot;</span>)</span><br><span class="line">        || (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/jpeg&quot;</span>)</span><br><span class="line">        || (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/jpg&quot;</span>)</span><br><span class="line">        || (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/pjpeg&quot;</span>)</span><br><span class="line">        || (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/x-png&quot;</span>)</span><br><span class="line">        || (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;type&quot;</span>] == <span class="string">&quot;image/png&quot;</span>))</span><br><span class="line">        &amp;&amp; <span class="title function_ invoke__">in_array</span>(<span class="variable">$extension</span>, <span class="variable">$allowedExts</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;error&quot;</span>] &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="variable">$isError</span> = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;&#123;&quot;code&quot;:&quot;fail&quot;, &quot;data&quot;:&#123;&quot;msg&quot;:&quot;上传失败！&quot;&#125;&#125;&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="string">&quot;image/&quot;</span>.<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;name&quot;</span>]))</span><br><span class="line">                &#123;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;tmp_name&quot;</span>],</span><br><span class="line">                    <span class="string">&quot;image/&quot;</span>.<span class="variable">$_FILES</span>[<span class="variable">$file</span>][<span class="string">&quot;name&quot;</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="variable">$isError</span> = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&#123;&quot;code&quot;:&quot;fail&quot;, &quot;data&quot;:&#123;&quot;msg&quot;:&quot;非法文件格式！&quot;&#125;&#125;&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android常用代码-点击隐藏虚拟键盘</title>
      <link href="/2017/08/10/Android%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD-%E7%82%B9%E5%87%BB%E9%9A%90%E8%97%8F%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98/"/>
      <url>/2017/08/10/Android%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD-%E7%82%B9%E5%87%BB%E9%9A%90%E8%97%8F%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<p>代码非常简单：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">view.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="type">InputMethodManager</span> <span class="variable">imm</span> <span class="operator">=</span> (InputMethodManager)v.getContext().getSystemService(INPUT_METHOD_SERVICE);</span><br><span class="line">        imm.hideSoftInputFromWindow(v.getWindowToken(), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android常用代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown-语法总结</title>
      <link href="/2017/08/06/Markdown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/"/>
      <url>/2017/08/06/Markdown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="大标题"><a href="#大标题" class="headerlink" title="[大标题]"></a>[大标题]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 标题内容</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="中标题"><a href="#中标题" class="headerlink" title="[中标题]"></a>[中标题]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## 标题内容</span><br></pre></td></tr></table></figure><h1 id="小标题"><a href="#小标题" class="headerlink" title="[小标题]"></a>[小标题]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### 标题内容</span><br></pre></td></tr></table></figure><h1 id="代码块"><a href="#代码块" class="headerlink" title="[代码块]"></a>[代码块]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">三个`</span><br><span class="line">代码内容</span><br><span class="line">三个`</span><br></pre></td></tr></table></figure><h1 id="链接"><a href="#链接" class="headerlink" title="[链接]"></a>[链接]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[链接说明](链接地址)</span><br></pre></td></tr></table></figure><p><a href="https://github.com/PhilJay/MPAndroidChart">https://github.com/PhilJay/MPAndroidChart</a></p><h1 id="图片"><a href="#图片" class="headerlink" title="[图片]"></a>[图片]</h1><ul><li>语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![图片说明](图片路径或地址)</span><br></pre></td></tr></table></figure><p><img src="/../../../../images/mpandroidcahrt.png" alt="zzimagebox"></p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL-快速将Excel的数据导入数据库</title>
      <link href="/2017/07/28/SQL-%E5%BF%AB%E9%80%9F%E5%B0%86Excel%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2017/07/28/SQL-%E5%BF%AB%E9%80%9F%E5%B0%86Excel%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h3 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h3><pre><code>=CONCATENATE(&quot;INSERT INTO TableName (Colomn1, Column2) values (&#39;&quot;&amp;A1&amp;&quot;&#39;,&#39;&quot;&amp;B1&amp;&quot;&#39;);&quot;)</code></pre><h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="/../../../../images/excel.gif" alt="图1"></p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android签名打包-获取Windows和Mac系统中调试证书和发布证书的SHA1</title>
      <link href="/2017/07/28/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E8%8E%B7%E5%8F%96Mac%E8%B0%83%E8%AF%95%E8%AF%81%E4%B9%A6%E7%9A%84SHA1/"/>
      <url>/2017/07/28/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E8%8E%B7%E5%8F%96Mac%E8%B0%83%E8%AF%95%E8%AF%81%E4%B9%A6%E7%9A%84SHA1/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="发布证书"><a href="#发布证书" class="headerlink" title="发布证书"></a>发布证书</h2><hr><h2 id="Windows和Mac一样"><a href="#Windows和Mac一样" class="headerlink" title="Windows和Mac一样"></a>Windows和Mac一样</h2><ul><li><p>打开Android Studio</p></li><li><p>找到Terminal,studio下方</p></li></ul><span id="more"></span><ul><li>键入命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -v -list -keystore keystorePath(例:e:\test.keystore)</span><br></pre></td></tr></table></figure><ul><li>输入密钥库口令，即可查看相关信息</li></ul><p><em>注意</em>：如果命令不加-v 是没有MD5信息的</p><hr><h2 id="调试证书"><a href="#调试证书" class="headerlink" title="调试证书"></a>调试证书</h2><hr><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ul><li><p>win+R</p></li><li><p>cmd,回车</p></li><li><p>输入如下命令 (admin是电脑用户名)：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -v -list -keystore c:\users\admin\.android\debug.keystore -alias androiddebugkey -storepass android -keypass android</span><br></pre></td></tr></table></figure><h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><ul><li><p>打开Android Studio</p></li><li><p>进入Terminal</p></li><li><p>输入如下命令：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android签名打包 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-Glide加载圆角或圆形图片</title>
      <link href="/2017/07/27/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Glide%E5%8A%A0%E8%BD%BD%E5%9C%86%E8%A7%92%E6%88%96%E5%9C%86%E5%BD%A2%E5%9B%BE%E7%89%87/"/>
      <url>/2017/07/27/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Glide%E5%8A%A0%E8%BD%BD%E5%9C%86%E8%A7%92%E6%88%96%E5%9C%86%E5%BD%A2%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h3 id="添加类"><a href="#添加类" class="headerlink" title="添加类"></a>添加类</h3><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.Resources;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapShader;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;</span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.load.resource.bitmap.BitmapTransformation;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlideCircleTransform</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">GlideRoundTransform</span> <span class="keyword">extends</span> <span class="title class_">BitmapTransformation</span> &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">private</span> <span class="type">float</span> <span class="variable">radius</span> <span class="operator">=</span> <span class="number">0f</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">GlideRoundTransform</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>(context, <span class="number">6</span>);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">GlideRoundTransform</span><span class="params">(Context context, <span class="type">int</span> dp)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(context);</span><br><span class="line">            <span class="built_in">this</span>.radius = Resources.getSystem().getDisplayMetrics().density * dp;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span> <span class="keyword">protected</span> Bitmap <span class="title function_">transform</span><span class="params">(BitmapPool pool, Bitmap toTransform, <span class="type">int</span> outWidth, <span class="type">int</span> outHeight)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> roundCrop(pool, toTransform);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">private</span> Bitmap <span class="title function_">roundCrop</span><span class="params">(BitmapPool pool, Bitmap source)</span> &#123;</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (source == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">result</span> <span class="operator">=</span> pool.get(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">            <span class="keyword">if</span> (result == <span class="literal">null</span>) &#123;</span><br><span class="line">                result = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="type">Canvas</span> <span class="variable">canvas</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Canvas</span>(result);</span><br><span class="line">            <span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">            paint.setShader(<span class="keyword">new</span> <span class="title class_">BitmapShader</span>(source, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP));</span><br><span class="line">            paint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">            <span class="type">RectF</span> <span class="variable">rectF</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RectF</span>(<span class="number">0f</span>, <span class="number">0f</span>, source.getWidth(), source.getHeight());</span><br><span class="line">            canvas.drawRoundRect(rectF, radius, radius, paint);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="meta">@Override</span> <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getClass().getName() + Math.round(radius);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(context)</span><br><span class="line">.load(url)</span><br><span class="line">.transform(<span class="keyword">new</span> <span class="title class_">CenterCrop</span>(mContext), </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">GlideCircleTransform</span>.GlideRoundTransform(mContext, <span class="number">300</span>))</span><br><span class="line">.into(imageView);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android签名打包-指定apk文件名</title>
      <link href="/2017/07/27/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E6%8C%87%E5%AE%9Aapk%E6%96%87%E4%BB%B6%E5%90%8D/"/>
      <url>/2017/07/27/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E6%8C%87%E5%AE%9Aapk%E6%96%87%E4%BB%B6%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul><li>Android Studio</li></ul><h2 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h2><p>在build.gradle中加入</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  </span><br><span class="line">//...</span><br><span class="line">  </span><br><span class="line">    applicationVariants.all &#123;variant -&gt;</span><br><span class="line">        variant.outputs.each &#123;output -&gt;</span><br><span class="line">            def outputFile = output.outputFile</span><br><span class="line">            def fileName</span><br><span class="line">            if (outputFile != null &amp;&amp; outputFile.name.endsWith(&#x27;.apk&#x27;)) &#123;</span><br><span class="line">                if (variant.buildType.name.equals(&#x27;release&#x27;)) &#123;</span><br><span class="line">                    fileName = &quot;APP名称_$&#123;defaultConfig.versionName&#125;_$&#123;defaultConfig.versionCode&#125;.apk&quot;</span><br><span class="line">                &#125; else if (variant.buildType.name.equals(&#x27;debug&#x27;)) &#123;</span><br><span class="line">                    fileName = &quot;APP名称_$&#123;defaultConfig.versionName&#125;_$&#123;defaultConfig.versionCode&#125;_debug.apk&quot;</span><br><span class="line">                &#125;</span><br><span class="line">                output.outputFile = new File(outputFile.parent, fileName)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android签名打包 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE-SpringMVC之pom.xml</title>
      <link href="/2017/07/20/JavaEE-SpringMVC%E4%B9%8Bpom-xml/"/>
      <url>/2017/07/20/JavaEE-SpringMVC%E4%B9%8Bpom-xml/</url>
      
        <content type="html"><![CDATA[<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul><li>InteliJ IDEA</li></ul><h2 id="新建一个maven工程"><a href="#新建一个maven工程" class="headerlink" title="新建一个maven工程"></a>新建一个maven工程</h2><h2 id="复制如下依赖"><a href="#复制如下依赖" class="headerlink" title="复制如下依赖"></a>复制如下依赖</h2><span id="more"></span><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- 这个不要照抄 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>me.zhouzhuo810<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzapidoc-maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">    <span class="comment">&lt;!-- Nexus 私服配置 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;repositories&gt;</span></span><br><span class="line"><span class="comment">        &lt;repository&gt;</span></span><br><span class="line"><span class="comment">            &lt;id&gt;nexus&lt;/id&gt;</span></span><br><span class="line"><span class="comment">            &lt;name&gt;Nexus&lt;/name&gt;</span></span><br><span class="line"><span class="comment">            &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;</span></span><br><span class="line"><span class="comment">            &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</span></span><br><span class="line"><span class="comment">            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</span></span><br><span class="line"><span class="comment">        &lt;/repository&gt;</span></span><br><span class="line"><span class="comment">    &lt;/repositories&gt;</span></span><br><span class="line"><span class="comment">    &lt;pluginRepositories&gt;</span></span><br><span class="line"><span class="comment">        &lt;pluginRepository&gt;</span></span><br><span class="line"><span class="comment">            &lt;id&gt;nexus&lt;/id&gt;</span></span><br><span class="line"><span class="comment">            &lt;name&gt;Nexus&lt;/name&gt;</span></span><br><span class="line"><span class="comment">            &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;</span></span><br><span class="line"><span class="comment">            &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</span></span><br><span class="line"><span class="comment">            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</span></span><br><span class="line"><span class="comment">        &lt;/pluginRepository&gt;</span></span><br><span class="line"><span class="comment">    &lt;/pluginRepositories&gt;--&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>web<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>alexgaoyh<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span>alexgaoyh@sina.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Quartz framework --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>20140107<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- hibernate  start --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.18.0-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-commons-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0-CR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- hibernate  end --&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- emial support --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- Shiro security --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-cas<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- end of Shiro security --&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- jstl jsp页面标签 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- json jackson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.jackson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core-asl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.jackson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-mapper-asl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--打包时不包含--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>   <span class="comment">&lt;!--这里说明jsp-api.jar文件将由应用服务器提供，打包时不需要包含--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- 测试使用，打包时不会打进去 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Sprint-test 相关测试包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>web<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 这里的 tomcat7-maven-plugin 为使用插件部署Maven Web项目：--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此处需要配置本地环境，tomcat: tomcat_user。xml，添加manager角色和用户，用于插件自动部署应用 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 打开Maven： setting.xml，在&lt;servers&gt;节点下配置上面的相关Tomcat的Manager用户信息， --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 开启下面的插件配置代码段 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- tomcat7:deploy  tomcat7:redeploy  tomcat7:undeploy --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;plugins&gt;</span></span><br><span class="line"><span class="comment">            &lt;plugin&gt;</span></span><br><span class="line"><span class="comment">                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">                &lt;version&gt;2.2&lt;/version&gt;</span></span><br><span class="line"><span class="comment">                &lt;configuration&gt;</span></span><br><span class="line"><span class="comment">                &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt; tomcat管理路径</span></span><br><span class="line"><span class="comment">                &lt;server&gt;Tomcat7&lt;/server&gt; 与settings.xml文件中Server的id相同</span></span><br><span class="line"><span class="comment">                &lt;path&gt;/web&lt;/path&gt; 应用的部署位置</span></span><br><span class="line"><span class="comment">                &lt;/configuration&gt;</span></span><br><span class="line"><span class="comment">            &lt;/plugin&gt;</span></span><br><span class="line"><span class="comment">        &lt;/plugins&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-EditText抢占焦点使ScrollView自动滑动问题</title>
      <link href="/2017/07/18/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-EditText%E6%8A%A2%E5%8D%A0%E7%84%A6%E7%82%B9%E4%BD%BFScrollView%E8%87%AA%E5%8A%A8%E6%BB%91%E5%8A%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2017/07/18/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-EditText%E6%8A%A2%E5%8D%A0%E7%84%A6%E7%82%B9%E4%BD%BFScrollView%E8%87%AA%E5%8A%A8%E6%BB%91%E5%8A%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>解决方法：</p><p>重写ScrollView的这个方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">requestChildRectangleOnScreen</span><span class="params">(View child, Rect rectangle, <span class="type">boolean</span> immediate)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> child <span class="keyword">instanceof</span> EditText;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift开源控件-汇总</title>
      <link href="/2017/06/29/Swift%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E6%B1%87%E6%80%BB/"/>
      <url>/2017/06/29/Swift%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Github上的实用的Swift开源控件(后续看到再补充)</span><br></pre></td></tr></table></figure><h3 id="网络框架"><a href="#网络框架" class="headerlink" title="网络框架"></a>网络框架</h3><p><a href="https://github.com/Alamofire/Alamofire">Alamofire</a></p><h3 id="图片框架"><a href="#图片框架" class="headerlink" title="图片框架"></a>图片框架</h3><p><a href="https://github.com/Alamofire/AlamofireImage">AlamofireImage</a></p><span id="more"></span><h3 id="进度提示"><a href="#进度提示" class="headerlink" title="进度提示"></a>进度提示</h3><p><a href="https://github.com/johnlui/SwiftNotice">SwiftNotice</a></p><h3 id="JSON解析"><a href="#JSON解析" class="headerlink" title="JSON解析"></a>JSON解析</h3><p><a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a></p>]]></content>
      
      
      <categories>
          
          <category> Swift开源控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-CameraCardCrop</title>
      <link href="/2017/06/22/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-CameraCardCrop/"/>
      <url>/2017/06/22/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-CameraCardCrop/</url>
      
        <content type="html"><![CDATA[<h1 id="CameraCardCrop"><a href="#CameraCardCrop" class="headerlink" title="CameraCardCrop"></a>CameraCardCrop</h1><p>一个卡片（证件）拍照裁剪框架。<br>(A cutting framework for card-photo.)</p><h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;me.zhouzhuo810.cameracardcrop:camera-card-crop:1.0.2&#x27;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Screenshot"><a href="#Screenshot" class="headerlink" title="Screenshot"></a>Screenshot</h2><img src="../../../../images/cameracrop2.png"  width="300px"/><img src="../../../../images/cameracrop1.png"  width="300px"/><h2 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">card</span><br><span class="line"></span><br><span class="line">---------------------</span><br><span class="line">|       width       |</span><br><span class="line">|                   |</span><br><span class="line">|                   |height</span><br><span class="line">|                   |</span><br><span class="line">---------------------</span><br><span class="line">phone</span><br><span class="line">------------------------------------</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|      mask                         |</span><br><span class="line">|                                   |</span><br><span class="line">|                width              |</span><br><span class="line">|    ------------------------       |</span><br><span class="line">|    |                       |      |</span><br><span class="line">|    |                height |      | screen height</span><br><span class="line">|    |         rect          |      |</span><br><span class="line">|    |                       |      |</span><br><span class="line">|    ------------------------       |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|                                   |</span><br><span class="line">|            screen width           |</span><br><span class="line">-------------------------------------</span><br><span class="line">CameraConfig.RATIO_WIDTH = card&#x27;s width</span><br><span class="line">CameraConfig.RATIO_HEIGHT = card&#x27;s height</span><br><span class="line">CameraConfig.PERCENT_WIDTH = rect&#x27;swidth / screen&#x27;s width</span><br></pre></td></tr></table></figure><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="step-1-Add-Activity-in-your-AndroidManifest-xml-file"><a href="#step-1-Add-Activity-in-your-AndroidManifest-xml-file" class="headerlink" title="step 1. Add Activity in your AndroidManifest.xml file."></a>step 1. Add Activity in your AndroidManifest.xml file.</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;me.zhouzhuo810.cameracardcrop.CropActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">&quot;portrait&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.AppCompat.NoActionBar&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="step-2-Add-permissions-in-your-AndroidManifest-xml-file"><a href="#step-2-Add-permissions-in-your-AndroidManifest-xml-file" class="headerlink" title="step 2. Add permissions in your AndroidManifest.xml file."></a>step 2. Add permissions in your AndroidManifest.xml file.</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.CAMERA&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.camera&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">&quot;android.hardware.camera.autofocus&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="step-3-Example-for-use"><a href="#step-3-Example-for-use" class="headerlink" title="step 3. Example for use."></a>step 3. Example for use.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">takePhoto</span><span class="params">(View v)</span> &#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, CropActivity.class);</span><br><span class="line">    intent.putExtra(CameraConfig.RATIO_WIDTH, <span class="number">855</span>);</span><br><span class="line">    intent.putExtra(CameraConfig.RATIO_HEIGHT, <span class="number">541</span>);  </span><br><span class="line">    intent.putExtra(CameraConfig.PERCENT_WIDTH, <span class="number">0.8f</span>); <span class="comment">//[0,1]</span></span><br><span class="line">    intent.putExtra(CameraConfig.MASK_COLOR, <span class="number">0x2f000000</span>);</span><br><span class="line">    intent.putExtra(CameraConfig.RECT_CORNER_COLOR, <span class="number">0xff00ff00</span>);</span><br><span class="line">    intent.putExtra(CameraConfig.TEXT_COLOR, <span class="number">0xffffffff</span>);</span><br><span class="line">    intent.putExtra(CameraConfig.HINT_TEXT, <span class="string">&quot;请将方框对准证件拍照&quot;</span>);</span><br><span class="line">    intent.putExtra(CameraConfig.IMAGE_PATH, Environment.getExternalStorageDirectory().getAbsolutePath()+<span class="string">&quot;/CameraCardCrop/&quot;</span>+System.currentTimeMillis()+<span class="string">&quot;.jpg&quot;</span>);</span><br><span class="line">    startActivityForResult(intent, <span class="number">0x01</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, Intent data)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</span><br><span class="line">        <span class="keyword">if</span> (requestCode == <span class="number">0x01</span>) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> data.getStringExtra(CameraConfig.IMAGE_PATH);</span><br><span class="line">            ivPic.setImageURI(Uri.parse(<span class="string">&quot;file://&quot;</span>+path));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android开源控件-MPAndroidChart</title>
      <link href="/2017/06/21/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-MPAndroidChart/"/>
      <url>/2017/06/21/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-MPAndroidChart/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="为什么要写这个小结？"><a href="#为什么要写这个小结？" class="headerlink" title="为什么要写这个小结？"></a>为什么要写这个小结？</h3><ul><li>MPAndroidChart文档是英文的，demo没有注释。</li><li>为了让以后使用MPAndroidChart更加方便。</li></ul><span id="more"></span><h2 id="MPAndroidChart简介"><a href="#MPAndroidChart简介" class="headerlink" title="MPAndroidChart简介"></a>MPAndroidChart简介</h2><h3 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h3><p><a href="https://github.com/PhilJay/MPAndroidChart">https://github.com/PhilJay/MPAndroidChart</a></p><h3 id="我用的版本"><a href="#我用的版本" class="headerlink" title="我用的版本"></a>我用的版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.github.PhilJay:MPAndroidChart:v3.0.2&#x27;</span><br></pre></td></tr></table></figure><h2 id="用法总结"><a href="#用法总结" class="headerlink" title="用法总结"></a>用法总结</h2><h3 id="折线图-曲线图-LineChart"><a href="#折线图-曲线图-LineChart" class="headerlink" title="折线图&#x2F;曲线图(LineChart)"></a>折线图&#x2F;曲线图(LineChart)</h3><ul><li>初始化控件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//是否画背景线</span></span><br><span class="line">weekChart.setDrawGridBackground(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画边界</span></span><br><span class="line">weekChart.setDrawBorders(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画标记</span></span><br><span class="line">weekChart.setDrawMarkers(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画色标</span></span><br><span class="line">weekChart.getLegend().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否显示描述</span></span><br><span class="line">weekChart.getDescription().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//空数据提示文字</span></span><br><span class="line">weekChart.setNoDataText(getString(R.string.no_data));</span><br><span class="line"><span class="comment">//横坐标的位置(上，下，或上和下)</span></span><br><span class="line">weekChart.getXAxis().setPosition(XAxis.XAxisPosition.BOTTOM);</span><br><span class="line"><span class="comment">//是否画横坐标的线(竖线)</span></span><br><span class="line">weekChart.getXAxis().setDrawGridLines(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画右边的纵坐标</span></span><br><span class="line">weekChart.getAxisRight().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画左边的纵坐标的线</span></span><br><span class="line">weekChart.getAxisLeft().setDrawGridLines(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画左边的纵坐标</span></span><br><span class="line">weekChart.getAxisLeft().setDrawLabels(<span class="literal">true</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>让第一点和最后一点显示全</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置最小X坐标小于0</span></span><br><span class="line">weekChart.getXAxis().setAxisMinimum(-<span class="number">0.5f</span>);</span><br><span class="line"><span class="comment">//设置最大X坐标大于 (点的数量-0.5)</span></span><br><span class="line">weekChart.getXAxis().setAxisMaximum(week.size()-<span class="number">0.5f</span>);</span><br></pre></td></tr></table></figure><ul><li>设置X坐标不跳过或省略</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置X坐标个数，以保证X坐标都显示出来</span></span><br><span class="line">weekChart.getXAxis().setLabelCount(week.size());</span><br></pre></td></tr></table></figure><ul><li>数据填充</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateWeek</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.WeekEntity&gt; week)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (week != <span class="literal">null</span> &amp;&amp; week.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//设置左右间距</span></span><br><span class="line">        weekChart.getXAxis().setAxisMinimum(-<span class="number">0.5f</span>);</span><br><span class="line">        weekChart.getXAxis().setAxisMaximum(week.size()-<span class="number">0.5f</span>);</span><br><span class="line">        <span class="comment">//设置X坐标不省略</span></span><br><span class="line">        weekChart.getXAxis().setLabelCount(week.size());</span><br><span class="line">        <span class="comment">//数据处理</span></span><br><span class="line">        List&lt;Entry&gt; values = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; week.size(); i++) &#123;</span><br><span class="line">            GetDefectiveRateResult.DataEntity.<span class="type">WeekEntity</span> <span class="variable">weekEntity</span> <span class="operator">=</span> week.get(i);</span><br><span class="line">            values.add(<span class="keyword">new</span> <span class="title class_">Entry</span>(i, weekEntity.getValue()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//修改X坐标的值</span></span><br><span class="line">        weekChart.getXAxis().setValueFormatter(<span class="keyword">new</span> <span class="title class_">IAxisValueFormatter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getFormattedValue</span><span class="params">(<span class="type">float</span> value, AxisBase axis)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> week.get((<span class="type">int</span>) value).getName();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="type">LineDataSet</span> <span class="variable">lineDataSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LineDataSet</span>(values, <span class="string">&quot;周废品率(%)&quot;</span>);</span><br><span class="line">        <span class="comment">//圆圈外圈的半径</span></span><br><span class="line">        lineDataSet.setCircleRadius(<span class="number">4f</span>);</span><br><span class="line">        <span class="comment">//圆圈空心的半径</span></span><br><span class="line">        lineDataSet.setCircleHoleRadius(<span class="number">3f</span>);</span><br><span class="line">        <span class="comment">//圆环的颜色</span></span><br><span class="line">        lineDataSet.setCircleColor(getResources().getColor(R.color.colorBarColor));</span><br><span class="line">        <span class="comment">//折线或曲线的宽度</span></span><br><span class="line">        lineDataSet.setLineWidth(<span class="number">2f</span>);</span><br><span class="line">        <span class="comment">//线的模式：决定是 折线还是曲线</span></span><br><span class="line">        lineDataSet.setMode(LineDataSet.Mode.CUBIC_BEZIER);</span><br><span class="line">        <span class="comment">//线的颜色</span></span><br><span class="line">        lineDataSet.setColor(getResources().getColor(R.color.colorBarColor));</span><br><span class="line">        <span class="comment">//线下方是否填充颜色</span></span><br><span class="line">        lineDataSet.setDrawFilled(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//设置线下方填充的颜色</span></span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">            lineDataSet.setFillDrawable(getResources().getDrawable(R.drawable.line_one_shape));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lineDataSet.setFillColor(<span class="number">0x4f2F7EDB</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">LineData</span> <span class="variable">lineData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LineData</span>(lineDataSet);</span><br><span class="line">        weekChart.setData(lineData);</span><br><span class="line">        weekChart.invalidate();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//没数据时清理图表</span></span><br><span class="line">        weekChart.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>line_one_shape.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:startColor</span>=<span class="string">&quot;#7f2F7EDB&quot;</span> <span class="attr">android:angle</span>=<span class="string">&quot;270&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:endColor</span>=<span class="string">&quot;@android:color/transparent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="饼状图-PieChart"><a href="#饼状图-PieChart" class="headerlink" title="饼状图(PieChart)"></a>饼状图(PieChart)</h3><ul><li>初始化控件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//空数据提示</span></span><br><span class="line">reasonPieChart.setNoDataText(getString(R.string.no_data));</span><br><span class="line"><span class="comment">//使用百分比值画图(也就是说按数据的大小比例画图)</span></span><br><span class="line">reasonPieChart.setUsePercentValues(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//描述</span></span><br><span class="line">reasonPieChart.getDescription().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//饼状图的位置偏移</span></span><br><span class="line">reasonPieChart.setExtraOffsets(<span class="number">5</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//是否可以拖动旋转</span></span><br><span class="line">reasonPieChart.setRotationEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//好像是拖动转圈后松手的惯性(0到1,越大越快)</span></span><br><span class="line">reasonPieChart.setDragDecelerationFrictionCoef(<span class="number">0.95f</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//是否画中间的文字</span></span><br><span class="line">reasonPieChart.setDrawCenterText(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//中间的文字</span></span><br><span class="line">reasonPieChart.setCenterText(<span class="string">&quot;原因废品率(%)&quot;</span>);</span><br><span class="line">   </span><br><span class="line"><span class="comment">//是否画中间的洞</span></span><br><span class="line">reasonPieChart.setDrawHoleEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//中间洞的颜色</span></span><br><span class="line">reasonPieChart.setHoleColor(Color.WHITE);</span><br><span class="line"><span class="comment">//中间洞外边一小圈的颜色</span></span><br><span class="line">reasonPieChart.setTransparentCircleColor(Color.WHITE);</span><br><span class="line"><span class="comment">//中间洞外边一小圈的透明度</span></span><br><span class="line">reasonPieChart.setTransparentCircleAlpha(<span class="number">110</span>);</span><br><span class="line"><span class="comment">//中间洞的半径</span></span><br><span class="line">reasonPieChart.setHoleRadius(<span class="number">48f</span>);</span><br><span class="line"><span class="comment">//洞外小圈的半径</span></span><br><span class="line">reasonPieChart.setTransparentCircleRadius(<span class="number">51f</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//设置旋转的角度</span></span><br><span class="line">reasonPieChart.setRotationAngle(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//是否画扇形内部的文字</span></span><br><span class="line">reasonPieChart.setDrawEntryLabels(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//扇形内部文字的颜色</span></span><br><span class="line">reasonPieChart.setEntryLabelColor(Color.BLACK);</span><br><span class="line"><span class="comment">//扇形内部文字的大小</span></span><br><span class="line">reasonPieChart.setEntryLabelTextSize(<span class="number">7f</span>);</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line"><span class="comment">//是否启用色标</span></span><br><span class="line">reasonPieChart.getLegend().setEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Legend</span> <span class="variable">legend</span> <span class="operator">=</span> reasonPieChart.getLegend();</span><br><span class="line"><span class="comment">//色标的方面</span></span><br><span class="line">legend.setOrientation(Legend.LegendOrientation.VERTICAL);</span><br><span class="line"><span class="comment">//色标的水平位置</span></span><br><span class="line">legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);</span><br><span class="line"><span class="comment">//色标的垂直位置</span></span><br><span class="line">legend.setVerticalAlignment(Legend.LegendVerticalAlignment.CENTER);</span><br><span class="line"><span class="comment">//色标画在图标外面还是里面</span></span><br><span class="line">legend.setDrawInside(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//色标文字的大小</span></span><br><span class="line">legend.setTextSize(<span class="number">11f</span>);</span><br></pre></td></tr></table></figure><ul><li>数据填充</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateReason</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.ReasonEntity&gt; reason)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (reason != <span class="literal">null</span> &amp;&amp; reason.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        List&lt;PieEntry&gt; yVals = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; reason.size(); i++) &#123;</span><br><span class="line">            GetDefectiveRateResult.DataEntity.<span class="type">ReasonEntity</span> <span class="variable">reasonEntity</span> <span class="operator">=</span> reason.get(i);</span><br><span class="line">            <span class="comment">//值和名称</span></span><br><span class="line">            <span class="type">PieEntry</span> <span class="variable">barEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PieEntry</span>(reasonEntity.getValue(), <span class="string">&quot;[&quot;</span>+reasonEntity.getValue()+<span class="string">&quot;%] &quot;</span>+reasonEntity.getName());</span><br><span class="line">            yVals.add(barEntry);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">PieDataSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PieDataSet</span>(yVals, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        ArrayList&lt;Integer&gt; colors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//扇形的颜色</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> vordiplomColor : ColorTemplate.VORDIPLOM_COLORS) &#123;</span><br><span class="line">            colors.add(vordiplomColor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> libertyColor : ColorTemplate.LIBERTY_COLORS) &#123;</span><br><span class="line">            colors.add(libertyColor);</span><br><span class="line">        &#125;</span><br><span class="line">        set.setColors(colors);</span><br><span class="line">        <span class="comment">//数值的的颜色</span></span><br><span class="line">        set.setValueTextColor(Color.BLACK);</span><br><span class="line">        <span class="comment">//分隔线的颜色</span></span><br><span class="line">        set.setValueLineColor(Color.WHITE);</span><br><span class="line">        <span class="type">PieData</span> <span class="variable">barData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PieData</span>(set);</span><br><span class="line">        <span class="comment">//数值的大小</span></span><br><span class="line">        barData.setValueTextSize(<span class="number">7f</span>);</span><br><span class="line">        reasonPieChart.setData(barData);</span><br><span class="line">        reasonPieChart.invalidate();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reasonPieChart.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="柱状图-BarChart-HorizontalBarChart"><a href="#柱状图-BarChart-HorizontalBarChart" class="headerlink" title="柱状图(BarChart&#x2F;HorizontalBarChart)"></a>柱状图(BarChart&#x2F;HorizontalBarChart)</h3><ul><li>初始化控件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//是否画柱子的底色</span></span><br><span class="line">reasonBarChart.setDrawBarShadow(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画数字在柱子顶部</span></span><br><span class="line">reasonBarChart.setDrawValueAboveBar(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//是否显示右下角的描述</span></span><br><span class="line">reasonBarChart.getDescription().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否双向指缩放</span></span><br><span class="line">reasonBarChart.setPinchZoom(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否画背景格子</span></span><br><span class="line">reasonBarChart.setDrawGridBackground(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//是否显示右边的坐标</span></span><br><span class="line">reasonBarChart.getAxisRight().setEnabled(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//x轴的位置(左边，右边，两边)</span></span><br><span class="line">reasonBarChart.getXAxis().setPosition(XAxis.XAxisPosition.BOTTOM);</span><br><span class="line"><span class="comment">//是否显示X轴的坐标线</span></span><br><span class="line">reasonBarChart.getXAxis().setDrawGridLines(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//设置X轴坐标的文字大小</span></span><br><span class="line">reasonBarChart.getXAxis().setTextSize(<span class="number">9f</span>);</span><br><span class="line"><span class="comment">//设置X轴坐标的旋转角度</span></span><br><span class="line"><span class="comment">//reasonBarChart.getXAxis().setLabelRotationAngle(45);</span></span><br><span class="line"><span class="comment">//是否显示左边Y轴的坐标线</span></span><br><span class="line">reasonBarChart.getAxisLeft().setDrawGridLines(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//设置左边Y轴的最小值</span></span><br><span class="line">reasonBarChart.getAxisLeft().setAxisMinimum(<span class="number">0f</span>);</span><br><span class="line"><span class="comment">//设置左边Y轴的是否显示</span></span><br><span class="line">reasonBarChart.getAxisLeft().setEnabled(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//色标</span></span><br><span class="line"><span class="type">Legend</span> <span class="variable">legend</span> <span class="operator">=</span> reasonBarChart.getLegend();</span><br><span class="line">legend.setEnabled(<span class="literal">false</span>);</span><br><span class="line">legend.setOrientation(Legend.LegendOrientation.HORIZONTAL);</span><br><span class="line">legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);</span><br><span class="line">legend.setVerticalAlignment(Legend.LegendVerticalAlignment.CENTER);</span><br><span class="line">legend.setForm(Legend.LegendForm.SQUARE);</span><br><span class="line">legend.setFormSize(<span class="number">9f</span>);</span><br><span class="line">legend.setXEntrySpace(<span class="number">4f</span>);</span><br><span class="line">legend.setDrawInside(<span class="literal">false</span>);</span><br><span class="line">legend.setTextSize(<span class="number">11f</span>);</span><br></pre></td></tr></table></figure><ul><li>X轴坐标转换</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">productBarChart.getXAxis().setValueFormatter(<span class="keyword">new</span> <span class="title class_">IAxisValueFormatter</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFormattedValue</span><span class="params">(<span class="type">float</span> value, AxisBase axis)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> product.get((<span class="type">int</span>) value).getName()+<span class="string">&quot; [&quot;</span>+product.get((<span class="type">int</span>) value).getValue()+<span class="string">&quot;%]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>填充数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateProduct</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.ProductEntity&gt; product)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (product != <span class="literal">null</span> &amp;&amp; product.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//保证X坐标显示全</span></span><br><span class="line">        productBarChart.getXAxis().setLabelCount(product.size());</span><br><span class="line">        <span class="comment">//调整显示顺序</span></span><br><span class="line">        Collections.reverse(product);</span><br><span class="line">        <span class="comment">//整理数据</span></span><br><span class="line">        List&lt;BarEntry&gt; yVals = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; product.size(); i++) &#123;</span><br><span class="line">            GetDefectiveRateResult.DataEntity.<span class="type">ProductEntity</span> <span class="variable">productEntity</span> <span class="operator">=</span> product.get(i);</span><br><span class="line">            <span class="type">BarEntry</span> <span class="variable">barEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BarEntry</span>(i, productEntity.getValue());</span><br><span class="line">            yVals.add(barEntry);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//X轴坐标转换</span></span><br><span class="line">        productBarChart.getXAxis().setValueFormatter(<span class="keyword">new</span> <span class="title class_">IAxisValueFormatter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getFormattedValue</span><span class="params">(<span class="type">float</span> value, AxisBase axis)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> product.get((<span class="type">int</span>) value).getName()+<span class="string">&quot; [&quot;</span>+product.get((<span class="type">int</span>) value).getValue()+<span class="string">&quot;%]&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        <span class="type">BarDataSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BarDataSet</span>(yVals, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//设置柱子颜色</span></span><br><span class="line">        ArrayList&lt;Integer&gt; colors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> joyfulColor : ColorTemplate.JOYFUL_COLORS) &#123;</span><br><span class="line">            colors.add(joyfulColor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> colorfulColor : ColorTemplate.COLORFUL_COLORS) &#123;</span><br><span class="line">            colors.add(colorfulColor);</span><br><span class="line">        &#125;</span><br><span class="line">        set.setColors(colors);</span><br><span class="line">        <span class="comment">//设置柱子上文字的颜色</span></span><br><span class="line">        set.setValueTextColor(Color.BLACK);</span><br><span class="line">        <span class="comment">//设置柱子上文字的值是否显示</span></span><br><span class="line">        set.setDrawValues(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">BarData</span> <span class="variable">barData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BarData</span>(set);</span><br><span class="line">        <span class="comment">//设置柱子上文字的大小</span></span><br><span class="line">        barData.setValueTextSize(<span class="number">7f</span>);</span><br><span class="line">        productBarChart.setData(barData);</span><br><span class="line">        productBarChart.invalidate();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        productBarChart.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="/../../../../images/mpandroidcahrt.png" alt="图1"></p><p><img src="/../../../../images/mpandroidchart2.png" alt="图2"></p>]]></content>
      
      
      <categories>
          
          <category> Android开源控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android 6.0新特性-动态权限申请</title>
      <link href="/2017/06/14/Android-6-0%E6%96%B0%E7%89%B9%E6%80%A7-%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7/"/>
      <url>/2017/06/14/Android-6-0%E6%96%B0%E7%89%B9%E6%80%A7-%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7/</url>
      
        <content type="html"><![CDATA[<p>Android 6.0之后，部分权限需要动态申请。<br>但是AndroidManifest.xml文件中同样需要申明。</p><h2 id="常见处理方式"><a href="#常见处理方式" class="headerlink" title="常见处理方式"></a>常见处理方式</h2><h3 id="请求权限"><a href="#请求权限" class="headerlink" title="请求权限"></a>请求权限</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">22</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (ActivityCompat.checkSelfPermission(<span class="built_in">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">         <span class="keyword">if</span> (!ActivityCompat.shouldShowRequestPermissionRationale(<span class="built_in">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE)) &#123;</span><br><span class="line">             Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;这里提示用户进入设置界面开启权限&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">//Request</span></span><br><span class="line">             ActivityCompat.requestPermissions(MainActivity.<span class="built_in">this</span>, <span class="keyword">new</span> <span class="title class_">String</span>[] &#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, <span class="number">0x01</span>);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">//Allow...</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="comment">//Allow...</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="Activity必须implements-ActivityCompat-OnRequestPermissionsResultCallback"><a href="#Activity必须implements-ActivityCompat-OnRequestPermissionsResultCallback" class="headerlink" title="Activity必须implements ActivityCompat.OnRequestPermissionsResultCallback"></a>Activity必须implements ActivityCompat.OnRequestPermissionsResultCallback</h3><h3 id="处理请求结果"><a href="#处理请求结果" class="headerlink" title="处理请求结果"></a>处理请求结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRequestPermissionsResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">    <span class="keyword">if</span> (requestCode == <span class="number">0x01</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;Allow&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="comment">//allow...</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;Deny&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="comment">//deny...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用RxPermission-推荐"><a href="#使用RxPermission-推荐" class="headerlink" title="使用RxPermission(推荐)"></a>使用RxPermission(推荐)</h2><p><a href="https://github.com/tbruyelle/RxPermissions">查看Github</a></p><h2 id="使用AndPermission"><a href="#使用AndPermission" class="headerlink" title="使用AndPermission"></a>使用AndPermission</h2><p><a href="https://github.com/yanzhenjie/AndPermission">查看Github</a></p>]]></content>
      
      
      <categories>
          
          <category> Android版本特性 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android 7.0新特性-FileUriExposedException</title>
      <link href="/2017/06/14/Android-7-0%E6%96%B0%E7%89%B9%E6%80%A7-FileUriExposedException/"/>
      <url>/2017/06/14/Android-7-0%E6%96%B0%E7%89%B9%E6%80%A7-FileUriExposedException/</url>
      
        <content type="html"><![CDATA[<p>下面两个问题都是同一个错误FileUriExposedException。</p><h2 id="问题1：App更新"><a href="#问题1：App更新" class="headerlink" title="问题1：App更新"></a>问题1：App更新</h2><p>最近有客户反应App自动更新安装失败。<br>查看原因报的是FileUriExposedException错误。</p><p>查看官网API找到了解决之法。</p><span id="more"></span><h3 id="新建res-xml-provider-paths-xml文件"><a href="#新建res-xml-provider-paths-xml文件" class="headerlink" title="新建res&#x2F;xml&#x2F;provider_paths.xml文件"></a>新建res&#x2F;xml&#x2F;provider_paths.xml文件</h3><figure class="highlight xhtml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">paths</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">external-path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;external_files&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">path</span>=<span class="string">&quot;.&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root-path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;root_path&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">path</span>=<span class="string">&quot;.&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;/<span class="name">paths</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在AndroidManifest-xml中添加provider"><a href="#在AndroidManifest-xml中添加provider" class="headerlink" title="在AndroidManifest.xml中添加provider"></a>在AndroidManifest.xml中添加provider</h3><figure class="highlight xhtml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;android.support.v4.content.FileProvider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:authorities</span>=<span class="string">&quot;您的包名.provider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:grantUriPermissions</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:resource</span>=<span class="string">&quot;@xml/provider_paths&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="修改Uri的获取方式"><a href="#修改Uri的获取方式" class="headerlink" title="修改Uri的获取方式"></a>修改Uri的获取方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">installApk</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW);</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        <span class="comment">//FIX ME by ZZ : 7.0</span></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> FileProvider.getUriForFile(MainActivity.<span class="built_in">this</span>, BuildConfig.APPLICATION_ID+<span class="string">&quot;.provider&quot;</span>, </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">File</span>(Constants.APK_DOWNLOAD_DIR + File.separator + fileName));</span><br><span class="line">        <span class="comment">//这flag很关键</span></span><br><span class="line">        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</span><br><span class="line">        intent.setDataAndType(uri, <span class="string">&quot;application/vnd.android.package-archive&quot;</span>);</span><br><span class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">        <span class="built_in">this</span>.startActivity(intent);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        intent.setDataAndType(Uri.fromFile(<span class="keyword">new</span> <span class="title class_">File</span>(Constants.APK_DOWNLOAD_DIR + File.separator + fileName)),</span><br><span class="line">                <span class="string">&quot;application/vnd.android.package-archive&quot;</span>);</span><br><span class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">        <span class="built_in">this</span>.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="问题2：调用系统相机拍照"><a href="#问题2：调用系统相机拍照" class="headerlink" title="问题2：调用系统相机拍照"></a>问题2：调用系统相机拍照</h2><h3 id="解决方式1"><a href="#解决方式1" class="headerlink" title="解决方式1"></a>解决方式1</h3><p>（1）前两个步骤同上</p><p>（2）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">takePhoto</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(PATH);</span><br><span class="line">    <span class="keyword">if</span> (!file.isDirectory()) &#123;</span><br><span class="line">        file.mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MediaStore.ACTION_IMAGE_CAPTURE);</span><br><span class="line">    Uri uri;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        uri = FileProvider.getUriForFile(MainActivity.<span class="built_in">this</span>,</span><br><span class="line">                BuildConfig.APPLICATION_ID+<span class="string">&quot;.provider&quot;</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">File</span>(PATH+NAME));</span><br><span class="line">        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        uri = Uri.fromFile(<span class="keyword">new</span> <span class="title class_">File</span>(PATH+NAME));</span><br><span class="line">    &#125;</span><br><span class="line">    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);</span><br><span class="line">    startActivityForResult(intent, <span class="number">0x01</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意别漏了这句:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</span><br></pre></td></tr></table></figure><h3 id="解决方式2"><a href="#解决方式2" class="headerlink" title="解决方式2"></a>解决方式2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">takePhoto</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(Constants.PIC_UPLOAD_ROOT_PATH);</span><br><span class="line">    <span class="keyword">if</span> (!file.isDirectory()) &#123;</span><br><span class="line">        file.mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">cameraIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MediaStore.ACTION_IMAGE_CAPTURE);<span class="comment">//构造intent</span></span><br><span class="line">    Uri uri;</span><br><span class="line">    <span class="type">String</span> <span class="variable">pathOne</span> <span class="operator">=</span> Constants.PIC_UPLOAD_ROOT_PATH + System.currentTimeMillis() + <span class="string">&quot;.jpg&quot;</span>;</span><br><span class="line">    AbSharedUtil.putString(<span class="built_in">this</span>, Constants.PUT_FILE_ONE, pathOne);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">File</span> <span class="variable">fileOne</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(pathOne);</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT&lt;<span class="number">24</span>)&#123;</span><br><span class="line">        uri = Uri.fromFile(fileOne);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">contentValues</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(<span class="number">1</span>);</span><br><span class="line">        contentValues.put(MediaStore.Images.Media.DATA, fileOne.getAbsolutePath());</span><br><span class="line">        uri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,contentValues);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (fileOne.exists()) &#123;</span><br><span class="line">        fileOne.delete();</span><br><span class="line">    &#125;</span><br><span class="line">    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uri);</span><br><span class="line">    startActivityForResult(cameraIntent, CAMERA_REQUEST_ONE);<span class="comment">//发出intent，并要求返回调用结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android版本特性 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-ZzExcelCreator</title>
      <link href="/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzExcelCreator/"/>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzExcelCreator/</url>
      
        <content type="html"><![CDATA[<h1 id="ZzExcelCreator"><a href="#ZzExcelCreator" class="headerlink" title="ZzExcelCreator"></a>ZzExcelCreator</h1><p>Excel表格生成工具</p><p>项目地址:<a href="https://github.com/zhouzhuo810/ZzExcelCreator">https://github.com/zhouzhuo810/ZzExcelCreator</a><br>（欢迎star!）</p><span id="more"></span><p>效果图：</p><p><img src="/../../../../images/excel1.jpg" alt="excel1.jpg"><br><img src="/../../../../images/excel2.jpg" alt="excel2.jpg"><br><img src="/../../../../images/excel3.jpg" alt="excel3.jpg"></p><p>最近做项目用到jxl.jar来生成Excel表格；</p><p>但是发现jxl源码都没有注释的，方法也没有说明，<br>虽然最后在网上找到了对应的方法。</p><p>不过这不是我的style，果断自己封装一下，添加注释。</p><p>下面介绍一下用法：</p><h3 id="Gradle："><a href="#Gradle：" class="headerlink" title="Gradle："></a>Gradle：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;me.zhouzhuo.zzexcelcreator:zz-excel-creator:1.0.0&#x27;</span><br></pre></td></tr></table></figure><h3 id="创建Excel文件和工作表"><a href="#创建Excel文件和工作表" class="headerlink" title="创建Excel文件和工作表"></a>创建Excel文件和工作表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ZzExcelCreator</span><br><span class="line">    .getInstance()</span><br><span class="line">    .createExcel(PATH, params[<span class="number">0</span>])  <span class="comment">//生成excel文件</span></span><br><span class="line">    .createSheet(params[<span class="number">1</span>])        <span class="comment">//生成sheet工作表</span></span><br><span class="line">    .close();</span><br></pre></td></tr></table></figure><h3 id="打开Excel文件和工作表"><a href="#打开Excel文件和工作表" class="headerlink" title="打开Excel文件和工作表"></a>打开Excel文件和工作表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZzExcelCreator</span><br><span class="line">    .getInstance()</span><br><span class="line">    .openExcel(<span class="keyword">new</span> <span class="title class_">File</span>(PATH + fileName + <span class="string">&quot;.xls&quot;</span>))  <span class="comment">//打开Excel文件</span></span><br><span class="line">    .openSheet(<span class="number">0</span>)                                   <span class="comment">//打开Sheet工作表</span></span><br><span class="line">    ... ...</span><br><span class="line">    .close();</span><br></pre></td></tr></table></figure><h3 id="设置单元格内容格式："><a href="#设置单元格内容格式：" class="headerlink" title="设置单元格内容格式："></a>设置单元格内容格式：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置单元格内容格式</span></span><br><span class="line"><span class="type">WritableCellFormat</span> <span class="variable">format</span> <span class="operator">=</span> ZzFormatCreator</span><br><span class="line">.getInstance()</span><br><span class="line">.createCellFont(WritableFont.ARIAL)  <span class="comment">//设置字体</span></span><br><span class="line">.setAlignment(Alignment.CENTRE, VerticalAlignment.CENTRE)  <span class="comment">//设置对齐方式(水平和垂直)</span></span><br><span class="line">.setFontSize(<span class="number">14</span>)                    <span class="comment">//设置字体大小</span></span><br><span class="line">.setFontColor(Colour.ROSE)          <span class="comment">//设置字体颜色</span></span><br><span class="line">.getCellFormat();</span><br></pre></td></tr></table></figure><h3 id="设置行高、列宽和写入字符串或数字"><a href="#设置行高、列宽和写入字符串或数字" class="headerlink" title="设置行高、列宽和写入字符串或数字"></a>设置行高、列宽和写入字符串或数字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ZzExcelCreator</span><br><span class="line">    .getInstance()</span><br><span class="line">    .openExcel(<span class="keyword">new</span> <span class="title class_">File</span>(PATH + fileName + <span class="string">&quot;.xls&quot;</span>))  </span><br><span class="line">    .openSheet(<span class="number">0</span>)</span><br><span class="line">    .setColumnWidth(Integer.parseInt(col), <span class="number">25</span>)   <span class="comment">//设置列宽</span></span><br><span class="line">    .setRowHeight(Integer.parseInt(row), <span class="number">400</span>)    <span class="comment">//设置行高</span></span><br><span class="line">    .fillContent(Integer.parseInt(col), Integer.parseInt(row), str, format)  <span class="comment">//填入字符串</span></span><br><span class="line">    .fillNumber(Integer.parseInt(col), Integer.parseInt(row), Double.parseDouble(str), format)  <span class="comment">//填入数字</span></span><br><span class="line">    .close();</span><br></pre></td></tr></table></figure><h3 id="最后就是，这些操作最好在子线程操作。"><a href="#最后就是，这些操作最好在子线程操作。" class="headerlink" title="最后就是，这些操作最好在子线程操作。"></a>最后就是，这些操作最好在子线程操作。</h3>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-ZzImageBox</title>
      <link href="/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzImageBox/"/>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzImageBox/</url>
      
        <content type="html"><![CDATA[<h1 id="ZzImageBox"><a href="#ZzImageBox" class="headerlink" title="ZzImageBox"></a>ZzImageBox</h1><p>A powerful image container for adding and removing images.</p><h3 id="功能简介："><a href="#功能简介：" class="headerlink" title="功能简介："></a>功能简介：</h3><p>1.支持添加、删除、默认图片的配置；</p><p>2.支持最大行数限制；</p><p>3.支持每行数量修改；</p><p>4.支持添加、删除、图片点击回调接口。</p><p>5.支持Box的添加(.addImage(String imagePath))和删除(.removeImage(int position))；</p><p>6.支持加载本地图片(使用方法.addImage(String imagePath))；</p><p>7.支持左右margin设置。</p><h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;me.zhouzhuo.zzimagebox:zz-image-box:1.0.4&#x27;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>me.zhouzhuo.zzimagebox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zz-image-box<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="What-does-it-look-like"><a href="#What-does-it-look-like" class="headerlink" title="What does it look like?"></a>What does it look like?</h2><p><img src="/../../../../images/zzimagebox.gif" alt="zzimagebox"></p><h2 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it ?"></a>How to use it ?</h2><p>xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">me.zhouzhuo.zzimagebox.ZzImageBox</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/zz_image_box&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_left_margin</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_right_margin</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_size_one_line</span>=<span class="string">&quot;4&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_max_line</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_deletable</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_add</span>=<span class="string">&quot;@drawable/iv_add&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_default</span>=<span class="string">&quot;@drawable/iv_default&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:zib_img_delete</span>=<span class="string">&quot;@drawable/iv_delete&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><p>java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">ZzImageBox</span> <span class="variable">imageBox</span> <span class="operator">=</span> (ZzImageBox) findViewById(R.id.zz_image_box);</span><br><span class="line">imageBox.setOnImageClickListener(<span class="keyword">new</span> <span class="title class_">ZzImageBox</span>.OnImageClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onImageClick</span><span class="params">(<span class="type">int</span> position, String filePath)</span> &#123;</span><br><span class="line">        Log.d(<span class="string">&quot;ZzImageBox&quot;</span>, <span class="string">&quot;image clicked:&quot;</span> + position + <span class="string">&quot;,&quot;</span> + filePath);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDeleteClick</span><span class="params">(<span class="type">int</span> position, String filePath)</span> &#123;</span><br><span class="line">        imageBox.removeImage(position);</span><br><span class="line">        Log.d(<span class="string">&quot;ZzImageBox&quot;</span>, <span class="string">&quot;delete clicked:&quot;</span> + position + <span class="string">&quot;,&quot;</span> + filePath);</span><br><span class="line">        Log.d(<span class="string">&quot;ZzImageBox&quot;</span>, <span class="string">&quot;all images\n&quot;</span>+imageBox.getAllImages().toString());</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAddClick</span><span class="params">()</span> &#123;</span><br><span class="line">        imageBox.addImage(<span class="literal">null</span>);</span><br><span class="line">        Log.d(<span class="string">&quot;ZzImageBox&quot;</span>, <span class="string">&quot;add clicked&quot;</span>);</span><br><span class="line">        Log.d(<span class="string">&quot;ZzImageBox&quot;</span>, <span class="string">&quot;all images\n&quot;</span>+imageBox.getAllImages().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="属性说明："><a href="#属性说明：" class="headerlink" title="属性说明："></a>属性说明：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;declare-styleable name=&quot;ZzImageBox&quot;&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_max_line&quot; format=&quot;integer&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_size_one_line&quot; format=&quot;integer&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_padding&quot; format=&quot;dimension|reference&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_default&quot; format=&quot;color|reference&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_delete&quot; format=&quot;color|reference&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_add&quot; format=&quot;color|reference&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_img_deletable&quot; format=&quot;boolean&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_left_margin&quot; format=&quot;dimension|reference&quot; /&gt;</span><br><span class="line">    &lt;attr name=&quot;zib_right_margin&quot; format=&quot;dimension|reference&quot; /&gt;</span><br><span class="line">&lt;/declare-styleable&gt;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">属性名</th><th align="left">属性类型</th><th align="left">属性功能</th></tr></thead><tbody><tr><td align="left">zib_max_line</td><td align="left">integer</td><td align="left">最大行数</td></tr><tr><td align="left">zib_img_size_one_line</td><td align="left">integer</td><td align="left">每行数量</td></tr><tr><td align="left">zib_img_padding</td><td align="left">dimension</td><td align="left">图片之间的间距</td></tr><tr><td align="left">zib_img_default</td><td align="left">drawable</td><td align="left">color</td></tr><tr><td align="left">zib_img_delete</td><td align="left">drawable</td><td align="left">color</td></tr><tr><td align="left">zib_img_add</td><td align="left">drawable</td><td align="left">color</td></tr><tr><td align="left">zib_img_deletable</td><td align="left">boolean</td><td align="left">是否显示删除图片</td></tr><tr><td align="left">zib_left_margin</td><td align="left">dimension</td><td align="left">控件距离屏幕左边距离</td></tr><tr><td align="left">zib_right_margin</td><td align="left">dimension</td><td align="left">控件距离屏幕右边距离</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义控件-ZzWeatherView</title>
      <link href="/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzWeatherView/"/>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzWeatherView/</url>
      
        <content type="html"><![CDATA[<h1 id="ZzWeatherView"><a href="#ZzWeatherView" class="headerlink" title="ZzWeatherView"></a>ZzWeatherView</h1><p>一个现实天气的控件</p><h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;me.zhouzhuo.zzweatherview:zz-weather-view:1.0.2&#x27;</span><br></pre></td></tr></table></figure><span id="more"></span><p>效果图如下：</p><img src="../../../../images/curve.png"  width="400px"/><img src="../../../../images/disc.jpg"  width="400px"/><h2 id="用法简介"><a href="#用法简介" class="headerlink" title="用法简介"></a>用法简介</h2><p>1）布局</p><h3 id="drawable-scroll-bar-thumb-xml"><a href="#drawable-scroll-bar-thumb-xml" class="headerlink" title="drawable&#x2F;scroll_bar_thumb.xml"></a>drawable&#x2F;scroll_bar_thumb.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:startColor</span>=<span class="string">&quot;#33999999&quot;</span> <span class="attr">android:endColor</span>=<span class="string">&quot;#80aaaaaa&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:angle</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;6dp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">me.zhouzhuo.zzweatherview.ZzWeatherView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/weather_view&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scrollbarThumbHorizontal</span>=<span class="string">&quot;@drawable/scroll_bar_thumb&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scrollbarTrackHorizontal</span>=<span class="string">&quot;@drawable/scroll_bar_thumb&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scrollbarSize</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#333&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">me.zhouzhuo.zzweatherview.ZzWeatherView</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2）java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ZzWeatherView</span> <span class="variable">weatherView</span> <span class="operator">=</span> (ZzWeatherView) findViewById(R.id.weather_view);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//填充天气数据</span></span><br><span class="line">weatherView.setList(generateData());</span><br><span class="line">  </span><br><span class="line"><span class="comment">//画折线</span></span><br><span class="line">weatherView.setLineType(ZzWeatherView.LINE_TYPE_DISCOUNT);</span><br><span class="line"><span class="comment">//画曲线(不够圆滑希望有更好的建议联系我(Email:admin@zhouzhuo810.me))</span></span><br><span class="line"><span class="comment">//weatherView.setLineType(ZzWeatherView.LINE_TYPE_CURVE);</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//设置线宽</span></span><br><span class="line">weatherView.setLineWidth(<span class="number">6f</span>);</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//设置一屏幕显示几列(最少3列)</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    weatherView.setColumnNumber(<span class="number">5</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//设置白天和晚上线条的颜色</span></span><br><span class="line">weatherView.setDayAndNightLineColor(Color.BLUE, Color.RED);</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//点击某一列</span></span><br><span class="line">weatherView.setOnWeatherItemClickListener(<span class="keyword">new</span> <span class="title class_">ZzWeatherView</span>.OnWeatherItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(WeatherItemView itemView, <span class="type">int</span> position, WeatherModel weatherModel)</span> &#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="built_in">this</span>, position+<span class="string">&quot;&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//数据源</span></span><br><span class="line">  <span class="type">WeatherModel</span> <span class="variable">model</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WeatherModel</span>();</span><br><span class="line">        model.setDate(<span class="string">&quot;12/07&quot;</span>);<span class="comment">//日期</span></span><br><span class="line">        model.setWeek(<span class="string">&quot;昨天&quot;</span>);  <span class="comment">//星期</span></span><br><span class="line">        model.setDayWeather(<span class="string">&quot;大雪&quot;</span>); <span class="comment">//白天天气</span></span><br><span class="line">        model.setDayTemp(<span class="number">11</span>); <span class="comment">//白天温度</span></span><br><span class="line">        model.setNightTemp(<span class="number">5</span>); <span class="comment">//夜晚温度</span></span><br><span class="line">        model.setNightWeather(<span class="string">&quot;晴&quot;</span>); <span class="comment">//夜晚天气</span></span><br><span class="line">        model.setWindOrientation(<span class="string">&quot;西南风&quot;</span>); <span class="comment">//风向</span></span><br><span class="line">        model.setWindLevel(<span class="string">&quot;3级&quot;</span>); <span class="comment">//</span></span><br><span class="line">        model.setAirLevel(AirLevel.EXCELLENT); <span class="comment">//空气质量</span></span><br></pre></td></tr></table></figure><h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><p>v 1.0.2</p><ul><li>添加设置曲线颜色方法；</li><li>添加设置列的数量方法；</li></ul><p>v 1.0.1</p><ul><li>修复曲线不圆滑问题；</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android自定义控件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android疑难杂症-自定义ViewGroup添加TextView的Gravity失效</title>
      <link href="/2017/06/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89ViewGroup%E6%B7%BB%E5%8A%A0TextView%E7%9A%84Gravity%E5%A4%B1%E6%95%88/"/>
      <url>/2017/06/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89ViewGroup%E6%B7%BB%E5%8A%A0TextView%E7%9A%84Gravity%E5%A4%B1%E6%95%88/</url>
      
        <content type="html"><![CDATA[<p>解决方法：</p><p>在addView()之前</p><p>添加如下代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mTextView.measure(View.MeasureSpec.makeMeasureSpec(mWidth, View.MeasureSpec.EXACTLY),</span><br><span class="line">        View.MeasureSpec.makeMeasureSpec(mHeight, View.MeasureSpec.EXACTLY));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS-pod的安装和使用</title>
      <link href="/2017/06/08/IOS-pod%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2017/06/08/IOS-pod%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>使用pod可以很方便的集成第三方框架。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure><p>输入密码</p><p>等待即可。</p><p>完成标识如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx gems installed</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="验证安装是否成功"><a href="#验证安装是否成功" class="headerlink" title="验证安装是否成功"></a>验证安装是否成功</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod --help</span><br></pre></td></tr></table></figure><h2 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h2><p>切换到目标工程文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd xxx</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod init</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -al</span><br></pre></td></tr></table></figure><p>会发现多了一个Podfile文件</p><h2 id="编辑Podfile文件"><a href="#编辑Podfile文件" class="headerlink" title="编辑Podfile文件"></a>编辑Podfile文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi Podfile</span><br></pre></td></tr></table></figure><p>点击i进入编辑模式</p><p>移动光标，在需要的位置添加内容<br>下面以SDWebImage为例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">platform :ios, &#x27;8.0&#x27;</span><br><span class="line">pod &#x27;SDWebImage&#x27;, &#x27;~&gt;3.8&#x27;</span><br><span class="line">use_frameworks!</span><br></pre></td></tr></table></figure><p>点击esc</p><p>点击shift+；</p><p>输入wq，回车</p><h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><p>先关闭xcode</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>会发现多了一个workspace的工程</p><p>如果以后要用集成了POD的工程的话就要用workspace的工程。</p><p>打开工程使用这个。</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-单词拼接问题</title>
      <link href="/2017/06/08/ACM-%E5%8D%95%E8%AF%8D%E6%8B%BC%E6%8E%A5%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/08/ACM-%E5%8D%95%E8%AF%8D%E6%8B%BC%E6%8E%A5%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>给你一些单词，请你判断能否把它们首尾串起来串成一串。</p><p>前一个单词的结尾应该与下一个单词的道字母相同。</p><p><strong>输入</strong></p><p>第一行是一个整数N(0&lt;N&lt;20)，表示测试数据的组数<br>每组测试数据的第一行是一个整数M,表示该组测试数据中有M(2&lt;M&lt;1000)个互不相同的单词，随后的M行，每行是一个长度不超过30的单词,单词全部由小写字母组成。</p><p><strong>输出</strong></p><p>如果存在拼接方案，请输出所有拼接方案中字典序最小的方案。(两个单词之间输出一个英文句号”.”)<br>如果不存在拼接方案，则输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">***</span><br></pre></td></tr></table></figure><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">6</span><br><span class="line">aloha</span><br><span class="line">arachnid</span><br><span class="line">dog</span><br><span class="line">gopher</span><br><span class="line">rat</span><br><span class="line">tiger</span><br><span class="line">3</span><br><span class="line">oak</span><br><span class="line">maple</span><br><span class="line">elm</span><br></pre></td></tr></table></figure><p><strong>样例输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aloha.arachnid.dog.gopher.rat.tiger</span><br><span class="line">***</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="comment">//欧拉通路(路径) 只有一个点的入度比出度小一, 一个点的出度比入度大一 其余点的入度与出度相等</span></span><br><span class="line"><span class="comment">//欧拉回路 所有点的入度与出度相等</span></span><br><span class="line"><span class="comment">//并查集判断连通性 只有一个点的父节点是他本身</span></span><br><span class="line"><span class="comment">//消圈算法遍历结果</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">Queue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;String&gt;();<span class="comment">// 首字母相同的单词可能有多个</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">LEN</span> <span class="operator">=</span> <span class="number">26</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> start;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] father, num, inDegree, outDegree;</span><br><span class="line"><span class="keyword">private</span> Node[] nodes;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line">Main main;</span><br><span class="line">String str;</span><br><span class="line">Node[] nodes = <span class="keyword">new</span> <span class="title class_">Node</span>[LEN];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; LEN; i++) &#123;</span><br><span class="line">nodes[i] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">&#125;</span><br><span class="line">t = sc.nextInt();</span><br><span class="line"><span class="keyword">while</span> (t-- != <span class="number">0</span>) &#123;</span><br><span class="line">n = sc.nextInt();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">str = sc.next();</span><br><span class="line">nodes[str.charAt(<span class="number">0</span>) - <span class="string">&#x27;a&#x27;</span>].queue.add(str);<span class="comment">// 单词首字母</span></span><br><span class="line">&#125;</span><br><span class="line">main = <span class="keyword">new</span> <span class="title class_">Main</span>(nodes);</span><br><span class="line">main.execute();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; LEN; i++) &#123;</span><br><span class="line">nodes[i].queue.clear();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sc.close();</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Main</span><span class="params">(Node[] nodes)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.nodes = nodes;</span><br><span class="line">father = <span class="keyword">new</span> <span class="title class_">int</span>[LEN];</span><br><span class="line">num = <span class="keyword">new</span> <span class="title class_">int</span>[LEN];</span><br><span class="line">inDegree = <span class="keyword">new</span> <span class="title class_">int</span>[LEN];</span><br><span class="line">outDegree = <span class="keyword">new</span> <span class="title class_">int</span>[LEN];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; LEN; i++) &#123;</span><br><span class="line">father[i] = i;</span><br><span class="line">num[i] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, start, end; i &lt; LEN; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (String str : nodes[i].queue) &#123;</span><br><span class="line">start = str.charAt(<span class="number">0</span>) - <span class="string">&#x27;a&#x27;</span>;<span class="comment">// 单词首</span></span><br><span class="line">end = str.charAt(str.length() - <span class="number">1</span>) - <span class="string">&#x27;a&#x27;</span>;<span class="comment">// 单词尾</span></span><br><span class="line">inDegree[end]++;</span><br><span class="line">outDegree[start]++;</span><br><span class="line">start = find(start);</span><br><span class="line">end = find(end);</span><br><span class="line"><span class="keyword">if</span> (start != end) &#123;</span><br><span class="line">union(start, end);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> i == father[i] ? i : find(father[i]);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">father[i] = j;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEularRoute</span><span class="params">()</span> &#123;</span><br><span class="line">start = -<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">find</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; LEN; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (inDegree[i] != outDegree[i]) &#123;</span><br><span class="line"><span class="keyword">if</span> (Math.abs(inDegree[i] - outDegree[i]) != <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (!find &amp;&amp; inDegree[i] &lt; outDegree[i]) &#123;</span><br><span class="line">find = <span class="literal">true</span>;</span><br><span class="line">start = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (++count &gt; <span class="number">2</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (outDegree[i] &gt; <span class="number">0</span> &amp;&amp; start == -<span class="number">1</span>) &#123;</span><br><span class="line">start = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, count = <span class="number">0</span>; i &lt; LEN; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (outDegree[i] &gt; <span class="number">0</span> &amp;&amp; father[i] == i) &#123;</span><br><span class="line"><span class="keyword">if</span> (++count &gt; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">printResult</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">dfs(i);</span><br><span class="line"><span class="keyword">if</span> (!stack.isEmpty())</span><br><span class="line">System.out.print(stack.pop());</span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot;.&quot;</span> + stack.pop());</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;String&gt;();</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (!nodes[i].queue.isEmpty()) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> nodes[i].queue.poll();</span><br><span class="line">dfs(str.charAt(str.length() - <span class="number">1</span>) - <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">stack.push(str);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!isConnected() || !isEularRoute()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;***&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">printResult(start);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 欧拉回路:若图G中存在这样一条路径，使得它恰通过G中每条边一次，则称该路径为欧拉路径。若该路径是一个圈， 则成为欧拉回路。</span></span><br><span class="line"><span class="comment"> * 具有欧拉回路的图成为欧拉图，具有欧拉路径但不具有欧拉回路的图成为半欧拉图。 1.无向连通图G是欧拉图，当且仅当G不含奇数度结点(G的所有结点度数为偶数)；</span></span><br><span class="line"><span class="comment"> * 2.无向连通图G含有欧拉通路，当且仅当G有零个或两个奇数度的结点； 3.有向连通图D是欧拉图，当且仅当该图为连通图且D中每个结点的入度=出度</span></span><br><span class="line"><span class="comment"> * 4.有向连通图D含有欧拉通路，当且仅当该图为连通图且D中除两个结点外， 其余每个结点的入度=出度，且此两点满足deg－(u)－deg+(v)=±1。</span></span><br><span class="line"><span class="comment"> * （起始点s的入度=出度-1，结束点t的出度=入度-1 或两个点的入度=出度）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 连通图：若图中任意两点都是连通的，则该图是连通图。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-(复杂排序问题)</title>
      <link href="/2017/06/07/ACM-%E5%A4%8D%E6%9D%82%E6%8E%92%E5%BA%8F%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/07/ACM-%E5%A4%8D%E6%9D%82%E6%8E%92%E5%BA%8F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>现在有很多长方形，每一个长方形都有一个编号，这个编号可以重复；还知道这个长方形的宽和长，编号、长、宽都是整数；现在要求按照一下方式排序（默认排序规则都是从小到大）；</p><p>1.按照编号从小到大排序</p><p>2.对于编号相等的长方形，按照长方形的长排序；</p><p>3.如果编号和长都相同，按照长方形的宽排序；</p><p>4.如果编号、长、宽都相同，就只保留一个长方形用于排序,删除多余的长方形；最后排好序按照指定格式显示所有的长方形；</p><p><strong>输入</strong></p><p>第一行有一个整数 0&lt;n&lt;10000,表示接下来有n组测试数据；<br>每一组第一行有一个整数 0&lt;m&lt;1000，表示有m个长方形；<br>接下来的m行，每一行有三个数 ，第一个数表示长方形的编号，</p><p>第二个和第三个数值大的表示长，数值小的表示宽，相等<br>说明这是一个正方形（数据约定长宽与编号都小于10000）；</p><p><strong>输出</strong></p><p>顺序输出每组数据的所有符合条件的长方形的 编号 长 宽</p><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">8</span><br><span class="line">1 1 1</span><br><span class="line">1 1 1</span><br><span class="line">1 1 2</span><br><span class="line">1 2 1</span><br><span class="line">1 2 2</span><br><span class="line">2 1 1</span><br><span class="line">2 1 2</span><br><span class="line">2 2 1</span><br></pre></td></tr></table></figure><p><strong>样例输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 1 1</span><br><span class="line">1 2 1</span><br><span class="line">1 2 2</span><br><span class="line">2 1 1</span><br><span class="line">2 2 1</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">List&lt;Rect&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Rect&gt;();</span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>; j&lt;m; j++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">no</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">Rect</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rect</span>(no, a&gt;b?a:b, a&lt;b?a:b);</span><br><span class="line"><span class="keyword">if</span> (!isExist(list,r)) &#123;</span><br><span class="line">list.add(r);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Rect&gt;()&#123;  </span><br><span class="line">            <span class="meta">@Override</span>  </span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Rect r1, Rect r2)</span> &#123;  </span><br><span class="line">            <span class="keyword">if</span> (r1.no != r2.no) &#123;</span><br><span class="line">            <span class="keyword">return</span> r1.no &gt; r2.no ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (r1.a != r2.a) &#123;</span><br><span class="line">            <span class="keyword">return</span> r1.a &gt; r2.a ? <span class="number">1</span>: -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> r1.b &gt; r2.b ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;  </span><br><span class="line">              </span><br><span class="line">        &#125;);  </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span> ; j&lt;list.size(); j++) &#123;</span><br><span class="line">        result.append(list.get(j).toString()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(result.toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isExist</span><span class="params">(List&lt;Rect&gt; list, Rect r)</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;list.size(); i++) &#123;</span><br><span class="line"><span class="type">Rect</span> <span class="variable">r1</span> <span class="operator">=</span> list.get(i);</span><br><span class="line"><span class="keyword">if</span> (r1.no == r.no &amp;&amp; r1.a==r.a &amp;&amp; r1.b == r.b) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Rect</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> a;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Rect</span><span class="params">(<span class="type">int</span> no, <span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.a = a;</span><br><span class="line"><span class="built_in">this</span>.b = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> no + <span class="string">&quot; &quot;</span> + a +<span class="string">&quot; &quot;</span> + b ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-(奇偶分离问题)</title>
      <link href="/2017/06/07/ACM-%E5%A5%87%E5%81%B6%E5%88%86%E7%A6%BB%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/07/ACM-%E5%A5%87%E5%81%B6%E5%88%86%E7%A6%BB%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>有一个整型偶数n(2&lt;&#x3D; n &lt;&#x3D;10000),你要做的是：先把1到n中的所有奇数从小到大输出，再把所有的偶数从小到大输出。</p><p><strong>输入</strong></p><p>第一行有一个整数i（2&lt;&#x3D;i&lt;30)表示有 i 组测试数据；<br>每组有一个整型偶数n。</p><p><strong>输出</strong></p><p>第一行输出所有的奇数<br>第二行输出所有的偶数</p><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">10</span><br><span class="line">14</span><br></pre></td></tr></table></figure><p><strong>样例输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 3 5 7 9 </span><br><span class="line">2 4 6 8 10 </span><br><span class="line"></span><br><span class="line">1 3 5 7 9 11 13 </span><br><span class="line">2 4 6 8 10 12 14</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">String[] result = <span class="keyword">new</span> <span class="title class_">String</span>[count];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sbj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sbo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (isOval(j)) &#123;</span><br><span class="line">sbo.append(j).append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">sbj.append(j).append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">result[i] = sbj.toString()+<span class="string">&quot;\n&quot;</span>+sbo.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">System.out.println(result[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOval</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> i%<span class="number">2</span>==<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-(素数求和问题)</title>
      <link href="/2017/06/07/ACM-%E7%B4%A0%E6%95%B0%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/07/ACM-%E7%B4%A0%E6%95%B0%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>现在给你N个数（0&lt;N&lt;1000），现在要求你写出一个程序，找出这N个数中的所有素数，并求和。</p><p><strong>输入</strong></p><p>第一行给出整数M(0&lt;M&lt;10)代表多少组测试数据<br>每组测试数据第一行给你N，代表该组测试数据的数量。<br>接下来的N个数为要测试的数据，每个数小于1000</p><p><strong>输出</strong></p><p>每组测试数据结果占一行，输出给出的测试数据的所有素数和</p><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">5</span><br><span class="line">1 2 3 4 5</span><br><span class="line">8</span><br><span class="line">11 12 13 14 15 16 17 18</span><br><span class="line">10</span><br><span class="line">21 22 23 24 25 26 27 28 29 30</span><br></pre></td></tr></table></figure><p><strong>样例输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">41</span><br><span class="line">52</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">zu</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span>[] sum = <span class="keyword">new</span> <span class="title class_">int</span>[zu];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;zu; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;count; j++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"><span class="keyword">if</span> (isPrime(value)) &#123;</span><br><span class="line">s += value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sum[i] = s;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;zu; i++) &#123;</span><br><span class="line">System.out.println(sum[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> a)</span> &#123;  </span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;  </span><br><span class="line">        <span class="keyword">if</span> (a &lt; <span class="number">2</span>) &#123;<span class="comment">// 素数不小于2  </span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= Math.sqrt(a); i++) &#123;  </span><br><span class="line">                <span class="keyword">if</span> (a % i == <span class="number">0</span>) &#123;<span class="comment">// 若能被整除，则说明不是素数，返回false  </span></span><br><span class="line">                    flag = <span class="literal">false</span>;  </span><br><span class="line">                    <span class="keyword">break</span>;<span class="comment">// 跳出循环  </span></span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> flag;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-(括号配对问题)</title>
      <link href="/2017/06/07/ACM-%E6%8B%AC%E5%8F%B7%E9%85%8D%E5%AF%B9%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/07/ACM-%E6%8B%AC%E5%8F%B7%E9%85%8D%E5%AF%B9%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>现在，有一行括号序列，请你检查这行括号是否配对。</p><p><strong>输入</strong></p><p>第一行输入一个数N（0&lt;N&lt;&#x3D;100）,表示有N组测试数据。后面的N行输入多组输入数据，每组输入数据都是一个字符串S(S的长度小于10000，且S不是空串），测试数据组数少于5组。数据保证S中只含有”[“,”]”,”(“,”)”四种字符</p><p><strong>输出</strong></p><p>每组输入数据的输出占一行，如果该字符串中所含的括号是配对的，则输出Yes,如果不配对则输出No</p><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">[(])</span><br><span class="line">(])</span><br><span class="line">([[]()])</span><br></pre></td></tr></table></figure><p><strong>样例输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No</span><br><span class="line">No</span><br><span class="line">Yes</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> count= sc.nextInt();</span><br><span class="line">        String[] strs = <span class="keyword">new</span> <span class="title class_">String</span>[count];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">            strs[i] = sc.next();</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;Character&gt; stack = <span class="literal">null</span>;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;count; j++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> strs[j];</span><br><span class="line">            <span class="keyword">if</span>(str.length() % <span class="number">2</span> == <span class="number">1</span>)&#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;No&quot;</span>);  </span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;    </span><br><span class="line">                stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;Character&gt;();  </span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;str.length();i++)&#123;  </span><br><span class="line">                    <span class="keyword">if</span>(stack.isEmpty())&#123;  </span><br><span class="line">                        stack.push(str.charAt(i));  </span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stack.peek() == <span class="string">&#x27;[&#x27;</span> &amp;&amp; str.charAt(i) == <span class="string">&#x27;]&#x27;</span> || stack.peek() == <span class="string">&#x27;(&#x27;</span> &amp;&amp; str.charAt(i) == <span class="string">&#x27;)&#x27;</span>)&#123;   </span><br><span class="line">                        stack.pop();  </span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">                        stack.push(str.charAt(i));  </span><br><span class="line">                    &#125;  </span><br><span class="line">                &#125;  </span><br><span class="line">                <span class="keyword">if</span>(stack.isEmpty())&#123;  </span><br><span class="line">                    <span class="comment">//如果栈是空的，说明括号匹配  </span></span><br><span class="line">                    System.out.println(<span class="string">&quot;Yes&quot;</span>);  </span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">                    <span class="comment">//说明栈不为空，括号不匹配  </span></span><br><span class="line">                    System.out.println(<span class="string">&quot;No&quot;</span>);  </span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM-(A+B问题)</title>
      <link href="/2017/06/07/ACM-A-B%E9%97%AE%E9%A2%98/"/>
      <url>/2017/06/07/ACM-A-B%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>描述</strong></p><p>此题为练手用题，请大家计算一下a+b的值.</p><p><strong>输入</strong></p><p>输入两个数，a,b</p><p><strong>输出</strong></p><p>输出a+b的值</p><p><strong>样例输入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 3</span><br></pre></td></tr></table></figure><p>样例输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="C语言版"><a href="#C语言版" class="headerlink" title="C语言版"></a>C语言版</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> a,b;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a+b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception</span><br><span class="line">&#123;</span><br><span class="line">Scanner cin=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> a=cin.nextInt(),b=cin.nextInt();</span><br><span class="line">System.out.println(a+b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-访问控制</title>
      <link href="/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/"/>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>访问控制可以限定其他源文件或模块中代码对你代码的访问级别。</p><p>Swift 为代码中的实体提供了四种不同的访问级别:public、internal、fileprivate、private。</p><span id="more"></span><table><thead><tr><th align="left">访问级别</th><th align="left">定义</th></tr></thead><tbody><tr><td align="left">public</td><td align="left">可以访问自己模块中源文件里的任何实体，别人也可以通过引入该模块来访问源文件里的所有实体。</td></tr><tr><td align="left">internal</td><td align="left">可以访问自己模块中源文件里的任何实体，但是别人不能访问该模块中源文件里的实体。</td></tr><tr><td align="left">fileprivate</td><td align="left">文件内私有，只能在当前源文件中使用。</td></tr><tr><td align="left">private</td><td align="left">只能在类中访问，离开了这个类或者结构体的作用域外面就无法访问。</td></tr></tbody></table><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SomePublicClass</span> &#123;&#125;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">SomeInternalClass</span> &#123;&#125;</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">class</span> <span class="title class_">SomeFilePrivateClass</span> &#123;&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">SomePrivateClass</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> somePublicVariable <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">let</span> someInternalConstant <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">func</span> <span class="title function_">someFilePrivateFunction</span>() &#123;&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">somePrivateFunction</span>() &#123;&#125;</span><br></pre></td></tr></table></figure><p>除非有特殊的说明，否则实体都使用默认的访问级别 internal。</p><h2 id="函数类型访问权限"><a href="#函数类型访问权限" class="headerlink" title="函数类型访问权限"></a>函数类型访问权限</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>() -&gt; (<span class="type">SomeInternalClass</span>, <span class="type">SomePrivateClass</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数实现</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="枚举类型访问权限"><a href="#枚举类型访问权限" class="headerlink" title="枚举类型访问权限"></a>枚举类型访问权限</h2><p>枚举中成员的访问级别继承自该枚举，你不能为枚举中的成员单独申明不同的访问级别。</p><p>枚举 Student 被明确的申明为 public 级别，那么它的成员 Name，Mark 的访问级别同样也是 public：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Name</span>(<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Mark</span>(<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> studDetails <span class="operator">=</span> <span class="type">Student</span>.<span class="type">Name</span>(<span class="string">&quot;Swift&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> studMarks <span class="operator">=</span> <span class="type">Student</span>.<span class="type">Mark</span>(<span class="number">98</span>,<span class="number">97</span>,<span class="number">95</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">switch</span> studMarks &#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Name</span>(<span class="keyword">let</span> studName):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;学生名: <span class="subst">\(studName)</span>.&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Mark</span>(<span class="keyword">let</span> <span class="type">Mark1</span>, <span class="keyword">let</span> <span class="type">Mark2</span>, <span class="keyword">let</span> <span class="type">Mark3</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;学生成绩: <span class="subst">\(Mark1)</span>,<span class="subst">\(Mark2)</span>,<span class="subst">\(Mark3)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="子类访问权限"><a href="#子类访问权限" class="headerlink" title="子类访问权限"></a>子类访问权限</h2><p>子类的访问级别不得高于父类的访问级别。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuperClass</span> &#123;</span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">func</span> <span class="title function_">show</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;超类&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 访问级别不能低于超类 internal &gt; public</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">SubClass</span>: <span class="title class_">SuperClass</span>  &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">internal</span> <span class="keyword">func</span> <span class="title function_">show</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;子类&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> sup <span class="operator">=</span> <span class="type">SuperClass</span>()</span><br><span class="line">sup.show()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> sub <span class="operator">=</span> <span class="type">SubClass</span>()</span><br><span class="line">sub.show()</span><br></pre></td></tr></table></figure><h2 id="常量、变量、属性、下标访问权限"><a href="#常量、变量、属性、下标访问权限" class="headerlink" title="常量、变量、属性、下标访问权限"></a>常量、变量、属性、下标访问权限</h2><p>**&#x3D;&#x3D;常量、变量、属性不能拥有比它们的类型更高的访问级别&#x3D;&#x3D;**。</p><p>如果常量、变量、属性、下标索引的定义类型是private级别的，那么它们必须要明确的申明访问级别为private:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> privateInstance <span class="operator">=</span> <span class="type">SomePrivateClass</span>()</span><br></pre></td></tr></table></figure><h2 id="Getter-和-Setter访问权限"><a href="#Getter-和-Setter访问权限" class="headerlink" title="Getter 和 Setter访问权限"></a>Getter 和 Setter访问权限</h2><p>常量、变量、属性、下标索引的Getters和Setters的访问级别继承自它们所属成员的访问级别。</p><p>Setter的访问级别可以低于对应的Getter的访问级别，这样就可以控制变量、属性或下标索引的读写权限。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Samplepgm</span> &#123;</span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">var</span> counter: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">willSet</span>(newTotal)&#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;计数器: <span class="subst">\(newTotal)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> counter <span class="operator">&gt;</span> oldValue &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;新增加数量 <span class="subst">\(counter <span class="operator">-</span> oldValue)</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> <span class="type">NewCounter</span> <span class="operator">=</span> <span class="type">Samplepgm</span>()</span><br><span class="line"><span class="type">NewCounter</span>.counter <span class="operator">=</span> <span class="number">100</span></span><br><span class="line"><span class="type">NewCounter</span>.counter <span class="operator">=</span> <span class="number">800</span></span><br></pre></td></tr></table></figure><h2 id="构造器和默认构造器访问权限"><a href="#构造器和默认构造器访问权限" class="headerlink" title="构造器和默认构造器访问权限"></a>构造器和默认构造器访问权限</h2><p>我们可以给<strong>自定义的</strong>初始化方法申明访问级别，但是要不高于它所属类的访问级别。</p><p>如同函数或方法参数，初始化方法参数的访问级别也不能低于初始化方法的访问级别。</p><p>默认初始化方法的访问级别与所属类型的访问级别相同。</p><h2 id="协议访问权限"><a href="#协议访问权限" class="headerlink" title="协议访问权限"></a>协议访问权限</h2><p>如果你定义了一个public访问级别的协议，那么实现该协议提供的必要函数也会是public的访问级别。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">protocol</span> <span class="title class_">TcpProtocol</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainClass</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no1: <span class="type">Int</span> <span class="comment">// local storage</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.no1 <span class="operator">=</span> no1 <span class="comment">// initialization</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubClass</span>: <span class="title class_">MainClass</span>, <span class="title class_">TcpProtocol</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no2: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>, <span class="params">no2</span> : <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.no2 <span class="operator">=</span> no2</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(no1:no1)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Requires only one parameter for convenient method</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>)  &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(no1:no1, no2:<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> res <span class="operator">=</span> <span class="type">MainClass</span>(no1: <span class="number">20</span>)</span><br><span class="line"><span class="keyword">let</span> show <span class="operator">=</span> <span class="type">SubClass</span>(no1: <span class="number">30</span>, no2: <span class="number">50</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(res.no1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(show.no1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(show.no2)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="扩展访问权限"><a href="#扩展访问权限" class="headerlink" title="扩展访问权限"></a>扩展访问权限</h2><p>你可以在条件允许的情况下对类、结构体、枚举进行扩展。</p><h2 id="泛型访问权限"><a href="#泛型访问权限" class="headerlink" title="泛型访问权限"></a>泛型访问权限</h2><p>泛型类型或泛型函数的访问级别取泛型类型、函数本身、泛型类型参数三者中的最低访问级别。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">TOS</span>&lt;<span class="title class_">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> items <span class="operator">=</span> [<span class="type">T</span>]()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">push</span>(<span class="params">item</span>: <span class="type">T</span>) &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">pop</span>() -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.removeLast()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> tos <span class="operator">=</span> <span class="type">TOS</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">tos.push(<span class="string">&quot;Swift&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tos.items)</span><br><span class="line"> </span><br><span class="line">tos.push(<span class="string">&quot;泛型&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tos.items)</span><br><span class="line"> </span><br><span class="line">tos.push(<span class="string">&quot;类型参数&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tos.items)</span><br><span class="line"> </span><br><span class="line">tos.push(<span class="string">&quot;类型参数名&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tos.items)</span><br><span class="line"><span class="keyword">let</span> deletetos <span class="operator">=</span> tos.pop()</span><br></pre></td></tr></table></figure><h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><p>任何你定义的类型别名都会被当作不同的类型，以便于进行访问控制。一个类型别名的访问级别不可高于原类型的访问级别。</p>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-泛型</title>
      <link href="/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E6%B3%9B%E5%9E%8B/"/>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E6%B3%9B%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>Swift 提供了泛型让你写出灵活且可重用的函数和类型。<br>Swift 标准库是通过泛型代码构建出来的。<br>Swift 的数组和字典类型都是泛型集。</p><p>泛型使用了占位类型名（在这里用字母 T 来表示）来代替实际类型名（例如 Int、String 或 Double）。</p><span id="more"></span><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">swapTwoValues</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">_</span> <span class="params">a</span>: <span class="keyword">inout</span> <span class="type">T</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="keyword">inout</span> <span class="type">T</span>)</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个交换两个变量的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">swapTwoValues</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">_</span> <span class="params">a</span>: <span class="keyword">inout</span> <span class="type">T</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="keyword">inout</span> <span class="type">T</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temporaryA <span class="operator">=</span> a</span><br><span class="line">    a <span class="operator">=</span> b</span><br><span class="line">    b <span class="operator">=</span> temporaryA</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> numb1 <span class="operator">=</span> <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> numb2 <span class="operator">=</span> <span class="number">200</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;交换前数据:  <span class="subst">\(numb1)</span> 和 <span class="subst">\(numb2)</span>&quot;</span>)</span><br><span class="line">swapTwoValues(<span class="operator">&amp;</span>numb1, <span class="operator">&amp;</span>numb2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;交换后数据: <span class="subst">\(numb1)</span> 和 <span class="subst">\(numb2)</span>&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> str1 <span class="operator">=</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="keyword">var</span> str2 <span class="operator">=</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;交换前数据:  <span class="subst">\(str1)</span> 和 <span class="subst">\(str2)</span>&quot;</span>)</span><br><span class="line">swapTwoValues(<span class="operator">&amp;</span>str1, <span class="operator">&amp;</span>str2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;交换后数据: <span class="subst">\(str1)</span> 和 <span class="subst">\(str2)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="泛型类型"><a href="#泛型类型" class="headerlink" title="泛型类型"></a>泛型类型</h2><p>Swift 允许你定义你自己的泛型类型。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Stack</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> items <span class="operator">=</span> [<span class="type">Element</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">push</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">pop</span>() -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.removeLast()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> stackOfStrings <span class="operator">=</span> <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串元素入栈: &quot;</span>)</span><br><span class="line">stackOfStrings.push(<span class="string">&quot;google&quot;</span>)</span><br><span class="line">stackOfStrings.push(<span class="string">&quot;runoob&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(stackOfStrings.items);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> deletetos <span class="operator">=</span> stackOfStrings.pop()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;出栈元素: &quot;</span> <span class="operator">+</span> deletetos)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> stackOfInts <span class="operator">=</span> <span class="type">Stack</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整数元素入栈: &quot;</span>)</span><br><span class="line">stackOfInts.push(<span class="number">1</span>)</span><br><span class="line">stackOfInts.push(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(stackOfInts.items);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="扩展泛型类型"><a href="#扩展泛型类型" class="headerlink" title="扩展泛型类型"></a>扩展泛型类型</h2><p>当你扩展一个泛型类型的时候（使用 extension 关键字），你并不需要在扩展的定义中提供类型参数列表。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Stack</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> items <span class="operator">=</span> [<span class="type">Element</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">push</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">pop</span>() -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.removeLast()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> topItem: <span class="type">Element</span>? &#123;</span><br><span class="line">       <span class="keyword">return</span> items.isEmpty <span class="operator">?</span> <span class="literal">nil</span> : items[items.count <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> stackOfStrings <span class="operator">=</span> <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串元素入栈: &quot;</span>)</span><br><span class="line">stackOfStrings.push(<span class="string">&quot;google&quot;</span>)</span><br><span class="line">stackOfStrings.push(<span class="string">&quot;runoob&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> topItem <span class="operator">=</span> stackOfStrings.topItem &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;栈中的顶部元素是：<span class="subst">\(topItem)</span>.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(stackOfStrings.items)</span><br></pre></td></tr></table></figure><h2 id="类型约束"><a href="#类型约束" class="headerlink" title="类型约束"></a>类型约束</h2><p>类型约束指定了一个必须继承自指定类的类型参数，或者遵循一个特定的协议或协议构成。</p><h3 id="类型约束语法"><a href="#类型约束语法" class="headerlink" title="类型约束语法"></a>类型约束语法</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>&lt;<span class="type">T</span>: <span class="type">SomeClass</span>, <span class="type">U</span>: <span class="type">SomeProtocol</span>&gt;(<span class="params">someT</span>: <span class="type">T</span>, <span class="params">someU</span>: <span class="type">U</span>) &#123;</span><br><span class="line">    <span class="comment">// 这里是泛型函数的函数体部分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面这个函数有两个类型参数。第一个类型参数 T，有一个要求 T 必须是 SomeClass 子类的类型约束；第二个类型参数 U，有一个要求 U 必须符合 SomeProtocol 协议的类型约束。</p><h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非泛型函数，查找指定字符串在数组中的索引</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">findIndex</span>(<span class="params">ofString</span> <span class="params">valueToFind</span>: <span class="type">String</span>, <span class="params">in</span> <span class="params">array</span>: [<span class="type">String</span>]) -&gt; <span class="type">Int</span>? &#123;</span><br><span class="line">    <span class="keyword">for</span> (index, value) <span class="keyword">in</span> array.enumerated() &#123;</span><br><span class="line">        <span class="keyword">if</span> value <span class="operator">==</span> valueToFind &#123;</span><br><span class="line">            <span class="comment">// 找到返回索引值</span></span><br><span class="line">            <span class="keyword">return</span> index</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> strings <span class="operator">=</span> [<span class="string">&quot;google&quot;</span>, <span class="string">&quot;weibo&quot;</span>, <span class="string">&quot;taobao&quot;</span>, <span class="string">&quot;runoob&quot;</span>, <span class="string">&quot;facebook&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> foundIndex <span class="operator">=</span> findIndex(ofString: <span class="string">&quot;runoob&quot;</span>, in: strings) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;runoob 的索引为 <span class="subst">\(foundIndex)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="关联类"><a href="#关联类" class="headerlink" title="关联类"></a>关联类</h2><p>Swift 中使用 associatedtype 关键字来设置关联类型实例。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Container 协议</span></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">Container</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ItemType</span></span><br><span class="line">    <span class="comment">// 添加一个新元素到容器里</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">ItemType</span>)</span><br><span class="line">    <span class="comment">// 获取容器中元素的数</span></span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// 通过索引值类型为 Int 的下标检索到容器中的每一个元素</span></span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">ItemType</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Stack 结构体遵从 Container 协议</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Stack</span>&lt;<span class="title class_">Element</span>&gt;: <span class="title class_">Container</span> &#123;</span><br><span class="line">    <span class="comment">// Stack&lt;Element&gt; 的原始实现部分</span></span><br><span class="line">    <span class="keyword">var</span> items <span class="operator">=</span> [<span class="type">Element</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">push</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">pop</span>() -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.removeLast()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Container 协议的实现部分</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.count</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items[i]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tos <span class="operator">=</span> <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">tos.push(<span class="string">&quot;google&quot;</span>)</span><br><span class="line">tos.push(<span class="string">&quot;runoob&quot;</span>)</span><br><span class="line">tos.push(<span class="string">&quot;taobao&quot;</span>)</span><br><span class="line"><span class="comment">// 元素列表</span></span><br><span class="line"><span class="built_in">print</span>(tos.items)</span><br><span class="line"><span class="comment">// 元素个数</span></span><br><span class="line"><span class="built_in">print</span>( tos.count)</span><br></pre></td></tr></table></figure><h2 id="Where-语句"><a href="#Where-语句" class="headerlink" title="Where 语句"></a>Where 语句</h2><p>类型约束能够确保类型符合泛型函数或类的定义约束。</p><p>你可以在参数列表中通过where语句定义参数的约束。</p><h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><p>下面的例子定义了一个名为allItemsMatch的泛型函数，用来检查两个Container实例是否包含相同顺序的相同元素。<br>如果所有的元素能够匹配，那么返回 true，反之则返回 false。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Container 协议</span></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">Container</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ItemType</span></span><br><span class="line">    <span class="comment">// 添加一个新元素到容器里</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">ItemType</span>)</span><br><span class="line">    <span class="comment">// 获取容器中元素的数</span></span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">// 通过索引值类型为 Int 的下标检索到容器中的每一个元素</span></span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">ItemType</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// // 遵循Container协议的泛型TOS类型</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Stack</span>&lt;<span class="title class_">Element</span>&gt;: <span class="title class_">Container</span> &#123;</span><br><span class="line">    <span class="comment">// Stack&lt;Element&gt; 的原始实现部分</span></span><br><span class="line">    <span class="keyword">var</span> items <span class="operator">=</span> [<span class="type">Element</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">push</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">pop</span>() -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.removeLast()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Container 协议的实现部分</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">append</span>(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">Element</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.count</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items[i]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 扩展，将 Array 当作 Container 来使用</span></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Array</span>: <span class="title class_">Container</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">func</span> <span class="title function_">allItemsMatch</span>&lt;<span class="type">C1</span>: <span class="type">Container</span>, <span class="type">C2</span>: <span class="type">Container</span>&gt;</span><br><span class="line">    (<span class="keyword">_</span> <span class="params">someContainer</span>: <span class="type">C1</span>, <span class="keyword">_</span> <span class="params">anotherContainer</span>: <span class="type">C2</span>) -&gt; <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">where</span> <span class="type">C1</span>.<span class="type">ItemType</span> <span class="operator">==</span> <span class="type">C2</span>.<span class="type">ItemType</span>, <span class="type">C1</span>.<span class="type">ItemType</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 检查两个容器含有相同数量的元素</span></span><br><span class="line">        <span class="keyword">if</span> someContainer.count <span class="operator">!=</span> anotherContainer.count &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 检查每一对元素是否相等</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>someContainer.count &#123;</span><br><span class="line">            <span class="keyword">if</span> someContainer[i] <span class="operator">!=</span> anotherContainer[i] &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 所有元素都匹配，返回 true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tos <span class="operator">=</span> <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">tos.push(<span class="string">&quot;google&quot;</span>)</span><br><span class="line">tos.push(<span class="string">&quot;runoob&quot;</span>)</span><br><span class="line">tos.push(<span class="string">&quot;taobao&quot;</span>)</span><br><span class="line">   </span><br><span class="line"><span class="keyword">var</span> aos <span class="operator">=</span> [<span class="string">&quot;google&quot;</span>, <span class="string">&quot;runoob&quot;</span>, <span class="string">&quot;taobao&quot;</span>]</span><br><span class="line">   </span><br><span class="line"><span class="keyword">if</span> allItemsMatch(tos, aos) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;匹配所有元素&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;元素不匹配&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//匹配所有元素</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-协议</title>
      <link href="/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E5%8D%8F%E8%AE%AE/"/>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<p>协议规定了用来实现某一特定功能所必需的方法和属性。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">SomeProtocol</span> &#123;</span><br><span class="line">    <span class="comment">// 协议内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>要使类遵循某个协议，需要在类型名称后加上协议名称，中间以冒号:分隔，作为类型定义的一部分。遵循多个协议时，各协议之间用逗号,分隔。</p><span id="more"></span><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">SomeStructure</span>: <span class="title class_">FirstProtocol</span>, <span class="title class_">AnotherProtocol</span> &#123;</span><br><span class="line">    <span class="comment">// 结构体内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果类在遵循协议的同时拥有父类，应该将父类名放在协议名之前，以逗号分隔。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>: <span class="title class_">SomeSuperClass</span>, <span class="title class_">FirstProtocol</span>, <span class="title class_">AnotherProtocol</span> &#123;</span><br><span class="line">    <span class="comment">// 类的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="对属性的规定"><a href="#对属性的规定" class="headerlink" title="对属性的规定"></a>对属性的规定</h2><ul><li>协议用于指定特定的实例属性或类属性，而不用指定是存储型属性或计算型属性。此外还必须指明是只读的还是可读可写的。</li><li>协议中的通常用var来声明变量属性，在类型声明后加上{ set get }来表示属性是可读可写的，只读属性则用{ get }来表示。</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">classa</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> marks: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> result: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">attendance</span>() -&gt; <span class="type">String</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">markssecured</span>() -&gt; <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">classb</span>: <span class="title class_">classa</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> present: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> subject: <span class="type">String</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> stname: <span class="type">String</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">classc</span>: <span class="title class_">classb</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> marks <span class="operator">=</span> <span class="number">96</span></span><br><span class="line">    <span class="keyword">let</span> result <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> present <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> subject <span class="operator">=</span> <span class="string">&quot;Swift 协议&quot;</span></span><br><span class="line">    <span class="keyword">var</span> stname <span class="operator">=</span> <span class="string">&quot;Protocols&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">attendance</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;The <span class="subst">\(stname)</span> has secured 99% attendance&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">markssecured</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(stname)</span> has scored <span class="subst">\(marks)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> studdet <span class="operator">=</span> classc()</span><br><span class="line">studdet.stname <span class="operator">=</span> <span class="string">&quot;Swift&quot;</span></span><br><span class="line">studdet.marks <span class="operator">=</span> <span class="number">98</span></span><br><span class="line">studdet.markssecured()</span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(studdet.marks)</span><br><span class="line"><span class="built_in">print</span>(studdet.result)</span><br><span class="line"><span class="built_in">print</span>(studdet.present)</span><br><span class="line"><span class="built_in">print</span>(studdet.subject)</span><br><span class="line"><span class="built_in">print</span>(studdet.stname)</span><br></pre></td></tr></table></figure><h2 id="对-Mutating-方法的规定"><a href="#对-Mutating-方法的规定" class="headerlink" title="对 Mutating 方法的规定"></a>对 Mutating 方法的规定</h2><p>值类型(结构体，枚举)的实例方法中，将mutating关键字作为函数的前缀，写在func之前，表示可以在该方法中修改它所属的实例及其实例属性的值。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">daysofaweek</span> &#123;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">show</span>()</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">days</span>: <span class="title class_">daysofaweek</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> sun, mon, tue, wed, thurs, fri, sat</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">show</span>() &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .sun:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .sun</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Sunday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .mon:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .mon</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Monday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .tue:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .tue</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Tuesday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .wed:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .wed</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Wednesday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .thurs:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .thurs</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Wednesday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .fri:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .fri</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Wednesday&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> .sat:</span><br><span class="line">            <span class="keyword">self</span> <span class="operator">=</span> .sat</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Saturday&quot;</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;NO Such Day&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> res <span class="operator">=</span> days.wed</span><br><span class="line">res.show()</span><br><span class="line">  </span><br></pre></td></tr></table></figure><h2 id="协议构造器规定在类中的实现"><a href="#协议构造器规定在类中的实现" class="headerlink" title="协议构造器规定在类中的实现"></a>协议构造器规定在类中的实现</h2><p>你可以在遵循该协议的类中实现构造器，并指定其为类的指定构造器或者便利构造器。在这两种情况下，你都必须给构造器实现标上”required”修饰符：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>: <span class="title class_">SomeProtocol</span> &#123;</span><br><span class="line">   <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">someParameter</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="comment">// 构造器实现</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">tcpprotocol</span> &#123;</span><br><span class="line">   <span class="keyword">init</span>(<span class="params">aprot</span>: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">tcpClass</span>: <span class="title class_">tcpprotocol</span> &#123;</span><br><span class="line">   <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">aprot</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用required修饰符可以保证：所有的遵循该协议的子类，同样能为构造器规定提供一个显式的实现或继承实现。</p><p>如果一个子类重写了父类的指定构造器，并且该构造器遵循了某个协议的规定，那么该构造器的实现需要被同时标示required和override修饰符：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">tcpprotocol</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">mainClass</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no1: <span class="type">Int</span> <span class="comment">// 局部变量</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.no1 <span class="operator">=</span> no1 <span class="comment">// 初始化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">subClass</span>: <span class="title class_">mainClass</span>, <span class="title class_">tcpprotocol</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no2: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>, <span class="params">no2</span> : <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.no2 <span class="operator">=</span> no2</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(no1:no1)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 因为遵循协议，需要加上&quot;required&quot;; 因为继承自父类，需要加上&quot;override&quot;</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">no1</span>: <span class="type">Int</span>)  &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(no1:no1, no2:<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> res <span class="operator">=</span> mainClass(no1: <span class="number">20</span>)</span><br><span class="line"><span class="keyword">let</span> show <span class="operator">=</span> subClass(no1: <span class="number">30</span>, no2: <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(res.no1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(show.no1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;res is: <span class="subst">\(show.no2)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="协议类型"><a href="#协议类型" class="headerlink" title="协议类型"></a>协议类型</h2><p>尽管协议本身并不实现任何功能，但是协议可以被当做类型来使用。</p><p>协议可以像其他普通类型一样使用，使用场景:</p><ul><li>作为函数、方法或构造器中的参数类型或返回值类型</li><li>作为常量、变量或属性的类型</li><li>作为数组、字典或其他容器中的元素类型</li></ul><h2 id="在扩展中添加协议成员"><a href="#在扩展中添加协议成员" class="headerlink" title="在扩展中添加协议成员"></a>在扩展中添加协议成员</h2><p>我们可以可以通过扩展来扩充已存在类型( 类，结构体，枚举等)。</p><p>扩展可以为已存在的类型添加属性，方法，下标脚本，协议等成员。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">AgeClasificationProtocol</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">   <span class="keyword">func</span> <span class="title function_">agetype</span>() -&gt; <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">   <span class="keyword">let</span> firstname: <span class="type">String</span></span><br><span class="line">   <span class="keyword">let</span> lastname: <span class="type">String</span></span><br><span class="line">   <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">init</span>(<span class="params">firstname</span>: <span class="type">String</span>, <span class="params">lastname</span>: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.firstname <span class="operator">=</span> firstname</span><br><span class="line">      <span class="keyword">self</span>.lastname <span class="operator">=</span> lastname</span><br><span class="line">      <span class="keyword">self</span>.age <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Person</span> : <span class="title class_">AgeClasificationProtocol</span> &#123;</span><br><span class="line">   <span class="keyword">func</span> <span class="title function_">fullname</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> c: <span class="type">String</span></span><br><span class="line">      c <span class="operator">=</span> firstname <span class="operator">+</span> <span class="string">&quot; &quot;</span> <span class="operator">+</span> lastname</span><br><span class="line">      <span class="keyword">return</span> c</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">func</span> <span class="title function_">agetype</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span> age &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span><span class="operator">...</span><span class="number">2</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Baby&quot;</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span><span class="operator">...</span><span class="number">12</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Child&quot;</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">13</span><span class="operator">...</span><span class="number">19</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Teenager&quot;</span></span><br><span class="line">      <span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x <span class="operator">&gt;</span> <span class="number">65</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Elderly&quot;</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Normal&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="协议的继承"><a href="#协议的继承" class="headerlink" title="协议的继承"></a>协议的继承</h2><p>协议能够继承一个或多个其他协议，可以在继承的协议基础上增加新的内容要求。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">InheritingProtocol</span>: <span class="title class_">SomeProtocol</span>, <span class="title class_">AnotherProtocol</span> &#123;</span><br><span class="line">    <span class="comment">// 协议定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="类专属协议"><a href="#类专属协议" class="headerlink" title="类专属协议"></a>类专属协议</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">SomeClassOnlyProtocol</span>: <span class="title class_">class</span>, <span class="title class_">SomeInheritedProtocol</span> &#123;</span><br><span class="line">    <span class="comment">// 协议定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="协议合成"><a href="#协议合成" class="headerlink" title="协议合成"></a>协议合成</h2><p>Swift 支持合成多个协议，这在我们需要同时遵循多个协议时非常有用。</p><h2 id="检验协议的一致性"><a href="#检验协议的一致性" class="headerlink" title="检验协议的一致性"></a>检验协议的一致性</h2><p>你可以使用is和as操作符来检查是否遵循某一协议或强制转化为某一类型。</p><ul><li>is操作符用来检查实例是否遵循了某个协议。</li><li>as?返回一个可选值，当实例遵循协议时，返回该协议类型;否则返回nil。</li><li>as用以强制向下转型，如果强转失败，会引起运行时错误。</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">HasArea</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义了Circle类，都遵循了HasArea协议</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>: <span class="title class_">HasArea</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.1415927</span></span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123; <span class="keyword">return</span> pi <span class="operator">*</span> radius <span class="operator">*</span> radius &#125;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">radius</span>: <span class="type">Double</span>) &#123; <span class="keyword">self</span>.radius <span class="operator">=</span> radius &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义了Country类，都遵循了HasArea协议</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Country</span>: <span class="title class_">HasArea</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">area</span>: <span class="type">Double</span>) &#123; <span class="keyword">self</span>.area <span class="operator">=</span> area &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Animal是一个没有实现HasArea协议的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> legs: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">legs</span>: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.legs <span class="operator">=</span> legs &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> objects: [<span class="type">AnyObject</span>] <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Circle</span>(radius: <span class="number">2.0</span>),</span><br><span class="line">    <span class="type">Country</span>(area: <span class="number">243_610</span>),</span><br><span class="line">    <span class="type">Animal</span>(legs: <span class="number">4</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> object <span class="keyword">in</span> objects &#123;</span><br><span class="line">    <span class="comment">// 对迭代出的每一个元素进行检查，看它是否遵循了HasArea协议</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> objectWithArea <span class="operator">=</span> object <span class="keyword">as?</span> <span class="type">HasArea</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;面积为 <span class="subst">\(objectWithArea.area)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;没有面积&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-扩展</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%89%A9%E5%B1%95/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%89%A9%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<p>扩展就是向一个已有的类、结构体或枚举类型添加新功能。<br>扩展可以对一个类型添加新的功能，但是不能重写已有的功能。</p><p>Swift 中的扩展可以：</p><ul><li>添加计算型属性和计算型静态属性</li><li>定义实例方法和类型方法</li><li>提供新的构造器</li><li>定义下标</li><li>定义和使用新的嵌套类型</li><li>使一个已有类型符合某个协议</li></ul><span id="more"></span><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>扩展声明使用关键字 extension：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">SomeType</span> &#123;</span><br><span class="line">    <span class="comment">// 加到SomeType的新功能写到这里</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">SomeType</span>: <span class="title class_">SomeProtocol</span>, <span class="title class_">AnotherProctocol</span> &#123;</span><br><span class="line">    <span class="comment">// 协议实现写到这里</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="计算型属性"><a href="#计算型属性" class="headerlink" title="计算型属性"></a>计算型属性</h2><p>扩展可以向已有类型添加计算型实例属性和计算型类型属性。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Int</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> add: <span class="type">Int</span> &#123;<span class="keyword">return</span> <span class="keyword">self</span> <span class="operator">+</span> <span class="number">100</span> &#125;</span><br><span class="line">   <span class="keyword">var</span> sub: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> <span class="operator">-</span> <span class="number">10</span> &#125;</span><br><span class="line">   <span class="keyword">var</span> mul: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> <span class="operator">*</span> <span class="number">10</span> &#125;</span><br><span class="line">   <span class="keyword">var</span> div: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> <span class="operator">/</span> <span class="number">5</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> addition <span class="operator">=</span> <span class="number">3</span>.add</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;加法运算后的值：<span class="subst">\(addition)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> subtraction <span class="operator">=</span> <span class="number">120</span>.sub</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;减法运算后的值：<span class="subst">\(subtraction)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> multiplication <span class="operator">=</span> <span class="number">39</span>.mul</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;乘法运算后的值：<span class="subst">\(multiplication)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> division <span class="operator">=</span> <span class="number">55</span>.div</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;除法运算后的值: <span class="subst">\(division)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> mix <span class="operator">=</span> <span class="number">30</span>.add <span class="operator">+</span> <span class="number">34</span>.sub</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;混合运算结果：<span class="subst">\(mix)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><p>扩展可以向已有类型添加新的构造器。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">sum</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> num1 <span class="operator">=</span> <span class="number">100</span>, num2 <span class="operator">=</span> <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">diff</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no1 <span class="operator">=</span> <span class="number">200</span>, no2 <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">mult</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="operator">=</span> sum()</span><br><span class="line">    <span class="keyword">var</span> b <span class="operator">=</span> diff()</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">mult</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">x</span>: sum, <span class="params">y</span>: diff) &#123;</span><br><span class="line">        <span class="keyword">_</span> <span class="operator">=</span> x.num1 <span class="operator">+</span> x.num2</span><br><span class="line">        <span class="keyword">_</span> <span class="operator">=</span> y.no1 <span class="operator">+</span> y.no2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> sum(num1: <span class="number">100</span>, num2: <span class="number">200</span>)</span><br><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> diff(no1: <span class="number">200</span>, no2: <span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> getMult <span class="operator">=</span> mult(x: a, y: b)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;getMult sum<span class="subst">\(getMult.a.num1, getMult.a.num2)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;getMult diff<span class="subst">\(getMult.b.no1, getMult.b.no2)</span>&quot;</span>)   </span><br></pre></td></tr></table></figure><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>扩展可以向已有类型添加新的实例方法和类型方法。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Int</span> &#123;</span><br><span class="line">   <span class="keyword">func</span> <span class="title function_">topics</span>(<span class="params">summation</span>: () -&gt; ()) &#123;</span><br><span class="line">      <span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="keyword">self</span> &#123;</span><br><span class="line">         summation() </span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.topics(&#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;扩展模块内&quot;</span>)       </span><br><span class="line">&#125;)    </span><br><span class="line">    </span><br><span class="line"><span class="number">3</span>.topics(&#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;内型转换模块内&quot;</span>)       </span><br><span class="line">&#125;)  </span><br></pre></td></tr></table></figure><p>这个topics方法使用了一个() -&gt; ()类型的单参数，表明函数没有参数而且没有返回值。</p><h2 id="可变实例方法"><a href="#可变实例方法" class="headerlink" title="可变实例方法"></a>可变实例方法</h2><p>通过扩展添加的实例方法也可以修改该实例本身。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Double</span> &#123;</span><br><span class="line">   <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">square</span>() &#123;</span><br><span class="line">      <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.1415</span></span><br><span class="line">      <span class="keyword">self</span> <span class="operator">=</span> pi <span class="operator">*</span> <span class="keyword">self</span> <span class="operator">*</span> <span class="keyword">self</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> <span class="type">Trial1</span> <span class="operator">=</span> <span class="number">3.3</span></span><br><span class="line"><span class="type">Trial1</span>.square()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;圆的面积为: <span class="subst">\(Trial1)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> <span class="type">Trial2</span> <span class="operator">=</span> <span class="number">5.8</span></span><br><span class="line"><span class="type">Trial2</span>.square()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;圆的面积为: <span class="subst">\(Trial2)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> <span class="type">Trial3</span> <span class="operator">=</span> <span class="number">120.3</span></span><br><span class="line"><span class="type">Trial3</span>.square()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;圆的面积为: <span class="subst">\(Trial3)</span>&quot;</span>)  </span><br></pre></td></tr></table></figure><h2 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h2><p>扩展可以向一个已有类型添加新下标。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Int</span> &#123;</span><br><span class="line">   <span class="keyword">subscript</span>(<span class="params">var</span> <span class="params">multtable</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> no1 <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">      <span class="keyword">while</span> multtable <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">         no1 <span class="operator">*=</span> <span class="number">10</span></span><br><span class="line">         <span class="operator">--</span>multtable</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">self</span> <span class="operator">/</span> no1) <span class="operator">%</span> <span class="number">10</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="number">12</span>[<span class="number">0</span>])  <span class="comment">//2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">7869</span>[<span class="number">1</span>]) <span class="comment">//6</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">786543</span>[<span class="number">2</span>]) <span class="comment">//5      </span></span><br></pre></td></tr></table></figure><h2 id="嵌套类型"><a href="#嵌套类型" class="headerlink" title="嵌套类型"></a>嵌套类型</h2><p>扩展可以向已有的类、结构体和枚举添加新的嵌套类型：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Int</span> &#123;</span><br><span class="line">   <span class="keyword">enum</span> <span class="title class_">calc</span></span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">case</span> add</span><br><span class="line">      <span class="keyword">case</span> sub</span><br><span class="line">      <span class="keyword">case</span> mult</span><br><span class="line">      <span class="keyword">case</span> div</span><br><span class="line">      <span class="keyword">case</span> anything</span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="keyword">var</span> print: calc &#123;</span><br><span class="line">      <span class="keyword">switch</span> <span class="keyword">self</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> .add</span><br><span class="line">         <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> .sub</span><br><span class="line">         <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> .mult</span><br><span class="line">         <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> .div</span><br><span class="line">         <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> .anything</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">func</span> <span class="title function_">result</span>(<span class="params">numb</span>: [<span class="type">Int</span>]) &#123;</span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> numb &#123;</span><br><span class="line">      <span class="keyword">switch</span> i.print &#123;</span><br><span class="line">         <span class="keyword">case</span> .add:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot; 10 &quot;</span>)</span><br><span class="line">          <span class="keyword">case</span> .sub:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot; 20 &quot;</span>)</span><br><span class="line">         <span class="keyword">case</span> .mult:</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot; 30 &quot;</span>)</span><br><span class="line">         <span class="keyword">case</span> .div:</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot; 40 &quot;</span>)</span><br><span class="line">         <span class="keyword">default</span>:</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot; 50 &quot;</span>)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">result([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>])</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-类型转换</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<p>Swift 中类型转换使用 is 和 as 操作符实现，is 用于检测值的类型，as 用于转换类型。</p><h2 id="检查类型"><a href="#检查类型" class="headerlink" title="检查类型"></a>检查类型</h2><p>类型检查使用 is 关键字。</p><p>操作符 is 来检查一个实例是否属于特定子类型。若实例属于那个子类型，类型检查操作符返回 true，否则返回 false。</p><span id="more"></span><h2 id="向下转型"><a href="#向下转型" class="headerlink" title="向下转型"></a>向下转型</h2><p>向下转型，用类型转换操作符(as? 或 as!)</p><ul><li><p>当你不确定向下转型可以成功时，用类型转换的条件形式(as?)。条件形式的类型转换总是返回一个可选值（optional value），并且若下转是不可能的，可选值将是 nil。</p></li><li><p>只有你可以确定向下转型一定会成功时，才使用强制形式(as!)。当你试图向下转型为一个不正确的类型时，强制形式的类型转换会触发一个运行时错误。</p></li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.physics <span class="operator">=</span> physics</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Chemistry</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">equations</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.equations <span class="operator">=</span> equations</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Maths</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">formulae</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.formulae <span class="operator">=</span> formulae</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sa <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;热物理学&quot;</span>, equations: <span class="string">&quot;分贝&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;天体物理学&quot;</span>, formulae: <span class="string">&quot;兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;微分方程&quot;</span>, formulae: <span class="string">&quot;余弦级数&quot;</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplechem <span class="operator">=</span> <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplechem.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例方程式: <span class="subst">\(samplechem.equations)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplemaths <span class="operator">=</span> <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplemaths.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例公式是: <span class="subst">\(samplemaths.formulae)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> chemCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> mathsCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> sa &#123;</span><br><span class="line">    <span class="comment">// 类型转换的条件形式</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Chemistry</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;化学主题是: &#x27;<span class="subst">\(show.physics)</span>&#x27;, <span class="subst">\(show.equations)</span>&quot;</span>)</span><br><span class="line">        <span class="comment">// 强制形式</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Maths</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数学主题是: &#x27;<span class="subst">\(example.physics)</span>&#x27;,  <span class="subst">\(example.formulae)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Any和AnyObject的类型转换"><a href="#Any和AnyObject的类型转换" class="headerlink" title="Any和AnyObject的类型转换"></a>Any和AnyObject的类型转换</h2><p>Swift为不确定类型提供了两种特殊类型别名：</p><ul><li>AnyObject可以代表任何class类型的实例。</li><li>Any可以表示任何类型，包括方法类型（function types）。</li></ul><h3 id="Any-实例"><a href="#Any-实例" class="headerlink" title="Any 实例"></a>Any 实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.physics <span class="operator">=</span> physics</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Chemistry</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">equations</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.equations <span class="operator">=</span> equations</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Maths</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">formulae</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.formulae <span class="operator">=</span> formulae</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sa <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;热物理学&quot;</span>, equations: <span class="string">&quot;分贝&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;天体物理学&quot;</span>, formulae: <span class="string">&quot;兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;微分方程&quot;</span>, formulae: <span class="string">&quot;余弦级数&quot;</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplechem <span class="operator">=</span> <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplechem.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例方程式: <span class="subst">\(samplechem.equations)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplemaths <span class="operator">=</span> <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplemaths.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例公式是: <span class="subst">\(samplemaths.formulae)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> chemCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> mathsCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> sa &#123;</span><br><span class="line">    <span class="comment">// 类型转换的条件形式</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Chemistry</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;化学主题是: &#x27;<span class="subst">\(show.physics)</span>&#x27;, <span class="subst">\(show.equations)</span>&quot;</span>)</span><br><span class="line">        <span class="comment">// 强制形式</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Maths</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数学主题是: &#x27;<span class="subst">\(example.physics)</span>&#x27;,  <span class="subst">\(example.formulae)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以存储Any类型的数组 exampleany</span></span><br><span class="line"><span class="keyword">var</span> exampleany <span class="operator">=</span> [<span class="keyword">Any</span>]()</span><br><span class="line"></span><br><span class="line">exampleany.append(<span class="number">12</span>)</span><br><span class="line">exampleany.append(<span class="number">3.14159</span>)</span><br><span class="line">exampleany.append(<span class="string">&quot;Any 实例&quot;</span>)</span><br><span class="line">exampleany.append(<span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;兆赫&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item2 <span class="keyword">in</span> exampleany &#123;</span><br><span class="line">    <span class="keyword">switch</span> item2 &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someInt <span class="keyword">as</span> <span class="type">Int</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;整型值为 <span class="subst">\(someInt)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someDouble <span class="keyword">as</span> <span class="type">Double</span> <span class="keyword">where</span> someDouble <span class="operator">&gt;</span> <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Pi 值为 <span class="subst">\(someDouble)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someString <span class="keyword">as</span> <span class="type">String</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(someString)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> phy <span class="keyword">as</span> <span class="type">Chemistry</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;主题 &#x27;<span class="subst">\(phy.physics)</span>&#x27;, <span class="subst">\(phy.equations)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;None&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AnyObject-实例"><a href="#AnyObject-实例" class="headerlink" title="AnyObject 实例"></a>AnyObject 实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.physics <span class="operator">=</span> physics</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Chemistry</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">equations</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.equations <span class="operator">=</span> equations</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Maths</span>: <span class="title class_">Subjects</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">physics</span>: <span class="type">String</span>, <span class="params">formulae</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.formulae <span class="operator">=</span> formulae</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [AnyObject] 类型的数组</span></span><br><span class="line"><span class="keyword">let</span> saprint: [<span class="type">AnyObject</span>] <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Chemistry</span>(physics: <span class="string">&quot;热物理学&quot;</span>, equations: <span class="string">&quot;分贝&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;天体物理学&quot;</span>, formulae: <span class="string">&quot;兆赫&quot;</span>),</span><br><span class="line">    <span class="type">Maths</span>(physics: <span class="string">&quot;微分方程&quot;</span>, formulae: <span class="string">&quot;余弦级数&quot;</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplechem <span class="operator">=</span> <span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;赫兹&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplechem.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例方程式: <span class="subst">\(samplechem.equations)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> samplemaths <span class="operator">=</span> <span class="type">Maths</span>(physics: <span class="string">&quot;流体动力学&quot;</span>, formulae: <span class="string">&quot;千兆赫&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例物理学是: <span class="subst">\(samplemaths.physics)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例公式是: <span class="subst">\(samplemaths.formulae)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> chemCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> mathsCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> saprint &#123;</span><br><span class="line">    <span class="comment">// 类型转换的条件形式</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Chemistry</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;化学主题是: &#x27;<span class="subst">\(show.physics)</span>&#x27;, <span class="subst">\(show.equations)</span>&quot;</span>)</span><br><span class="line">        <span class="comment">// 强制形式</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example <span class="operator">=</span> item <span class="keyword">as?</span> <span class="type">Maths</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数学主题是: &#x27;<span class="subst">\(example.physics)</span>&#x27;,  <span class="subst">\(example.formulae)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> exampleany <span class="operator">=</span> [<span class="keyword">Any</span>]()</span><br><span class="line">exampleany.append(<span class="number">12</span>)</span><br><span class="line">exampleany.append(<span class="number">3.14159</span>)</span><br><span class="line">exampleany.append(<span class="string">&quot;Any 实例&quot;</span>)</span><br><span class="line">exampleany.append(<span class="type">Chemistry</span>(physics: <span class="string">&quot;固体物理&quot;</span>, equations: <span class="string">&quot;兆赫&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item2 <span class="keyword">in</span> exampleany &#123;</span><br><span class="line">    <span class="keyword">switch</span> item2 &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someInt <span class="keyword">as</span> <span class="type">Int</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;整型值为 <span class="subst">\(someInt)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someDouble <span class="keyword">as</span> <span class="type">Double</span> <span class="keyword">where</span> someDouble <span class="operator">&gt;</span> <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Pi 值为 <span class="subst">\(someDouble)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someString <span class="keyword">as</span> <span class="type">String</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(someString)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> phy <span class="keyword">as</span> <span class="type">Chemistry</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;主题 &#x27;<span class="subst">\(phy.physics)</span>&#x27;, <span class="subst">\(phy.equations)</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;None&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在一个switch语句的case中使用强制形式的类型转换操作符（as, 而不是 as?）来检查和转换到一个明确的类型。</p>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-自动引用计数</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%8A%A8%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%8A%A8%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>Swift 使用自动引用计数（ARC）这一机制来跟踪和管理应用程序的内存<br>通常情况下我们不需要去手动释放内存，因为 ARC 会在类的实例不再被使用时，自动释放其占用的内存。<br>但在有些时候我们还是需要在代码中实现内存管理。</p><h2 id="ARC-功能"><a href="#ARC-功能" class="headerlink" title="ARC 功能"></a>ARC 功能</h2><ul><li>当每次使用 init() 方法创建一个类的新的实例的时候，ARC 会分配一大块内存用来储存实例的信息。</li><li>内存中会包含实例的类型信息，以及这个实例所有相关属性的值。</li><li>当实例不再被使用时，ARC 释放实例所占用的内存，并让释放的内存能挪作他用。</li><li>为了确保使用中的实例不会被销毁，ARC 会跟踪和计算每一个实例正在被多少属性，常量和变量所引用。</li><li>实例赋值给属性、常量或变量，它们都会创建此实例的强引用，只要强引用还在，实例是不允许被销毁的。</li></ul><span id="more"></span><h2 id="类实例之间的循环强引用"><a href="#类实例之间的循环强引用" class="headerlink" title="类实例之间的循环强引用"></a>类实例之间的循环强引用</h2><p>这种情况发生在两个类实例互相保持对方的强引用，并让对方不被销毁。这就是所谓的循环强引用。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">    <span class="keyword">var</span> apartment: <span class="type">Apartment</span>?</span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span> 被析构&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apartment</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> number: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">number</span>: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.number <span class="operator">=</span> number &#125;</span><br><span class="line">    <span class="keyword">var</span> tenant: <span class="type">Person</span>?</span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;Apartment #<span class="subst">\(number)</span> 被析构&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个变量都被初始化为nil</span></span><br><span class="line"><span class="keyword">var</span> runoob: <span class="type">Person</span>?</span><br><span class="line"><span class="keyword">var</span> number73: <span class="type">Apartment</span>?</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">runoob <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Runoob&quot;</span>)</span><br><span class="line">number73 <span class="operator">=</span> <span class="type">Apartment</span>(number: <span class="number">73</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 意感叹号是用来展开和访问可选变量 runoob 和 number73 中的实例</span></span><br><span class="line"><span class="comment">// 循环强引用被创建</span></span><br><span class="line">runoob<span class="operator">!</span>.apartment <span class="operator">=</span> number73</span><br><span class="line">number73<span class="operator">!</span>.tenant <span class="operator">=</span> runoob</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断开 runoob 和 number73 变量所持有的强引用时，引用计数并不会降为 0，实例也不会被 ARC 销毁</span></span><br><span class="line"><span class="comment">// 注意，当你把这两个变量设为nil时，没有任何一个析构函数被调用。</span></span><br><span class="line"><span class="comment">// 强引用循环阻止了Person和Apartment类实例的销毁，并在你的应用程序中造成了内存泄漏</span></span><br><span class="line">runoob <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">number73 <span class="operator">=</span> <span class="literal">nil</span></span><br></pre></td></tr></table></figure><h3 id="解决实例之间的循环强引用"><a href="#解决实例之间的循环强引用" class="headerlink" title="解决实例之间的循环强引用"></a>解决实例之间的循环强引用</h3><p>Swift 提供了两种办法用来解决你在使用类的属性时所遇到的循环强引用问题：</p><ul><li>弱引用</li><li>无主引用</li></ul><h4 id="弱引用实例"><a href="#弱引用实例" class="headerlink" title="弱引用实例"></a>弱引用实例</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">    <span class="keyword">var</span> sub: <span class="type">SubModule</span>?</span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span> 主模块&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubModule</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> number: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">number</span>: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.number <span class="operator">=</span> number &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//weak修饰变量</span></span><br><span class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> topic: <span class="type">Module</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;子模块 topic 数为 <span class="subst">\(number)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> toc: <span class="type">Module</span>?</span><br><span class="line"><span class="keyword">var</span> list: <span class="type">SubModule</span>?</span><br><span class="line">toc <span class="operator">=</span> <span class="type">Module</span>(name: <span class="string">&quot;ARC&quot;</span>)</span><br><span class="line">list <span class="operator">=</span> <span class="type">SubModule</span>(number: <span class="number">4</span>)</span><br><span class="line">toc<span class="operator">!</span>.sub <span class="operator">=</span> list</span><br><span class="line">list<span class="operator">!</span>.topic <span class="operator">=</span> toc</span><br><span class="line"></span><br><span class="line">toc <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">list <span class="operator">=</span> <span class="literal">nil</span></span><br></pre></td></tr></table></figure><h4 id="无主引用实例"><a href="#无主引用实例" class="headerlink" title="无主引用实例"></a>无主引用实例</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> section: <span class="type">Marks</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Marks</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> marks: <span class="type">Int</span></span><br><span class="line">    <span class="comment">//unowned修饰变量</span></span><br><span class="line">    <span class="keyword">unowned</span> <span class="keyword">let</span> stname: <span class="type">Student</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">marks</span>: <span class="type">Int</span>, <span class="params">stname</span>: <span class="type">Student</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.marks <span class="operator">=</span> marks</span><br><span class="line">        <span class="keyword">self</span>.stname <span class="operator">=</span> stname</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">&quot;学生的分数为 <span class="subst">\(marks)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> module: <span class="type">Student</span>?</span><br><span class="line">module <span class="operator">=</span> <span class="type">Student</span>(name: <span class="string">&quot;ARC&quot;</span>)</span><br><span class="line">module<span class="operator">!</span>.section <span class="operator">=</span> <span class="type">Marks</span>(marks: <span class="number">98</span>, stname: module<span class="operator">!</span>)</span><br><span class="line">module <span class="operator">=</span> <span class="literal">nil</span></span><br></pre></td></tr></table></figure><h3 id="闭包引起的循环强引用"><a href="#闭包引起的循环强引用" class="headerlink" title="闭包引起的循环强引用"></a>闭包引起的循环强引用</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HTMLElement</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text <span class="operator">=</span> <span class="keyword">self</span>.text &#123;</span><br><span class="line">            <span class="comment">//闭包强引用了self。</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;<span class="subst">\(text)</span>&lt;/<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span> /&gt;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">text</span>: <span class="type">String</span>? <span class="operator">=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.text <span class="operator">=</span> text</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span> is being deinitialized&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例并打印信息</span></span><br><span class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? <span class="operator">=</span> <span class="type">HTMLElement</span>(name: <span class="string">&quot;p&quot;</span>, text: <span class="string">&quot;hello, world&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(paragraph<span class="operator">!</span>.asHTML())</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HTMLElement</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="comment">//这里</span></span><br><span class="line">        [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text <span class="operator">=</span> <span class="keyword">self</span>.text &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;<span class="subst">\(text)</span>&lt;/<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span> /&gt;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">text</span>: <span class="type">String</span>? <span class="operator">=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.text <span class="operator">=</span> text</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span> 被析构&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并打印HTMLElement实例</span></span><br><span class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? <span class="operator">=</span> <span class="type">HTMLElement</span>(name: <span class="string">&quot;p&quot;</span>, text: <span class="string">&quot;hello, world&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(paragraph<span class="operator">!</span>.asHTML())</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTMLElement实例将会被销毁，并能看到它的析构函数打印出的消息</span></span><br><span class="line">paragraph <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&lt;p&gt;hello, world&lt;/p&gt;</span></span><br><span class="line"><span class="comment">//p 被析构</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-可选链</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%8F%AF%E9%80%89%E9%93%BE/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%8F%AF%E9%80%89%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="！"><a href="#！" class="headerlink" title="！"></a>！</h2><p>使用感叹号(!)可选链实例</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Residence</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> numberOfRooms <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> john <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">  </span><br><span class="line"><span class="comment">//将导致运行时错误</span></span><br><span class="line"><span class="keyword">let</span> roomCount <span class="operator">=</span> john.residence<span class="operator">!</span>.numberOfRooms</span><br><span class="line">  </span><br><span class="line"><span class="comment">//fatal error: unexpectedly found nil while unwrapping an Optional value</span></span><br></pre></td></tr></table></figure><p>想使用感叹号（!）强制解析获得这个人residence属性numberOfRooms属性值，将会引发运行时错误，因为这时没有可以供解析的residence值。</p><span id="more"></span><h2 id="？"><a href="#？" class="headerlink" title="？"></a>？</h2><p>使用问号(?)可选链实例</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Residence</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> numberOfRooms <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> john <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 链接可选residence?属性，如果residence存在则取回numberOfRooms的值</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> roomCount <span class="operator">=</span> john.residence<span class="operator">?</span>.numberOfRooms &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;John 的房间号为 <span class="subst">\(roomCount)</span>。&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不能查看房间号&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//不能查看房间号</span></span><br></pre></td></tr></table></figure><h2 id="连接多层链接"><a href="#连接多层链接" class="headerlink" title="连接多层链接"></a>连接多层链接</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 定义了一个变量 rooms，它被初始化为一个Room[]类型的空数组</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Residence</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> rooms <span class="operator">=</span> [<span class="type">Room</span>]()</span><br><span class="line">    <span class="keyword">var</span> numberOfRooms: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rooms.count</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">Room</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rooms[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">printNumberOfRooms</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;房间号为 <span class="subst">\(numberOfRooms)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> address: <span class="type">Address</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// Room 定义一个name属性和一个设定room名的初始化器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Room</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 模型中的最终类叫做Address</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> buildingName: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">var</span> buildingNumber: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">var</span> street: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">buildingIdentifier</span>() -&gt; <span class="type">String</span>? &#123;</span><br><span class="line">        <span class="keyword">if</span> (buildingName <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buildingName</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (buildingNumber <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buildingNumber</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> john <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> johnsStreet <span class="operator">=</span> john.residence<span class="operator">?</span>.address<span class="operator">?</span>.street &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;John 的地址为 <span class="subst">\(johnsStreet)</span>.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不能检索地址&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//不能检索地址</span></span><br></pre></td></tr></table></figure><h2 id="对返回可选值的函数进行链接"><a href="#对返回可选值的函数进行链接" class="headerlink" title="对返回可选值的函数进行链接"></a>对返回可选值的函数进行链接</h2><p>我们还可以通过可选链接来调用返回可空值的方法，并且可以继续对可选值进行链接。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 定义了一个变量 rooms，它被初始化为一个Room[]类型的空数组</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Residence</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> rooms <span class="operator">=</span> [<span class="type">Room</span>]()</span><br><span class="line">    <span class="keyword">var</span> numberOfRooms: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rooms.count</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">i</span>: <span class="type">Int</span>) -&gt; <span class="type">Room</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rooms[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">printNumberOfRooms</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;房间号为 <span class="subst">\(numberOfRooms)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> address: <span class="type">Address</span>?</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// Room 定义一个name属性和一个设定room名的初始化器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Room</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 模型中的最终类叫做Address</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> buildingName: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">var</span> buildingNumber: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">var</span> street: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">buildingIdentifier</span>() -&gt; <span class="type">String</span>? &#123;</span><br><span class="line">        <span class="keyword">if</span> (buildingName <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buildingName</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (buildingNumber <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buildingNumber</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> john <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> john.residence<span class="operator">?</span>.printNumberOfRooms() <span class="operator">!=</span> <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;指定了房间号)&quot;</span>)</span><br><span class="line">&#125;  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;未指定房间号&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//未指定房间号</span></span><br></pre></td></tr></table></figure><p>上例中，对Residence的函数printNumberOfRooms进行链接。</p>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-析构过程</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%90%E6%9E%84%E8%BF%87%E7%A8%8B/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%90%E6%9E%84%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>在一个类的实例被释放之前，析构函数被立即调用。</p><p>用关键字<strong>deinit</strong>来标示析构函数，类似于初始化函数用init来标示。析构函数只适用于类类型。</p><ul><li>Swift 会自动释放不再需要的实例以释放资源。</li><li>Swift 通过自动引用计数（ARC）处理实例的内存管理。</li><li>通常当你的实例被释放时不需要手动地去清理。但是，当使用自己的资源时，你可能需要进行一些额外的清理。</li></ul><span id="more"></span><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// 引用计数器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaseClass</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        counter <span class="operator">+=</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        counter <span class="operator">-=</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> show: <span class="type">BaseClass</span>? <span class="operator">=</span> <span class="type">BaseClass</span>()</span><br><span class="line"><span class="built_in">print</span>(counter)</span><br><span class="line">show <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(counter)</span><br><span class="line"></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-继承</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%A7%E6%89%BF/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>在 Swift 中，类可以调用和访问超类的方法，属性和下标脚本，并且可以重写它们。</p><h2 id="基类"><a href="#基类" class="headerlink" title="基类"></a>基类</h2><p>没有继承其它类的类，称之为基类（Base Class）。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StudDetails</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> stname: <span class="type">String</span>!</span><br><span class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span>!</span><br><span class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span>!</span><br><span class="line">    <span class="keyword">var</span> mark3: <span class="type">Int</span>!</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">stname</span>: <span class="type">String</span>, <span class="params">mark1</span>: <span class="type">Int</span>, <span class="params">mark2</span>: <span class="type">Int</span>, <span class="params">mark3</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.stname <span class="operator">=</span> stname</span><br><span class="line">        <span class="keyword">self</span>.mark1 <span class="operator">=</span> mark1</span><br><span class="line">        <span class="keyword">self</span>.mark2 <span class="operator">=</span> mark2</span><br><span class="line">        <span class="keyword">self</span>.mark3 <span class="operator">=</span> mark3</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> stname <span class="operator">=</span> <span class="string">&quot;swift&quot;</span></span><br><span class="line"><span class="keyword">let</span> mark1 <span class="operator">=</span> <span class="number">98</span></span><br><span class="line"><span class="keyword">let</span> mark2 <span class="operator">=</span> <span class="number">89</span></span><br><span class="line"><span class="keyword">let</span> mark3 <span class="operator">=</span> <span class="number">76</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> sds <span class="operator">=</span> <span class="type">StudDetails</span>(stname:stname, mark1:mark1, mark2:mark2, mark3:mark3);</span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(sds.stname)</span><br><span class="line"><span class="built_in">print</span>(sds.mark1)</span><br><span class="line"><span class="built_in">print</span>(sds.mark2)</span><br><span class="line"><span class="built_in">print</span>(sds.mark3)</span><br><span class="line"><span class="comment">//swift</span></span><br><span class="line"><span class="comment">//98</span></span><br><span class="line"><span class="comment">//89</span></span><br><span class="line"><span class="comment">//76</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h2><p>子类指的是在一个已有类的基础上创建一个新的类。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>: <span class="title class_">SomeSuperclass</span> &#123;</span><br><span class="line">    <span class="comment">// 类的定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StudDetails</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span>;</span><br><span class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">stm1</span>:<span class="type">Int</span>, <span class="params">results</span> <span class="params">stm2</span>:<span class="type">Int</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        mark1 <span class="operator">=</span> stm1;</span><br><span class="line">        mark2 <span class="operator">=</span> stm2;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">show</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Mark1:<span class="subst">\(<span class="keyword">self</span>.mark1)</span>, Mark2:<span class="subst">\(<span class="keyword">self</span>.mark2)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tom</span> : <span class="title class_">StudDetails</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">init</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(stm1: <span class="number">93</span>, results: <span class="number">89</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> tom <span class="operator">=</span> <span class="type">Tom</span>()</span><br><span class="line">tom.show()</span><br><span class="line">  </span><br><span class="line"><span class="comment">//Mark1:93, Mark2:89</span></span><br></pre></td></tr></table></figure><h2 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h2><p>子类可以通过继承来的实例方法，类方法，实例属性，或下标脚本来实现自己的定制功能，我们把这种行为叫重写（overriding）。</p><table><thead><tr><th align="left">重写</th><th align="left">访问方法，属性，下标脚本</th></tr></thead><tbody><tr><td align="left">方法</td><td align="left">super.somemethod()</td></tr><tr><td align="left">属性</td><td align="left">super.someProperty()</td></tr><tr><td align="left">下标脚本</td><td align="left">super[someIndex]</td></tr></tbody></table><h3 id="重写方法和属性"><a href="#重写方法和属性" class="headerlink" title="重写方法和属性"></a>重写方法和属性</h3><h4 id="重写方法"><a href="#重写方法" class="headerlink" title="重写方法"></a>重写方法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SuperClass</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">show</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;这是超类 SuperClass&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubClass</span>: <span class="title class_">SuperClass</span>  &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">show</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;这是子类 SubClass&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> superClass <span class="operator">=</span> <span class="type">SuperClass</span>()</span><br><span class="line">superClass.show()</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> subClass <span class="operator">=</span> <span class="type">SubClass</span>()</span><br><span class="line">subClass.show()</span><br><span class="line">  </span><br><span class="line"><span class="comment">//这是超类 SuperClass</span></span><br><span class="line"><span class="comment">//这是子类 SubClass</span></span><br></pre></td></tr></table></figure><h4 id="重写属性"><a href="#重写属性" class="headerlink" title="重写属性"></a>重写属性</h4><p>注意点：</p><ul><li>如果你在重写属性中提供了 setter，那么你也一定要提供 getter。</li><li>如果你不想在重写版本中的 getter 里修改继承来的属性值，你可以直接通过super.someProperty来返回继承来的值，其中someProperty是你要重写的属性的名字。</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> radius <span class="operator">=</span> <span class="number">12.5</span></span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;矩形半径 <span class="subst">\(radius)</span> &quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 继承超类 Circle</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span>: <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> print <span class="operator">=</span> <span class="number">7</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> area: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.area <span class="operator">+</span> <span class="string">&quot; ，但现在被重写为 <span class="subst">\(print)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> rect <span class="operator">=</span> <span class="type">Rectangle</span>()</span><br><span class="line">rect.radius <span class="operator">=</span> <span class="number">25.0</span></span><br><span class="line">rect.print <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Radius <span class="subst">\(rect.area)</span>&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment">//Radius 矩形半径 25.0  ，但现在被重写为 3</span></span><br></pre></td></tr></table></figure><h3 id="写属性观察器"><a href="#写属性观察器" class="headerlink" title="写属性观察器"></a>写属性观察器</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> radius <span class="operator">=</span> <span class="number">12.5</span></span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;矩形半径为 <span class="subst">\(radius)</span> &quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span>: <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> print <span class="operator">=</span> <span class="number">7</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> area: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.area <span class="operator">+</span> <span class="string">&quot; ，但现在被重写为 <span class="subst">\(print)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> rect <span class="operator">=</span> <span class="type">Rectangle</span>()</span><br><span class="line">rect.radius <span class="operator">=</span> <span class="number">25.0</span></span><br><span class="line">rect.print <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;半径: <span class="subst">\(rect.area)</span>&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span>: <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="comment">//重写didSet</span></span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            print <span class="operator">=</span> <span class="type">Int</span>(radius<span class="operator">/</span><span class="number">5.0</span>)<span class="operator">+</span><span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> sq <span class="operator">=</span> <span class="type">Square</span>()</span><br><span class="line">sq.radius <span class="operator">=</span> <span class="number">100.0</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;半径: <span class="subst">\(sq.area)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="防止重写"><a href="#防止重写" class="headerlink" title="防止重写"></a>防止重写</h3><p>我们可以使用 final 关键字防止它们被重写</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">var</span> radius <span class="operator">=</span> <span class="number">12.5</span></span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;矩形半径为 <span class="subst">\(radius)</span> &quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-下标脚本</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E4%B8%8B%E6%A0%87%E8%84%9A%E6%9C%AC/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E4%B8%8B%E6%A0%87%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>定义下标脚本使用subscript关键字，显式声明入参（一个或多个）和返回类型。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">subscript</span>(<span class="params">index</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">        <span class="comment">// 用于下标脚本值的声明</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span>(newValue) &#123;</span><br><span class="line">        <span class="comment">// 执行赋值操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">subscript</span>(<span class="params">index</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> index<span class="operator">*</span><span class="number">4</span>   <span class="comment">// 用于下标脚本值的声明</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">subexample</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> decrementer: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">index</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> decrementer <span class="operator">/</span> index</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> division <span class="operator">=</span> subexample(decrementer: <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;100 除以 9 等于 <span class="subst">\(division[<span class="number">9</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;100 除以 2 等于 <span class="subst">\(division[<span class="number">2</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;100 除以 3 等于 <span class="subst">\(division[<span class="number">3</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;100 除以 5 等于 <span class="subst">\(division[<span class="number">5</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;100 除以 7 等于 <span class="subst">\(division[<span class="number">7</span>])</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="实例2"><a href="#实例2" class="headerlink" title="实例2"></a>实例2</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">daysofaweek</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> days <span class="operator">=</span> [<span class="string">&quot;Sunday&quot;</span>, <span class="string">&quot;Monday&quot;</span>, <span class="string">&quot;Tuesday&quot;</span>, <span class="string">&quot;Wednesday&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Thursday&quot;</span>, <span class="string">&quot;Friday&quot;</span>, <span class="string">&quot;saturday&quot;</span>]</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">index</span>: <span class="type">Int</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> days[index]   <span class="comment">// 声明下标脚本的值</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(newValue) &#123;</span><br><span class="line">            <span class="keyword">self</span>.days[index] <span class="operator">=</span> newValue   <span class="comment">// 执行赋值操作</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p <span class="operator">=</span> daysofaweek()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">3</span>])</span><br></pre></td></tr></table></figure><h2 id="下标脚本选项"><a href="#下标脚本选项" class="headerlink" title="下标脚本选项"></a>下标脚本选项</h2><ul><li>下标脚本允许任意数量的入参索引，并且每个入参类型也没有限制。</li><li>下标脚本的返回值也可以是任何类型。</li><li>下标脚本可以使用变量参数和可变参数。</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Matrix</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> print: [<span class="type">Double</span>]</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">rows</span>: <span class="type">Int</span>, <span class="params">columns</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.rows <span class="operator">=</span> rows</span><br><span class="line">        <span class="keyword">self</span>.columns <span class="operator">=</span> columns</span><br><span class="line">        print <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0.0</span>, count: rows <span class="operator">*</span> columns)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">row</span>: <span class="type">Int</span>, <span class="params">column</span>: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> print[(row <span class="operator">*</span> columns) <span class="operator">+</span> column]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            print[(row <span class="operator">*</span> columns) <span class="operator">+</span> column] <span class="operator">=</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建了一个新的 3 行 3 列的Matrix实例</span></span><br><span class="line"><span class="keyword">var</span> mat <span class="operator">=</span> <span class="type">Matrix</span>(rows: <span class="number">3</span>, columns: <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过下标脚本设置值</span></span><br><span class="line">mat[<span class="number">0</span>,<span class="number">0</span>] <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line">mat[<span class="number">0</span>,<span class="number">1</span>] <span class="operator">=</span> <span class="number">2.0</span></span><br><span class="line">mat[<span class="number">1</span>,<span class="number">0</span>] <span class="operator">=</span> <span class="number">3.0</span></span><br><span class="line">mat[<span class="number">1</span>,<span class="number">1</span>] <span class="operator">=</span> <span class="number">5.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过下标脚本获取值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mat[<span class="number">0</span>,<span class="number">0</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mat[<span class="number">0</span>,<span class="number">1</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mat[<span class="number">1</span>,<span class="number">0</span>])</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mat[<span class="number">1</span>,<span class="number">1</span>])</span>&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-方法</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%96%B9%E6%B3%95/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><p>在 Swift 语言中，实例方法是属于某个特定类、结构体或者枚举类型实例的方法。<br>实例方法提供以下方法：</p><ul><li>可以访问和修改实例属性</li><li>提供与实例目的相关的功能</li></ul><p>实例方法要写在它所属的类型的前后大括号({})之间。<br>实例方法能够隐式访问它所属类型的所有的其他实例方法和属性。<br>实例方法只能被它所属的类的某个特定实例调用。<br>实例方法不能脱离于现存的实例而被调用。</p><span id="more"></span><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> count <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">increment</span>() &#123;</span><br><span class="line">        count <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">incrementBy</span>(<span class="params">amount</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        count <span class="operator">+=</span> amount</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">reset</span>() &#123;</span><br><span class="line">        count <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 初始计数值是0</span></span><br><span class="line"><span class="keyword">let</span> counter <span class="operator">=</span> <span class="type">Counter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数值现在是1</span></span><br><span class="line">counter.increment()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数值现在是6</span></span><br><span class="line">counter.incrementBy(amount: <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(counter.count)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数值现在是0</span></span><br><span class="line">counter.reset()</span><br><span class="line"><span class="built_in">print</span>(counter.count)</span><br></pre></td></tr></table></figure><h2 id="方法的局部参数名称和外部参数名称"><a href="#方法的局部参数名称和外部参数名称" class="headerlink" title="方法的局部参数名称和外部参数名称"></a>方法的局部参数名称和外部参数名称</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">multiplication</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">incrementBy</span>(<span class="params">first</span> <span class="params">no1</span>: <span class="type">Int</span>, <span class="params">no2</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        count <span class="operator">=</span> no1 <span class="operator">*</span> no2</span><br><span class="line">        <span class="built_in">print</span>(count)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter <span class="operator">=</span> multiplication()</span><br><span class="line">counter.incrementBy(first: <span class="number">800</span>, no2: <span class="number">3</span>)</span><br><span class="line">counter.incrementBy(first: <span class="number">100</span>, no2: <span class="number">5</span>)</span><br><span class="line">counter.incrementBy(first: <span class="number">15000</span>, no2: <span class="number">3</span>)</span><br><span class="line"><span class="comment">//我们呢也可以使用下划线（_）设置第二个及后续的参数不提供一个外部名称。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="self-属性"><a href="#self-属性" class="headerlink" title="self 属性"></a>self 属性</h2><p>类型的每一个实例都有一个隐含属性叫做self，self 完全等同于该实例本身。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">calculations</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> b: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> res: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">a</span>: <span class="type">Int</span>, <span class="params">b</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.a <span class="operator">=</span> a</span><br><span class="line">        <span class="keyword">self</span>.b <span class="operator">=</span> b</span><br><span class="line">        res <span class="operator">=</span> a <span class="operator">+</span> b</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Self 内: <span class="subst">\(res)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">tot</span>(<span class="params">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res <span class="operator">-</span> c</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">result</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;结果为: <span class="subst">\(tot(c: <span class="number">20</span>))</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;结果为: <span class="subst">\(tot(c: <span class="number">50</span>))</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pri <span class="operator">=</span> calculations(a: <span class="number">600</span>, b: <span class="number">300</span>)</span><br><span class="line"><span class="keyword">let</span> sum <span class="operator">=</span> calculations(a: <span class="number">1200</span>, b: <span class="number">300</span>)</span><br><span class="line"></span><br><span class="line">pri.result()</span><br><span class="line">sum.result()</span><br><span class="line"><span class="comment">//Self 内: 900</span></span><br><span class="line"><span class="comment">//Self 内: 1500</span></span><br><span class="line"><span class="comment">//结果为: 880</span></span><br><span class="line"><span class="comment">//结果为: 850</span></span><br><span class="line"><span class="comment">//结果为: 1480</span></span><br><span class="line"><span class="comment">//结果为: 1450</span></span><br></pre></td></tr></table></figure><h2 id="在实例方法中修改值类型"><a href="#在实例方法中修改值类型" class="headerlink" title="在实例方法中修改值类型"></a>在实例方法中修改值类型</h2><p>Swift 语言中结构体和枚举是值类型。一般情况下，值类型的属性不能在它的实例方法中被修改。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">area</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> length <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> breadth <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">area</span>() -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> length <span class="operator">*</span> breadth</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用mutating方法可以在实例中改变值类型的属性</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">scaleBy</span>(<span class="params">res</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        length <span class="operator">*=</span> res</span><br><span class="line">        breadth <span class="operator">*=</span> res</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(length)</span><br><span class="line">        <span class="built_in">print</span>(breadth)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> val <span class="operator">=</span> area(length: <span class="number">3</span>, breadth: <span class="number">5</span>)</span><br><span class="line">val.scaleBy(res: <span class="number">3</span>)</span><br><span class="line">val.scaleBy(res: <span class="number">30</span>)</span><br><span class="line">val.scaleBy(res: <span class="number">300</span>)</span><br></pre></td></tr></table></figure><h2 id="类型方法"><a href="#类型方法" class="headerlink" title="类型方法"></a>类型方法</h2><p>类型本身调用的方法，这种方法就叫做类型方法。</p><p>声明结构体和枚举的类型方法，在方法的func关键字之前加上关键字static。类可能会用关键字class来允许子类重写父类的实现方法。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">mport <span class="type">Cocoa</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Math</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//类型方法</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">func</span> <span class="title class_">abs</span>(<span class="title class_">number</span>: <span class="title class_">Int</span>) -&gt; <span class="title class_">Int</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> number <span class="operator">&lt;</span> <span class="number">0</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="operator">-</span>number)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> number</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">absno</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//类型方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">abs</span>(<span class="params">number</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> number <span class="operator">&lt;</span> <span class="number">0</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="operator">-</span>number)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> number</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> no <span class="operator">=</span> <span class="type">Math</span>.abs(number: <span class="operator">-</span><span class="number">35</span>)</span><br><span class="line"><span class="keyword">let</span> num <span class="operator">=</span> absno.abs(number: <span class="operator">-</span><span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(no)</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="comment">//35</span></span><br><span class="line"><span class="comment">//5</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-属性</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%B1%9E%E6%80%A7/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%B1%9E%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="存储属性"><a href="#存储属性" class="headerlink" title="存储属性"></a>存储属性</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Number</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">var</span> digits: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.1415</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> n <span class="operator">=</span> <span class="type">Number</span>(digits: <span class="number">12345</span>)</span><br><span class="line">n.digits <span class="operator">=</span> <span class="number">67</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.digits)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.pi)</span>&quot;</span>)</span><br></pre></td></tr></table></figure><span id="more"></span><p>存储属性可以是<strong>变量存储属性</strong>（用关键字var定义），也可以是<strong>常量存储属性</strong>（用关键字let定义）。</p><ul><li>可以在定义存储属性的时候指定默认值</li><li>也可以在构造过程中设置或修改存储属性的值，甚至修改常量存储属性的值</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Number</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">var</span> digits: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.1415</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> n <span class="operator">=</span> <span class="type">Number</span>(digits: <span class="number">12345</span>)</span><br><span class="line">n.digits <span class="operator">=</span> <span class="number">67</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.digits)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.pi)</span>&quot;</span>)</span><br><span class="line"><span class="comment">//67</span></span><br><span class="line"><span class="comment">//3.1415</span></span><br></pre></td></tr></table></figure><p>&#x2F;&#x2F;构造方法给常量赋值</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Number</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> digits: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> numbers: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">digits</span>: <span class="type">Int</span>, <span class="params">numbers</span> : <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.digits <span class="operator">=</span> digits;</span><br><span class="line">        <span class="keyword">self</span>.numbers <span class="operator">=</span> numbers;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> n <span class="operator">=</span> <span class="type">Number</span>(digits: <span class="number">12345</span>, numbers: <span class="number">3.14</span>)</span><br><span class="line">n.digits <span class="operator">=</span> <span class="number">67</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.digits)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(n.numbers)</span>&quot;</span>)</span><br><span class="line"><span class="comment">//67</span></span><br><span class="line"><span class="comment">//3.14</span></span><br></pre></td></tr></table></figure><h3 id="延迟存储属性"><a href="#延迟存储属性" class="headerlink" title="延迟存储属性"></a>延迟存储属性</h3><p>延迟存储属性是指当第一次被调用的时候才会计算其初始值的属性。</p><p>延迟存储属性一般用于：</p><ul><li>延迟对象的创建。</li><li>当属性的值依赖于其他未知类</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sample</span> &#123;</span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> no <span class="operator">=</span> number() <span class="comment">// `var` 关键字是必须的</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">number</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name <span class="operator">=</span> <span class="string">&quot;Runoob Swift 教程&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> firstsample <span class="operator">=</span> sample()</span><br><span class="line"><span class="built_in">print</span>(firstsample.no.name)</span><br><span class="line"><span class="comment">//Runoob Swift 教程</span></span><br></pre></td></tr></table></figure><h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>计算属性不直接存储值，而是提供一个 getter 来获取值，一个可选的 setter 来间接设置其他属性或变量的值。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sample</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> no1 <span class="operator">=</span> <span class="number">0.0</span>, no2 <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> length <span class="operator">=</span> <span class="number">300.0</span>, breadth <span class="operator">=</span> <span class="number">150.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> middle: (<span class="type">Double</span>, <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (length <span class="operator">/</span> <span class="number">2</span>, breadth <span class="operator">/</span> <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(axis)&#123;</span><br><span class="line">            no1 <span class="operator">=</span> axis.<span class="number">0</span> <span class="operator">-</span> (length <span class="operator">/</span> <span class="number">2</span>)</span><br><span class="line">            no2 <span class="operator">=</span> axis.<span class="number">1</span> <span class="operator">-</span> (breadth <span class="operator">/</span> <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> result <span class="operator">=</span> sample()</span><br><span class="line"><span class="built_in">print</span>(result.middle)</span><br><span class="line">result.middle <span class="operator">=</span> (<span class="number">0.0</span>, <span class="number">10.0</span>)</span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(result.no1)</span><br><span class="line"><span class="built_in">print</span>(result.no2)</span><br><span class="line"><span class="comment">//(150.0, 75.0)</span></span><br><span class="line"><span class="comment">//-150.0</span></span><br><span class="line"><span class="comment">//-65.0</span></span><br></pre></td></tr></table></figure><h3 id="只读计算属性"><a href="#只读计算属性" class="headerlink" title="只读计算属性"></a>只读计算属性</h3><p>只有 getter 没有 setter 的计算属性就是只读计算属性。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">film</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> head <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> duration <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> metaInfo: [<span class="type">String</span>:<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            <span class="string">&quot;head&quot;</span>: <span class="keyword">self</span>.head,</span><br><span class="line">            <span class="string">&quot;duration&quot;</span>:<span class="string">&quot;<span class="subst">\(<span class="keyword">self</span>.duration)</span>&quot;</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> movie <span class="operator">=</span> film()</span><br><span class="line">movie.head <span class="operator">=</span> <span class="string">&quot;Swift 属性&quot;</span></span><br><span class="line">movie.duration <span class="operator">=</span> <span class="number">3.09</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(movie.metaInfo[<span class="string">&quot;head&quot;</span>]<span class="operator">!</span>)</span><br><span class="line"><span class="built_in">print</span>(movie.metaInfo[<span class="string">&quot;duration&quot;</span>]<span class="operator">!</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment">//Swift 属性</span></span><br><span class="line"><span class="comment">//3.09</span></span><br></pre></td></tr></table></figure><h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><p>属性观察器监控和响应属性值的变化，每次属性被设置值的时候都会调用属性观察器，甚至新的值和现在的值相同的时候也不例外。</p><p>可以为属性添加如下的一个或全部观察器：</p><ul><li>willSet在设置新的值之前调用</li><li>didSet在新的值被设置之后立即调用</li><li>willSet和didSet观察器在属性初始化过程中不会被调用</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Samplepgm</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> counter: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">willSet</span>(newTotal)&#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;计数器: <span class="subst">\(newTotal)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> counter <span class="operator">&gt;</span> oldValue &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;新增数 <span class="subst">\(counter <span class="operator">-</span> oldValue)</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="type">NewCounter</span> <span class="operator">=</span> <span class="type">Samplepgm</span>()</span><br><span class="line"><span class="type">NewCounter</span>.counter <span class="operator">=</span> <span class="number">100</span></span><br><span class="line"><span class="type">NewCounter</span>.counter <span class="operator">=</span> <span class="number">800</span></span><br><span class="line"><span class="comment">//计数器: 100</span></span><br><span class="line"><span class="comment">//新增数 100</span></span><br><span class="line"><span class="comment">//计数器: 800</span></span><br><span class="line"><span class="comment">//新增数 700</span></span><br></pre></td></tr></table></figure><h2 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h2><p>类型属性是作为类型定义的一部分写在类型最外层的花括号（{}）内。</p><p>使用关键字 <strong>static</strong> 来定义值类型的类型属性，关键字 <strong>class</strong> 来为类定义类型属性。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Structname</span> &#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty <span class="operator">=</span> <span class="string">&quot; &quot;</span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="comment">// 这里返回一个 Int 值</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Enumname</span> &#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty <span class="operator">=</span> <span class="string">&quot; &quot;</span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="comment">// 这里返回一个 Int 值</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classname</span> &#123;</span><br><span class="line">   <span class="keyword">class</span> <span class="title class_">var</span> <span class="title class_">computedTypeProperty</span>: <span class="title class_">Int</span> &#123;</span><br><span class="line">      <span class="comment">// 这里返回一个 Int 值</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取和设置类型属性的值"><a href="#获取和设置类型属性的值" class="headerlink" title="获取和设置类型属性的值"></a>获取和设置类型属性的值</h3><p>类型属性是通过类型本身来获取和设置，而不是通过实例。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">StudMarks</span> &#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">let</span> markCount <span class="operator">=</span> <span class="number">97</span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">var</span> totalCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">   <span class="keyword">var</span> <span class="type">InternalMarks</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span> &#123;</span><br><span class="line">      <span class="keyword">didSet</span> &#123;</span><br><span class="line">         <span class="keyword">if</span> <span class="type">InternalMarks</span> <span class="operator">&gt;</span> <span class="type">StudMarks</span>.markCount &#123;</span><br><span class="line">            <span class="type">InternalMarks</span> <span class="operator">=</span> <span class="type">StudMarks</span>.markCount</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> <span class="type">InternalMarks</span> <span class="operator">&gt;</span> <span class="type">StudMarks</span>.totalCount &#123;</span><br><span class="line">            <span class="comment">//类型属性赋值</span></span><br><span class="line">            <span class="type">StudMarks</span>.totalCount <span class="operator">=</span> <span class="type">InternalMarks</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> stud1Mark1 <span class="operator">=</span> <span class="type">StudMarks</span>()</span><br><span class="line"><span class="keyword">var</span> stud1Mark2 <span class="operator">=</span> <span class="type">StudMarks</span>()</span><br><span class="line">  </span><br><span class="line">stud1Mark1.<span class="type">InternalMarks</span> <span class="operator">=</span> <span class="number">98</span></span><br><span class="line"><span class="built_in">print</span>(stud1Mark1.<span class="type">InternalMarks</span>) </span><br><span class="line">  </span><br><span class="line">stud1Mark2.<span class="type">InternalMarks</span> <span class="operator">=</span> <span class="number">87</span></span><br><span class="line"><span class="built_in">print</span>(stud1Mark2.<span class="type">InternalMarks</span>)</span><br><span class="line"><span class="comment">//97</span></span><br><span class="line"><span class="comment">//87</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-类</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">student</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> studname: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> mark: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="实例化类"><a href="#实例化类" class="headerlink" title="实例化类"></a>实例化类</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> studrecord <span class="operator">=</span> student()</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MarksStruct</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> mark: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">mark</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.mark <span class="operator">=</span> mark</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">studentMarks</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> mark <span class="operator">=</span> <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> marks <span class="operator">=</span> studentMarks()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成绩为 <span class="subst">\(marks.mark)</span>&quot;</span>)</span><br><span class="line"><span class="comment">//成绩为 300</span></span><br></pre></td></tr></table></figure><h2 id="作为引用类型访问类属性"><a href="#作为引用类型访问类属性" class="headerlink" title="作为引用类型访问类属性"></a>作为引用类型访问类属性</h2><p>类的属性可以通过 . 来访问。格式为：实例化类名.属性名：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MarksStruct</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> mark: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">init</span>(<span class="params">mark</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.mark <span class="operator">=</span> mark</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">studentMarks</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> mark1 <span class="operator">=</span> <span class="number">300</span></span><br><span class="line">   <span class="keyword">var</span> mark2 <span class="operator">=</span> <span class="number">400</span></span><br><span class="line">   <span class="keyword">var</span> mark3 <span class="operator">=</span> <span class="number">900</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> marks <span class="operator">=</span> studentMarks()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark1 is <span class="subst">\(marks.mark1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark2 is <span class="subst">\(marks.mark2)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark3 is <span class="subst">\(marks.mark3)</span>&quot;</span>)</span><br><span class="line"><span class="comment">//Mark1 is 300</span></span><br><span class="line"><span class="comment">//Mark2 is 400</span></span><br><span class="line"><span class="comment">//Mark3 is 900</span></span><br></pre></td></tr></table></figure><h2 id="恒等运算符"><a href="#恒等运算符" class="headerlink" title="恒等运算符"></a>恒等运算符</h2><table><thead><tr><th align="left">恒等运算符</th><th align="left">不恒等运算符</th></tr></thead><tbody><tr><td align="left">运算符为：&#x3D;&#x3D;&#x3D;</td><td align="left">运算符为：!&#x3D;&#x3D;</td></tr><tr><td align="left">如果两个常量或者变量引用同一个类实例则返回 true</td><td align="left">如果两个常量或者变量引用不同一个类实例则返回 true</td></tr></tbody></table><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SampleClass</span>: <span class="title class_">Equatable</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> myProperty: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">s</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        myProperty <span class="operator">=</span> s</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">==</span>(<span class="params">lhs</span>: <span class="type">SampleClass</span>, <span class="params">rhs</span>: <span class="type">SampleClass</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> lhs.myProperty <span class="operator">==</span> rhs.myProperty</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> spClass1 <span class="operator">=</span> <span class="type">SampleClass</span>(s: <span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> spClass2 <span class="operator">=</span> <span class="type">SampleClass</span>(s: <span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> spClass1 <span class="operator">===</span> spClass2 &#123;<span class="comment">// false</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;引用相同的类实例 <span class="subst">\(spClass1)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> spClass1 <span class="operator">!==</span> spClass2 &#123;<span class="comment">// true</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;引用不相同的类实例 <span class="subst">\(spClass2)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用不相同的类实例 SampleClass</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-结构体</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%93%E6%9E%84%E4%BD%93/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%93%E6%9E%84%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">nameStruct</span> &#123; </span><br><span class="line">   <span class="type">Definition</span> <span class="number">1</span></span><br><span class="line">   <span class="type">Definition</span> <span class="number">2</span></span><br><span class="line">   <span class="operator">……</span></span><br><span class="line">   <span class="type">Definition</span> <span class="type">N</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">MarkStruct</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> mark1: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">var</span> mark2: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">var</span> mark3: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以通过结构体名来访问结构体成员。<br>结构体实例化使用 let 关键字：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">studentMarks</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> mark1 <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">   <span class="keyword">var</span> mark2 <span class="operator">=</span> <span class="number">78</span></span><br><span class="line">   <span class="keyword">var</span> mark3 <span class="operator">=</span> <span class="number">98</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> marks <span class="operator">=</span> studentMarks()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark1 是 <span class="subst">\(marks.mark1)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark2 是 <span class="subst">\(marks.mark2)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Mark3 是 <span class="subst">\(marks.mark3)</span>&quot;</span>)</span><br><span class="line"><span class="comment">//Mark1 是 100</span></span><br><span class="line"><span class="comment">//Mark2 是 78</span></span><br><span class="line"><span class="comment">//Mark3 是 98</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MarksStruct</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> mark: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">init</span>(<span class="params">mark</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.mark <span class="operator">=</span> mark</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> aStruct <span class="operator">=</span> <span class="type">MarksStruct</span>(mark: <span class="number">98</span>)</span><br><span class="line"><span class="keyword">var</span> bStruct <span class="operator">=</span> aStruct <span class="comment">// aStruct 和 bStruct 是使用相同值的结构体！</span></span><br><span class="line">bStruct.mark <span class="operator">=</span> <span class="number">97</span></span><br><span class="line"><span class="built_in">print</span>(aStruct.mark) <span class="comment">// 98</span></span><br><span class="line"><span class="built_in">print</span>(bStruct.mark) <span class="comment">// 97</span></span><br></pre></td></tr></table></figure><h2 id="结构体应用"><a href="#结构体应用" class="headerlink" title="结构体应用"></a>结构体应用</h2><p>当符合一条或多条以下条件时，请考虑构建结构体：</p><ul><li>结构体的主要目的是用来封装少量相关简单数据值。</li><li>有理由预计一个结构体实例在赋值或传递时，封装的数据将会被拷贝而不是被引用。</li><li>任何在结构体中储存的值类型属性，也将会被拷贝，而不是被引用。</li><li>结构体不需要去继承另一个已存在类型的属性或者行为。</li></ul><p>结构体实例是通过值传递而不是通过引用传递。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">markStruct</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> mark3: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">mark1</span>: <span class="type">Int</span>, <span class="params">mark2</span>: <span class="type">Int</span>, <span class="params">mark3</span>: <span class="type">Int</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.mark1 <span class="operator">=</span> mark1</span><br><span class="line">        <span class="keyword">self</span>.mark2 <span class="operator">=</span> mark2</span><br><span class="line">        <span class="keyword">self</span>.mark3 <span class="operator">=</span> mark3</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;优异成绩:&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> marks <span class="operator">=</span> markStruct(mark1: <span class="number">98</span>, mark2: <span class="number">96</span>, mark3:<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(marks.mark1)</span><br><span class="line"><span class="built_in">print</span>(marks.mark2)</span><br><span class="line"><span class="built_in">print</span>(marks.mark3)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;糟糕成绩:&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> fail <span class="operator">=</span> markStruct(mark1: <span class="number">34</span>, mark2: <span class="number">42</span>, mark3: <span class="number">13</span>)</span><br><span class="line"><span class="built_in">print</span>(fail.mark1)</span><br><span class="line"><span class="built_in">print</span>(fail.mark2)</span><br><span class="line"><span class="built_in">print</span>(fail.mark3)</span><br><span class="line"><span class="comment">//优异成绩:</span></span><br><span class="line"><span class="comment">//98</span></span><br><span class="line"><span class="comment">//96</span></span><br><span class="line"><span class="comment">//100</span></span><br><span class="line"><span class="comment">//糟糕成绩:</span></span><br><span class="line"><span class="comment">//34</span></span><br><span class="line"><span class="comment">//42</span></span><br><span class="line"><span class="comment">//13</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-枚举</title>
      <link href="/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%9A%E4%B8%BE/"/>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%9A%E4%B8%BE/</url>
      
        <content type="html"><![CDATA[<p>Swift 的枚举类似于 Objective C 和 C 的结构，枚举的功能为:</p><ul><li>它声明在类中，可以通过实例化类来访问它的值。</li><li>枚举也可以定义构造函数（initializers）来提供一个初始成员值；可以在原始的实现基础上扩展它们的功能。</li><li>可以遵守协议（protocols）来提供标准的功能。</li></ul><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">enumname</span> &#123;</span><br><span class="line">   <span class="comment">// 枚举定义放在这里</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义枚举</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">DaysofaWeek</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Sunday</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Monday</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">TUESDAY</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">WEDNESDAY</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">THURSDAY</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">FRIDAY</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Saturday</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> weekDay <span class="operator">=</span> <span class="type">DaysofaWeek</span>.<span class="type">THURSDAY</span></span><br><span class="line">weekDay <span class="operator">=</span> .<span class="type">THURSDAY</span></span><br><span class="line"><span class="keyword">switch</span> weekDay</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Sunday</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期天&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Monday</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期一&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">TUESDAY</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期二&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">WEDNESDAY</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期三&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">THURSDAY</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期四&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">FRIDAY</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期五&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Saturday</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;星期六&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//星期四</span></span><br></pre></td></tr></table></figure><h2 id="相关值"><a href="#相关值" class="headerlink" title="相关值"></a>相关值</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Name</span>(<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Mark</span>(<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> studDetails <span class="operator">=</span> <span class="type">Student</span>.<span class="type">Name</span>(<span class="string">&quot;Runoob&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> studMarks <span class="operator">=</span> <span class="type">Student</span>.<span class="type">Mark</span>(<span class="number">98</span>,<span class="number">97</span>,<span class="number">95</span>)</span><br><span class="line"><span class="keyword">switch</span> studMarks &#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Name</span>(<span class="keyword">let</span> studName):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;学生的名字是: <span class="subst">\(studName)</span>。&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Mark</span>(<span class="keyword">let</span> <span class="type">Mark1</span>, <span class="keyword">let</span> <span class="type">Mark2</span>, <span class="keyword">let</span> <span class="type">Mark3</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;学生的成绩是: <span class="subst">\(Mark1)</span>,<span class="subst">\(Mark2)</span>,<span class="subst">\(Mark3)</span>。&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//学生的成绩是: 98,97,95。</span></span><br></pre></td></tr></table></figure><h2 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h2><ul><li><p>原始值可以是字符串，字符，或者任何整型值或浮点型值。</p></li><li><p>每个原始值在它的枚举声明中必须是唯一的。</p></li><li><p>当使用整数作为原始值时，隐式赋值的值依次递增1。如果第一个值没有被赋初值，将会被自动置为0。</p></li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Month</span>: <span class="title class_">Int</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">January</span> <span class="operator">=</span> <span class="number">1</span>, <span class="type">February</span>, <span class="type">March</span>, <span class="type">April</span>, <span class="type">May</span>, <span class="type">June</span>, <span class="type">July</span>, <span class="type">August</span>, <span class="type">September</span>, <span class="type">October</span>, <span class="type">November</span>, <span class="type">December</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> yearMonth <span class="operator">=</span> <span class="type">Month</span>.<span class="type">May</span>.rawValue</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;数字月份为: <span class="subst">\(yearMonth)</span>。&quot;</span>)</span><br><span class="line"><span class="comment">//数字月份为: 5。</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-闭包</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%97%AD%E5%8C%85/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%97%AD%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h2 id="sorted-方法"><a href="#sorted-方法" class="headerlink" title="sorted 方法"></a>sorted 方法</h2><p>排序闭包函数类型需为(String, String) -&gt; Bool。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;AT&quot;</span>, <span class="string">&quot;AE&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;S&quot;</span>, <span class="string">&quot;BE&quot;</span>]</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用普通函数(或内嵌函数)提供排序功能,闭包函数类型需为(String, String) -&gt; Bool。</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">backwards</span>(<span class="params">s1</span>: <span class="type">String</span>, <span class="params">s2</span>: <span class="type">String</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s1 <span class="operator">&gt;</span> s2</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> reversed <span class="operator">=</span> names.sorted(by: backwards)</span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(reversed)</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="闭包表达式语法"><a href="#闭包表达式语法" class="headerlink" title="闭包表达式语法"></a>闭包表达式语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; (parameters) -&gt; returnType <span class="keyword">in</span></span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面的例子展示了之前backwards(<em>:</em>:)函数对应的闭包表达式版本的代码：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reverses <span class="operator">=</span> names.sorted(by: &#123; (s1 , s2) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> s1 <span class="operator">&gt;</span> s2</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="根据上下文推断类型"><a href="#根据上下文推断类型" class="headerlink" title="根据上下文推断类型"></a>根据上下文推断类型</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reversed <span class="operator">=</span> names.sorted(by: &#123; s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1 <span class="operator">&gt;</span> s2 &#125; )</span><br></pre></td></tr></table></figure><h3 id="单表达式闭包隐式返回"><a href="#单表达式闭包隐式返回" class="headerlink" title="单表达式闭包隐式返回"></a>单表达式闭包隐式返回</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reversed <span class="operator">=</span> names.sorted(by: &#123; s1, s2 <span class="keyword">in</span> s1 <span class="operator">&gt;</span> s2 &#125; )</span><br></pre></td></tr></table></figure><p>在这个例子中，sort(_:)方法的第二个参数函数类型明确了闭包必须返回一个Bool类型值。因为闭包函数体只包含了一个单一表达式（s1 &gt; s2），该表达式返回Bool类型值，因此这里没有歧义，return关键字可以省略。</p><h3 id="参数名称缩写"><a href="#参数名称缩写" class="headerlink" title="参数名称缩写"></a>参数名称缩写</h3><p>Swift 自动为内联闭包提供了参数名称缩写功能，您可以直接通过$0，$1，$2来顺序调用闭包的参数，以此类推。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;AT&quot;</span>, <span class="string">&quot;AE&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;S&quot;</span>, <span class="string">&quot;BE&quot;</span>]</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> reversed <span class="operator">=</span> names.sorted( by: &#123; <span class="variable">$0</span> <span class="operator">&gt;</span> <span class="variable">$1</span> &#125; )</span><br><span class="line"><span class="built_in">print</span>(reversed)</span><br></pre></td></tr></table></figure><p>在这个例子中，$0和$1表示闭包中第一个和第二个String类型的参数。</p><h3 id="运算符函数"><a href="#运算符函数" class="headerlink" title="运算符函数"></a>运算符函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;AT&quot;</span>, <span class="string">&quot;AE&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;S&quot;</span>, <span class="string">&quot;BE&quot;</span>]</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> reversed <span class="operator">=</span> names.sorted(by: <span class="operator">&gt;</span>)</span><br><span class="line"><span class="built_in">print</span>(reversed)</span><br></pre></td></tr></table></figure><h2 id="尾随闭包"><a href="#尾随闭包" class="headerlink" title="尾随闭包"></a>尾随闭包</h2><p>尾随闭包是一个书写在函数括号之后的闭包表达式，函数支持将其作为最后一个参数调用。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunctionThatTakesAClosure</span>(<span class="params">closure</span>: () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数体部分</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 以下是不使用尾随闭包进行函数调用</span></span><br><span class="line">someFunctionThatTakesAClosure(&#123;</span><br><span class="line">    <span class="comment">// 闭包主体部分</span></span><br><span class="line">&#125;)</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 以下是使用尾随闭包进行函数调用</span></span><br><span class="line">someFunctionThatTakesAClosure() &#123;</span><br><span class="line">    <span class="comment">// 闭包主体部分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果函数只需要闭包表达式一个参数，当您使用尾随闭包时，您甚至可以把()省略掉：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;AT&quot;</span>, <span class="string">&quot;AE&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;S&quot;</span>, <span class="string">&quot;BE&quot;</span>]</span><br><span class="line">  </span><br><span class="line"><span class="comment">//尾随闭包</span></span><br><span class="line"><span class="keyword">var</span> reversed <span class="operator">=</span> names.sorted() &#123; <span class="variable">$0</span> <span class="operator">&gt;</span> <span class="variable">$1</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(reversed)</span><br></pre></td></tr></table></figure><p><strong>注意</strong>： 如果函数只需要闭包表达式一个参数，当您使用尾随闭包时，您甚至可以把()省略掉。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reversed <span class="operator">=</span> names.sorted &#123; <span class="variable">$0</span> <span class="operator">&gt;</span> <span class="variable">$1</span> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-函数</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%87%BD%E6%95%B0/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="函数的定义与调用"><a href="#函数的定义与调用" class="headerlink" title="函数的定义与调用"></a>函数的定义与调用</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayHelloAgain</span>(<span class="params">personName</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello again, &quot;</span> <span class="operator">+</span> personName <span class="operator">+</span> <span class="string">&quot;!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(sayHelloAgain(personName: <span class="string">&quot;Anna&quot;</span>))</span><br><span class="line"><span class="comment">// prints &quot;Hello again, Anna!&quot;</span></span><br></pre></td></tr></table></figure><h2 id="函数参数与返回值"><a href="#函数参数与返回值" class="headerlink" title="函数参数与返回值"></a>函数参数与返回值</h2><h3 id="无参函数"><a href="#无参函数" class="headerlink" title="无参函数"></a>无参函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayHelloWorld</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello, world&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHelloWorld())</span><br><span class="line"><span class="comment">// prints &quot;hello, world&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="多参数函数"><a href="#多参数函数" class="headerlink" title="多参数函数"></a>多参数函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayHello</span>(<span class="params">personName</span>: <span class="type">String</span>, <span class="params">alreadyGreeted</span>: <span class="type">Bool</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> alreadyGreeted &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHelloAgain(personName: personName)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHello(personName: personName, alreadyGreeted: <span class="operator">&lt;</span>#<span class="type">Bool</span>#<span class="operator">&gt;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(personName: <span class="string">&quot;Tim&quot;</span>, alreadyGreeted: <span class="literal">true</span>))</span><br><span class="line"><span class="comment">// prints &quot;Hello again, Tim!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="无返回值函数"><a href="#无返回值函数" class="headerlink" title="无返回值函数"></a>无返回值函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayGoodbye</span>(<span class="params">personName</span>: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Goodbye, <span class="subst">\(personName)</span>!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">sayGoodbye(personName: <span class="string">&quot;Dave&quot;</span>)</span><br><span class="line"><span class="comment">// prints &quot;Goodbye, Dave!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="多重返回值函数"><a href="#多重返回值函数" class="headerlink" title="多重返回值函数"></a>多重返回值函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">minMax</span>(<span class="params">array</span>: [<span class="type">Int</span>]) -&gt; (min: <span class="type">Int</span>, max: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> currentMin <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span><span class="operator">..&lt;</span>array.count] &#123;</span><br><span class="line">        <span class="keyword">if</span> value <span class="operator">&lt;</span> currentMin &#123;</span><br><span class="line">            currentMin <span class="operator">=</span> value</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> value <span class="operator">&gt;</span> currentMax &#123;</span><br><span class="line">            currentMax <span class="operator">=</span> value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMax)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="可选元组返回类型"><a href="#可选元组返回类型" class="headerlink" title="可选元组返回类型"></a>可选元组返回类型</h3><p>为了安全地处理这个“空数组”问题，将minMax(_:)函数改写为使用可选元组返回类型，并且当数组为空时返回nil：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">minMax</span>(<span class="params">array</span>: [<span class="type">Int</span>]) -&gt; (min: <span class="type">Int</span>, max: <span class="type">Int</span>)<span class="operator">?</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> array.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> currentMin <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax <span class="operator">=</span> array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span><span class="operator">..&lt;</span>array.count] &#123;</span><br><span class="line">        <span class="keyword">if</span> value <span class="operator">&lt;</span> currentMin &#123;</span><br><span class="line">            currentMin <span class="operator">=</span> value</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> value <span class="operator">&gt;</span> currentMax &#123;</span><br><span class="line">            currentMax <span class="operator">=</span> value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMax)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数参数名称"><a href="#函数参数名称" class="headerlink" title="函数参数名称"></a>函数参数名称</h3><p>函数参数都有一个外部参数名（external parameter name）和一个局部参数名（local parameter name）。外部参数名用于在函数调用时标注传递给函数的参数，局部参数名在函数的实现内部使用。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>(<span class="params">firstParameterName</span>: <span class="type">Int</span>, <span class="params">secondParameterName</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="comment">// function body goes here</span></span><br><span class="line">    <span class="comment">// firstParameterName and secondParameterName refer to</span></span><br><span class="line">    <span class="comment">// the argument values for the first and second parameters</span></span><br><span class="line">&#125;</span><br><span class="line">someFunction(firstParameterName: <span class="number">1</span>, secondParameterName: <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="指定外部参数名"><a href="#指定外部参数名" class="headerlink" title="指定外部参数名"></a>指定外部参数名</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>(<span class="params">externalParameterName</span> <span class="params">localParameterName</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="comment">// function body goes here, and can use localParameterName</span></span><br><span class="line">    <span class="comment">// to refer to the argument value for that parameter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayHello</span>(<span class="params">to</span> <span class="params">person</span>: <span class="type">String</span>, <span class="params">and</span> <span class="params">anotherPerson</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello <span class="subst">\(person)</span> and <span class="subst">\(anotherPerson)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(to: <span class="string">&quot;Bill&quot;</span>, and: <span class="string">&quot;Ted&quot;</span>))</span><br><span class="line"><span class="comment">// prints &quot;Hello Bill and Ted!&quot;</span></span><br></pre></td></tr></table></figure><p>为每个参数指定外部参数名后，在你调用sayHello(to:and:)函数时两个外部参数名都必须写出来。</p><h3 id="忽略外部参数名"><a href="#忽略外部参数名" class="headerlink" title="忽略外部参数名"></a>忽略外部参数名</h3><p>如果你不想为第二个及后续的参数设置外部参数名，用一个下划线（_）代替一个明确的参数名。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>(<span class="params">firstParameterName</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">secondParameterName</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="comment">// function body goes here</span></span><br><span class="line">    <span class="comment">// firstParameterName and secondParameterName refer to</span></span><br><span class="line">    <span class="comment">// the argument values for the first and second parameters</span></span><br><span class="line">&#125;</span><br><span class="line">someFunction(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>你可以在函数体中为每个参数定义默认值（Deafult Values）。当默认值被定义后，调用这个函数时可以忽略这个参数。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">someFunction</span>(<span class="keyword">_</span> <span class="params">parameterWithDefault</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">12</span>) &#123;</span><br><span class="line">    <span class="comment">// function body goes here</span></span><br><span class="line">    <span class="comment">// if no arguments are passed to the function call,</span></span><br><span class="line">    <span class="comment">// value of parameterWithDefault is 12</span></span><br><span class="line">&#125;</span><br><span class="line">someFunction(<span class="number">6</span>) <span class="comment">// parameterWithDefault is 6</span></span><br><span class="line">someFunction() <span class="comment">// parameterWithDefault is 12</span></span><br></pre></td></tr></table></figure><h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">arithmeticMean</span>(<span class="params">numbers</span>: <span class="type">Double</span>...) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total: <span class="type">Double</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        total <span class="operator">+=</span> number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total <span class="operator">/</span> <span class="type">Double</span>(numbers.count)</span><br><span class="line">&#125;</span><br><span class="line">arithmeticMean(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">// returns 3.0, which is the arithmetic mean of these five numbers</span></span><br><span class="line">arithmeticMean(<span class="number">3</span>, <span class="number">8.25</span>, <span class="number">18.75</span>)</span><br><span class="line"><span class="comment">// returns 10.0, which is the arithmetic mean of these three numbers</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>:一个函数最多只能有一个可变参数。</p><h3 id="输入输出参数"><a href="#输入输出参数" class="headerlink" title="输入输出参数"></a>输入输出参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">swapTwoInts</span>(<span class="params">a</span>:<span class="keyword">inout</span> <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>:<span class="keyword">inout</span> <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temporaryA <span class="operator">=</span> a</span><br><span class="line">    a <span class="operator">=</span> b</span><br><span class="line">    b <span class="operator">=</span> temporaryA</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用参数需要添加&amp;</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> someInt <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> anotherInt <span class="operator">=</span> <span class="number">107</span></span><br><span class="line">swapTwoInts(<span class="operator">&amp;</span>someInt, <span class="operator">&amp;</span>anotherInt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;someInt is now <span class="subst">\(someInt)</span>, and anotherInt is now <span class="subst">\(anotherInt)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// prints &quot;someInt is now 107, and anotherInt is now 3&quot;</span></span><br></pre></td></tr></table></figure><p>从上面这个例子中，我们可以看到 someInt 和 anotherInt 的原始值在 swapTwoInts(<em>:</em>:) 函数中被修改，尽管它们的定义在函数体外。</p><h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><p>每个函数都有种特定的函数类型，由函数的参数类型和返回类型组成。</p><h2 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">chooseStepFunction</span>(<span class="params">backwards</span>: <span class="type">Bool</span>) -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">stepForward</span>(<span class="params">input</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; <span class="keyword">return</span> input <span class="operator">+</span> <span class="number">1</span> &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">stepBackward</span>(<span class="params">input</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; <span class="keyword">return</span> input <span class="operator">-</span> <span class="number">1</span> &#125;</span><br><span class="line">    <span class="keyword">return</span> backwards <span class="operator">?</span> stepBackward : stepForward</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> currentValue <span class="operator">=</span> <span class="operator">-</span><span class="number">4</span></span><br><span class="line"><span class="keyword">let</span> moveNearerToZero <span class="operator">=</span> chooseStepFunction(backwards: currentValue <span class="operator">&gt;</span> <span class="number">0</span>)</span><br><span class="line"><span class="comment">// moveNearerToZero now refers to the nested stepForward() function</span></span><br><span class="line"><span class="keyword">while</span> currentValue <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(currentValue)</span>... &quot;</span>)</span><br><span class="line">    currentValue <span class="operator">=</span> moveNearerToZero(currentValue)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;zero!&quot;</span>)</span><br><span class="line"><span class="comment">// -4...</span></span><br><span class="line"><span class="comment">// -3...</span></span><br><span class="line"><span class="comment">// -2...</span></span><br><span class="line"><span class="comment">// -1...</span></span><br><span class="line"><span class="comment">// zero!</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-控制流</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E6%8E%A7%E5%88%B6%E6%B5%81/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E6%8E%A7%E5%88%B6%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h2 id="For循环"><a href="#For循环" class="headerlink" title="For循环"></a>For循环</h2><h3 id="For-In"><a href="#For-In" class="headerlink" title="For-In"></a>For-In</h3><p>你可以使用for-in循环来遍历一个集合里面的所有元素</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span><span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(index)</span> times 5 is <span class="subst">\(index <span class="operator">*</span> <span class="number">5</span>)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 times 5 is 5</span></span><br><span class="line"><span class="comment">// 2 times 5 is 10</span></span><br><span class="line"><span class="comment">// 3 times 5 is 15</span></span><br><span class="line"><span class="comment">// 4 times 5 is 20</span></span><br><span class="line"><span class="comment">// 5 times 5 is 25</span></span><br></pre></td></tr></table></figure><p>如果你不需要知道区间序列内每一项的值，你可以使用下划线（_）替代变量名来忽略对值的访问：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> base <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> power <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> answer <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span>power &#123;</span><br><span class="line">    answer <span class="operator">*=</span> base</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(base)</span> to the power of <span class="subst">\(power)</span> is <span class="subst">\(answer)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// 输出 &quot;3 to the power of 10 is 59049&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="For"><a href="#For" class="headerlink" title="For"></a>For</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> index <span class="operator">=</span> <span class="number">0</span>; index <span class="operator">&lt;</span> <span class="number">3</span>; <span class="operator">++</span>index &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;index is <span class="subst">\(index)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index is 0</span></span><br><span class="line"><span class="comment">// index is 1</span></span><br><span class="line"><span class="comment">// index is 2</span></span><br></pre></td></tr></table></figure><h2 id="While循环"><a href="#While循环" class="headerlink" title="While循环"></a>While循环</h2><ul><li>while循环，每次在循环开始时计算条件是否符合；</li><li>repeat-while循环，每次在循环结束时计算条件是否符合。while循环，每次在循环开始时计算条件是否符合；<br>repeat-while循环，每次在循环结束时计算条件是否符合。</li></ul><h3 id="While"><a href="#While" class="headerlink" title="While"></a>While</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition &#123;  </span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Repeat-While"><a href="#Repeat-While" class="headerlink" title="Repeat-While"></a>Repeat-While</h3><p>类似于java的do while</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125; <span class="keyword">while</span> condition</span><br></pre></td></tr></table></figure><h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temperatureInFahrenheit <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&lt;=</span> <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;It&#x27;s very cold. Consider wearing a scarf.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">temperatureInFahrenheit <span class="operator">=</span> <span class="number">40</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&lt;=</span> <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s not that cold. Wear a t-shirt.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;It&#x27;s not that cold. Wear a t-shirt.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="if-else-if-else"><a href="#if-else-if-else" class="headerlink" title="if else if else"></a>if else if else</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">temperatureInFahrenheit <span class="operator">=</span> <span class="number">90</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&lt;=</span> <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&gt;=</span> <span class="number">86</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s not that cold. Wear a t-shirt.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="if-else-if"><a href="#if-else-if" class="headerlink" title="if else if"></a>if else if</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">temperatureInFahrenheit <span class="operator">=</span> <span class="number">72</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&lt;=</span> <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit <span class="operator">&gt;=</span> <span class="number">86</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> <span class="keyword">some</span> value to consider &#123;</span><br><span class="line"><span class="keyword">case</span> value <span class="number">1</span>:</span><br><span class="line">    respond to value <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> value <span class="number">2</span>, value <span class="number">3</span>:</span><br><span class="line">    respond to value <span class="number">2</span> or <span class="number">3</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    otherwise, <span class="keyword">do</span> something <span class="keyword">else</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someCharacter: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;e&quot;</span></span><br><span class="line"><span class="keyword">switch</span> someCharacter &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;a&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;u&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(someCharacter)</span> is a vowel&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;f&quot;</span>, <span class="string">&quot;g&quot;</span>, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;j&quot;</span>, <span class="string">&quot;k&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;m&quot;</span>,</span><br><span class="line"><span class="string">&quot;n&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;q&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;s&quot;</span>, <span class="string">&quot;t&quot;</span>, <span class="string">&quot;v&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>, <span class="string">&quot;z&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(someCharacter)</span> is a consonant&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(someCharacter)</span> is not a vowel or a consonant&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;e is a vowel&quot;</span></span><br></pre></td></tr></table></figure><h3 id="区间匹配"><a href="#区间匹配" class="headerlink" title="区间匹配"></a>区间匹配</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> approximateCount <span class="operator">=</span> <span class="number">62</span></span><br><span class="line"><span class="keyword">let</span> countedThings <span class="operator">=</span> <span class="string">&quot;moons orbiting Saturn&quot;</span></span><br><span class="line"><span class="keyword">var</span> naturalCount: <span class="type">String</span></span><br><span class="line"><span class="keyword">switch</span> approximateCount &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span><span class="operator">..&lt;</span><span class="number">5</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;a few&quot;</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span><span class="operator">..&lt;</span><span class="number">12</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;several&quot;</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">12</span><span class="operator">..&lt;</span><span class="number">100</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;dozens of&quot;</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">100</span><span class="operator">..&lt;</span><span class="number">1000</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;hundreds of&quot;</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    naturalCount <span class="operator">=</span> <span class="string">&quot;many&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are <span class="subst">\(naturalCount)</span> <span class="subst">\(countedThings)</span>.&quot;</span>)</span><br><span class="line"><span class="comment">// 输出 &quot;There are dozens of moons orbiting Saturn.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> somePoint <span class="operator">=</span> (<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> somePoint &#123;</span><br><span class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(0, 0) is at the origin&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="keyword">_</span>, <span class="number">0</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, 0) is on the x-axis&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">_</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(0, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is on the y-axis&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="operator">-</span><span class="number">2</span><span class="operator">...</span><span class="number">2</span>, <span class="operator">-</span><span class="number">2</span><span class="operator">...</span><span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is inside the box&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is outside of the box&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;(1, 1) is inside the box&quot;</span></span><br></pre></td></tr></table></figure><h3 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> anotherPoint <span class="operator">=</span> (<span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">switch</span> anotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on the x-axis with an x value of <span class="subst">\(x)</span>&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on the y-axis with a y value of <span class="subst">\(y)</span>&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;somewhere else at (<span class="subst">\(x)</span>, <span class="subst">\(y)</span>)&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;on the x-axis with an x value of 2&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yetAnotherPoint <span class="operator">=</span> (<span class="number">1</span>, <span class="operator">-</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x <span class="operator">==</span> y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is on the line x == y&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x <span class="operator">==</span> <span class="operator">-</span>y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is on the line x == -y&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is just some arbitrary point&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;(1, -1) is on the line x == -y&quot;</span></span><br></pre></td></tr></table></figure><h2 id="控制转移语句"><a href="#控制转移语句" class="headerlink" title="控制转移语句"></a>控制转移语句</h2><p>Swift 有五种控制转移语句：</p><ul><li>continue</li><li>break</li><li>fallthrough</li><li>return</li><li>throw</li></ul><h3 id="Continue"><a href="#Continue" class="headerlink" title="Continue"></a>Continue</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> puzzleInput <span class="operator">=</span> <span class="string">&quot;great minds think alike&quot;</span></span><br><span class="line"><span class="keyword">var</span> puzzleOutput <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> puzzleInput.characters &#123;</span><br><span class="line">    <span class="keyword">switch</span> character &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;a&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot; &quot;</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        puzzleOutput.append(character)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(puzzleOutput)</span><br><span class="line"><span class="comment">// 输出 &quot;grtmndsthnklk&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Break"><a href="#Break" class="headerlink" title="Break"></a>Break</h3><p>break语句会立刻结束整个控制流的执行。</p><h4 id="循环语句中的-break"><a href="#循环语句中的-break" class="headerlink" title="循环语句中的 break"></a>循环语句中的 break</h4><p>当在一个循环体中使用break时，会立刻中断该循环体的执行，然后跳转到表示循环体结束的大括号(})后的第一行代码。</p><h4 id="Switch-语句中的-break"><a href="#Switch-语句中的-break" class="headerlink" title="Switch 语句中的 break"></a>Switch 语句中的 break</h4><p>当在一个switch代码块中使用break时，会立即中断该switch代码块的执行，并且跳转到表示switch代码块结束的大括号(})后的第一行代码。</p><h3 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> integerToDescribe <span class="operator">=</span> <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> description <span class="operator">=</span> <span class="string">&quot;The number <span class="subst">\(integerToDescribe)</span> is&quot;</span></span><br><span class="line"><span class="keyword">switch</span> integerToDescribe &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>:</span><br><span class="line">    description <span class="operator">+=</span> <span class="string">&quot; a prime number, and also&quot;</span></span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    description <span class="operator">+=</span> <span class="string">&quot; an integer.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(description)</span><br><span class="line"><span class="comment">// 输出 &quot;The number 5 is a prime number, and also an integer.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>像if语句一样，guard的执行取决于一个表达式的布尔值。我们可以使用guard语句来要求条件必须为真时，以执行guard语句后的代码。不同于if语句，一个guard语句总是有一个else分句，如果条件不为真则执行else分句中的代码。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="params">person</span>: [<span class="params">String</span>: <span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> name <span class="operator">=</span> person[<span class="string">&quot;name&quot;</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello <span class="subst">\(name)</span>&quot;</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> location <span class="operator">=</span> person[<span class="string">&quot;location&quot;</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I hope the weather is nice near you.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I hope the weather is nice in <span class="subst">\(location)</span>.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">greet([<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>])</span><br><span class="line"><span class="comment">// prints &quot;Hello John!&quot;</span></span><br><span class="line"><span class="comment">// prints &quot;I hope the weather is nice near you.&quot;</span></span><br><span class="line">greet([<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Jane&quot;</span>, <span class="string">&quot;location&quot;</span>: <span class="string">&quot;Cupertino&quot;</span>])</span><br><span class="line"><span class="comment">// prints &quot;Hello Jane!&quot;</span></span><br><span class="line"><span class="comment">// prints &quot;I hope the weather is nice in Cupertino.&quot;</span></span><br></pre></td></tr></table></figure><h2 id="检测-API-可用性"><a href="#检测-API-可用性" class="headerlink" title="检测 API 可用性"></a>检测 API 可用性</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">9</span>, OSX <span class="number">10.10</span>, <span class="operator">*</span>) &#123;</span><br><span class="line">    <span class="comment">// 在 iOS 使用 iOS 9 的 API, 在 OS X 使用 OS X v10.10 的 API</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 使用先前版本的 iOS 和 OS X 的 API</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-集合类型</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>Swift 语言提供Arrays、Sets和Dictionaries三种基本的集合类型用来存储集合数据。</p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="创建一个空数组"><a href="#创建一个空数组" class="headerlink" title="创建一个空数组"></a>创建一个空数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> someInts <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;someInts is of type [Int] with <span class="subst">\(someInts.count)</span> items.&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;someInts is of type [Int] with 0 items.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="创建一个带有默认值的数组"><a href="#创建一个带有默认值的数组" class="headerlink" title="创建一个带有默认值的数组"></a>创建一个带有默认值的数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> threeDoubles <span class="operator">=</span> [<span class="type">Double</span>](count: <span class="number">3</span>, repeatedValue:<span class="number">0.0</span>)</span><br><span class="line"><span class="comment">// threeDoubles 是一种 [Double] 数组，等价于 [0.0, 0.0, 0.0]</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="通过两个数组相加创建一个数组"><a href="#通过两个数组相加创建一个数组" class="headerlink" title="通过两个数组相加创建一个数组"></a>通过两个数组相加创建一个数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> anotherThreeDoubles <span class="operator">=</span> <span class="type">Array</span>(count: <span class="number">3</span>, repeatedValue: <span class="number">2.5</span>)</span><br><span class="line"><span class="comment">// anotherThreeDoubles 被推断为 [Double]，等价于 [2.5, 2.5, 2.5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sixDoubles <span class="operator">=</span> threeDoubles <span class="operator">+</span> anotherThreeDoubles</span><br><span class="line"><span class="comment">// sixDoubles 被推断为 [Double]，等价于 [0.0, 0.0, 0.0, 2.5, 2.5, 2.5]</span></span><br></pre></td></tr></table></figure><h3 id="用字面量构造数组"><a href="#用字面量构造数组" class="headerlink" title="用字面量构造数组"></a>用字面量构造数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList: [<span class="type">String</span>] <span class="operator">=</span> [<span class="string">&quot;Eggs&quot;</span>, <span class="string">&quot;Milk&quot;</span>]</span><br><span class="line"><span class="comment">// shoppingList 已经被构造并且拥有两个初始项。</span></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList <span class="operator">=</span> [<span class="string">&quot;Eggs&quot;</span>, <span class="string">&quot;Milk&quot;</span>]</span><br></pre></td></tr></table></figure><p>因为所有字面量中的值都是相同的类型，Swift 可以推断出[String]是shoppinglist中变量的正确类型。</p><h3 id="访问和修改数组"><a href="#访问和修改数组" class="headerlink" title="访问和修改数组"></a>访问和修改数组</h3><p>可以使用数组的只读属性count来获取数组中的数据项数量：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The shopping list contains <span class="subst">\(shoppingList.count)</span> items.&quot;</span>)</span><br><span class="line"><span class="comment">// 输出 &quot;The shopping list contains 2 items.&quot;（这个数组有2个项）</span></span><br></pre></td></tr></table></figure><p>使用布尔值属性isEmpty作为检查count属性的值是否为 0 的捷径：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> shoppingList.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The shopping list is empty.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The shopping list is not empty.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;The shopping list is not empty.&quot;（shoppinglist 不是空的）</span></span><br></pre></td></tr></table></figure><p>也可以使用append(_:)方法在数组后面添加新的数据项：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shoppingList.append(<span class="string">&quot;Flour&quot;</span>)</span><br><span class="line"><span class="comment">// shoppingList 现在有3个数据项，有人在摊煎饼</span></span><br></pre></td></tr></table></figure><p>使用加法赋值运算符（+&#x3D;）也可以直接在数组后面添加一个或多个拥有相同类型的数据项：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shoppingList <span class="operator">+=</span> [<span class="string">&quot;Baking Powder&quot;</span>]</span><br><span class="line"><span class="comment">// shoppingList 现在有四项了</span></span><br><span class="line">shoppingList <span class="operator">+=</span> [<span class="string">&quot;Chocolate Spread&quot;</span>, <span class="string">&quot;Cheese&quot;</span>, <span class="string">&quot;Butter&quot;</span>]</span><br><span class="line"><span class="comment">// shoppingList 现在有七项了</span></span><br></pre></td></tr></table></figure><p>可以直接使用下标语法来获取数组中的数据项</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstItem <span class="operator">=</span> shoppingList[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// 第一项是 &quot;Eggs&quot;</span></span><br></pre></td></tr></table></figure><p>还可以利用下标来一次改变一系列数据值，即使新数据和原有数据的数量是不一样的。下面的例子把”Chocolate Spread”，”Cheese”，和”Butter”替换为”Bananas”和 “Apples”：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shoppingList[<span class="number">4</span><span class="operator">...</span><span class="number">6</span>] <span class="operator">=</span> [<span class="string">&quot;Bananas&quot;</span>, <span class="string">&quot;Apples&quot;</span>]</span><br><span class="line"><span class="comment">// shoppingList 现在有6项</span></span><br></pre></td></tr></table></figure><p>调用数组的insert(_:atIndex:)方法来在某个具体索引值之前添加数据项：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shoppingList.insert(<span class="string">&quot;Maple Syrup&quot;</span>, atIndex: <span class="number">0</span>)</span><br><span class="line"><span class="comment">// shoppingList 现在有7项</span></span><br><span class="line"><span class="comment">// &quot;Maple Syrup&quot; 现在是这个列表中的第一项</span></span><br></pre></td></tr></table></figure><p>类似的我们可以使用removeAtIndex(_:)方法来移除数组中的某一项。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mapleSyrup <span class="operator">=</span> shoppingList.removeAtIndex(<span class="number">0</span>)</span><br><span class="line"><span class="comment">// 索引值为0的数据项被移除</span></span><br><span class="line"><span class="comment">// shoppingList 现在只有6项，而且不包括 Maple Syrup</span></span><br><span class="line"><span class="comment">// mapleSyrup 常量的值等于被移除数据项的值 &quot;Maple Syrup&quot;</span></span><br></pre></td></tr></table></figure><p>如果我们只想把数组中的最后一项移除，可以使用removeLast()方法</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> apples <span class="operator">=</span> shoppingList.removeLast()</span><br><span class="line"><span class="comment">// 数组的最后一项被移除了</span></span><br><span class="line"><span class="comment">// shoppingList 现在只有5项，不包括 cheese</span></span><br><span class="line"><span class="comment">// apples 常量的值现在等于 &quot;Apples&quot; 字符串</span></span><br></pre></td></tr></table></figure><h3 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h3><p>我们可以使用for-in循环来遍历所有数组中的数据项：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> shoppingList &#123;</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Six eggs</span></span><br><span class="line"><span class="comment">// Milk</span></span><br><span class="line"><span class="comment">// Flour</span></span><br><span class="line"><span class="comment">// Baking Powder</span></span><br><span class="line"><span class="comment">// Bananas</span></span><br></pre></td></tr></table></figure><p>如果我们同时需要每个数据项的值和索引值，可以使用enumerate()方法来进行数组遍历。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.enumerate() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Item <span class="subst">\(String(index <span class="operator">+</span> <span class="number">1</span>))</span>: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Item 1: Six eggs</span></span><br><span class="line"><span class="comment">// Item 2: Milk</span></span><br><span class="line"><span class="comment">// Item 3: Flour</span></span><br><span class="line"><span class="comment">// Item 4: Baking Powder</span></span><br><span class="line"><span class="comment">// Item 5: Bananas</span></span><br></pre></td></tr></table></figure><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="创建和构造一个空的集合"><a href="#创建和构造一个空的集合" class="headerlink" title="创建和构造一个空的集合"></a>创建和构造一个空的集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> letters <span class="operator">=</span> <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;letters is of type Set&lt;Character&gt; with <span class="subst">\(letters.count)</span> items.&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;letters is of type Set&lt;Character&gt; with 0 items.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="用数组字面量创建集合"><a href="#用数组字面量创建集合" class="headerlink" title="用数组字面量创建集合"></a>用数组字面量创建集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> [<span class="string">&quot;Rock&quot;</span>, <span class="string">&quot;Classical&quot;</span>, <span class="string">&quot;Hip hop&quot;</span>]</span><br><span class="line"><span class="comment">// favoriteGenres 被构造成含有三个初始值的集合</span></span><br></pre></td></tr></table></figure><h3 id="访问和修改一个集合"><a href="#访问和修改一个集合" class="headerlink" title="访问和修改一个集合"></a>访问和修改一个集合</h3><p>为了找出一个Set中元素的数量，可以使用其只读属性count：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;I have <span class="subst">\(favoriteGenres.count)</span> favorite music genres.&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;I have 3 favorite music genres.&quot;</span></span><br></pre></td></tr></table></figure><p>使用布尔属性isEmpty作为一个缩写形式去检查count属性是否为0：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> favoriteGenres.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;As far as music goes, I&#x27;m not picky.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I have particular music preferences.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;I have particular music preferences.&quot;</span></span><br></pre></td></tr></table></figure><p>你可以通过调用Set的insert(_:)方法来添加一个新元素：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">favoriteGenres.insert(<span class="string">&quot;Jazz&quot;</span>)</span><br><span class="line"><span class="comment">// favoriteGenres 现在包含4个元素</span></span><br></pre></td></tr></table></figure><p>你可以通过调用Set的remove(_:)方法去删除一个元素，如果该值是该Set的一个元素则删除该元素并且返回被删除的元素值，否则如果该Set不包含该值，则返回nil</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedGenre <span class="operator">=</span> favoriteGenres.remove(<span class="string">&quot;Rock&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(removedGenre)</span>? I&#x27;m over it.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I never much cared for that.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;Rock? I&#x27;m over it.&quot;</span></span><br></pre></td></tr></table></figure><p>使用contains(_:)方法去检查Set中是否包含一个特定的值：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> favoriteGenres.contains(<span class="string">&quot;Funk&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I get up on the good foot.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;It&#x27;s too funky in here.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;It&#x27;s too funky in here.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="遍历一个集合"><a href="#遍历一个集合" class="headerlink" title="遍历一个集合"></a>遍历一个集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(genre)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Classical</span></span><br><span class="line"><span class="comment">// Jazz</span></span><br><span class="line"><span class="comment">// Hip hop</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres.sort() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(genre)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// prints &quot;Classical&quot;</span></span><br><span class="line"><span class="comment">// prints &quot;Hip hop&quot;</span></span><br><span class="line"><span class="comment">// prints &quot;Jazz</span></span><br></pre></td></tr></table></figure><h3 id="基本集合操作"><a href="#基本集合操作" class="headerlink" title="基本集合操作"></a>基本集合操作</h3><p><img src="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Art/setVennDiagram_2x.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oddDigits: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="keyword">let</span> evenDigits: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="keyword">let</span> singleDigitPrimeNumbers: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">oddDigits.union(evenDigits).sort()</span><br><span class="line"><span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">oddDigits.intersect(evenDigits).sort()</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line">oddDigits.subtract(singleDigitPrimeNumbers).sort()</span><br><span class="line"><span class="comment">// [1, 9]</span></span><br><span class="line">oddDigits.exclusiveOr(singleDigitPrimeNumbers).sort()</span><br><span class="line"><span class="comment">// [1, 2, 9]</span></span><br></pre></td></tr></table></figure><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><h3 id="创建一个空字典"><a href="#创建一个空字典" class="headerlink" title="创建一个空字典"></a>创建一个空字典</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> namesOfIntegers <span class="operator">=</span> [<span class="type">Int</span>: <span class="type">String</span>]()</span><br><span class="line"><span class="comment">// namesOfIntegers 是一个空的 [Int: String] 字典</span></span><br></pre></td></tr></table></figure><h3 id="用字典字面量创建字典"><a href="#用字典字面量创建字典" class="headerlink" title="用字典字面量创建字典"></a>用字典字面量创建字典</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var airports: [String: String] = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;]</span><br></pre></td></tr></table></figure><h3 id="访问和修改字典"><a href="#访问和修改字典" class="headerlink" title="访问和修改字典"></a>访问和修改字典</h3><p>我们可以通过字典的只读属性count来获取某个字典的数据项数量：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The dictionary of airports contains <span class="subst">\(airports.count)</span> items.&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;The dictionary of airports contains 2 items.&quot;（这个字典有两个数据项）</span></span><br></pre></td></tr></table></figure><p>使用布尔属性isEmpty来快捷地检查字典的count属性是否等于0：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> airports.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The airports dictionary is empty.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The airports dictionary is not empty.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;The airports dictionary is not empty.&quot;</span></span><br></pre></td></tr></table></figure><p>我们还可以使用下标语法来通过给某个键的对应值赋值为nil来从字典里移除一个键值对：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">airports[<span class="string">&quot;APL&quot;</span>] <span class="operator">=</span> <span class="string">&quot;Apple Internation&quot;</span></span><br><span class="line"><span class="comment">// &quot;Apple Internation&quot; 不是真的 APL 机场, 删除它</span></span><br><span class="line">airports[<span class="string">&quot;APL&quot;</span>] <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"><span class="comment">// APL 现在被移除了</span></span><br></pre></td></tr></table></figure><p>updateValue(_:forKey:)方法会返回对应值的类型的可选值。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> oldValue <span class="operator">=</span> airports.updateValue(<span class="string">&quot;Dublin Airport&quot;</span>, forKey: <span class="string">&quot;DUB&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The old value for DUB was <span class="subst">\(oldValue)</span>.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;The old value for DUB was Dublin.&quot;</span></span><br></pre></td></tr></table></figure><p>removeValueForKey(_:)方法也可以用来在字典中移除键值对。这个方法在键值对存在的情况下会移除该键值对并且返回被移除的值或者在没有值的情况下返回nil：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedValue <span class="operator">=</span> airports.removeValueForKey(<span class="string">&quot;DUB&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The removed airport&#x27;s name is <span class="subst">\(removedValue)</span>.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The airports dictionary does not contain a value for DUB.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// prints &quot;The removed airport&#x27;s name is Dublin Airport.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="字典遍历"><a href="#字典遍历" class="headerlink" title="字典遍历"></a>字典遍历</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (airportCode, airportName) <span class="keyword">in</span> airports &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(airportCode)</span>: <span class="subst">\(airportName)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// YYZ: Toronto Pearson</span></span><br><span class="line"><span class="comment">// LHR: London Heathrow</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> airportCode <span class="keyword">in</span> airports.keys &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Airport code: <span class="subst">\(airportCode)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Airport code: YYZ</span></span><br><span class="line"><span class="comment">// Airport code: LHR</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> airportName <span class="keyword">in</span> airports.values &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Airport name: <span class="subst">\(airportName)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Airport name: Toronto Pearson</span></span><br><span class="line"><span class="comment">// Airport name: London Heathrow</span></span><br></pre></td></tr></table></figure><p>如果我们只是需要使用某个字典的键集合或者值集合来作为某个接受Array实例的 API 的参数，可以直接使用keys或者values属性构造一个新数组：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> airportCodes <span class="operator">=</span> [<span class="type">String</span>](airports.keys)</span><br><span class="line"><span class="comment">// airportCodes 是 [&quot;YYZ&quot;, &quot;LHR&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> airportNames <span class="operator">=</span> [<span class="type">String</span>](airports.values)</span><br><span class="line"><span class="comment">// airportNames 是 [&quot;Toronto Pearson&quot;, &quot;London Heathrow&quot;]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-字符串和字符</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="初始化空字符串"><a href="#初始化空字符串" class="headerlink" title="初始化空字符串"></a>初始化空字符串</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> emptyString <span class="operator">=</span> <span class="string">&quot;&quot;</span>               <span class="comment">// 空字符串字面量</span></span><br><span class="line"><span class="keyword">var</span> anotherEmptyString <span class="operator">=</span> <span class="type">String</span>()  <span class="comment">// 初始化方法</span></span><br><span class="line"><span class="comment">// 两个字符串均为空并等价。</span></span><br></pre></td></tr></table></figure><p>判断该字符串是否为空</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Nothing to see here&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印输出：&quot;Nothing to see here&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="字符串可变性"><a href="#字符串可变性" class="headerlink" title="字符串可变性"></a>字符串可变性</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> variableString <span class="operator">=</span> <span class="string">&quot;Horse&quot;</span></span><br><span class="line">variableString <span class="operator">+=</span> <span class="string">&quot; and carriage&quot;</span></span><br><span class="line"><span class="comment">// variableString 现在为 &quot;Horse and carriage&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> constantString <span class="operator">=</span> <span class="string">&quot;Highlander&quot;</span></span><br><span class="line">constantString <span class="operator">+=</span> <span class="string">&quot; and another Highlander&quot;</span></span><br><span class="line"><span class="comment">// 这会报告一个编译错误 (compile-time error) - 常量字符串不可以被修改。</span></span><br></pre></td></tr></table></figure><h2 id="使用字符"><a href="#使用字符" class="headerlink" title="使用字符"></a>使用字符</h2><h3 id="遍历字符串中的字符"><a href="#遍历字符串中的字符" class="headerlink" title="遍历字符串中的字符"></a>遍历字符串中的字符</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">&quot;Dog!🐶&quot;</span>.characters &#123;</span><br><span class="line">    <span class="built_in">print</span>(character)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// D</span></span><br><span class="line"><span class="comment">// o</span></span><br><span class="line"><span class="comment">// g</span></span><br><span class="line"><span class="comment">// !</span></span><br><span class="line"><span class="comment">// 🐶</span></span><br></pre></td></tr></table></figure><h3 id="声明字符常量"><a href="#声明字符常量" class="headerlink" title="声明字符常量"></a>声明字符常量</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="字符数组转字符串"><a href="#字符数组转字符串" class="headerlink" title="字符数组转字符串"></a>字符数组转字符串</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] <span class="operator">=</span> [<span class="string">&quot;C&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;t&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;🐱&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> catString <span class="operator">=</span> <span class="type">String</span>(catCharacters)</span><br><span class="line"><span class="built_in">print</span>(catString)</span><br><span class="line"><span class="comment">// 打印输出：&quot;Cat!🐱&quot;</span></span><br></pre></td></tr></table></figure><h2 id="连接字符串和字符"><a href="#连接字符串和字符" class="headerlink" title="连接字符串和字符"></a>连接字符串和字符</h2><h3 id=""><a href="#" class="headerlink" title="+"></a>+</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string1 <span class="operator">=</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">let</span> string2 <span class="operator">=</span> <span class="string">&quot; there&quot;</span></span><br><span class="line"><span class="keyword">var</span> welcome <span class="operator">=</span> string1 <span class="operator">+</span> string2</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there&quot;</span></span><br></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="+&#x3D;"></a>+&#x3D;</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instruction <span class="operator">=</span> <span class="string">&quot;look over&quot;</span></span><br><span class="line">instruction <span class="operator">+=</span> string2</span><br><span class="line"><span class="comment">// instruction 现在等于 &quot;look over there&quot;</span></span><br></pre></td></tr></table></figure><h3 id="append"><a href="#append" class="headerlink" title="append()"></a>append()</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;!&quot;</span></span><br><span class="line">welcome.append(exclamationMark)</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there!&quot;</span></span><br></pre></td></tr></table></figure><h2 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> multiplier <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> message <span class="operator">=</span> <span class="string">&quot;<span class="subst">\(multiplier)</span> times 2.5 is <span class="subst">\(Double(multiplier) <span class="operator">*</span> <span class="number">2.5</span>)</span>&quot;</span></span><br><span class="line"><span class="comment">// message is &quot;3 times 2.5 is 7.5&quot;</span></span><br></pre></td></tr></table></figure><h2 id="计算字符数量-str-count"><a href="#计算字符数量-str-count" class="headerlink" title="计算字符数量 (str.count)"></a>计算字符数量 (str.count)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> word <span class="operator">=</span> <span class="string">&quot;cafe&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the number of characters in <span class="subst">\(word)</span> is <span class="subst">\(word.characters.count)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// 打印输出 &quot;the number of characters in cafe is 4&quot;</span></span><br></pre></td></tr></table></figure><h2 id="访问和修改字符串"><a href="#访问和修改字符串" class="headerlink" title="访问和修改字符串"></a>访问和修改字符串</h2><h3 id="字符串索引"><a href="#字符串索引" class="headerlink" title="字符串索引"></a>字符串索引</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> <span class="string">&quot;Guten Tag!&quot;</span></span><br><span class="line">greeting[greeting.startIndex]</span><br><span class="line"><span class="comment">// G</span></span><br><span class="line">greeting[greeting.endIndex.predecessor()]</span><br><span class="line"><span class="comment">// !</span></span><br><span class="line">greeting[greeting.startIndex.successor()]</span><br><span class="line"><span class="comment">// u</span></span><br><span class="line"><span class="keyword">let</span> index <span class="operator">=</span> greeting.startIndex.advancedBy(<span class="number">7</span>)</span><br><span class="line">greeting[index]</span><br><span class="line"><span class="comment">// a</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.characters.indices &#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(greeting[index])</span> &quot;</span>, terminator: <span class="string">&quot; &quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印输出 &quot;G u t e n   T a g !&quot;</span></span><br></pre></td></tr></table></figure><h3 id="插入和删除"><a href="#插入和删除" class="headerlink" title="插入和删除()"></a>插入和删除()</h3><p>调用insert(_:atIndex:)方法可以在一个字符串的指定索引插入一个字符。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> welcome <span class="operator">=</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line">welcome.insert(<span class="string">&quot;!&quot;</span>, atIndex: welcome.endIndex)</span><br><span class="line"><span class="comment">// welcome now 现在等于 &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure><p>调用insertContentsOf(_:at:)方法可以在一个字符串的指定索引插入一个字符串。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">welcome.insertContentsOf(<span class="string">&quot; there&quot;</span>.characters, at: welcome.endIndex.predecessor())</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there!&quot;</span></span><br></pre></td></tr></table></figure><p>调用removeAtIndex(_:)方法可以在一个字符串的指定索引删除一个字符。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">welcome.removeAtIndex(welcome.endIndex.predecessor())</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there&quot;</span></span><br></pre></td></tr></table></figure><p>调用removeRange(_:)方法可以在一个字符串的指定索引删除一个子字符串。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> range <span class="operator">=</span> welcome.endIndex.advancedBy(<span class="operator">-</span><span class="number">6</span>)<span class="operator">..&lt;</span>welcome.endIndex</span><br><span class="line">welcome.removeRange(range)</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello&quot;</span></span><br></pre></td></tr></table></figure><h2 id="比较字符串"><a href="#比较字符串" class="headerlink" title="比较字符串"></a>比较字符串</h2><h3 id="字符串-字符相等-和"><a href="#字符串-字符相等-和" class="headerlink" title="字符串&#x2F;字符相等 (&#x3D;&#x3D; 和 !&#x3D;)"></a>字符串&#x2F;字符相等 (&#x3D;&#x3D; 和 !&#x3D;)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quotation <span class="operator">=</span> <span class="string">&quot;We&#x27;re a lot alike, you and I.&quot;</span></span><br><span class="line"><span class="keyword">let</span> sameQuotation <span class="operator">=</span> <span class="string">&quot;We&#x27;re a lot alike, you and I.&quot;</span></span><br><span class="line"><span class="keyword">if</span> quotation <span class="operator">==</span> sameQuotation &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;These two strings are considered equal&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印输出 &quot;These two strings are considered equal&quot;</span></span><br></pre></td></tr></table></figure><h3 id="前缀-后缀相等"><a href="#前缀-后缀相等" class="headerlink" title="前缀&#x2F;后缀相等"></a>前缀&#x2F;后缀相等</h3><p>通过调用字符串的hasPrefix(<em>:)&#x2F;hasSuffix(</em>:)方法来检查字符串是否拥有特定前缀&#x2F;后缀，两个方法均接收一个String类型的参数，并返回一个布尔值。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> romeoAndJuliet <span class="operator">=</span> [</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 1: Verona, A public place&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 2: Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 3: A room in Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 4: A street outside Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 5: The Great Hall in Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 1: Outside Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 2: Capulet&#x27;s orchard&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 3: Outside Friar Lawrence&#x27;s cell&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 4: A street in Verona&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 5: Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 6: Friar Lawrence&#x27;s cell&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>前缀判断</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> act1SceneCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">&quot;Act 1 &quot;</span>) &#123;</span><br><span class="line">        <span class="operator">++</span>act1SceneCount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are <span class="subst">\(act1SceneCount)</span> scenes in Act 1&quot;</span>)</span><br><span class="line"><span class="comment">// 打印输出 &quot;There are 5 scenes in Act 1&quot;</span></span><br></pre></td></tr></table></figure><p>后缀判断</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mansionCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> cellCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasSuffix(<span class="string">&quot;Capulet&#x27;s mansion&quot;</span>) &#123;</span><br><span class="line">        <span class="operator">++</span>mansionCount</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> scene.hasSuffix(<span class="string">&quot;Friar Lawrence&#x27;s cell&quot;</span>) &#123;</span><br><span class="line">        <span class="operator">++</span>cellCount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mansionCount)</span> mansion scenes; <span class="subst">\(cellCount)</span> cell scenes&quot;</span>)</span><br><span class="line"><span class="comment">// 打印输出 &quot;6 mansion scenes; 2 cell scenes&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-运算符</title>
      <link href="/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符 (&#x3D;)"></a>赋值运算符 (&#x3D;)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">a <span class="operator">=</span> b</span><br><span class="line"><span class="comment">// a 现在等于 10</span></span><br></pre></td></tr></table></figure><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><ul><li>加法（+）</li><li>减法（-）</li><li>乘法（*）</li><li>除法（&#x2F;）</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="operator">+</span> <span class="number">2</span>       <span class="comment">// 等于 3</span></span><br><span class="line"><span class="number">5</span> <span class="operator">-</span> <span class="number">3</span>       <span class="comment">// 等于 2</span></span><br><span class="line"><span class="number">2</span> <span class="operator">*</span> <span class="number">3</span>       <span class="comment">// 等于 6</span></span><br><span class="line"><span class="number">10.0</span> <span class="operator">/</span> <span class="number">2.5</span>  <span class="comment">// 等于 4.0</span></span><br></pre></td></tr></table></figure><p>加法运算符也可用于String的拼接：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello, &quot;</span> <span class="operator">+</span> <span class="string">&quot;world&quot;</span>  <span class="comment">// 等于 &quot;hello, world&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="求余运算符"><a href="#求余运算符" class="headerlink" title="求余运算符 (%)"></a>求余运算符 (%)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> <span class="operator">%</span> <span class="number">4</span>    <span class="comment">// 等于 1</span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> <span class="operator">%</span> <span class="number">2.5</span>   <span class="comment">// 等于 0.5</span></span><br></pre></td></tr></table></figure><h2 id="自增和自减-–"><a href="#自增和自减-–" class="headerlink" title="自增和自减 (++) (–)"></a>自增和自减 (++) (–)</h2><ul><li>当++前置的时候，先自増再返回。</li><li>当++后置的时候，先返回再自增。</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="operator">++</span>a <span class="comment">// a 和 b 现在都是 1</span></span><br><span class="line"><span class="keyword">let</span> c <span class="operator">=</span> a<span class="operator">++</span> <span class="comment">// a 现在 2, 但 c 是 a 自增前的值 1</span></span><br></pre></td></tr></table></figure><h2 id="一元负号运算符"><a href="#一元负号运算符" class="headerlink" title="一元负号运算符"></a>一元负号运算符</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> three <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> minusThree <span class="operator">=</span> <span class="operator">-</span>three       <span class="comment">// minusThree 等于 -3</span></span><br><span class="line"><span class="keyword">let</span> plusThree <span class="operator">=</span> <span class="operator">-</span>minusThree   <span class="comment">// plusThree 等于 3, 或 &quot;负负3&quot;</span></span><br></pre></td></tr></table></figure><h2 id="一元正号运算符"><a href="#一元正号运算符" class="headerlink" title="一元正号运算符"></a>一元正号运算符</h2><p>一元正号（+）不做任何改变地返回操作数的值：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> minusSix <span class="operator">=</span> <span class="operator">-</span><span class="number">6</span></span><br><span class="line"><span class="keyword">let</span> alsoMinusSix <span class="operator">=</span> <span class="operator">+</span>minusSix  <span class="comment">// alsoMinusSix 等于 -6</span></span><br></pre></td></tr></table></figure><h2 id="组合赋值运算符"><a href="#组合赋值运算符" class="headerlink" title="组合赋值运算符"></a>组合赋值运算符</h2><p>表达式a +&#x3D; 2是a &#x3D; a + 2的简写</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">a <span class="operator">+=</span> <span class="number">2</span> <span class="comment">// a 现在是 3</span></span><br></pre></td></tr></table></figure><h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><ul><li>等于（a &#x3D;&#x3D; b）</li><li>不等于（a !&#x3D; b）</li><li>大于（a &gt; b）</li><li>小于（a &lt; b）</li><li>大于等于（a &gt;&#x3D; b）</li><li>小于等于（a &lt;&#x3D; b）</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="operator">==</span> <span class="number">1</span>   <span class="comment">// true, 因为 1 等于 1</span></span><br><span class="line"><span class="number">2</span> <span class="operator">!=</span> <span class="number">1</span>   <span class="comment">// true, 因为 2 不等于 1</span></span><br><span class="line"><span class="number">2</span> <span class="operator">&gt;</span> <span class="number">1</span>    <span class="comment">// true, 因为 2 大于 1</span></span><br><span class="line"><span class="number">1</span> <span class="operator">&lt;</span> <span class="number">2</span>    <span class="comment">// true, 因为 1 小于2</span></span><br><span class="line"><span class="number">1</span> <span class="operator">&gt;=</span> <span class="number">1</span>   <span class="comment">// true, 因为 1 大于等于 1</span></span><br><span class="line"><span class="number">2</span> <span class="operator">&lt;=</span> <span class="number">1</span>   <span class="comment">// false, 因为 2 并不小于等于 1</span></span><br></pre></td></tr></table></figure><h2 id="三目运算符-a-b-c"><a href="#三目运算符-a-b-c" class="headerlink" title="三目运算符 (a?b:c)"></a>三目运算符 (a?b:c)</h2><p>问题 ? 答案1 : 答案2</p><p>如果问题成立，返回答案1的结果; 如果不成立，返回答案2的结果。</p><h2 id="空合运算符-a-b"><a href="#空合运算符-a-b" class="headerlink" title="空合运算符 (a ?? b)"></a>空合运算符 (a ?? b)</h2><p>空合运算符(a ?? b)将对可选类型a进行空判断，如果a包含一个值就进行解封，否则就返回一个默认值b.这个运算符有两个条件:</p><ul><li>表达式a必须是Optional可选类型</li><li>默认值b的类型必须要和a存储值的类型保持一致</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultColorName <span class="operator">=</span> <span class="string">&quot;red&quot;</span></span><br><span class="line"><span class="keyword">var</span> userDefinedColorName: <span class="type">String</span>?   <span class="comment">//默认值为 nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colorNameToUse <span class="operator">=</span> userDefinedColorName <span class="operator">??</span> defaultColorName</span><br><span class="line"><span class="comment">// userDefinedColorName 的值为空，所以 colorNameToUse 的值为 &quot;red&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userDefinedColorName <span class="operator">=</span> <span class="string">&quot;green&quot;</span></span><br><span class="line">colorNameToUse <span class="operator">=</span> userDefinedColorName <span class="operator">??</span> defaultColorName</span><br><span class="line"><span class="comment">// userDefinedColorName 非空，因此 colorNameToUse 的值为 &quot;green&quot;</span></span><br></pre></td></tr></table></figure><h2 id="区间运算符"><a href="#区间运算符" class="headerlink" title="区间运算符"></a>区间运算符</h2><h3 id="闭区间运算符-（a…b）"><a href="#闭区间运算符-（a…b）" class="headerlink" title="闭区间运算符 （a…b）"></a>闭区间运算符 （a…b）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span><span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(index)</span> * 5 = <span class="subst">\(index <span class="operator">*</span> <span class="number">5</span>)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 * 5 = 5</span></span><br><span class="line"><span class="comment">// 2 * 5 = 10</span></span><br><span class="line"><span class="comment">// 3 * 5 = 15</span></span><br><span class="line"><span class="comment">// 4 * 5 = 20</span></span><br><span class="line"><span class="comment">// 5 * 5 = 25</span></span><br></pre></td></tr></table></figure><h3 id="半开区间运算符-a"><a href="#半开区间运算符-a" class="headerlink" title="半开区间运算符 (a..&lt;b)"></a>半开区间运算符 (a..&lt;b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alex&quot;</span>, <span class="string">&quot;Brian&quot;</span>, <span class="string">&quot;Jack&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> count <span class="operator">=</span> names.count</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第 <span class="subst">\(i <span class="operator">+</span> <span class="number">1</span>)</span> 个人叫 <span class="subst">\(names[i])</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 第 1 个人叫 Anna</span></span><br><span class="line"><span class="comment">// 第 2 个人叫 Alex</span></span><br><span class="line"><span class="comment">// 第 3 个人叫 Brian</span></span><br><span class="line"><span class="comment">// 第 4 个人叫 Jack</span></span><br></pre></td></tr></table></figure><h2 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h2><h3 id="逻辑非-a"><a href="#逻辑非-a" class="headerlink" title="逻辑非 (!a)"></a>逻辑非 (!a)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> allowedEntry <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">if</span> <span class="operator">!</span>allowedEntry &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ACCESS DENIED&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;ACCESS DENIED&quot;</span></span><br></pre></td></tr></table></figure><h3 id="逻辑与-a-b"><a href="#逻辑与-a-b" class="headerlink" title="逻辑与 (a &amp;&amp; b)"></a>逻辑与 (a &amp;&amp; b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> enteredDoorCode <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> passedRetinaScan <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">if</span> enteredDoorCode <span class="operator">&amp;&amp;</span> passedRetinaScan &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Welcome!&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ACCESS DENIED&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;ACCESS DENIED&quot;</span></span><br></pre></td></tr></table></figure><h3 id="逻辑或-a-b"><a href="#逻辑或-a-b" class="headerlink" title="逻辑或 (a || b)"></a>逻辑或 (a || b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hasDoorKey <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> knowsOverridePassword <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> hasDoorKey <span class="operator">||</span> knowsOverridePassword &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Welcome!&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ACCESS DENIED&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;Welcome!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="使用括号来明确优先级"><a href="#使用括号来明确优先级" class="headerlink" title="使用括号来明确优先级"></a>使用括号来明确优先级</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (enteredDoorCode <span class="operator">&amp;&amp;</span> passedRetinaScan) <span class="operator">||</span> hasDoorKey <span class="operator">||</span> knowsOverridePassword &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Welcome!&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ACCESS DENIED&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出 &quot;Welcome!&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift笔记-基础部分</title>
      <link href="/2017/06/02/Swift%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/"/>
      <url>/2017/06/02/Swift%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h2 id="常量和变量"><a href="#常量和变量" class="headerlink" title="常量和变量"></a>常量和变量</h2><ol><li>变量</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//变量声明</span></span><br><span class="line"><span class="keyword">var</span> x <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//声明多个变量</span></span><br><span class="line"><span class="keyword">var</span> x <span class="operator">=</span> <span class="number">1</span>, y <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//带类型声明</span></span><br><span class="line"><span class="keyword">var</span> msg: <span class="type">String</span></span><br><span class="line"><span class="comment">//变量赋值</span></span><br><span class="line">msg <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>常量</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明常量</span></span><br><span class="line"><span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.14159</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ol><li>单行注释</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//xxx</span><br></pre></td></tr></table></figure><ol start="2"><li>多行注释</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">xxx</span><br><span class="line">xxx</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><ol><li>整数</li></ol><p>（1）Int ：有符号整数</p><ul><li>在32位平台上，Int和Int32长度相同。</li><li>在64位平台上，Int和Int64长度相同。</li></ul><p>（2）UInt : 无符号整数</p><ul><li>在32位平台上，UInt和UInt32长度相同。</li><li>在64位平台上，UInt和UInt64长度相同。</li></ul><p>推荐使用Int，提高代码的可复用性。</p><ol start="2"><li>浮点数</li></ol><p>Double ： 64位浮点数<br>Float ： 32位浮点数</p><p><strong>注意</strong>：Double精确度很高，至少有15位数字，而Float最少只有6位数字。选择哪个类型取决于你的代码需要处理的值的范围。</p><ol start="3"><li>布尔类型</li></ol><p>Bool</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><ul><li>一个十进制数，没有前缀</li><li>一个二进制数，前缀是0b</li><li>一个八进制数，前缀是0o</li><li>一个十六进制数，前缀是0x</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decimalInteger <span class="operator">=</span> <span class="number">17</span> </span><br><span class="line"><span class="keyword">let</span> binaryInteger <span class="operator">=</span> <span class="number">0b10001</span>       <span class="comment">// 二进制的17 </span></span><br><span class="line"><span class="keyword">let</span> octalInteger <span class="operator">=</span> <span class="number">0o21</span>           <span class="comment">// 八进制的17 </span></span><br><span class="line"><span class="keyword">let</span> hexadecimalInteger <span class="operator">=</span> <span class="number">0x11</span>     <span class="comment">// 十六进制的17 </span></span><br></pre></td></tr></table></figure><p>如果一个十进制数的指数为exp，那这个数相当于基数和$10^{exp}$的乘积：</p><p>1.25e2 表示 $1.25 × 10^{2}$，等于 125.0。<br>1.25e-2 表示 $1.25 × 10^{-2}$，等于 0.0125。</p><p>如果一个十六进制数的指数为exp，那这个数相当于基数和$2^{exp}$的乘积：</p><p>0xFp2 表示 $15 × 2^{2}$，等于 60.0。<br>0xFp-2 表示 $15 × 2^{-2}$，等于 3.75。</p><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><ol><li>整数转换</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下划线用来增加可读性，不会影响值</span></span><br><span class="line"><span class="keyword">let</span> twoThousand: <span class="type">UInt16</span> <span class="operator">=</span> <span class="number">2_000</span> </span><br><span class="line"><span class="keyword">let</span> one: <span class="type">UInt8</span> <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"><span class="comment">// 将UInt8转换成UInt16再相加</span></span><br><span class="line"><span class="keyword">let</span> twoThousandAndOne <span class="operator">=</span> twoThousand <span class="operator">+</span> <span class="type">UInt16</span>(one) </span><br></pre></td></tr></table></figure><ol start="2"><li>浮点数转换</li></ol><p>（1）整数-&gt;浮点数</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> three <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> t <span class="operator">=</span> <span class="type">Double</span>(three)</span><br></pre></td></tr></table></figure><p>（2）浮点数-&gt;整数</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d <span class="operator">=</span> <span class="number">0.123</span></span><br><span class="line"><span class="keyword">let</span> i <span class="operator">=</span> <span class="type">Int</span>(d) <span class="comment">// i = 0</span></span><br></pre></td></tr></table></figure><h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> <span class="operator">=</span> <span class="type">UInt16</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>元组（tuples）把多个值组合成一个复合值。元组内的值可以使任意类型，并不要求是相同类型。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http404Error <span class="operator">=</span> (<span class="number">404</span>, <span class="string">&quot;Not Found&quot;</span>) </span><br><span class="line"><span class="comment">// http404Error 的类型是 (Int, String)，值是 (404, &quot;Not Found&quot;) </span></span><br></pre></td></tr></table></figure><p>你可以将一个元组的内容分解（decompose）成单独的常量和变量</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (statusCode, statusMessage) <span class="operator">=</span> http404Error </span><br><span class="line">println(<span class="string">&quot;The status code is <span class="subst">\(statusCode)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status code is 404&quot; </span></span><br><span class="line">println(<span class="string">&quot;The status message is <span class="subst">\(statusMessage)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status message is Not Found&quot; </span></span><br></pre></td></tr></table></figure><p>如果你只需要一部分元组值，分解的时候可以把要忽略的部分用下划线（_）标记</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (justTheStatusCode, <span class="keyword">_</span>) <span class="operator">=</span> http404Error </span><br><span class="line">println(<span class="string">&quot;The status code is <span class="subst">\(justTheStatusCode)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status code is 404&quot; </span></span><br></pre></td></tr></table></figure><p>你还可以通过下标来访问元组中的单个元素，下标从零开始</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;The status code is <span class="subst">\(http404Error.<span class="number">0</span>)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status code is 404&quot; </span></span><br><span class="line">println(<span class="string">&quot;The status message is <span class="subst">\(http404Error.<span class="number">1</span>)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status message is Not Found&quot; </span></span><br></pre></td></tr></table></figure><p>你可以在定义元组的时候给单个元素命名</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http200Status <span class="operator">=</span> (statusCode: <span class="number">200</span>, description: <span class="string">&quot;OK&quot;</span>) </span><br><span class="line">println(<span class="string">&quot;The status code is <span class="subst">\(http200Status.statusCode)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status code is 200&quot; </span></span><br><span class="line">println(<span class="string">&quot;The status message is <span class="subst">\(http200Status.description)</span>&quot;</span>) </span><br><span class="line"><span class="comment">// 输出 &quot;The status message is OK&quot; </span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="可选-（-）"><a href="#可选-（-）" class="headerlink" title="可选 （?）"></a>可选 （?）</h2><p>可选表示：</p><p><strong>有值，等于 x</strong>   或者   <strong>没有值</strong></p><p>“Int?”表示可选的Int</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> possibleNumber <span class="operator">=</span> <span class="string">&quot;123&quot;</span> </span><br><span class="line"><span class="keyword">let</span> convertedNumber <span class="operator">=</span> possibleNumber.toInt() </span><br><span class="line"><span class="comment">// convertedNumber 被推测为类型 &quot;Int?&quot;， 或者类型 &quot;optional Int&quot;</span></span><br></pre></td></tr></table></figure><p>判断可选是否有值</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> actualNumber <span class="operator">=</span> possibleNumber.toInt() &#123; </span><br><span class="line">    println(<span class="string">&quot;<span class="subst">\(possibleNumber)</span> has an integer value of <span class="subst">\(actualNumber)</span>&quot;</span>) </span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    println(<span class="string">&quot;<span class="subst">\(possibleNumber)</span> could not be converted to an integer&quot;</span>) </span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 输出 &quot;123 has an integer value of 123&quot; </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="隐式解析可选-（-）"><a href="#隐式解析可选-（-）" class="headerlink" title="隐式解析可选 （!）"></a>隐式解析可选 （!）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> possibleString: <span class="type">String</span>? <span class="operator">=</span> <span class="string">&quot;An optional string.&quot;</span> </span><br><span class="line">println(possibleString<span class="operator">!</span>) <span class="comment">// 需要惊叹号来获取值 </span></span><br><span class="line"><span class="comment">// 输出 &quot;An optional string.&quot; </span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> assumedString: <span class="type">String</span>! <span class="operator">=</span> <span class="string">&quot;An implicitly unwrapped optional string.&quot;</span> </span><br><span class="line">println(assumedString)  <span class="comment">// 不需要感叹号 </span></span><br><span class="line"><span class="comment">// 输出 &quot;An implicitly unwrapped optional string.&quot; </span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：如果你在隐式解析可选没有值的时候尝试取值，会触发运行时错误。和你在没有值的普通可选后面加一个惊叹号一样。</p><h2 id="nil"><a href="#nil" class="headerlink" title="nil"></a>nil</h2><p>可以给可选变量赋值为nil来表示它没有值</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> serverResponseCode: <span class="type">Int</span>? <span class="operator">=</span> <span class="number">404</span> </span><br><span class="line"><span class="comment">// serverResponseCode 包含一个可选的 Int 值 404 </span></span><br><span class="line">serverResponseCode <span class="operator">=</span> <span class="literal">nil</span> </span><br><span class="line"><span class="comment">// serverResponseCode 现在不包含值 </span></span><br></pre></td></tr></table></figure><p>如果你声明一个可选常量或者变量但是没有赋值，它们会自动被设置为nil：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> surveyAnswer: <span class="type">String</span>? </span><br><span class="line"><span class="comment">// surveyAnswer 被自动设置为 nil </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>throws 抛出异常</p><p>try method 抓取并执行可能抛出异常的方法</p><p>do {try …} catch ErrorType {…处理} 处理异常</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">makeASandwich</span>() <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> makeASandwich()</span><br><span class="line">    eatASandwich()</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">OutOfCleanDishes</span> &#123;</span><br><span class="line">    washDishes()</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">MissingIngredients</span>(<span class="keyword">let</span> ingredients) &#123;</span><br><span class="line">    buyGroceries(ingredients)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="断言-（assert）"><a href="#断言-（assert）" class="headerlink" title="断言 （assert）"></a>断言 （assert）</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age <span class="operator">=</span> <span class="operator">-</span><span class="number">3</span> </span><br><span class="line"><span class="built_in">assert</span>(age <span class="operator">&gt;=</span> <span class="number">0</span>, <span class="string">&quot;A person&#x27;s age cannot be less than zero&quot;</span>) </span><br><span class="line"><span class="comment">// 因为 age &lt; 0，所以断言会触发 </span></span><br></pre></td></tr></table></figure><p>何时使用断言<br>当条件可能为假时使用断言，但是最终一定要保证条件为真，这样你的代码才能继续运行。</p><p>断言的适用情景：</p><ul><li>整数的附属脚本索引被传入一个自定义附属脚本实现，但是下标索引值可能太小或者太大。</li><li>需要给函数传入一个值，但是非法的值可能导致函数不能正常执行。</li><li>一个可选值现在是nil，但是后面的代码运行需要一个非nil值。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Swift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用hexo搭建github静态博客</title>
      <link href="/2017/06/01/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BAgithub%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
      <url>/2017/06/01/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BAgithub%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>网上虽然不乏此类教程，但是实际操作起来还是遇到了一些问题。<br>总结如下。</p><p>以Windows 7系统为例：</p><h3 id="登陆Github，创建Reposity"><a href="#登陆Github，创建Reposity" class="headerlink" title="登陆Github，创建Reposity"></a>登陆Github，创建Reposity</h3><ol><li>用户名.github.io, 例如我的是zhouzhuo810.github.io</li><li>点击Setting-&gt;Choose Theme-&gt;随便选一个Theme-&gt;Select-&gt;默认Readme</li><li>访问username.github.io可以看到readme的内容即可。</li></ol><h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a><br>选择第二个下载安装。</p><span id="more"></span>  <h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>使用cmd命令行工具，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">F:</span><br><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server </span><br></pre></td></tr></table></figure><h3 id="配置config"><a href="#配置config" class="headerlink" title="配置config"></a>配置config</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: 标题</span><br><span class="line">subtitle: 副标题</span><br><span class="line">description: 描述</span><br><span class="line">author: 作者</span><br><span class="line">language: zh-CN </span><br><span class="line">timezone: Asia/Shanghai</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">    type: git </span><br><span class="line">    repo: 复制github的ssh格式的路径(不要用https格式的)</span><br><span class="line">    branch: master</span><br></pre></td></tr></table></figure><h3 id="配置ssh-key。"><a href="#配置ssh-key。" class="headerlink" title="配置ssh key。"></a>配置ssh key。</h3><ol><li>打开git bash<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;你的github用户名&quot;</span><br><span class="line">$ git config --global user.email &quot;你的github验证邮箱&quot;</span><br><span class="line">$ ssh-keygen -t rsa -C &quot;你的github验证邮箱&quot;</span><br></pre></td></tr></table></figure></li></ol><p>一路回车即可。</p><p>默认在<strong>C:\Users\Administrator.ssh</strong>下</p><p>找到<strong>id_rsa.pub</strong>文件。</p><p>2.<br>记事本打开，复制所有内容。</p><p>到<br><a href="https://github.com/settings/keys">https://github.com/settings/keys</a><br>配置即可</p><p>标题随意。</p><p>3.<br>最后别忘了最关键的一步：</p><p>验证SSH key配置是否成功：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>如果弹出<br>Are you sure you want to continue connecting (yes&#x2F;no)?<br>输入yes，回车</p><p>等待结果：<br>如果返回以下内容，说明成功了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi xxx! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>然后在博客目录下，执行如下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>不行就</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure><h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><p>不出意外的话，通过username.github.io可以访问到发布的内容了。</p><h3 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h3><p><a href="https://github.com/stkevintan/hexo-theme-material-flow">https://github.com/stkevintan/hexo-theme-material-flow</a></p><p>1.安装插件和下载主题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># change to work dir</span><br><span class="line">cd /your_blog_dir/</span><br><span class="line"># install dependencies</span><br><span class="line">npm i -S hexo-generator-search hexo-generator-feed hexo-renderer-less hexo-autoprefixer hexo-generator-json-content</span><br><span class="line"># download source</span><br><span class="line">git clone https://github.com/stkevintan/hexo-theme-material-flow themes/material-flow</span><br></pre></td></tr></table></figure><p>注意事项：多个插件同时安装报错时，拆分成单个插件安装即可。</p><p>如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm i -S hexo-generator-search</span><br><span class="line"></span><br><span class="line">npm i -S hexo-generator-feed</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.修改配置文件_config.yml</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">avatar: /images/avatar.jpg</span><br><span class="line">favicon: /images/favicon.ico</span><br><span class="line"></span><br><span class="line">theme: material-flow</span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line"></span><br><span class="line">autoprefixer:</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;*.min.css&#x27;</span><br><span class="line">  # remove: false # prevent autoprefixer remove page-break-inside</span><br><span class="line">  # browsers:</span><br><span class="line">  #   - &#x27;last 2 versions&#x27;</span><br><span class="line">  #   - &#x27;&gt; 5%&#x27;</span><br><span class="line"></span><br><span class="line"># Generator json content</span><br><span class="line">jsonContent:</span><br><span class="line">  meta: false</span><br><span class="line">  keywords: false</span><br><span class="line">  pages:</span><br><span class="line">    title: true</span><br><span class="line">    slug: false</span><br><span class="line">    date: false</span><br><span class="line">    updated: false</span><br><span class="line">    comments: false</span><br><span class="line">    path: false</span><br><span class="line">    link: false</span><br><span class="line">    permalink: true</span><br><span class="line">    excerpt: false</span><br><span class="line">    keywords: false</span><br><span class="line">    text: true</span><br><span class="line">    raw: false</span><br><span class="line">    content: false</span><br><span class="line">  posts:</span><br><span class="line">    title: true</span><br><span class="line">    slug: false</span><br><span class="line">    date: false</span><br><span class="line">    updated: false</span><br><span class="line">    comments: false</span><br><span class="line">    path: false</span><br><span class="line">    link: false</span><br><span class="line">    permalink: true</span><br><span class="line">    excerpt: false</span><br><span class="line">    keywords: false</span><br><span class="line">    text: true</span><br><span class="line">    raw: false</span><br><span class="line">    content: false</span><br><span class="line">    categories: false</span><br><span class="line">    tags: false</span><br><span class="line"></span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.头像和网站图标配置</p><p>在sources文件夹下新建images文件夹即可。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
